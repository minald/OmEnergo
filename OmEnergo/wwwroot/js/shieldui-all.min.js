function a(n){var r,u,t,i;this.ok=!1;"#"==n.charAt(0)&&(n=n.substr(1,6));n=n.replace(/ /g,"");n=n.toLowerCase();r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(u in r)n==u&&(n=r[u]);for(t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(n){return[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}}],i=0;i<t.length;i++){var e=t[i].re,o=t[i].process,f=e.exec(n);f&&(channels=o(f),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r;this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g;this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b;this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var n=this.r.toString(16),t=this.g.toString(16),i=this.b.toString(16);return 1==n.length&&(n="0"+n),1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),"#"+n+t+i};this.getHelpXML=function(){for(var o,u,c,f,l,i=[],n=0;n<t.length;n++)for(o=t[n].example,u=0;u<o.length;u++)i[i.length]=o[u];for(c in r)i[i.length]=c;for(f=document.createElement("ul"),f.setAttribute("id","rgbcolor-examples"),n=0;n<i.length;n++)try{var s=document.createElement("li"),e=new a(i[n]),h=document.createElement("div");h.style.cssText="margin: 3px; border: 1px solid black; background:"+e.toHex()+"; color:"+e.toHex();h.appendChild(document.createTextNode("test"));l=document.createTextNode(" "+i[n]+" -> "+e.toRGB()+" -> "+e.toHex());s.appendChild(h);s.appendChild(l);f.appendChild(s)}catch(v){}return f}}!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?module.exports=n:n(jQuery)}(function(n){function u(r){var u=r||window.event,w=c.call(arguments,1),l=0,s=0,e=0,a=0,b=0,k=0,v,y,p;if(r=n.event.fix(u),r.type="mousewheel","detail"in u&&(e=u.detail*-1),"wheelDelta"in u&&(e=u.wheelDelta),"wheelDeltaY"in u&&(e=u.wheelDeltaY),"wheelDeltaX"in u&&(s=u.wheelDeltaX*-1),"axis"in u&&u.axis===u.HORIZONTAL_AXIS&&(s=e*-1,e=0),l=0===e?s:e,"deltaY"in u&&(e=u.deltaY*-1,l=e),"deltaX"in u&&(s=u.deltaX,0===e&&(l=s*-1)),0!==e||0!==s)return 1===u.deltaMode?(v=n.data(this,"mousewheel-line-height"),l*=v,e*=v,s*=v):2===u.deltaMode&&(y=n.data(this,"mousewheel-page-height"),l*=y,e*=y,s*=y),(a=Math.max(Math.abs(e),Math.abs(s)),(!t||a<t)&&(t=a,o(u,a)&&(t/=40)),o(u,a)&&(l/=40,s/=40,e/=40),l=Math[l>=1?"floor":"ceil"](l/t),s=Math[s>=1?"floor":"ceil"](s/t),e=Math[e>=1?"floor":"ceil"](e/t),i.settings.normalizeOffset&&this.getBoundingClientRect)&&(p=this.getBoundingClientRect(),b=r.clientX-p.left,k=r.clientY-p.top),r.deltaX=s,r.deltaY=e,r.deltaFactor=t,r.offsetX=b,r.offsetY=k,r.deltaMode=0,w.unshift(r,l,s,e),f&&clearTimeout(f),f=setTimeout(h,200),(n.event.dispatch||n.event.handle).apply(this,w)}function h(){t=null}function o(n,t){return i.settings.adjustOldDeltas&&"mousewheel"===n.type&&t%120==0}var f,t,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice,e,i;if(n.event.fixHooks)for(e=s.length;e;)n.event.fixHooks[s[--e]]=n.event.mouseHooks;i=n.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],u,!1);else this.onmousewheel=u;n.data(this,"mousewheel-line-height",i.getLineHeight(this));n.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],u,!1);else this.onmousewheel=null;n.removeData(this,"mousewheel-line-height");n.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var r=n(t),i=r["offsetParent"in n.fn?"offsetParent":"parent"]();return i.length||(i=n("body")),parseInt(i.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(t){return n(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})}),function(){function n(){var n={};return n.FRAMERATE=30,n.MAX_VIRTUAL_PIXELS=3e4,n.init=function(t){n.Definitions={};n.Styles={};n.Animations=[];n.Images=[];n.ctx=t;n.ViewPort=new function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=[]};this.SetCurrent=function(n,t){this.viewPorts.push({width:n,height:t})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(n){return null!=n&&"number"==typeof n?n:"x"==n?this.width():"y"==n?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},n.init(),n.ImagesLoaded=function(){for(var t=0;t<n.Images.length;t++)if(!n.Images[t].loaded)return!1;return!0},n.trim=function(n){return n.replace(/^\s+|\s+$/g,"")},n.compressSpaces=function(n){return n.replace(/[\s\r\t\n]+/gm," ")},n.ajax=function(n){var t;return t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t?(t.open("GET",n,!1),t.send(null),t.responseText):null},n.parseXml=function(n){var i,t;return window.DOMParser?(i=new DOMParser,i.parseFromString(n,"text/xml")):(n=n.replace(/<!DOCTYPE svg[^>]*>/,""),t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n),t)},n.Property=function(n,t){this.name=n;this.value=t},n.Property.prototype.getValue=function(){return this.value},n.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},n.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var n=parseFloat(this.value);return(this.value+"").match(/%$/)&&(n/=100),n},n.Property.prototype.valueOrDefault=function(n){return this.hasValue()?this.value:n},n.Property.prototype.numValueOrDefault=function(n){return this.hasValue()?this.numValue():n},n.Property.prototype.addOpacity=function(t){var r=this.value,i;return null!=t&&""!=t&&"string"==typeof this.value&&(i=new a(this.value),i.ok&&(r="rgba("+i.r+", "+i.g+", "+i.b+", "+t+")")),new n.Property(this.name,r)},n.Property.prototype.getDefinition=function(){var t=this.value.match(/#([^\)']+)/);return t&&(t=t[1]),t||(t=this.value),n.Definitions[t]},n.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},n.Property.prototype.getFillStyleDefinition=function(t,i){var r=this.getDefinition();return null!=r&&r.createGradient?r.createGradient(n.ctx,t,i):null!=r&&r.createPattern?r.createPattern(n.ctx,t):null},n.Property.prototype.getDPI=function(){return 96},n.Property.prototype.getEM=function(t){var i=12,r=new n.Property("fontSize",n.Font.Parse(n.ctx.font).fontSize);return r.hasValue()&&(i=r.toPixels(t)),i},n.Property.prototype.getUnits=function(){var n=this.value+"";return n.replace(/[0-9\.\-]/g,"")},n.Property.prototype.toPixels=function(t,i){var r,u;return this.hasValue()?(r=this.value+"",r.match(/em$/))?this.numValue()*this.getEM(t):r.match(/ex$/)?this.numValue()*this.getEM(t)/2:r.match(/px$/)?this.numValue():r.match(/pt$/)?this.numValue()*this.getDPI(t)*(1/72):r.match(/pc$/)?15*this.numValue():r.match(/cm$/)?this.numValue()*this.getDPI(t)/2.54:r.match(/mm$/)?this.numValue()*this.getDPI(t)/25.4:r.match(/in$/)?this.numValue()*this.getDPI(t):r.match(/%$/)?this.numValue()*n.ViewPort.ComputeSize(t):(u=this.numValue(),i&&u<1?u*n.ViewPort.ComputeSize(t):u):0},n.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var n=this.value+"";return n.match(/s$/)?1e3*this.numValue():n.match(/ms$/)?this.numValue():this.numValue()},n.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var n=this.value+"";return n.match(/deg$/)?this.numValue()*(Math.PI/180):n.match(/grad$/)?this.numValue()*(Math.PI/200):n.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},n.Font=new function(){this.Styles="normal|italic|oblique|inherit";this.Variants="normal|small-caps|inherit";this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";this.CreateFont=function(t,i,r,u,f,e){var o=null!=e?this.Parse(e):this.CreateFont("","","","","",n.ctx.font);return{fontFamily:f||o.fontFamily,fontSize:u||o.fontSize,fontStyle:t||o.fontStyle,fontWeight:r||o.fontWeight,fontVariant:i||o.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var t=this;this.Parse=function(i){for(var e={},u=n.trim(n.compressSpaces(i||"")).split(" "),f={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},o="",r=0;r<u.length;r++)f.fontStyle||t.Styles.indexOf(u[r])==-1?f.fontVariant||t.Variants.indexOf(u[r])==-1?f.fontWeight||t.Weights.indexOf(u[r])==-1?f.fontSize?"inherit"!=u[r]&&(o+=u[r]):("inherit"!=u[r]&&(e.fontSize=u[r].split("/")[0]),f.fontStyle=f.fontVariant=f.fontWeight=f.fontSize=!0):("inherit"!=u[r]&&(e.fontWeight=u[r]),f.fontStyle=f.fontVariant=f.fontWeight=!0):("inherit"!=u[r]&&(e.fontVariant=u[r]),f.fontStyle=f.fontVariant=!0):("inherit"!=u[r]&&(e.fontStyle=u[r]),f.fontStyle=!0);return""!=o&&(e.fontFamily=o),e}},n.ToNumberArray=function(t){for(var i=n.trim(n.compressSpaces((t||"").replace(/,/g," "))).split(" "),r=0;r<i.length;r++)i[r]=parseFloat(i[r]);return i},n.Point=function(n,t){this.x=n;this.y=t},n.Point.prototype.angleTo=function(n){return Math.atan2(n.y-this.y,n.x-this.x)},n.Point.prototype.applyTransform=function(n){var t=this.x*n[0]+this.y*n[2]+n[4],i=this.x*n[1]+this.y*n[3]+n[5];this.x=t;this.y=i},n.CreatePoint=function(t){var i=n.ToNumberArray(t);return new n.Point(i[0],i[1])},n.CreatePath=function(t){for(var r=n.ToNumberArray(t),u=[],i=0;i<r.length;i+=2)u.push(new n.Point(r[i],r[i+1]));return u},n.BoundingBox=function(n,t,r,u){this.x1=Number.NaN;this.y1=Number.NaN;this.x2=Number.NaN;this.y2=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(n,t){null!=n&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=n,this.x2=n),n<this.x1&&(this.x1=n),n>this.x2&&(this.x2=n));null!=t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))};this.addX=function(n){this.addPoint(n,null)};this.addY=function(n){this.addPoint(null,n)};this.addBoundingBox=function(n){this.addPoint(n.x1,n.y1);this.addPoint(n.x2,n.y2)};this.addQuadraticCurve=function(n,t,i,r,u,f){var e=n+2/3*(i-n),o=t+2/3*(r-t),s=e+1/3*(u-n),h=o+1/3*(f-t);this.addBezierCurve(n,t,e,s,o,h,u,f)};this.addBezierCurve=function(n,t,r,u,f,e,o,s){var h=[n,t],p=[r,u],d=[f,e],w=[o,s],k,a,v,y;for(this.addPoint(h[0],h[1]),this.addPoint(w[0],w[1]),i=0;i<=1;i++){var c=function(n){return Math.pow(1-n,3)*h[i]+3*Math.pow(1-n,2)*n*p[i]+3*(1-n)*Math.pow(n,2)*d[i]+Math.pow(n,3)*w[i]},l=6*h[i]-12*p[i]+6*d[i],b=-3*h[i]+9*p[i]-9*d[i]+3*w[i],g=3*p[i]-3*h[i];if(0!=b)k=Math.pow(l,2)-4*g*b,k<0||(a=(-l+Math.sqrt(k))/(2*b),0<a&&a<1&&(0==i&&this.addX(c(a)),1==i&&this.addY(c(a))),v=(-l-Math.sqrt(k))/(2*b),0<v&&v<1&&(0==i&&this.addX(c(v)),1==i&&this.addY(c(v))));else{if(0==l)continue;y=-g/l;0<y&&y<1&&(0==i&&this.addX(c(y)),1==i&&this.addY(c(y)))}}};this.isPointInBox=function(n,t){return this.x1<=n&&n<=this.x2&&this.y1<=t&&t<=this.y2};this.addPoint(n,t);this.addPoint(r,u)},n.Transform=function(t){var u=this,r,i;for(this.Type={},this.Type.translate=function(t){this.p=n.CreatePoint(t);this.apply=function(n){n.translate(this.p.x||0,this.p.y||0)};this.applyToPoint=function(n){n.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(t){var i=n.ToNumberArray(t);this.angle=new n.Property("angle",i[0]);this.cx=i[1]||0;this.cy=i[2]||0;this.apply=function(n){n.translate(this.cx,this.cy);n.rotate(this.angle.toRadians());n.translate(-this.cx,-this.cy)};this.applyToPoint=function(n){var t=this.angle.toRadians();n.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);n.applyTransform([Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0]);n.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(t){this.p=n.CreatePoint(t);this.apply=function(n){n.scale(this.p.x||1,this.p.y||this.p.x||1)};this.applyToPoint=function(n){n.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(t){this.m=n.ToNumberArray(t);this.apply=function(n){n.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};this.applyToPoint=function(n){n.applyTransform(this.m)}},this.Type.SkewBase=function(t){this.base=u.Type.matrix;this.base(t);this.angle=new n.Property("angle",t)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(n){this.base=u.Type.SkewBase;this.base(n);this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(n){this.base=u.Type.SkewBase;this.base(n);this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(n){for(var t=0;t<this.transforms.length;t++)this.transforms[t].apply(n)},this.applyToPoint=function(n){for(var t=0;t<this.transforms.length;t++)this.transforms[t].applyToPoint(n)},r=n.trim(n.compressSpaces(t)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),i=0;i<r.length;i++){var f=r[i].split("(")[0],o=r[i].split("(")[1].replace(")",""),e=new this.Type[f](o);e.type=f;this.transforms.push(e)}},n.AspectRatio=function(t,i,r,u,f,e,o,s,h,c){i=n.compressSpaces(i);i=i.replace(/^defer\s/,"");var w=i.split(" ")[0]||"xMidYMid",l=i.split(" ")[1]||"meet",y=r/u,p=f/e,a=Math.min(y,p),v=Math.max(y,p);"meet"==l&&(u*=a,e*=a);"slice"==l&&(u*=v,e*=v);h=new n.Property("refX",h);c=new n.Property("refY",c);h.hasValue()&&c.hasValue()?t.translate(-a*h.toPixels("x"),-a*c.toPixels("y")):(w.match(/^xMid/)&&("meet"==l&&a==p||"slice"==l&&v==p)&&t.translate(r/2-u/2,0),w.match(/YMid$/)&&("meet"==l&&a==y||"slice"==l&&v==y)&&t.translate(0,f/2-e/2),w.match(/^xMax/)&&("meet"==l&&a==p||"slice"==l&&v==p)&&t.translate(r-u,0),w.match(/YMax$/)&&("meet"==l&&a==y||"slice"==l&&v==y)&&t.translate(0,f-e));"none"==w?t.scale(y,p):"meet"==l?t.scale(a,a):"slice"==l&&t.scale(v,v);t.translate(null==o?0:-o,null==s?0:-s)},n.Element={},n.EmptyProperty=new n.Property("EMPTY",""),n.Element.ElementBase=function(t){var f,o,s,e,r,i,u;if(this.attributes={},this.styles={},this.children=[],this.attribute=function(t,i){var r=this.attributes[t];return null!=r?r:(1==i&&(r=new n.Property(t,""),this.attributes[t]=r),r||n.EmptyProperty)},this.style=function(t,i){var r=this.styles[t],u,e,f;return null!=r?r:(u=this.attribute(t),null!=u&&u.hasValue())?(this.styles[t]=u,u):(e=this.parent,null!=e&&(f=e.style(t),null!=f&&f.hasValue()))?f:(1==i&&(r=new n.Property(t,""),this.styles[t]=r),r||n.EmptyProperty)},this.render=function(n){var t,i;"none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value&&((n.save(),this.attribute("mask").hasValue())?(t=this.attribute("mask").getDefinition(),null!=t&&t.apply(n,this)):this.style("filter").hasValue()?(i=this.style("filter").getDefinition(),null!=i&&i.apply(n,this)):(this.setContext(n),this.renderChildren(n),this.clearContext(n)),n.restore())},this.setContext=function(){},this.clearContext=function(){},this.renderChildren=function(n){for(var t=0;t<this.children.length;t++)this.children[t].render(n)},this.addChild=function(t,i){var r=t;i&&(r=n.CreateElement(t));r.parent=this;this.children.push(r)},null!=t&&1==t.nodeType){for(u=0;u<t.childNodes.length;u++)f=t.childNodes[u],1==f.nodeType&&this.addChild(f,!0),this.captureTextNodes&&3==f.nodeType&&this.addChild(new n.Element.tspan(f),!1);for(u=0;u<t.attributes.length;u++)o=t.attributes[u],this.attributes[o.nodeName]=new n.Property(o.nodeName,o.nodeValue);if(i=n.Styles[t.nodeName],null!=i)for(r in i)this.styles[r]=i[r];if(this.attribute("class").hasValue())for(s=n.compressSpaces(this.attribute("class").value).split(" "),e=0;e<s.length;e++){if(i=n.Styles["."+s[e]],null!=i)for(r in i)this.styles[r]=i[r];if(i=n.Styles[t.nodeName+"."+s[e]],null!=i)for(r in i)this.styles[r]=i[r]}if(this.attribute("id").hasValue()&&(i=n.Styles["#"+this.attribute("id").value],null!=i))for(r in i)this.styles[r]=i[r];if(this.attribute("style").hasValue())for(i=this.attribute("style").value.split(";"),u=0;u<i.length;u++)if(""!=n.trim(i[u])){var h=i[u].split(":"),r=n.trim(h[0]),c=n.trim(h[1]);this.styles[r]=new n.Property(r,c)}this.attribute("id").hasValue()&&null==n.Definitions[this.attribute("id").value]&&(n.Definitions[this.attribute("id").value]=this)}},n.Element.RenderedElementBase=function(t){this.base=n.Element.ElementBase;this.base(t);this.setContext=function(t){var i,u,r,f,o,e;this.style("fill").isUrlDefinition()?(u=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity")),null!=u&&(t.fillStyle=u)):this.style("fill").hasValue()&&(i=this.style("fill"),"currentColor"==i.value&&(i.value=this.style("color").value),t.fillStyle="none"==i.value?"rgba(0,0,0,0)":i.value);this.style("fill-opacity").hasValue()&&(i=new n.Property("fill",t.fillStyle),i=i.addOpacity(this.style("fill-opacity").value),t.fillStyle=i.value);this.style("stroke").isUrlDefinition()?(u=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity")),null!=u&&(t.strokeStyle=u)):this.style("stroke").hasValue()&&(r=this.style("stroke"),"currentColor"==r.value&&(r.value=this.style("color").value),t.strokeStyle="none"==r.value?"rgba(0,0,0,0)":r.value);this.style("stroke-opacity").hasValue()&&(r=new n.Property("stroke",t.strokeStyle),r=r.addOpacity(this.style("stroke-opacity").value),t.strokeStyle=r.value);this.style("stroke-width").hasValue()&&(f=this.style("stroke-width").toPixels(),t.lineWidth=0==f?.001:f);(this.style("stroke-linecap").hasValue()&&(t.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(t.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(t.miterLimit=this.style("stroke-miterlimit").value),"undefined"!=typeof t.font&&(t.font=n.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue())&&(o=new n.Transform(this.attribute("transform").value),o.apply(t));this.attribute("clip-path").hasValue()&&(e=this.attribute("clip-path").getDefinition(),null!=e&&e.apply(t));this.style("opacity").hasValue()&&(t.globalAlpha=this.style("opacity").numValue())}},n.Element.RenderedElementBase.prototype=new n.Element.ElementBase,n.Element.PathElementBase=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.path=function(t){return null!=t&&t.beginPath(),new n.BoundingBox};this.renderChildren=function(t){var i,u,r;if(this.path(t),n.Mouse.checkPath(this,t),""!=t.fillStyle&&t.fill(),""!=t.strokeStyle&&t.stroke(),i=this.getMarkers(),null!=i){if(this.style("marker-start").isUrlDefinition()&&(r=this.style("marker-start").getDefinition(),r.render(t,i[0][0],i[0][1])),this.style("marker-mid").isUrlDefinition())for(r=this.style("marker-mid").getDefinition(),u=1;u<i.length-1;u++)r.render(t,i[u][0],i[u][1]);this.style("marker-end").isUrlDefinition()&&(r=this.style("marker-end").getDefinition(),r.render(t,i[i.length-1][0],i[i.length-1][1]))}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}},n.Element.PathElementBase.prototype=new n.Element.RenderedElementBase,n.Element.svg=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.baseClearContext=this.clearContext;this.clearContext=function(t){this.baseClearContext(t);n.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(t){var i,r,f,e;if(t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,this.baseSetContext(t),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),t.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y")),i=n.ViewPort.width(),r=n.ViewPort.height(),(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root)&&(i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y"),f=0,e=0,this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(f=-this.attribute("refX").toPixels("x"),e=-this.attribute("refY").toPixels("y")),t.beginPath(),t.moveTo(f,e),t.lineTo(i,e),t.lineTo(i,r),t.lineTo(f,r),t.closePath(),t.clip()),n.ViewPort.SetCurrent(i,r),this.attribute("viewBox").hasValue()){var u=n.ToNumberArray(this.attribute("viewBox").value),o=u[0],s=u[1];i=u[2];r=u[3];n.AspectRatio(t,this.attribute("preserveAspectRatio").value,n.ViewPort.width(),i,n.ViewPort.height(),r,o,s,this.attribute("refX").value,this.attribute("refY").value);n.ViewPort.RemoveCurrent();n.ViewPort.SetCurrent(u[2],u[3])}}},n.Element.svg.prototype=new n.Element.RenderedElementBase,n.Element.rect=function(t){this.base=n.Element.PathElementBase;this.base(t);this.path=function(t){var i=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),e=this.attribute("height").toPixels("y"),u=this.attribute("rx").toPixels("x"),o=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(o=u),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(u=o),u=Math.min(u,f/2),o=Math.min(o,e/2),null!=t&&(t.beginPath(),t.moveTo(i+u,r),t.lineTo(i+f-u,r),t.quadraticCurveTo(i+f,r,i+f,r+o),t.lineTo(i+f,r+e-o),t.quadraticCurveTo(i+f,r+e,i+f-u,r+e),t.lineTo(i+u,r+e),t.quadraticCurveTo(i,r+e,i,r+e-o),t.lineTo(i,r+o),t.quadraticCurveTo(i,r,i+u,r),t.closePath()),new n.BoundingBox(i,r,i+f,r+e)}},n.Element.rect.prototype=new n.Element.PathElementBase,n.Element.circle=function(t){this.base=n.Element.PathElementBase;this.base(t);this.path=function(t){var r=this.attribute("cx").toPixels("x"),u=this.attribute("cy").toPixels("y"),i=this.attribute("r").toPixels();return null!=t&&(t.beginPath(),t.arc(r,u,i,0,2*Math.PI,!0),t.closePath()),new n.BoundingBox(r-i,u-i,r+i,u+i)}},n.Element.circle.prototype=new n.Element.PathElementBase,n.Element.ellipse=function(t){this.base=n.Element.PathElementBase;this.base(t);this.path=function(t){var e=4*((Math.sqrt(2)-1)/3),f=this.attribute("rx").toPixels("x"),u=this.attribute("ry").toPixels("y"),i=this.attribute("cx").toPixels("x"),r=this.attribute("cy").toPixels("y");return null!=t&&(t.beginPath(),t.moveTo(i,r-u),t.bezierCurveTo(i+e*f,r-u,i+f,r-e*u,i+f,r),t.bezierCurveTo(i+f,r+e*u,i+e*f,r+u,i,r+u),t.bezierCurveTo(i-e*f,r+u,i-f,r+e*u,i-f,r),t.bezierCurveTo(i-f,r-e*u,i-e*f,r-u,i,r-u),t.closePath()),new n.BoundingBox(i-f,r-u,i+f,r+u)}},n.Element.ellipse.prototype=new n.Element.PathElementBase,n.Element.line=function(t){this.base=n.Element.PathElementBase;this.base(t);this.getPoints=function(){return[new n.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new n.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]};this.path=function(t){var i=this.getPoints();return null!=t&&(t.beginPath(),t.moveTo(i[0].x,i[0].y),t.lineTo(i[1].x,i[1].y)),new n.BoundingBox(i[0].x,i[0].y,i[1].x,i[1].y)};this.getMarkers=function(){var n=this.getPoints(),t=n[0].angleTo(n[1]);return[[n[0],t],[n[1],t]]}},n.Element.line.prototype=new n.Element.PathElementBase,n.Element.polyline=function(t){this.base=n.Element.PathElementBase;this.base(t);this.points=n.CreatePath(this.attribute("points").value);this.path=function(t){var r=new n.BoundingBox(this.points[0].x,this.points[0].y),i;for(null!=t&&(t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y)),i=1;i<this.points.length;i++)r.addPoint(this.points[i].x,this.points[i].y),null!=t&&t.lineTo(this.points[i].x,this.points[i].y);return r};this.getMarkers=function(){for(var n=[],t=0;t<this.points.length-1;t++)n.push([this.points[t],this.points[t].angleTo(this.points[t+1])]);return n.push([this.points[this.points.length-1],n[n.length-1][1]]),n}},n.Element.polyline.prototype=new n.Element.PathElementBase,n.Element.polygon=function(t){this.base=n.Element.polyline;this.base(t);this.basePath=this.path;this.path=function(n){var t=this.basePath(n);return null!=n&&(n.lineTo(this.points[0].x,this.points[0].y),n.closePath()),t}},n.Element.polygon.prototype=new n.Element.polyline,n.Element.path=function(t){this.base=n.Element.PathElementBase;this.base(t);var i=this.attribute("d").value;i=i.replace(/,/gm," ");i=i.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");i=i.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");i=i.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");i=i.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");i=i.replace(/([0-9])([+\-])/gm,"$1 $2");i=i.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");i=i.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");i=n.compressSpaces(i);i=n.trim(i);this.PathParser=new function(t){this.tokens=t.split(" ");this.reset=function(){this.i=-1;this.command="";this.previousCommand="";this.start=new n.Point(0,0);this.control=new n.Point(0,0);this.current=new n.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)};this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1};this.getToken=function(){return this.i++,this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){var t=new n.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)};this.getAsControlPoint=function(){var n=this.getPoint();return this.control=n,n};this.getAsCurrentPoint=function(){var n=this.getPoint();return this.current=n,n};this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase())return this.current;return new n.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)};this.makeAbsolute=function(n){return this.isRelativeCommand()&&(n.x+=this.current.x,n.y+=this.current.y),n};this.addMarker=function(n,t,i){null!=i&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(i));this.addMarkerAngle(n,null==t?null:t.angleTo(n))};this.addMarkerAngle=function(n,t){this.points.push(n);this.angles.push(t)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var t,n=0;n<this.angles.length;n++)if(null==this.angles[n])for(t=n+1;t<this.angles.length;t++)if(null!=this.angles[t]){this.angles[n]=this.angles[t];break}return this.angles}}(i);this.path=function(t){var i=this.PathParser,c,ft,f,y,s,u,r,w;for(i.reset(),c=new n.BoundingBox,null!=t&&t.beginPath();!i.isEnd();)switch(i.nextCommand(),i.command){case"M":case"m":for(f=i.getAsCurrentPoint(),i.addMarker(f),c.addPoint(f.x,f.y),null!=t&&t.moveTo(f.x,f.y),i.start=i.current;!i.isCommandOrEnd();)f=i.getAsCurrentPoint(),i.addMarker(f,i.start),c.addPoint(f.x,f.y),null!=t&&t.lineTo(f.x,f.y);break;case"L":case"l":for(;!i.isCommandOrEnd();)ft=i.current,f=i.getAsCurrentPoint(),i.addMarker(f,ft),c.addPoint(f.x,f.y),null!=t&&t.lineTo(f.x,f.y);break;case"H":case"h":for(;!i.isCommandOrEnd();)y=new n.Point((i.isRelativeCommand()?i.current.x:0)+i.getScalar(),i.current.y),i.addMarker(y,i.current),i.current=y,c.addPoint(i.current.x,i.current.y),null!=t&&t.lineTo(i.current.x,i.current.y);break;case"V":case"v":for(;!i.isCommandOrEnd();)y=new n.Point(i.current.x,(i.isRelativeCommand()?i.current.y:0)+i.getScalar()),i.addMarker(y,i.current),i.current=y,c.addPoint(i.current.x,i.current.y),null!=t&&t.lineTo(i.current.x,i.current.y);break;case"C":case"c":for(;!i.isCommandOrEnd();){var s=i.current,l=i.getPoint(),u=i.getAsControlPoint(),r=i.getAsCurrentPoint();i.addMarker(r,u,l);c.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,r.x,r.y);null!=t&&t.bezierCurveTo(l.x,l.y,u.x,u.y,r.x,r.y)}break;case"S":case"s":for(;!i.isCommandOrEnd();){var s=i.current,l=i.getReflectedControlPoint(),u=i.getAsControlPoint(),r=i.getAsCurrentPoint();i.addMarker(r,u,l);c.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,r.x,r.y);null!=t&&t.bezierCurveTo(l.x,l.y,u.x,u.y,r.x,r.y)}break;case"Q":case"q":for(;!i.isCommandOrEnd();){var s=i.current,u=i.getAsControlPoint(),r=i.getAsCurrentPoint();i.addMarker(r,u,u);c.addQuadraticCurve(s.x,s.y,u.x,u.y,r.x,r.y);null!=t&&t.quadraticCurveTo(u.x,u.y,r.x,r.y)}break;case"T":case"t":for(;!i.isCommandOrEnd();)s=i.current,u=i.getReflectedControlPoint(),i.control=u,r=i.getAsCurrentPoint(),i.addMarker(r,u,u),c.addQuadraticCurve(s.x,s.y,u.x,u.y,r.x,r.y),null!=t&&t.quadraticCurveTo(u.x,u.y,r.x,r.y);break;case"A":case"a":for(;!i.isCommandOrEnd();){var s=i.current,e=i.getScalar(),o=i.getScalar(),a=i.getScalar()*(Math.PI/180),ct=i.getScalar(),g=i.getScalar(),r=i.getAsCurrentPoint(),h=new n.Point(Math.cos(a)*(s.x-r.x)/2+Math.sin(a)*(s.y-r.y)/2,-Math.sin(a)*(s.x-r.x)/2+Math.cos(a)*(s.y-r.y)/2),nt=Math.pow(h.x,2)/Math.pow(e,2)+Math.pow(h.y,2)/Math.pow(o,2);nt>1&&(e*=Math.sqrt(nt),o*=Math.sqrt(nt));w=(ct==g?-1:1)*Math.sqrt((Math.pow(e,2)*Math.pow(o,2)-Math.pow(e,2)*Math.pow(h.y,2)-Math.pow(o,2)*Math.pow(h.x,2))/(Math.pow(e,2)*Math.pow(h.y,2)+Math.pow(o,2)*Math.pow(h.x,2)));isNaN(w)&&(w=0);var v=new n.Point(w*e*h.y/o,w*-o*h.x/e),p=new n.Point((s.x+r.x)/2+Math.cos(a)*v.x-Math.sin(a)*v.y,(s.y+r.y)/2+Math.sin(a)*v.x+Math.cos(a)*v.y),et=function(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2))},b=function(n,t){return(n[0]*t[0]+n[1]*t[1])/(et(n)*et(t))},ot=function(n,t){return(n[0]*t[1]<n[1]*t[0]?-1:1)*Math.acos(b(n,t))},tt=ot([1,0],[(h.x-v.x)/e,(h.y-v.y)/o]),it=[(h.x-v.x)/e,(h.y-v.y)/o],rt=[(-h.x-v.x)/e,(-h.y-v.y)/o],k=ot(it,rt);b(it,rt)<=-1&&(k=Math.PI);b(it,rt)>=1&&(k=0);var ut=1-g?1:-1,d=tt+ut*(k/2),lt=new n.Point(p.x+e*Math.cos(d),p.y+o*Math.sin(d));if(i.addMarkerAngle(lt,d-ut*Math.PI/2),i.addMarkerAngle(r,d-ut*Math.PI),c.addPoint(r.x,r.y),null!=t){var b=e>o?e:o,st=e>o?1:e/o,ht=e>o?o/e:1;t.translate(p.x,p.y);t.rotate(a);t.scale(st,ht);t.arc(0,0,b,tt,tt+k,1-g);t.scale(1/st,1/ht);t.rotate(-a);t.translate(-p.x,-p.y)}}break;case"Z":case"z":null!=t&&t.closePath();i.current=i.start}return c};this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),r=this.PathParser.getMarkerAngles(),i=[],n=0;n<t.length;n++)i.push([t[n],r[n]]);return i}},n.Element.path.prototype=new n.Element.PathElementBase,n.Element.pattern=function(t){this.base=n.Element.ElementBase;this.base(t);this.createPattern=function(t){var o=this.attribute("width").toPixels("x",!0),s=this.attribute("height").toPixels("y",!0),r=new n.Element.svg,i,u,f,e;for(r.attributes.viewBox=new n.Property("viewBox",this.attribute("viewBox").value),r.attributes.width=new n.Property("width",o+"px"),r.attributes.height=new n.Property("height",s+"px"),r.attributes.transform=new n.Property("transform",this.attribute("patternTransform").value),r.children=this.children,i=document.createElement("canvas"),i.width=o,i.height=s,u=i.getContext("2d"),this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&u.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0)),f=-1;f<=1;f++)for(e=-1;e<=1;e++)u.save(),u.translate(f*i.width,e*i.height),r.render(u),u.restore();return t.createPattern(i,"repeat")}},n.Element.pattern.prototype=new n.Element.ElementBase,n.Element.marker=function(t){this.base=n.Element.ElementBase;this.base(t);this.baseRender=this.render;this.render=function(t,i,r){t.translate(i.x,i.y);"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(r);"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(t.lineWidth,t.lineWidth);t.save();var u=new n.Element.svg;u.attributes.viewBox=new n.Property("viewBox",this.attribute("viewBox").value);u.attributes.refX=new n.Property("refX",this.attribute("refX").value);u.attributes.refY=new n.Property("refY",this.attribute("refY").value);u.attributes.width=new n.Property("width",this.attribute("markerWidth").value);u.attributes.height=new n.Property("height",this.attribute("markerHeight").value);u.attributes.fill=new n.Property("fill",this.attribute("fill").valueOrDefault("black"));u.attributes.stroke=new n.Property("stroke",this.attribute("stroke").valueOrDefault("none"));u.children=this.children;u.render(t);t.restore();"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&t.scale(1/t.lineWidth,1/t.lineWidth);"auto"==this.attribute("orient").valueOrDefault("auto")&&t.rotate(-r);t.translate(-i.x,-i.y)}},n.Element.marker.prototype=new n.Element.ElementBase,n.Element.defs=function(t){this.base=n.Element.ElementBase;this.base(t);this.render=function(){}},n.Element.defs.prototype=new n.Element.ElementBase,n.Element.GradientBase=function(t){var i,r;for(this.base=n.Element.ElementBase,this.base(t),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[],i=0;i<this.children.length;i++)r=this.children[i],"stop"==r.type&&this.stops.push(r);this.getGradient=function(){};this.createGradient=function(t,i,r){var f=this,v,o,s,h,e,l,u,c,a;if(this.attribute("xlink:href").hasValue()&&(f=this.attribute("xlink:href").getDefinition()),v=function(t){if(r.hasValue()){var i=new n.Property("color",t);return i.addOpacity(r.value).value}return t},o=this.getGradient(t,i),null==o)return v(f.stops[f.stops.length-1].color);for(s=0;s<f.stops.length;s++)o.addColorStop(f.stops[s].offset,v(f.stops[s].color));return this.attribute("gradientTransform").hasValue()?(h=n.ViewPort.viewPorts[0],e=new n.Element.rect,e.attributes.x=new n.Property("x",-n.MAX_VIRTUAL_PIXELS/3),e.attributes.y=new n.Property("y",-n.MAX_VIRTUAL_PIXELS/3),e.attributes.width=new n.Property("width",n.MAX_VIRTUAL_PIXELS),e.attributes.height=new n.Property("height",n.MAX_VIRTUAL_PIXELS),l=new n.Element.g,l.attributes.transform=new n.Property("transform",this.attribute("gradientTransform").value),l.children=[e],u=new n.Element.svg,u.attributes.x=new n.Property("x",0),u.attributes.y=new n.Property("y",0),u.attributes.width=new n.Property("width",h.width),u.attributes.height=new n.Property("height",h.height),u.children=[l],c=document.createElement("canvas"),c.width=h.width,c.height=h.height,a=c.getContext("2d"),a.fillStyle=o,u.render(a),a.createPattern(c,"no-repeat")):o}},n.Element.GradientBase.prototype=new n.Element.ElementBase,n.Element.linearGradient=function(t){this.base=n.Element.GradientBase;this.base(t);this.getGradient=function(n,t){var i=t.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var r="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),u="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),f="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),e="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return r==f&&u==e?null:n.createLinearGradient(r,u,f,e)}},n.Element.linearGradient.prototype=new n.Element.GradientBase,n.Element.radialGradient=function(t){this.base=n.Element.GradientBase;this.base(t);this.getGradient=function(n,t){var i=t.getBoundingBox(),o;this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%");this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%");this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var r="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),u="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),f=r,e=u;return this.attribute("fx").hasValue()&&(f="objectBoundingBox"==this.gradientUnits?i.x()+i.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(e="objectBoundingBox"==this.gradientUnits?i.y()+i.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y")),o="objectBoundingBox"==this.gradientUnits?(i.width()+i.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels(),n.createRadialGradient(f,e,0,r,u,o)}},n.Element.radialGradient.prototype=new n.Element.GradientBase,n.Element.stop=function(t){this.base=n.Element.ElementBase;this.base(t);this.offset=this.attribute("offset").numValue();this.offset<0&&(this.offset=0);this.offset>1&&(this.offset=1);var i=this.style("stop-color");this.style("stop-opacity").hasValue()&&(i=i.addOpacity(this.style("stop-opacity").value));this.color=i.value},n.Element.stop.prototype=new n.Element.ElementBase,n.Element.AnimateBase=function(t){this.base=n.Element.ElementBase;this.base(t);n.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").toMilliseconds();this.getProperty=function(){var t=this.attribute("attributeType").value,n=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(n,!0):this.parent.attribute(n,!0)};this.initialValue=null;this.initialUnits="";this.removed=!1;this.calcValue=function(){return""};this.update=function(n){var i,t,r;if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"!=this.attribute("repeatCount").value&&"indefinite"!=this.attribute("repeatDur").value)return"remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed&&(this.removed=!0,this.getProperty().value=this.initialValue,!0);this.duration=0}return this.duration=this.duration+n,i=!1,this.begin<this.duration&&(t=this.calcValue(),this.attribute("type").hasValue()&&(r=this.attribute("type").value,t=r+"("+t+")"),this.getProperty().value=t,i=!0),i};this.from=this.attribute("from");this.to=this.attribute("to");this.values=this.attribute("values");this.values.hasValue()&&(this.values.value=this.values.value.split(";"));this.progress=function(){var t={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var i=t.progress*(this.values.value.length-1),r=Math.floor(i),u=Math.ceil(i);t.from=new n.Property("from",parseFloat(this.values.value[r]));t.to=new n.Property("to",parseFloat(this.values.value[u]));t.progress=(i-r)/(u-r)}else t.from=this.from,t.to=this.to;return t}},n.Element.AnimateBase.prototype=new n.Element.ElementBase,n.Element.animate=function(t){this.base=n.Element.AnimateBase;this.base(t);this.calcValue=function(){var n=this.progress(),t=n.from.numValue()+(n.to.numValue()-n.from.numValue())*n.progress;return t+this.initialUnits}},n.Element.animate.prototype=new n.Element.AnimateBase,n.Element.animateColor=function(t){this.base=n.Element.AnimateBase;this.base(t);this.calcValue=function(){var t=this.progress(),n=new a(t.from.value),i=new a(t.to.value);if(n.ok&&i.ok){var r=n.r+(i.r-n.r)*t.progress,u=n.g+(i.g-n.g)*t.progress,f=n.b+(i.b-n.b)*t.progress;return"rgb("+parseInt(r,10)+","+parseInt(u,10)+","+parseInt(f,10)+")"}return this.attribute("from").value}},n.Element.animateColor.prototype=new n.Element.AnimateBase,n.Element.animateTransform=function(t){this.base=n.Element.AnimateBase;this.base(t);this.calcValue=function(){for(var i=this.progress(),r=n.ToNumberArray(i.from.value),f=n.ToNumberArray(i.to.value),u="",t=0;t<r.length;t++)u+=r[t]+(f[t]-r[t])*i.progress+" ";return u}},n.Element.animateTransform.prototype=new n.Element.animate,n.Element.font=function(t){var r,i;for(this.base=n.Element.ElementBase,this.base(t),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[],r=0;r<this.children.length;r++)i=this.children[r],"font-face"==i.type?(this.fontFace=i,i.style("font-family").hasValue()&&(n.Definitions[i.style("font-family").value]=this)):"missing-glyph"==i.type?this.missingGlyph=i:"glyph"==i.type&&(""!=i.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[i.unicode]&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)},n.Element.font.prototype=new n.Element.ElementBase,n.Element.fontface=function(t){this.base=n.Element.ElementBase;this.base(t);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()},n.Element.fontface.prototype=new n.Element.ElementBase,n.Element.missingglyph=function(t){this.base=n.Element.path;this.base(t);this.horizAdvX=0},n.Element.missingglyph.prototype=new n.Element.path,n.Element.glyph=function(t){this.base=n.Element.path;this.base(t);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value},n.Element.glyph.prototype=new n.Element.path,n.Element.text=function(t){this.captureTextNodes=!0;this.base=n.Element.RenderedElementBase;this.base(t);this.baseSetContext=this.setContext;this.setContext=function(n){this.baseSetContext(n);this.style("dominant-baseline").hasValue()&&(n.textBaseline=this.style("dominant-baseline").value);this.style("alignment-baseline").hasValue()&&(n.textBaseline=this.style("alignment-baseline").value)};this.renderChildren=function(n){this.textAnchor=this.style("text-anchor").valueOrDefault("start");this.x=this.attribute("x").toPixels("x");this.y=this.attribute("y").toPixels("y");for(var t=0;t<this.children.length;t++)this.renderChild(n,this,t)};this.renderChild=function(n,t,i){var r=t.children[i],e,u,f,o,i;if(r.attribute("x").hasValue()?r.x=r.attribute("x").toPixels("x"):(this.attribute("dx").hasValue()&&(this.y+=this.attribute("dx").toPixels("x")),r.attribute("dx").hasValue()&&(this.x+=r.attribute("dx").toPixels("x")),r.x=this.x),e=r.measureText(n),"start"!=this.textAnchor&&(0==i||r.attribute("x").hasValue())){for(u=e,f=i+1;f<this.children.length;f++){if(o=this.children[f],o.attribute("x").hasValue())break;u+=o.measureText(n)}r.x-="end"==this.textAnchor?u:u/2}for(this.x=r.x+e,r.attribute("y").hasValue()?r.y=r.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),r.attribute("dy").hasValue()&&(this.y+=r.attribute("dy").toPixels("y")),r.y=this.y),this.y=r.y,r.render(n),i=0;i<r.children.length;i++)this.renderChild(n,r,i)}},n.Element.text.prototype=new n.Element.RenderedElementBase,n.Element.TextElementBase=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.getGlyph=function(n,t,i){var u=t[i],r=null,f;return n.isArabic?(f="isolated",(0==i||" "==t[i-1])&&i<t.length-2&&" "!=t[i+1]&&(f="terminal"),i>0&&" "!=t[i-1]&&i<t.length-2&&" "!=t[i+1]&&(f="medial"),i>0&&" "!=t[i-1]&&(i==t.length-1||" "==t[i+1])&&(f="initial"),"undefined"!=typeof n.glyphs[u]&&(r=n.glyphs[u][f],null==r&&"glyph"==n.glyphs[u].type&&(r=n.glyphs[u]))):r=n.glyphs[u],null==r&&(r=n.missingGlyph),r};this.renderChildren=function(t){var i=this.parent.style("font-family").getDefinition(),e,r,s,u,c;if(null==i)""!=t.fillStyle&&t.fillText(n.compressSpaces(this.getText()),this.x,this.y),""!=t.strokeStyle&&t.strokeText(n.compressSpaces(this.getText()),this.x,this.y);else{var o=this.parent.style("font-size").numValueOrDefault(n.Font.Parse(n.ctx.font).fontSize),h=this.parent.style("font-style").valueOrDefault(n.Font.Parse(n.ctx.font).fontStyle),f=this.getText();for(i.isRTL&&(f=f.split("").reverse().join("")),e=n.ToNumberArray(this.parent.attribute("dx").value),r=0;r<f.length;r++)s=this.getGlyph(i,f,r),u=o/i.fontFace.unitsPerEm,t.translate(this.x,this.y),t.scale(u,-u),c=t.lineWidth,t.lineWidth=t.lineWidth*i.fontFace.unitsPerEm/o,"italic"==h&&t.transform(1,0,.4,1,0,0),s.render(t),"italic"==h&&t.transform(1,0,-.4,1,0,0),t.lineWidth=c,t.scale(1/u,-1/u),t.translate(-this.x,-this.y),this.x+=o*(s.horizAdvX||i.horizAdvX)/i.fontFace.unitsPerEm,"undefined"==typeof e[r]||isNaN(e[r])||(this.x+=e[r])}};this.getText=function(){};this.measureText=function(t){var r=this.parent.style("font-family").getDefinition(),f,i,s,o,h;if(null!=r){var c=this.parent.style("font-size").numValueOrDefault(n.Font.Parse(n.ctx.font).fontSize),e=0,u=this.getText();for(r.isRTL&&(u=u.split("").reverse().join("")),f=n.ToNumberArray(this.parent.attribute("dx").value),i=0;i<u.length;i++)s=this.getGlyph(r,u,i),e+=(s.horizAdvX||r.horizAdvX)*c/r.fontFace.unitsPerEm,"undefined"==typeof f[i]||isNaN(f[i])||(e+=f[i]);return e}return(o=n.compressSpaces(this.getText()),!t.measureText)?10*o.length:(t.save(),this.setContext(t),h=t.measureText(o).width,t.restore(),h)}},n.Element.TextElementBase.prototype=new n.Element.RenderedElementBase,n.Element.tspan=function(t){this.captureTextNodes=!0;this.base=n.Element.TextElementBase;this.base(t);this.text=t.nodeValue||t.text||"";this.getText=function(){return this.text}},n.Element.tspan.prototype=new n.Element.TextElementBase,n.Element.tref=function(t){this.base=n.Element.TextElementBase;this.base(t);this.getText=function(){var n=this.attribute("xlink:href").getDefinition();if(null!=n)return n.children[0].getText()}},n.Element.tref.prototype=new n.Element.TextElementBase,n.Element.a=function(t){this.base=n.Element.TextElementBase;this.base(t);this.hasText=!0;for(var i=0;i<t.childNodes.length;i++)3!=t.childNodes[i].nodeType&&(this.hasText=!1);this.text=this.hasText?t.childNodes[0].nodeValue:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(t){var r,i;this.hasText?(this.baseRenderChildren(t),r=new n.Property("fontSize",n.Font.Parse(n.ctx.font).fontSize),n.Mouse.checkBoundingBox(this,new n.BoundingBox(this.x,this.y-r.toPixels("y"),this.x+this.measureText(t),this.y))):(i=new n.Element.g,i.children=this.children,i.parent=this,i.render(t))};this.onclick=function(){window.open(this.attribute("xlink:href").value)};this.onmousemove=function(){n.ctx.canvas.style.cursor="pointer"}},n.Element.a.prototype=new n.Element.TextElementBase,n.Element.image=function(t){var i,r,u;this.base=n.Element.RenderedElementBase;this.base(t);i=this.attribute("xlink:href").value;r=i.match(/\.svg$/);(n.Images.push(this),this.loaded=!1,r)?(this.img=n.ajax(i),this.loaded=!0):(this.img=document.createElement("img"),u=this,this.img.onload=function(){u.loaded=!0},this.img.onerror=function(){console&&console.log('ERROR: image "'+i+'" not found');u.loaded=!0},this.img.src=i);this.renderChildren=function(t){var f=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),u=this.attribute("height").toPixels("y");0!=i&&0!=u&&(t.save(),r?t.drawSvg(this.img,f,e,i,u):(t.translate(f,e),n.AspectRatio(t,this.attribute("preserveAspectRatio").value,i,this.img.width,u,this.img.height,0,0),t.drawImage(this.img,0,0)),t.restore())};this.getBoundingBox=function(){var t=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),u=this.attribute("height").toPixels("y");return new n.BoundingBox(t,i,t+r,i+u)}},n.Element.image.prototype=new n.Element.RenderedElementBase,n.Element.g=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.getBoundingBox=function(){for(var i=new n.BoundingBox,t=0;t<this.children.length;t++)i.addBoundingBox(this.children[t].getBoundingBox());return i}},n.Element.g.prototype=new n.Element.RenderedElementBase,n.Element.symbol=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.baseSetContext=this.setContext;this.setContext=function(t){if(this.baseSetContext(t),this.attribute("viewBox").hasValue()){var i=n.ToNumberArray(this.attribute("viewBox").value),r=i[0],u=i[1];width=i[2];height=i[3];n.AspectRatio(t,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,r,u);n.ViewPort.SetCurrent(i[2],i[3])}}},n.Element.symbol.prototype=new n.Element.RenderedElementBase,n.Element.style=function(t){var r,h,i,c,o,u,g;for(this.base=n.Element.ElementBase,this.base(t),r="",i=0;i<t.childNodes.length;i++)r+=t.childNodes[i].nodeValue;for(r=r.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),r=n.compressSpaces(r),h=r.split("}"),i=0;i<h.length;i++)if(""!=n.trim(h[i]))for(var w=h[i].split("{"),b=w[0].split(","),e=w[1].split(";"),l=0;l<b.length;l++)if(c=n.trim(b[l]),""!=c){for(o={},u=0;u<e.length;u++){var a=e[u].indexOf(":"),v=e[u].substr(0,a),k=e[u].substr(a+1,e[u].length-a);null!=v&&null!=k&&(o[n.trim(v)]=new n.Property(n.trim(v),n.trim(k)))}if(n.Styles[c]=o,"@font-face"==c)for(var nt=o["font-family"].value.replace(/"/g,""),s=o.src.value.split(","),f=0;f<s.length;f++)if(s[f].indexOf('format("svg")')>0)for(var y=s[f].indexOf("url"),tt=s[f].indexOf(")",y),it=s[f].substr(y+5,tt-y-6),rt=n.parseXml(n.ajax(it)),d=rt.getElementsByTagName("font"),p=0;p<d.length;p++)g=n.CreateElement(d[p]),n.Definitions[nt]=g}},n.Element.style.prototype=new n.Element.ElementBase,n.Element.use=function(t){this.base=n.Element.RenderedElementBase;this.base(t);this.baseSetContext=this.setContext;this.setContext=function(n){this.baseSetContext(n);this.attribute("x").hasValue()&&n.translate(this.attribute("x").toPixels("x"),0);this.attribute("y").hasValue()&&n.translate(0,this.attribute("y").toPixels("y"))};this.getDefinition=function(){var n=this.attribute("xlink:href").getDefinition();return this.attribute("width").hasValue()&&(n.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(n.attribute("height",!0).value=this.attribute("height").value),n};this.path=function(n){var t=this.getDefinition();null!=t&&t.path(n)};this.renderChildren=function(n){var t=this.getDefinition(),i;null!=t&&(i=t.parent,t.parent=null,t.render(n),t.parent=i)}},n.Element.use.prototype=new n.Element.RenderedElementBase,n.Element.mask=function(t){this.base=n.Element.ElementBase;this.base(t);this.apply=function(n,t){var f=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),o=this.attribute("width").toPixels("x"),s=this.attribute("height").toPixels("y"),c=t.attribute("mask").value,r,h,u,i;t.attribute("mask").value="";r=document.createElement("canvas");r.width=f+o;r.height=e+s;h=r.getContext("2d");this.renderChildren(h);u=document.createElement("canvas");u.width=f+o;u.height=e+s;i=u.getContext("2d");t.render(i);i.globalCompositeOperation="destination-in";i.fillStyle=h.createPattern(r,"no-repeat");i.fillRect(0,0,f+o,e+s);n.fillStyle=i.createPattern(u,"no-repeat");n.fillRect(0,0,f+o,e+s);t.attribute("mask").value=c};this.render=function(){}},n.Element.mask.prototype=new n.Element.ElementBase,n.Element.clipPath=function(t){this.base=n.Element.ElementBase;this.base(t);this.apply=function(n){for(var t=0;t<this.children.length;t++)this.children[t].path&&(this.children[t].path(n),n.clip())};this.render=function(){}},n.Element.clipPath.prototype=new n.Element.ElementBase,n.Element.filter=function(t){this.base=n.Element.ElementBase;this.base(t);this.apply=function(n,t){var e=t.getBoundingBox(),o=this.attribute("x").toPixels("x"),s=this.attribute("y").toPixels("y"),i,r,a,c,l;"image"!=t.type&&0!=o&&0!=s||(o=e.x1,s=e.y1);i=this.attribute("width").toPixels("x");r=this.attribute("height").toPixels("y");"image"!=t.type&&0!=i&&0!=r||(i=e.width(),r=e.height());a=t.style("filter").value;t.style("filter").value="";var v="image"==t.type?0:.2,u=v*i,f=v*r,h=document.createElement("canvas");for(h.width=i+2*u,h.height=r+2*f,c=h.getContext("2d"),c.translate(-o+u,-s+f),t.render(c),l=0;l<this.children.length;l++)this.children[l].apply(c,0,0,i+2*u,r+2*f);n.drawImage(h,0,0,i+2*u,r+2*f,o-u,s-f,i+2*u,r+2*f);t.style("filter",!0).value=a};this.render=function(){}},n.Element.filter.prototype=new n.Element.ElementBase,n.Element.feColorMatrix=function(t){function i(n,t,i,r,u,f){return n[i*r*4+4*t+f]}function r(n,t,i,r,u,f,e){n[i*r*4+4*t+f]=e}this.base=n.Element.ElementBase;this.base(t);this.apply=function(n,t,u,f,e){for(var t,o=n.getImageData(0,0,f,e),u=0;u<e;u++)for(t=0;t<f;t++){var h=i(o.data,t,u,f,e,0),c=i(o.data,t,u,f,e,1),l=i(o.data,t,u,f,e,2),s=(h+c+l)/3;r(o.data,t,u,f,e,0,s);r(o.data,t,u,f,e,1,s);r(o.data,t,u,f,e,2,s)}n.clearRect(0,0,f,e);n.putImageData(o,0,0)}},n.Element.filter.prototype=new n.Element.feColorMatrix,n.Element.feGaussianBlur=function(t){function u(n){var i,t;for(n=Math.max(n,.01),i=Math.ceil(4*n)+1,mask=[],t=0;t<i;t++)mask[t]=Math.exp(-.5*(t/n)*(t/n));return mask}function f(n){for(var i=0,t=1;t<n.length;t++)i+=Math.abs(n[t]);for(i=2*i+Math.abs(n[0]),t=0;t<n.length;t++)n[t]/=i;return n}function r(n,t,r,u,f){for(var s,l,h,y,c,a,v,o=0;o<f;o++)for(s=0;s<u;s++)for(l=i(n,s,o,u,f,3)/255,h=0;h<4;h++){for(y=r[0]*(0==l?255:i(n,s,o,u,f,h))*(0==l||3==h?1:l),c=1;c<r.length;c++)a=i(n,Math.max(s-c,0),o,u,f,3)/255,v=i(n,Math.min(s+c,u-1),o,u,f,3)/255,y+=r[c]*((0==a?255:i(n,Math.max(s-c,0),o,u,f,h))*(0==a||3==h?1:a)+(0==v?255:i(n,Math.min(s+c,u-1),o,u,f,h))*(0==v||3==h?1:v));e(t,o,s,f,u,h,y)}}function i(n,t,i,r,u,f){return n[i*r*4+4*t+f]}function e(n,t,i,r,u,f,e){n[i*r*4+4*t+f]=e}function o(n,t,i,e){var s=n.getImageData(0,0,t,i),o=u(e);o=f(o);tmp=[];r(s.data,tmp,o,t,i);r(tmp,s.data,o,i,t);n.clearRect(0,0,t,i);n.putImageData(s,0,0)}this.base=n.Element.ElementBase;this.base(t);this.apply=function(n,t,i,r,u){o(n,r,u,this.attribute("stdDeviation").numValue())}},n.Element.filter.prototype=new n.Element.feGaussianBlur,n.Element.title=function(){},n.Element.title.prototype=new n.Element.ElementBase,n.Element.desc=function(){},n.Element.desc.prototype=new n.Element.ElementBase,n.Element.MISSING=function(n){console&&console.log("ERROR: Element '"+n.nodeName+"' not yet implemented.")},n.Element.MISSING.prototype=new n.Element.ElementBase,n.CreateElement=function(t){var i=t.nodeName.replace(/^[^:]+:/,""),r;return i=i.replace(/\-/g,""),r=null,r="undefined"!=typeof n.Element[i]?new n.Element[i](t):new n.Element.MISSING(t),r.type=t.nodeName,r},n.load=function(t,i){n.loadXml(t,n.ajax(i))},n.loadXml=function(t,i){n.loadXmlDoc(t,n.parseXml(i))},n.loadXmlDoc=function(t,i){var u,r;n.init(t);u=function(n){for(var i=t.canvas;i;)n.x-=i.offsetLeft,n.y-=i.offsetTop,i=i.offsetParent;return window.scrollX&&(n.x+=window.scrollX),window.scrollY&&(n.y+=window.scrollY),n};1!=n.opts.ignoreMouse&&(t.canvas.onclick=function(t){var i=u(new n.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));n.Mouse.onclick(i.x,i.y)},t.canvas.onmousemove=function(t){var i=u(new n.Point(null!=t?t.clientX:event.clientX,null!=t?t.clientY:event.clientY));n.Mouse.onmousemove(i.x,i.y)});r=n.CreateElement(i.documentElement);r.root=!0;var e=!0,o=function(){var i,u;if(n.ViewPort.Clear(),t.canvas.parentNode&&n.ViewPort.SetCurrent(t.canvas.parentNode.clientWidth,t.canvas.parentNode.clientHeight),1!=n.opts.ignoreDimensions&&(r.style("width").hasValue()&&(t.canvas.width=r.style("width").toPixels("x"),t.canvas.style.width=t.canvas.width+"px"),r.style("height").hasValue()&&(t.canvas.height=r.style("height").toPixels("y"),t.canvas.style.height=t.canvas.height+"px")),i=t.canvas.clientWidth||t.canvas.width,u=t.canvas.clientHeight||t.canvas.height,1==n.opts.ignoreDimensions&&r.style("width").hasValue()&&r.style("height").hasValue()&&(i=r.style("width").toPixels("x"),u=r.style("height").toPixels("y")),n.ViewPort.SetCurrent(i,u),null!=n.opts.offsetX&&(r.attribute("x",!0).value=n.opts.offsetX),null!=n.opts.offsetY&&(r.attribute("y",!0).value=n.opts.offsetY),null!=n.opts.scaleWidth&&null!=n.opts.scaleHeight){var o=1,s=1,f=n.ToNumberArray(r.attribute("viewBox").value);r.attribute("width").hasValue()?o=r.attribute("width").toPixels("x")/n.opts.scaleWidth:isNaN(f[2])||(o=f[2]/n.opts.scaleWidth);r.attribute("height").hasValue()?s=r.attribute("height").toPixels("y")/n.opts.scaleHeight:isNaN(f[3])||(s=f[3]/n.opts.scaleHeight);r.attribute("width",!0).value=n.opts.scaleWidth;r.attribute("height",!0).value=n.opts.scaleHeight;r.attribute("viewBox",!0).value="0 0 "+i*o+" "+u*s;r.attribute("preserveAspectRatio",!0).value="none"}1!=n.opts.ignoreClear&&t.clearRect(0,0,i,u);r.render(t);e&&(e=!1,"function"==typeof n.opts.renderCallback&&n.opts.renderCallback())},f=!0;n.ImagesLoaded()&&(f=!1,o());n.intervalID=setInterval(function(){var t=!1,i;if(f&&n.ImagesLoaded()&&(f=!1,t=!0),1!=n.opts.ignoreMouse&&(t|=n.Mouse.hasEvents()),1!=n.opts.ignoreAnimation)for(i=0;i<n.Animations.length;i++)t|=n.Animations[i].update(1e3/n.FRAMERATE);"function"==typeof n.opts.forceRedraw&&1==n.opts.forceRedraw()&&(t=!0);t&&(o(),n.Mouse.runEvents())},1e3/n.FRAMERATE)},n.stop=function(){n.intervalID&&clearInterval(n.intervalID)},n.Mouse=new function(){this.events=[];this.hasEvents=function(){return 0!=this.events.length};this.onclick=function(n,t){this.events.push({type:"onclick",x:n,y:t,run:function(n){n.onclick&&n.onclick()}})};this.onmousemove=function(n,t){this.events.push({type:"onmousemove",x:n,y:t,run:function(n){n.onmousemove&&n.onmousemove()}})};this.eventElements=[];this.checkPath=function(n,t){for(var r,i=0;i<this.events.length;i++)r=this.events[i],t.isPointInPath&&t.isPointInPath(r.x,r.y)&&(this.eventElements[i]=n)};this.checkBoundingBox=function(n,t){for(var r,i=0;i<this.events.length;i++)r=this.events[i],t.isPointInBox(r.x,r.y)&&(this.eventElements[i]=n)};this.runEvents=function(){var t,r,i;for(n.ctx.canvas.style.cursor="",t=0;t<this.events.length;t++)for(r=this.events[t],i=this.eventElements[t];i;)r.run(i),i=i.parent;this.events=[];this.eventElements=[]}},n}this.canvg=function(t,i,r){var f,o,h,s,u,e,c;if(null!=t||null!=i||null!=r)r=r||{},"string"==typeof t&&(t=document.getElementById(t)),null!=t.svg&&t.svg.stop(),f=n(),1==t.childNodes.length&&"OBJECT"==t.childNodes[0].nodeName||(t.svg=f),f.opts=r,o=t.getContext("2d"),"undefined"!=typeof i.documentElement?f.loadXmlDoc(o,i):"<"==i.substr(0,1)?f.loadXml(o,i):f.load(o,i);else for(h=document.getElementsByTagName("svg"),s=0;s<h.length;s++)u=h[s],e=document.createElement("canvas"),e.width=u.clientWidth,e.height=u.clientHeight,u.parentNode.insertBefore(e,u),u.parentNode.removeChild(u),c=document.createElement("div"),c.appendChild(u),canvg(e,c.innerHTML)}}();window.CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(n,t,i,r,u){canvg(this.canvas,n,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:t,offsetY:i,scaleWidth:r,scaleHeight:u})}),function(n,t){var i,g,nt,tt,it,r,h,v,c,rt,y,f,u,p,e,l,w,b,ut,k,o,a,d,s;i=function(n){return new i.prototype.init(n)};"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=i:n.Globalize=i;i.cultures={};i.prototype={constructor:i,init:function(n){return this.cultures=i.cultures,this.cultureSelector=n,this}};i.prototype.init.prototype=i.prototype;i.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};i.cultures["default"].calendar=i.cultures["default"].calendars.standard;i.cultures.en=i.cultures["default"];i.cultureSelector="en";g=/^0x[a-f0-9]+$/i;nt=/^[+\-]?infinity$/i;tt=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;it=/^\s+|\s+$/g;r=function(n,t){if(n.indexOf)return n.indexOf(t);for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1};h=function(n,t){return n.substr(n.length-t.length)===t};v=function(){var e,u,r,i,o,s,n=arguments[0]||{},f=1,l=arguments.length,h=!1;for("boolean"==typeof n&&(h=n,n=arguments[1]||{},f=2),"object"==typeof n||rt(n)||(n={});f<l;f++)if(null!=(e=arguments[f]))for(u in e)r=n[u],i=e[u],n!==i&&(h&&i&&(y(i)||(o=c(i)))?(o?(o=!1,s=r&&c(r)?r:[]):s=r&&y(r)?r:{},n[u]=v(h,s,i)):i!==t&&(n[u]=i));return n};c=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};rt=function(n){return"[object Function]"===Object.prototype.toString.call(n)};y=function(n){return"[object Object]"===Object.prototype.toString.call(n)};f=function(n,t){return 0===n.indexOf(t)};u=function(n){return(n+"").replace(it,"")};p=function(n){return isNaN(n)?NaN:Math[n<0?"ceil":"floor"](n)};e=function(n,t,i){for(var r=n.length;r<t;r+=1)n=i?"0"+n:n+"0";return n};l=function(n,t){for(var u,f=0,i=!1,r=0,e=n.length;r<e;r++){u=n.charAt(r);switch(u){case"'":i?t.push("'"):f++;i=!1;break;case"\\":i&&t.push("\\");i=!i;break;default:t.push(u);i=!1}}return f};w=function(n,t){t=t||"F";var i,u=n.patterns,r=t.length;if(1===r){if(i=u[t],!i)throw"Invalid date format string '"+t+"'.";t=i}else 2===r&&"%"===t.charAt(0)&&(t=t.charAt(1));return t};b=function(n,t,i){function e(n,t){var i,r=n+"";return t>1&&r.length<t?(i=ht[t-2]+r,i.substr(i.length-t,t)):i=r}function st(){return c||ut?c:(c=ct.test(t),ut=!0,c)}function d(n,t){if(v)return v[t];switch(t){case 0:return n.getFullYear();case 1:return n.getMonth();case 2:return n.getDate();default:throw"Invalid part value "+t;}}var r,u=i.calendar,g=u.convert,nt,rt,tt,it,p,f,ot,h;if(!t||!t.length||"i"===t)return i&&i.name.length?g?r=b(n,u.patterns.F,i):(nt=new Date(n.getTime()),rt=o(n,u.eras),nt.setFullYear(a(n,u,rt)),r=nt.toLocaleString()):r=n.toString(),r;tt=u.eras;it="s"===t;t=w(u,t);r=[];var s,c,ut,v,ht=["0","00","000"],ct=/([^d]|^)(d|dd)([^d]|$)/g,ft=0,et=k();for(!it&&g&&(v=g.fromGregorian(n));;){var lt=et.lastIndex,y=et.exec(t),at=t.slice(lt,y?y.index:t.length);if(ft+=l(at,r),!y)break;if(ft%2)r.push(y[0]);else{p=y[0];f=p.length;switch(p){case"ddd":case"dddd":ot=3===f?u.days.namesAbbr:u.days.names;r.push(ot[n.getDay()]);break;case"d":case"dd":c=!0;r.push(e(d(n,2),f));break;case"MMM":case"MMMM":h=d(n,1);r.push(u.monthsGenitive&&st()?u.monthsGenitive[3===f?"namesAbbr":"names"][h]:u.months[3===f?"namesAbbr":"names"][h]);break;case"M":case"MM":r.push(e(d(n,1)+1,f));break;case"y":case"yy":case"yyyy":h=v?v[0]:a(n,u,o(n,tt),it);f<4&&(h%=100);r.push(e(h,f));break;case"h":case"hh":s=n.getHours()%12;0===s&&(s=12);r.push(e(s,f));break;case"H":case"HH":r.push(e(n.getHours(),f));break;case"m":case"mm":r.push(e(n.getMinutes(),f));break;case"s":case"ss":r.push(e(n.getSeconds(),f));break;case"t":case"tt":h=n.getHours()<12?u.AM?u.AM[0]:" ":u.PM?u.PM[0]:" ";r.push(1===f?h.charAt(0):h);break;case"f":case"ff":case"fff":r.push(e(n.getMilliseconds(),3).substr(0,f));break;case"z":case"zz":s=n.getTimezoneOffset()/60;r.push((s<=0?"+":"-")+e(Math.floor(Math.abs(s)),f));break;case"zzz":s=n.getTimezoneOffset()/60;r.push((s<=0?"+":"-")+e(Math.floor(Math.abs(s)),2)+":"+e(Math.abs(n.getTimezoneOffset()%60),2));break;case"g":case"gg":u.eras&&r.push(u.eras[o(n,tt)].name);break;case"/":r.push(u["/"]);break;default:throw"Invalid date format pattern '"+p+"'.";}}}return r.join("")},function(){var n;n=function(n,t,i){var l=i.groupSizes,c=l[0],a=1,p=Math.pow(10,t),v=Math.round(n*p)/p;isFinite(v)||(v=n);n=v;var r=n+"",u="",o=r.split(/e/i),f=o.length>1?parseInt(o[1],10):0;r=o[0];o=r.split(".");r=o[0];u=o.length>1?o[1]:"";f>0?(u=e(u,f,!1),r+=u.slice(0,f),u=u.substr(f)):f<0&&(f=-f,r=e(r,f+1,!0),u=r.slice(-f,r.length)+u,r=r.slice(0,-f));u=t>0?i["."]+(u.length>t?u.slice(0,t):e(u,t)):"";for(var s=r.length-1,y=i[","],h="";s>=0;){if(0===c||c>s)return r.slice(0,s+1)+(h.length?y+h+u:u);h=r.slice(s-c+1,s+1)+(h.length?y+h:"");s-=c;a<l.length&&(c=l[a],a++)}return r.slice(0,s+1)+y+h+u};ut=function(t,i,r){var f,a,v,o,y,l;if(!isFinite(t))return t===1/0?r.numberFormat.positiveInfinity:t===-(1/0)?r.numberFormat.negativeInfinity:r.numberFormat.NaN;if(!i||"i"===i)return r.name.length?t.toLocaleString():t.toString();i=i||"D";var c,s=r.numberFormat,u=Math.abs(t),h=-1;i.length>1&&(h=parseInt(i.slice(1),10));a=i.charAt(0).toUpperCase();switch(a){case"D":c="n";u=p(u);h!==-1&&(u=e(""+u,h,!0));t<0&&(u="-"+u);break;case"N":f=s;case"C":f=f||s.currency;case"P":f=f||s.percent;c=t<0?f.pattern[0]:f.pattern[1]||"n";h===-1&&(h=f.decimals);u=n(u*("P"===a?100:1),h,f);break;default:throw"Bad number format specifier: "+a;}for(v=/n|\$|-|%/g,o="";;){if(y=v.lastIndex,l=v.exec(c),o+=c.slice(y,l?l.index:c.length),!l)break;switch(l[0]){case"n":o+=u;break;case"$":o+=s.currency.symbol;break;case"-":/[1-9]/.test(u)&&(o+=s["-"]);break;case"%":o+=s.percent.symbol}}return o}}();k=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};o=function(n,t){if(!t)return 0;for(var r,u=n.getTime(),i=0,f=t.length;i<f;i++)if(r=t[i].start,null===r||u>=r)return i;return 0};a=function(n,t,i,r){var u=n.getFullYear();return!r&&t.eras&&(u-=t.eras[i].offset),u},function(){var e,s,h,c,n,i,t;e=function(n,t){if(t<100){var r=new Date,f=o(r),u=a(r,n,f),i=n.twoDigitYearMax;i="string"==typeof i?(new Date).getFullYear()%100+parseInt(i,10):i;t+=u-u%100;t>i&&(t-=100)}return t};s=function(n,u,f){var e,s=n.days,o=n._upperDays;return o||(n._upperDays=o=[t(s.names),t(s.namesAbbr),t(s.namesShort)]),u=i(u),f?(e=r(o[1],u),e===-1&&(e=r(o[2],u))):e=r(o[0],u),e};h=function(n,u,f){var h=n.months,c=n.monthsGenitive||n.months,e=n._upperMonths,s=n._upperMonthsGen,o;return e||(n._upperMonths=e=[t(h.names),t(h.namesAbbr)],n._upperMonthsGen=s=[t(c.names),t(c.namesAbbr)]),u=i(u),o=r(f?e[1]:e[0],u),o<0&&(o=r(f?s[1]:s[0],u)),o};c=function(n,t){var f=n._parseRegExp,o,y,i,e,p,b,d;if(f){if(o=f[t],o)return o}else n._parseRegExp=f={};for(var u,s=w(n,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),r=["^"],c=[],h=0,a=0,v=k();null!==(u=v.exec(s));)if(y=s.slice(h,u.index),h=v.lastIndex,a+=l(y,r),a%2)r.push(u[0]);else{e=u[0];p=e.length;switch(e){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":i="(\\D+)";break;case"tt":case"t":i="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":i="(\\d{"+p+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":i="(\\d\\d?)";break;case"zzz":i="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":i="([+-]?\\d\\d?)";break;case"/":i="(\\/)";break;default:throw"Invalid date format pattern '"+e+"'.";}i&&r.push(i);c.push(u[0])}return l(s.slice(h),r),r.push("$"),b=r.join("").replace(/\s+/g,"\\s+"),d={regExp:b,groups:c},f[t]=d};n=function(n,t,i){return n<t||n>i};i=function(n){return n.split(" ").join(" ").toUpperCase()};t=function(n){for(var r=[],t=0,u=n.length;t<u;t++)r[t]=i(n[t]);return r};d=function(t,i,r){var l,ft,et,d,g,bt,kt,a,nt,at;t=u(t);var o=r.calendar,vt=c(o,i),yt=new RegExp(vt.regExp).exec(t);if(null===yt)return null;for(var k,pt=vt.groups,ot=null,w=null,p=null,b=null,tt=null,y=0,st=0,ht=0,ct=0,it=null,lt=!1,rt=0,dt=pt.length;rt<dt;rt++)if(l=yt[rt+1],l){var wt=pt[rt],ut=wt.length,v=parseInt(l,10);switch(wt){case"dd":case"d":if(b=v,n(b,1,31))return null;break;case"MMM":case"MMMM":if(p=h(o,l,3===ut),n(p,0,11))return null;break;case"M":case"MM":if(p=v-1,n(p,0,11))return null;break;case"y":case"yy":case"yyyy":if(w=ut<4?e(o,v):v,n(w,0,9999))return null;break;case"h":case"hh":if(y=v,12===y&&(y=0),n(y,0,11))return null;break;case"H":case"HH":if(y=v,n(y,0,23))return null;break;case"m":case"mm":if(st=v,n(st,0,59))return null;break;case"s":case"ss":if(ht=v,n(ht,0,59))return null;break;case"tt":case"t":if(lt=o.PM&&(l===o.PM[0]||l===o.PM[1]||l===o.PM[2]),!lt&&(!o.AM||l!==o.AM[0]&&l!==o.AM[1]&&l!==o.AM[2]))return null;break;case"f":case"ff":case"fff":if(ct=v*Math.pow(10,3-ut),n(ct,0,999))return null;break;case"ddd":case"dddd":if(tt=s(o,l,3===ut),n(tt,0,6))return null;break;case"zzz":if((ft=l.split(/:/),2!==ft.length)||(k=parseInt(ft[0],10),n(k,-12,13))||(et=parseInt(ft[1],10),n(et,0,59)))return null;it=60*k+(f(l,"-")?-et:et);break;case"z":case"zz":if(k=v,n(k,-12,13))return null;it=60*k;break;case"g":case"gg":if(d=l,!d||!o.eras)return null;for(d=u(d.toLowerCase()),g=0,bt=o.eras.length;g<bt;g++)if(d===o.eras[g].name.toLowerCase()){ot=g;break}if(null===ot)return null}}if(a=new Date,nt=o.convert,kt=nt?nt.fromGregorian(a)[0]:a.getFullYear(),null===w?w=kt:o.eras&&(w+=o.eras[ot||0].offset),null===p&&(p=0),null===b&&(b=1),nt){if(a=nt.toGregorian(w,p,b),null===a)return null}else if((a.setFullYear(w,p,b),a.getDate()!==b)||null!==tt&&a.getDay()!==tt)return null;return(lt&&y<12&&(y+=12),a.setHours(y,st,ht,ct),null!==it)&&(at=a.getMinutes()-(it+a.getTimezoneOffset()),a.setHours(a.getHours()+parseInt(at/60,10),at%60)),a}}();s=function(n,t,i){var e,r=t["-"],u=t["+"];switch(i){case"n -":r=" "+r;u=" "+u;case"n-":h(n,r)?e=["-",n.substr(0,n.length-r.length)]:h(n,u)&&(e=["+",n.substr(0,n.length-u.length)]);break;case"- n":r+=" ";u+=" ";case"-n":f(n,r)?e=["-",n.substr(r.length)]:f(n,u)&&(e=["+",n.substr(u.length)]);break;case"(n)":f(n,"(")&&h(n,")")&&(e=["-",n.substr(1,n.length-2)])}return e||["",n]};i.prototype.findClosestCulture=function(n){return i.findClosestCulture.call(this,n)};i.prototype.format=function(n,t,r){return i.format.call(this,n,t,r)};i.prototype.localize=function(n,t){return i.localize.call(this,n,t)};i.prototype.parseInt=function(n,t,r){return i.parseInt.call(this,n,t,r)};i.prototype.parseFloat=function(n,t,r){return i.parseFloat.call(this,n,t,r)};i.prototype.culture=function(n){return i.culture.call(this,n)};i.addCultureInfo=function(n,t,i){var r={},u=!1;"string"!=typeof n?(i=n,n=this.culture().name,r=this.cultures[n]):"string"!=typeof t?(i=t,u=null==this.cultures[n],r=this.cultures[n]||this.cultures["default"]):(u=!0,r=this.cultures[t]);this.cultures[n]=v(!0,{},r,i);u&&(this.cultures[n].calendar=this.cultures[n].calendars.standard)};i.findClosestCulture=function(n){var f,r,h,l,y,a;if(!n)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];if("string"==typeof n&&(n=n.split(",")),c(n)){for(var i,o=this.cultures,v=n,s=v.length,e=[],t=0;t<s;t++)n=u(v[t]),h=n.split(";"),i=u(h[0]),1===h.length?r=1:(n=u(h[1]),0===n.indexOf("q=")?(n=n.substr(2),r=parseFloat(n),r=isNaN(r)?0:r):r=1),e.push({lang:i,pri:r});for(e.sort(function(n,t){return n.pri<t.pri?1:n.pri>t.pri?-1:0}),t=0;t<s;t++)if(i=e[t].lang,f=o[i])return f;for(t=0;t<s;t++)for(i=e[t].lang;;){if(l=i.lastIndexOf("-"),l===-1)break;if(i=i.substr(0,l),f=o[i])return f}for(t=0;t<s;t++){i=e[t].lang;for(y in o)if(a=o[y],a.language==i)return a}}else if("object"==typeof n)return n;return f||null};i.format=function(n,t,i){var r=this.findClosestCulture(i);return n instanceof Date?n=b(n,t,r):"number"==typeof n&&(n=ut(n,t,r)),n};i.localize=function(n,t){return this.findClosestCulture(t).messages[n]||this.cultures["default"].messages[n]};i.parseDate=function(n,t,i){var u,o,f,r,s,e;if(i=this.findClosestCulture(i),t){if("string"==typeof t&&(t=[t]),t.length)for(r=0,s=t.length;r<s;r++)if(e=t[r],e&&(u=d(n,e,i)))break}else{f=i.calendar.patterns;for(o in f)if(u=d(n,f[o],i))break}return u||null};i.parseInt=function(n,t,r){return p(i.parseFloat(n,t,r))};i.parseFloat=function(n,t,i){var y,c,l,h,p,k,w,b,d,a,it;"number"!=typeof t&&(i=t,t=10);var f=this.findClosestCulture(i),v=NaN,r=f.numberFormat;if(n.indexOf(f.numberFormat.currency.symbol)>-1&&(n=n.replace(f.numberFormat.currency.symbol,""),n=n.replace(f.numberFormat.currency["."],f.numberFormat["."])),n.indexOf(f.numberFormat.percent.symbol)>-1&&(n=n.replace(f.numberFormat.percent.symbol,"")),n=n.replace(/ /g,""),nt.test(n))v=parseFloat(n);else if(!t&&g.test(n))v=parseInt(n,16);else{var u=s(n,r,r.pattern[0]),e=u[0],o=u[1];""===e&&"(n)"!==r.pattern[0]&&(u=s(n,r,"(n)"),e=u[0],o=u[1]);""===e&&"-n"!==r.pattern[0]&&(u=s(n,r,"-n"),e=u[0],o=u[1]);e=e||"+";l=o.indexOf("e");l<0&&(l=o.indexOf("E"));l<0?(c=o,y=null):(c=o.substr(0,l),y=o.substr(l+1));k=r["."];w=c.indexOf(k);w<0?(h=c,p=null):(h=c.substr(0,w),p=c.substr(w+k.length));b=r[","];h=h.split(b).join("");d=b.replace(/\u00A0/g," ");b!==d&&(h=h.split(d).join(""));a=e+h;(null!==p&&(a+="."+p),null!==y)&&(it=s(y,r,"-n"),a+="e"+(it[0]||"+")+it[1]);tt.test(a)&&(v=parseFloat(a))}return v};i.culture=function(n){return"undefined"!=typeof n&&(this.cultureSelector=n),this.findClosestCulture(n)||this.cultures["default"]}}(this),function(n,t,i){function kt(n){var t,i="";n=Math.abs(n);do t=n%26,i=String.fromCharCode(t+97)+i,n=(n-t)/26;while(n>0);return i}function dt(){return ht+kt(si++)}function it(){return hi++}function gt(){var n=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return n()+n()+"-"+n()+"-4"+n().substr(0,3)+"-"+[8,9,"a","b"][Math.floor(4*Math.random())]+n().substr(0,3)+"-"+n()+n()+n()}function ni(n,t){return typeof Globalize===o&&typeof Globalize.format===o?Globalize.parseDate(n,t):new Date(n)}function ti(n){var t;return t=r.defined(n)&&typeof Globalize===o&&typeof Globalize.parseFloat===o?Globalize.parseFloat(n):Number(n),isNaN(t)?null:t}function rt(n){if(!r.defined(n)||""===n)return"";var t=arguments,i=t&&t.length>1&&typeof t[1]===b,u=typeof Globalize===o&&typeof Globalize.format===o;return n.replace(/\{([\.\d\w\:\-\/\' \[\]]+)\}/g,function(n,r){var f,e,o=r.indexOf(":"),s;return o>0&&(s=r,r=s.substring(0,o),e=s.substring(o+1)),f=i?/^\d+$/.test(r)?t[parseInt(r,10)+1]:ft(t[1],r):t[parseInt(r,10)+1],e&&u&&(f=Globalize.format(f,e)),f})}function d(n){if(r.func(n)){var t=[].slice.call(arguments);return t.shift(),n.apply(this,t)}return rt.apply(this,arguments)}function ii(){return typeof Globalize===o&&Globalize.cultures&&Globalize.cultures[Globalize.cultureSelector]&&Globalize.cultures[Globalize.cultureSelector].calendar?Globalize.cultures[Globalize.cultureSelector].calendar:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},firstDay:0,months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]}}}function ri(){return typeof Globalize===o&&Globalize.cultures&&Globalize.cultures[Globalize.cultureSelector]&&Globalize.cultures[Globalize.cultureSelector].numberFormat?Globalize.cultures[Globalize.cultureSelector].numberFormat.currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}}function ui(n,r){if(r=r!==i?r:l.dieOnError)throw new Error(n);t.console&&(t.console.error?console.error(n):console.log(n))}function f(n){var t=Object.prototype.toString.call(n);return null===n?"null":n===i?"undefined":t.substr(8,t.length-9).toLowerCase()}function g(t){var o,s,e,h,u,l=Array.apply(null,arguments),a=r.array(t)&&t.length&&!w(t,function(n){return!r.func(n)}).length,f=l[1],v=function(n,t){return n instanceof t};if(!a)return c.apply(n,l);for(r.object(f)||r.array(f)||(f={}),s=2;s<l.length;s++)if(o=l[s])for(e in o)o.hasOwnProperty(e)&&(u=o[e],h=f[e],u&&w(t,st(v,null,u)).length?f[e]=u:r.object(u)||r.array(u)?(r.object(h)||(h=f[e]=r.array(u)?[]:{}),f[e]=g(t,h,u)):r.date(u)?f[e]=new Date(u.getTime()):u!==i&&(f[e]=u));return f}function ut(n){var t,i=[];for(t in n)n.hasOwnProperty(t)&&i.push(t);return i}function ft(n,t){var i;if(!r.string(t))throw new Error("shield.get: parameter 'path' must be a string.");if(t=et(t),i=pt[t])return i(n);try{i=new Function("a","try{return a"+t+"}catch(e){return arguments[1];}")}catch(u){throw new Error("shield.get: invalid 'path' parameter");}return pt[t]=i,i(n)}function fi(n,t,i){var u;if(!r.string(t))throw new Error("shield.set: parameter 'path' must be a string");if(t=et(t),u=wt[t])return u(n,i);try{u=new Function("obj,val","obj"+t+"=val;")}catch(f){throw new Error("shield.set: invalid 'path' parameter");}return wt[t]=u,u(n,i),n}function et(n){for(var u,t,f,r=n.split("."),i=0,e=r.length;i<e;i++)t=r[i],u=t.indexOf("["),t&&(u<0?(f=t.indexOf("'")<0?"'":'"',t=r[i]="["+f+t+f+"]"):u>0&&(t=r[i]="."+t));return r.join("")}function ot(t,i){for(var u,f=[],e=n(t).length,o=i?y+"-"+i:y,r=0;r<e;r++)u=n(n(t)[r]).data(o),u&&f.push(u);return f}function ei(t,r){l.ui[t]=r;n.fn[ht+t]=function(u){var f,e=this;return typeof u===ct?(f=[].slice.call(arguments,1),this.each(function(){var r,s,h=n(this).data(y);if(!h)throw new Error(d("shield: cannot call method '{0}' on uninitialized {1}.",u,t));if(r=h[u],typeof r!==o)throw new Error(d("shield: cannot find method '{0}' of {1}",u,t));if(s=r.apply(h,f),s!==i)return e=s,!1}),e):this.each(function(){var i=new r(this,u);n(this).data(y,i);n(this).data(y+"-"+t,i)})}}function s(n){n?e.onselectstart==s.handler&&(e.onselectstart=s.onselectstart,e.ondragstart=s.ondragstart):e.onselectstart!=s.handler&&(s.onselectstart=e.onselectstart,s.ondragstart=e.ondragstart,e.onselectstart=e.ondragstart=s.handler)}var l=t.shield=t.shield||{},c=n.extend,w=n.grep,st=n.proxy,u=navigator.userAgent,e=document,ht="shield",y="shieldWidget",b="object",ct="string",o="function",nt="array",tt="number",lt="date",oi="boolean",at="null",vt="undefined",yt="sui-vc-top",k=function(){},si=100,hi=1e3,h={},pt={},wt={},p=function(){},r,v;p.extend=function(n){var e,i,t,o,u=this,r=n&&n.init?n.init:function(){u.apply(this,arguments)},s=function(){};s.prototype=u.prototype;e=r.fn=r.prototype=new s;for(i in n)n.hasOwnProperty(i)&&(t=n[i],o=f(t),e[i]=t&&typeof t===b?c(!0,o===nt?[]:{},u.prototype[i],t):t);return e.constructor=r,r.extend=u.extend,r};Date.prototype.toISOString||!function(){function n(n){var t=String(n);return 1===t.length&&(t="0"+t),t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}();var a=p.extend({init:function(n){var t,r=this,i=(n||{}).events;r.events={};n=n||{};for(t in i)typeof i[t]===o&&r.on(t,i[t])},on:function(n,t,i){var s,u,f,c,h,e=this,l=e.events,o=v.array(n),a=r.func(t);if(r.object(n)){o=[];for(h in n)n.hasOwnProperty(h)&&o.push(h);a=!1;t=n}for(f=0,c=o.length;f<c;f++)n=o[f],s=e._eventType(n),u=a?t:t[n],r.func(u)&&(i&&(u=e._one(n,u)),(l[s]||(l[s]=[])).push({name:n,handler:u}));return e},_one:function(n,t){var r=this,i=function(){r.off(n,i);t.apply(this,arguments)};return i},_eventType:function(n){var t=(n+="").indexOf(".");return t>-1?n.substring(0,t):n},_eventNameMatch:function(t,i){var f,u,o,e,h=this,c=h._eventType(t),s=h._eventType(i);if(t+="",i+="",(c===s||!s)&&(f=t.split("."),f.shift(),f=w(f,function(n){return r.string(n)&&n.length>0}),u=i.split("."),s&&u.shift(),u=w(u,function(n){return r.string(n)&&n.length>0}),f&&u)){for(o=0,e=0;e<u.length;e++)n.inArray(u[e],f)>-1&&o++;return o>=u.length}return!1},one:function(n,t){this.on(n,t,!0)},off:function(n,t){var e,u,o,c,f,a,h=this,s=h.events,l=v.array(n),y=r.func(t);if(r.object(n)){l=[];for(a in n)n.hasOwnProperty(a)&&l.push(a);y=!1;t=n}if(r.string(n)&&0===n.indexOf(".")){for(e in s)if(s.hasOwnProperty(e)){for(u=s[e]||[],o=y?t:t||i,f=u.length-1;f>=0;f--)!h._eventNameMatch(u[f].name,n)||r.defined(o)&&u[f].handler!==o||u.splice(f,1);u.length||delete s[e]}}else for(c=0;c<l.length;c++){for(n=l[c],e=h._eventType(n),u=s[e]||[],o=y?t:(t||{})[n],f=u.length-1;f>=0;f--)!h._eventNameMatch(u[f].name,n)||r.defined(o)&&u[f].handler!==o||u.splice(f,1);u.length||delete s[e]}return h},trigger:function(n,t){for(var r=this,e=r._eventType(n),f=(r.events[e]||[]).slice(),i=0,u=f.length;i<u;i++)f[i].handler.apply(r,[].slice.call(arguments,1));return t},destroy:function(){this.events={}}}),bt=p.extend({init:function(n){var t=!1,i=!1;c(this,{timeStamp:(new Date).getTime(),isDefaultPrevented:function(){return t},isPropagationStopped:function(){return i},preventDefault:function(){t=!0},stopPropagation:function(){i=!0}},n)}}),ci=a.extend({init:function(t,i){var r=this,u=r.constructor;i=i||{};r.element=n(t);r.initialOptions=i;r.options=c(!0,{},u.defaults,(u.themes||{})[i.theme],i);r._iid=it();a.fn.init.call(r,i)},getInstanceId:function(){return this._iid},refresh:function(n){this.refreshWithElement(this.element,n)},refreshWithElement:function(n,t){var i=this,r=g([p],i.options,t);i.destroy();i.init(n,r)},hide:function(){n(this.element).hide()},show:function(){n(this.element).show()},isVisible:function(){return n(this.element).is(":visible")},visible:function(){var n=this,t=[].slice.call(arguments);return t.length>0?void(t[0]?n.show():n.hide()):n.isVisible()},focus:function(){n(this.element).focus()},trigger:function(t,i,u){var f,e=this;return i=r.event(i)?{domEvent:i}:i,!i||!i.domEvent||i.domEvent instanceof n.Event||(i.domEvent=n.Event(i.domEvent)),f=new bt(c({type:t,target:e},i)),a.fn.trigger.call(e,t,f),typeof u!==o||f.isDefaultPrevented()||u.call(e,f),f}}),li=a.extend({options:{total:0,pageBuffer:2,createContainer:k,getItems:k,eventNS:".shieldVirtualized",skipRender:!1},init:function(t,i){var r=this;i=r.options=c({},r.options,i);r.element=n(t);a.fn.init.call(r,i);i.skipRender||r.render()},_elements:function(){var i,u,t=this,f=t.element,r=t.options;i=t.wrapper=f.off(r.eventNS).empty().css({overflow:"auto",position:"relative"}).on("scroll"+r.eventNS,st(t.scroll,t)).append('<div class="sui-virtualized"/>').find(".sui-virtualized").css({position:"relative",overflow:"visible"});u=t.container=n(r.createContainer(i));i.children().css({position:"absolute",top:0});t._positionedContainer=i.children().first()},_dimensions:function(){var i=this,r=i.options,u=r.total,n=r.itemHeight,f=Math.min(u*n,l.support.maxElementHeight),t=i.element.height(),e=Math.ceil(t/n),o=e*n,s=f-t;return{total:u,itemHeight:n,totalHeight:f,viewportHeight:t,itemsPerPage:e,pageHeight:o,totalScrollableHeight:s}},render:function(){var t,n=this,r=n.element,i=n.options;n._elements();n.prevScroll=0;t=n.dimensions=n._dimensions();r.find(".sui-virtualized").height(t.totalHeight);n._renderItems(0,Math.min(i.total,(i.pageBuffer+1)*t.itemsPerPage))},_renderItems:function(n,t,i){var u=this;u.options.getItems(n,t,function(n,t){var f,e=n.length;for(t=!r.defined(t)||!!t,t&&u.container.empty(),f=0;f<e;f++)u.container.append(n[f]);i&&i()})},scroll:function(){var r,e,h,t=this,a=t.options,u=a.pageBuffer,n=t.dimensions,f=t.element.scrollTop(),v=t.prevScroll,c=f-v,o=f/n.totalScrollableHeight,s=t._positionedContainer,l=s.data(yt)||0,i=f-o*(n.pageHeight-n.viewportHeight),y=c>0&&i-l>(u/4+1)*n.pageHeight,p=c<0&&i-l<=u/4*n.pageHeight;(p||y)&&(e=Math.min(n.total,Math.floor(o*n.total-o*n.itemsPerPage)),r=Math.max(0,e-u/2*n.itemsPerPage),h=Math.min(n.total,r+(u+1)*n.itemsPerPage),i=Math.max(0,i-(e-r)*n.itemHeight),t._renderItems(r,h,function(){s.css("top",i);s.data(yt,i)}));t.prevScroll=f},scrollTop:function(n){var i=this,t=i.element;return r.defined(n)?void t.scrollTop(n):t.scrollTop()},destroy:function(){var n=this,t=n.options;n.element.off(t.eventNS);n.element=null;t.createContainer=k;t.getItems=k;a.fn.destroy.call(n)}});n.fn.swidget=function(n){var t=ot(this,n);return t.length?t.length>1?t:t[0]:null};n.fn.swidgets=function(n){return ot(this,n)};r={string:function(n){return f(n)===ct},number:function(n){return f(n)===tt},integer:function(n){return f(n)===tt&&/^[\+\-]?\d+$/.test(n+"")},float:function(n){return f(n)===tt&&/^[\+\-]?\d+\.\d+$/.test(n+"")},func:function(n){return f(n)===o},object:function(n){return f(n)===b},array:function(n){return f(n)===nt},date:function(n){return f(n)===lt},boolean:function(n){return f(n)===oi},"null":function(n){return f(n)===at},undefined:function(n){return f(n)===vt},defined:function(n){return n!==i&&null!==n},event:function(n){return typeof t.Event==o&&n instanceof t.Event||n&&n.altKey!==i}};v={int:function(n,t){return parseInt(n,t||10)},float:function(n){return parseFloat(n)},number:function(n){return ti(n+"")},array:function(n){return n instanceof Array?n:n!==i?[n]:[]},string:function(n){return n+""},key:function(t){var e,i,r,u,o=f(t);switch(o){case at:case vt:return o;case b:return e=ut(t).sort(),i=[],n.each(e,function(n,r){i.push(r+":"+v.key(t[r]))}),"{"+i.join(",")+"}";case nt:for(i="[",r=0,u=t.length;r<u;r++)i+=v.key(t[r]),r<u-1&&(i+=",");return i+="]";case lt:return t.toISOString();default:return t+""}}};!function(){h.stableSort=function(){var n="abcdefghijklmnopqrstuvwxyz";return"xyzvwtursopqmnklhijfgdeabc"==n.split("").sort(function(t,i){return~~(n.indexOf(i)/2.3)-~~(n.indexOf(t)/2.3)}).join("")}();h.scrollbar=function(){var t,n=e.createElement("div");return n.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both",n.innerHTML="&nbsp;",e.body.appendChild(n),t=n.offsetWidth-n.scrollWidth,e.body.removeChild(n),t};h.isRtl=function(t){return n(t).closest(".sui-rtl").length>0};h.transitions=function(){var n,t=(e.body||e.documentElement).style,i="Transition",u=["Moz","webkit","Webkit","Khtml","O","ms"];if(r.string(t[i.toLowerCase()]))return!0;for(n=0;n<u.length;n++)if(r.string(t[u[n]+i]))return!0;return!1}();h.hasScrollbarY=function(t){var i=n(t).get(0);return i.scrollHeight>i.clientHeight};h.hasScrollbarX=function(t){var i=n(t).get(0);return i.scrollWidth>i.clientWidth}}(),function(){l.rAF=function(n){return(t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(n){return this.setTimeout(n,1e3/60)}).call(t,n)};l.cAF=function(n){return(t.cancelAnimationFrame||t.clearTimeout)(n)}}(),function(){var t=/MSIE/i.test(u),i=/Trident/i.test(u),r=/Firefox/i.test(u),f=/Opera/i.test(u),e=/Safari/i.test(u),n=/Chrome/i.test(u),o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(u);h.browser={ie:t||i,firefox:r,opera:f,safari:!n&&e,chrome:n,mobile:o,version:t?parseInt(u.substr(u.indexOf("MSIE ")+5),10):i?parseInt(u.substr(u.indexOf("rv:")+3),10):r?parseInt(u.substr(u.indexOf("Firefox/")+8),10):f?parseInt(u.substr(u.indexOf("Version/")+8),10):n?parseInt(u.substr(u.indexOf("Chrome/")+7),10):e?parseInt(u.substr(u.indexOf("Version/")+8),10):0}}();n(function(){for(var t,u=1e6,i=n('<div style="display:none;"/>').appendTo(e.body),r=u;;){if(t=r+u,i.css("height",t),t>1e9||i.height()!==t)break;r=t}i.remove();h.maxElementHeight=r});s.handler=function(){return!1};c(l,{Class:p,Dispatcher:a,Event:bt,Constants:{SVG_NS:"http://www.w3.org/2000/svg",XHTML_NS:"http://www.w3.org/1999/xhtml",KeyCode:{BACK:8,TAB:9,ENTER:13,CTRL:17,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:46}},format:d,formatString:rt,parseDate:ni,getCalendarInfo:ii,getCurrencyInfo:ri,error:ui,dieOnError:!0,iid:it,strid:dt,guid:gt,support:h,extend:g,selection:s,type:f,is:r,to:v,keys:ut,get:ft,set:fi,ui:c({},l.ui||{},{Widget:ci,VirtualizedContainer:li,plugin:ei})})}(jQuery,this),function(n,t,i,r){function d(n,t){var i,r,u=[];if(n.map)return n.map(t);for(i=0,r=n.length;i<r;i++)u[i]=t(n[i],i,n);return u}function rt(n,t,i,u){var f=s(n,t);return f===r?i&&(f=o.def(i,u,!0)):f=o.convert(f,i),f}var ct,lt,w,e,nt,f,ut,l,at,b,vt,yt,pt,wt,o,y=t.Class,p=t.Dispatcher,bt=Math.min,ft=Math.max,u=t.is,et=t.to,s=t.get,ot=t.set,k=(t.support,t.type),kt=function(){},h=n.extend,c=n.proxy,a=n.each,st=n.grep,dt=n.inArray,tt=n.Deferred,it="function",ht="array",gt="object",ii="string",v="change",g="error",ri="start",ni="complete",ui="save",ti="afterset",fi="insert",ei="remove";ct=y.extend({init:function(n){this.data=n},read:function(n,t,i,r){return t(this.data,!1,r)},modify:function(n,t,i,r){t(r)}});lt=y.extend({init:function(n,t){this.options=n;this.cache=t},read:function(t,i,f,e){var s,l=this.options,o=l.read,c=this.cache;return u.func(o)?void o(t,i,f,e):(o=u.string(o)?{url:o}:h(!0,{},o),u.func(o.data)&&(t=o.data(t,e)),s=c.get(t),void(s!==r?i(s,!0,e):(o.data=t,o.error=f,o.success=function(n){c.set(t,n);i(n,!1,e)},n.ajax(o))))},modify:function(t,i,r,f){var o,e,y,l,s,w=this.options,v=w.modify||{},p=["create","update","remove"],b=["added","edited","removed"],a=[],k=function(n){return n.data};if(u.func(v))return void v(t,i,r,f);for(s=0;s<p.length;s++)y=p[s],l=b[s],e=v[y],t[l].length?(u.string(e)&&(e={url:e,type:"POST"}),u.func(e)?(o=a[s]=new tt,e(t[l],c(o.resolve,o),c(o.reject,o),f)):u.object(e)?(e=h(!0,{},e),u.func(e.data)?e.data=e.data(t[l],f):(e.data={},e.data[l]=d(t[l],k)),o=a[s]=n.ajax(e)):(o=a[s]=new tt,o.resolve())):(o=a[s]=new tt,o.resolve());n.when.apply(n,a).then(i,r)}});w=y.extend({init:function(){this.values={}},get:function(n){return this.values[et.key(n)]},set:function(n,t){return this.values[et.key(n)]=t,t},remove:function(n){var t=et.key(n),i=this.values[t];return delete this.values[t],i},clear:function(){this.values=[]}});w.noop={get:kt,set:kt};nt=y.extend({init:function(n,t){u.object(n)?n=et.array(n):u.string(n)&&(n=[{path:n,desc:!!t}]);this._expr=n},build:function(){var n=this._expr,t=nt.cache;return u.func(n)?function(n){return function(t,i){var r=n(t.item,i.item);return 0!==r?r:t.index-i.index}}(n):u.array(n)?t.get(n)||t.set(n,function(n){return function(t,i){for(var c,e,o,r,f,l,h=0,a=n.length;h<a;h++)if(r=t.item,f=i.item,c=n[h]||{},e=c.path,o=c.desc?-1:1,u.string(e)?(r=s(r,e),f=s(f,e)):u.func(e)&&(r=e(r),f=e(f)),u.date(r)&&(r=r.getTime()),u.date(f)&&(f=f.getTime()),r!==f&&(null!=r||null!=f)){if(null==r)return-1*o;if(null==f)return 1*o;if(u.number(r)&&u.number(f)||(r=r.toString(),f=f.toString()),r.localeCompare){if(l=r.localeCompare(f),0===l)continue;return l*o}if(r>f)return 1*o;if(r<f)return-1*o}return t.index-i.index}}([].concat(n))):void 0}});nt.cache=new w;f=y.extend({init:function(n){this._expr=n||[]},build:function(){var t=this,r=f.cache,i=t._expr,n=t._func||(t._func=r.get(i));return n||(n=t._buildRecursive(i,!0),n&&r.set(i,n)),n},_single:function(n){var t;if(n){if(u.func(n.filter))return n.filter;if(t=f.filters[f.filterAliases[n.filter]])return function(n,t,i,r){return function(u){return t(s(u,n),i,r)}}(n.path,t,n.value,n.sensitive)}},_multiple:function(n,t){return function(i){for(var u=!0,f=n.length,r=0;r<f;r++)if(u=n[r](i),t){if(!u)break}else if(u)break;return u}},_buildRecursive:function(n,t){var i,e,r=this,f=[];if(u.array(n)){for(i=0,e=n.length;i<e;i++)f.push(r._buildRecursive(n[i]));return f.length>1?r._multiple(f,t):f[0]}return n.and||n.or?r._buildRecursive(n.and||n.or,!!n.and):r._single(n)}});f.cache=new w;f.normalize={equatable:function(n,t,i){return u.date(n)?{a:n.getTime(),b:new Date(t).getTime()}:f.normalize.string(n,t,i)},string:function(n,t,i){return{a:i?n+"":(n+"").toLowerCase(),b:i?t+"":(t+"").toLowerCase()}},scalar:function(n,t){return u.date(n)?{a:n.getTime(),b:new Date(t).getTime()}:isNaN(parseFloat(n))?{a:n,b:t}:{a:parseFloat(n),b:parseFloat(t)}}};f.filters={eq:function(n,t,i){var r=f.normalize.equatable(n,t,i);return r.a===r.b},neq:function(n,t,i){var r=f.normalize.equatable(n,t,i);return r.a!==r.b},con:function(n,t,i){var r=f.normalize.string(n,t,i);return r.a.indexOf(r.b)>-1},notcon:function(n,t,i){var r=f.normalize.string(n,t,i);return r.a.indexOf(r.b)<0},starts:function(n,t,i){var r=f.normalize.string(n,t,i);return 0===r.a.indexOf(r.b)},ends:function(n,t,i){var r=f.normalize.string(n,t,i);return r.a.indexOf(r.b)===r.a.length-r.b.length},gt:function(n,t){var i=f.normalize.scalar(n,t);return i.a>i.b},lt:function(n,t){var i=f.normalize.scalar(n,t);return i.a<i.b},gte:function(n,t){var i=f.normalize.scalar(n,t);return i.a>=i.b},lte:function(n,t){var i=f.normalize.scalar(n,t);return i.a<=i.b},isnull:function(n){return null==n},notnull:function(n){return null!=n}};f.filterAliases={eq:"eq",equal:"eq",equals:"eq","==":"eq",neq:"neq",ne:"neq",doesnotequal:"neq",notequal:"neq",notequals:"neq","!=":"neq",con:"con",contains:"con",notcon:"notcon",doesnotcontain:"notcon",notcontains:"notcon",starts:"starts",startswith:"starts",ends:"ends",endswith:"ends",gt:"gt",greaterthan:"gt",">":"gt",lt:"lt",lessthan:"lt","<":"lt",gte:"gte",ge:"gte",greaterthanorequal:"gte",">=":"gte",lte:"lte",le:"lte",lessthanorequal:"lte","<=":"lte",isnull:"isnull","null":"isnull",notnull:"notnull",isnotnull:"notnull"};ut=y.extend({init:function(){},build:function(n){var r=this,i=ut.cache,t=i.get(n);return t||(t=r._build(n),t&&i.set(n,t)),t},_build:function(n){if(!n)return null;var f=n.field,i=n.aggregate,t=n.type||Number,e=function(n){return n===r?o.def(t):o.convert(n,t)};return u.func(i)?i:"count"==i?function(n){return n.length}:"sum"==i?function(n){for(var r,o=0,s=n.length,i=0;i<s;i++)r=rt(n[i],f,t),o+=t==Date&&u.date(r)?r.getTime():r;return e(o)}:"average"==i?function(n){for(var r,o=0,s=n.length,i=0;i<s;i++)r=rt(n[i],f,t),o+=t==Date&&u.date(r)?r.getTime():r;return e(o/s)}:"min"==i?function(n){return e(bt.apply(null,d(n,function(n){return rt(n,f,t)})))}:"max"==i?function(n){return e(ft.apply(null,d(n,function(n){return rt(n,f,t)})))}:r}});ut.cache=new w;e=y.extend({init:function(n,t,i,r,f){var e=this;e.data=n;e.total=null!=t?t:n?n.length:0;e.aggregates=i;e.groups=r;e.indices=u.array(f)?f.slice(0):d(n||[],function(n,t){return t})},filter:function(n){var i,s,u,t=this,h=new f(n).build(),o=t.data,r=[],c=[];if(h){for(i=0,s=o.length;i<s;i++)u=o[i],h(u)&&(r.push(u),c.push(t.indices[i]));t.indices=c}else r=o.slice(0);return new e(r,r.length,t.aggregates,t.groups,t.indices)},aggregate:function(n){var i,r,f,o,t=this,c=new ut,s=t.data;for(u.array(n)||(n=[n]),t.aggregates=[],i=0;i<n.length;i++)r=n[i],f=c.build(r),f&&(o=f(s,r)),t.aggregates.push(h({},r,{value:o}));return new e(s.slice(0),t.total,t.aggregates,t.groups,t.indices)},aggregateGroups:function(n){var t=this,i=t.data.slice(0),r=new e(t._getInnerMostItems(i),null,null,null,null).aggregate(n);return new e(i,t.total,r.aggregates,t.groups,t.indices)},_getInnerMostItems:function(n){var t=[];return a(this._getInnerMostGroups(n),function(n,i){t=t.concat(i.items)}),t},_getInnerMostGroups:function(n){var i=this,t=[];return a(n||[],function(n,r){t=t.concat(i._hasInnerGroups(r)?i._getInnerMostGroups(r.items):r)}),t},_hasInnerGroups:function(n){return!!(n&&n.items&&n.items.length>0)&&n.items[0].field&&u.array(n.items[0].items)},group:function(n){var i,t=this,r=t.data.slice(0);return u.array(n)||(n=[n]),n.length>0&&(i=t._groupData(n,r,t.indices),r=i[0],t.indices=i[1]),new e(r,t.total,t.aggregates,t.groups,t.indices)},_groupData:function(n,t,i){var d,l,k,r,o,ut=this,f=[],v=[],y=n.slice(0),p=y.shift(),ft=p.field,g=p.aggregate,tt=p.order,it={},w,b;if(a(t,function(n,t){l=s(t,ft);k=it[l];u.defined(k)?f[k].items.push({item:t,index:i[n]}):(it[l]=f.length,f.push(h({},p,{value:l,items:[{item:t,index:i[n]}]})))}),tt&&(d=new nt("value","desc"==tt).build())){for(r=0;r<f.length;r++)f[r]={item:f[r],index:r};for(f.sort(d),r=0;r<f.length;r++)f[r]=f[r].item}for(r=0;r<f.length;r++)for(o=0;o<f[r].items.length;o++)v.push(f[r].items[o].index),f[r].items[o]=f[r].items[o].item;if(g&&a(f,function(n,t){f[n].aggregate=new e(t.items).aggregate(g).aggregates}),y&&y.length>0){for(w=0,b=[],r=0;r<f.length;r++){var c=f[r],et=v.slice(w,w+(c.items?c.items.length:0)),rt=ut._groupData(y,c.items,et);f[r].items=rt[0];b=b.concat(rt[1]);w+=c.items?c.items.length:0}v=b}return[f,v]},sort:function(n,t){var i,r=this,o=new nt(n,t).build(),u=r.data.slice(0),f=[],s=u?u.length:0,h=r.indices;if(o){for(i=0;i<s;i++)f.push({index:h[i],item:u[i]});for(f.sort(o),i=0;i<s;i++)u[i]=f[i].item,r.indices[i]=f[i].index}return new e(u,r.total,r.aggregates,r.groups,r.indices)},sortGroups:function(n,t){var r,i=this,o=i.data.slice(0),u=[],f=0;return r=function(o){if(i._hasInnerGroups(o))a(o.items,function(n,t){r(t)});else{var s=new e(o.items,null,null,null,i.indices.slice(f,f+(o.items?o.items.length:0))).sort(n,t);o.items=s.data;u=u.concat(s.indices);f+=o.items?o.items.length:0}},a(o,function(n,t){r(t)}),new e(o,i.total,i.aggregates,i.groups,u)},_sliceGroups:function(n,t,i,r){var f,c=this,o=0,s=[],e=[],h=u.defined(r);return 0!==i||h?(f=function(n){var w,b;if(c._hasInnerGroups(n))return w=[],b=0,a(n.items,function(n,t){var i=f(t);i>0&&(w.push(t),b+=i)}),n.items=w,b;var l,v,s=o,y=n.items.length,p=s+y-1;return h?r-1>=p?i<=p&&(l=ft(0,i-s),v=y):r-1>=s&&i<=p&&(l=ft(0,i-s),v=bt(y,r-s)):i<=s?(l=0,v=y):i>=s&&i<=p&&(l=ft(0,i-s),v=y),u.defined(l)&&u.defined(v)&&v>l?(n.items=n.items.slice(l,v),e=e.concat(t.slice(s+l,s+v))):n.items=[],o+=y,n.items.length},a(n,function(n,t){var i=f(t);i>0&&s.push(t)}),[s,e]):[n.slice(0),t.slice(0)]},skip:function(n){var t=this;return new e(t.data.slice(n),t.total,t.aggregates,t.groups,t.indices.slice(n))},skipGroups:function(n){var t=this,i=t._sliceGroups(t.data,t.indices,n);return new e(i[0],t.total,t.aggregates,t.groups,i[1])},take:function(n){var t=this;return new e(t.data.slice(0,n),t.total,t.aggregates,t.groups,t.indices.slice(0,n))},takeGroups:function(n){var t=this,i=t._sliceGroups(t.data,t.indices,0,n);return new e(i[0],t.total,t.aggregates,t.groups,i[1])}});e.create=function(n,t,i,r,u){t=t||{};var f=new e(n,i,r,u),o=t.remoteOperations||[],s=o.join(" "),h=s.indexOf("group")>-1;return t.group||h?(t.group?(t.filter&&(f=f.filter(t.filter)),f=f.group(t.group)):f.data=f.groups,t.aggregate&&(f=f.aggregateGroups(t.aggregate)),t.sort&&(f=f.sortGroups(t.sort)),t.skip&&(f=f.skipGroups(t.skip)),t.take&&(f=f.takeGroups(t.take))):(t.filter&&(f=f.filter(t.filter)),t.aggregate&&(f=f.aggregate(t.aggregate)),t.sort&&(f=f.sort(t.sort)),t.skip&&(f=f.skip(t.skip)),t.take&&(f=f.take(t.take))),f};l=p.extend({init:function(n){var t=this,i=t.options=u.array(n)?{data:n}:n||{},r=i.schema||{},f=l.schemas[r.type||"json"];t.data=null;t.filter=i.filter;t.sort=i.sort;t.skip=i.skip;t.take=i.take;t.group=i.group;t.aggregate=i.aggregate;t.schema=new f(r);t.remote=i.remote;t.cache=new w;t._recursive=!!i.recursive;p.fn.init.call(t,i)},isRecursive:function(){return this._recursive},trigger:t.ui.Widget.fn.trigger,_client:function(){var n=this,t=n.remote;return u.object(t)?new lt(t,t.cache?n.cache:w.noop):new ct(n.options.data)},_params:function(){var n,t=this,r=t.remote,u=t._remoteOperations().join(" "),i={local:{},remote:{}};return a(["filter","aggregate","group","sort","skip","take"],function(f,e){n=t[e];null!=n&&(r&&u.indexOf(e)>-1?i.remote[e]=n:i.local[e]=n)}),i},_remoteOperations:function(){var n=this.remote;return n&&n.read?n.read.operations||n.operations||[]:[]},_success:function(n,t,i,r,u){var f=this,o=f.schema,e=o.process(i);f.data=e.data;f._pTotal=e.total;f._pAggregates=e.aggregates;f._pGroups=e.groups;f._createView(e.data,t);f.trigger(ni);f.trigger(v,{fromCache:!!r,extra:u});n.resolve(f.view,!!r)},_createView:function(n,t){var i=this,r=e.create(n,h({},t||i._params().local,{remoteOperations:i._remoteOperations()}),i._pTotal,i._pAggregates,i._pGroups);i.view=r.data;i.total=r.total;i._indices=r.indices;i.aggregates=r.aggregates},_error:function(n,t,i,r,u){var f=this;n.reject(r);t&&f.trigger(ni);f.trigger(g,{errorType:"transport",error:r,operation:i,extra:u})},read:function(n){var t=this,i=new tt,r=t._params(),u=t.trigger(ri,{params:r,extra:n});return u.isDefaultPrevented()?i.resolve():(t.cancel(),t._client().read(r.remote,c(t._success,t,i,r.local),c(t._error,t,i,!0,"read"),n)),i.promise()},_ensureTracker:function(){var n=this,t=n.tracker,i=n.data;if(!t){if(!i||!u.array(i))throw new Error("shield.DataSource: cannot modify when no data array is available.");t=n.tracker=new wt({data:i,model:n.schema.model,events:{change:function(t){n._createView(n.data);t&&t.afterset||n.trigger(v)},error:function(t){n.trigger(g,{errorType:"tracker",path:t?t.path:"undefined path",value:t?t.value:"undefined value",error:t?t.reason:"undefined error",model:t?t.target:"undefined target model"})}}});n.data=t.data}},getDataIndex:function(n){return this._indices[n]},add:function(n){return this._ensureTracker(),this.tracker.add(n)},insert:function(n,t){return this._ensureTracker(),this.tracker.insert(n,t)},remove:function(n){return this._ensureTracker(),this.tracker.remove(n)},removeAt:function(n){return this._ensureTracker(),this.tracker.removeAt(n)},edit:function(n){return this._ensureTracker(),this.tracker.edit(n)},insertView:function(n,t){return this.insert(this._indices[n],t)},removeAtView:function(n){return this.removeAt(this._indices[n])},editView:function(n){return this.edit(this._indices[n])},save:function(n,t){var o,s,e,h,i=this,r=i.tracker,l=r?r.changes:{added:[],edited:[],removed:[]},a=r&&i.trigger(ui,{changes:l}),f=new tt;if(n=!u.defined(n)||!!n,a&&!a.isDefaultPrevented()){for(o=i.data=r.original,s=r.data,o.length=0,e=0;e<s.length;e++)o[e]=s[e];i.options.data&&!u.func(i.options.data)&&f.done(c(i._syncLocalData,i));i._client().modify(l,c(f.resolve,f),c(i._error,i,f,!1,"save"),t);r.destroy();r=i.tracker=null}else f.resolve(l);return n&&(h=function(){i._createView(i.data);i.trigger(v,{extra:t})},f.then(h,h)),f.promise()},_syncLocalData:function(){for(var t=this,i=t.schema,f=(i.options.fields,t.data),r=[],e=u.array(i.getReverseDataFirstItem(t.options.data)),n=0;n<f.length;n++)r[n]=e?[]:{},i.reverseFields(f[n],r[n]);i.reverseData(r,t.options.data)},cancel:function(){var t=this,n=t.tracker,i=n&&(n.changes.added.length||n.changes.edited.length||n.changes.removed.length);n&&(t.data=n.original,n.destroy(),n=t.tracker=null,i&&(t._createView(t.data),t.trigger(v)))},destroy:function(){var t,n=this,i=["options","data","total","aggregates","filter","sort","aggregate","group","skip","take","schema","remote","view","cache"];for(n.cancel(),n.cache&&n.cache.clear(),t=0;t<i.length;t++)delete n[i[t]];p.fn.destroy.call(n)}});l.create=function(n,t){return n instanceof l?n:new l(u.array(n)?h({data:n},t):h({},n,t))};b=y.extend({init:function(n){this.options=n},parse:function(t){var i=this.options.parse;if(u.func(i))return i(t);if(u.string(t))try{t=n.parseJSON(t)}catch(r){}return t},data:function(n){var t=this.options.data;return u.func(t)?t(n):u.string(t)?s(n,t):n},aggregates:function(n){var t=this.options.aggregates;return u.func(t)?t(n):u.string(t)?s(n,t):r},groups:function(n){var t=this.options.groups;return u.func(t)?t(n):u.string(t)?s(n,t):r},reverseData:function(n,t){var i,r=this.options.data;if(u.func(r))r(n,t);else if(u.string(r))ot(t,r,n);else if(u.array(t))for(t.length=0,i=0;i<n.length;i++)t[i]=n[i]},getReverseDataFirstItem:function(n){var t=this.data(n);return u.array(t)&&t.length>0?t[0]:r},total:function(n,t){var i=this.options.total;return n=n||[],t=t||[],u.func(i)?i(n):u.string(i)?s(n,i):t.length},fields:function(n){var t=this,i=t.options.fields,r=t.model=o.define(i);return i?d(n,function(n){return b.mapFields(n,r.fn.fields)}):n},reverseFields:function(){var i,r,n,h=this,f=h.options.fields,o=[].slice.call(arguments),t=o[0],s=o.length<=1,e=s?t:o[1];if(u.defined(f))for(n in f)f.hasOwnProperty(n)&&(i=f[n],r=t[n],u.string(i.path)?ot(e,i.path,r):u.func(i.path)?i.path(t,r):e[n]=r,s&&delete e[n]);else if(!s&&u.object(t))for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},process:function(n){var t=this,i=t.parse(n),u=t.aggregates(n),f=t.groups(n),r=t.fields(t.data(i));return{data:r,aggregates:u,groups:f,total:t.total(i,r)}}});b.mapFields=function(n,t){var e,i,f,h={};n=n||{};for(e in t)t.hasOwnProperty(e)&&(i=t[e],u.string(i.path)?(f=s(n,i.path),f===r&&(f=s(n,e))):f=u.func(i.path)?i.path(n):n[e],f===r?i.type&&(f=o.def(i.type,i.def,i.nullable)):f=o.convert(f,i.type),h[e]=f);return h};vt=b.extend({parse:function(t){var i=this,r=i.options;if(u.func(r.parse))t=r.parse(t);else if(u.string(t))try{t=n.parseXML(t)}catch(f){}return t&&9===t.nodeType&&(t=i._json(i._root(t))),t},_root:function(n){for(var i=n.childNodes,t=0,r=i.length;t<r;t++)if(1===i[t].nodeType)return i[t];return null},_json:function(n){for(var t,r,i={},s={},e="",f=0,o=n.attributes.length;f<o;f++)t=n.attributes[f],i["_"+t.nodeName]=t.nodeValue;for(f=0,o=n.childNodes.length;f<o;f++)switch(t=n.childNodes[f],r=t.nodeName,t.nodeType){case 1:s[r]?(u.array(i[r])||(i[r]=[i[r]]),i[r].push(this._json(t))):(i[r]=this._json(t),s[r]=!0);break;case 3:e+=t.nodeValue;break;case 4:i._cdata=t.nodeValue}return e=e.replace(/^\s+(.*)\s+$/gim,"$1"),e&&(i._text=e),i}});yt=b.extend({parse:function(t){var r,i=this.options,o=i.parse,f=n(t),e=[],s=[];return u.func(o)?o(t):i.result?i.result:!f[0]||"table"!==f[0].tagName.toLowerCase()?t:(f.eq(0).find("thead th").each(function(){s.push(n(this).text())}).end().find("tbody tr").each(function(){r={};n(this).children().each(function(t){r[s[t]]=n(this).text()});e.push(r)}),i.result=e,e)}});pt=b.extend({parse:function(t){var i=this.options,e=i.parse,r=n(t),f=[];return u.func(e)?e(t):i.result?i.result:r[0]&&"select"===r[0].tagName.toLowerCase()?(r.find("option").each(function(){var t=n(this);f.push({value:t.attr("value"),text:t.text(),selected:t.is(":selected")})}),i.result=f,f):t}});l.schemas={json:b,xml:vt,table:yt,select:pt};wt=p.extend({init:function(n){var t=this;t.original=n.data;t.data=Array.apply(null,n.data);t.model=n.model;t.changes={added:[],edited:[],removed:[]};p.fn.init.call(this,n)},_model:function(n){var t=this,i=new t.model(n);return i.on(v,c(t.trigger,t,v)),i.on(g,c(t.trigger,t,g)),i.on(ti,c(t.trigger,t,v,{afterset:!0})),i},add:function(n){return this.insert(this.data.length,n)},insert:function(n,t){var i,r=this,u=r.data,f=r.changes;if(n<0||n>u.length)throw new Error("shield.DataSource: invalid item index: "+n);return i=r._model(t),f.added.push(i),u.splice(n,0,i.data),r.trigger(v,{operation:fi,index:n,model:i}),i},edit:function(n){var t,r=this,i=r.data,u=r.changes;if(isNaN(n)||n<0||n>=i.length)throw new Error("shield.DataSource: invalid item index: "+n);return(t=st(u.added.concat(u.edited),function(t){return t.data===i[n]})[0])?t:(t=r._model(i[n]),u.edited.push(t),i[n]=t.data,t)},remove:function(n){var t=this,r=t.changes,u=st(r.added.concat(r.edited),function(t){return t===n})[0],i=-1;if(n instanceof o?u&&(i=dt(u.data,t.data)):i=dt(n,t.data),i>-1)return t.removeAt(i)},removeAt:function(n){var i=this,r=i.data,u=i.changes,t=st(u.added.concat(u.edited),function(t){return t.data===r[n]})[0];if(n<0||n>r.length)throw new Error("shield.DataSource: invalid item index: "+n);return t?t.destroy():t=new i.model(r[n]),u.removed.push(t),r.splice(n,1),i.trigger(v,{operation:ei,index:n,model:t}),t},destroy:function(){for(var i=this,n=i.changes,r=n.added.concat(n.edited).concat(n.removed),t=0;t<r.length;t++)r[t].destroy();n.added.length=n.edited.length=n.removed.length=0;i.data=i.original=null;p.fn.destroy.call(i)}});o=p.extend({init:function(n,t){var i=this;p.fn.init.call(i,t);i.fields=h(!0,{},i.constructor.prototype.fields);i.data=h(!0,{},n)},trigger:t.ui.Widget.fn.trigger,get:function(n){return s(this.data,n)},set:function(n,t){var i=this;t=i.validate(n,t);t!==r&&(ot(i.data,n,t),i.trigger(ti))},validate:function(n,t){var u,f,e=this,i=s(e.fields,n),h;if(!i)return t;if(k(i.validator)===it?u=i.validator:k(i.type.validate)===it?u=i.type.validate:(h=i.type.toString().split("(")[0].split(" ")[1].toLowerCase(),u=o.validators[h]),u){if(f=u(t),f===r)return void e.trigger(g,{errorType:"validation",path:n,value:t,error:"validation error"});t=f}return null===t&&i.nullable===!1?void e.trigger(g,{errorType:"validation",path:n,value:t,error:"null value not allowed"}):t}});o.define=function(n){return o.extend({fields:o.normalize(h(!0,{},n))})};o.normalize=function(n){var t,i,r;n=n||{};for(t in n)n.hasOwnProperty(t)&&(i=n[t],r=k(i),r===it?n[t]={type:i}:r===ht?n[t]={type:i}:r===ii&&(n[t]={path:i}));return n};o.def=function(n,t,i){var u;return t!==r?k(t)===it?t():t:i?null:n===String?"":n===Number?0:n===Date?new Date:n!==Boolean&&(n===Array?[]:n===Object?{}:(u=k(n),u===ht?[]:u===gt?{}:u===it?n():null))};o.convert=function(n,t){var i;return null==n?n:t===String?n.toString():t===Number?(i=parseFloat(n),isNaN(i)?n:i):t===Date?(i=new Date(n),isNaN(i.getTime())?n:i):t===Boolean?u.string(n)?!/^(false|0)$/i.test(n):!!n:n};o.validators={string:function(n){return null==n?null:n.toString()},number:function(n){return null===n?null:isNaN(+n)?r:+n},date:function(n){return null===n?null:n instanceof Date?n:(n=new Date(n),isNaN(n.getTime())?r:n)},boolean:function(n){return null===n?null:null==n?r:!!n},array:function(n){return null===n?null:k(n)===ht?n:r},object:function(n){return null===n?null:k(n)===gt?n:r}};at=l.extend({init:function(n){h(n,{recursive:!0});l.fn.init.call(this,n)}});h(t,{map:d,DataSource:l,RecursiveDataSource:at,DataQuery:e,Model:o})}(jQuery,shield,this),function(n,t,i,r){function ri(){if(o(lt))return lt;var r,i,t=n('<div style="width:50px;position:absolute;overflow:hidden;height:50px;display:block;"><div style="width:auto;height:100px;"><\/div><\/div>'),u=t.children()[0];return n(e.body).append(t),r=u.offsetWidth,t.css(ou,bt),i=u.offsetWidth,r===i&&(i=t[0].clientWidth),t.remove(),lt=r-i}function vr(n){var t=n.isWindow||n.isDocument?"":n.element.css(su),i=n.isWindow||n.isDocument?"":n.element.css(hu),r=t===bt||t===fr&&n.width<n.element[0].scrollWidth,u=i===bt||i===fr&&n.height<n.element[0].scrollHeight;return{width:u?ri():0,height:r?ri():0}}function ui(t){var r=n(t||i),u=pi(r[0]),f=!!r[0]&&9===r[0].nodeType;return{element:r,isWindow:u,isDocument:f,offset:u?{left:0,top:0}:r.offset()||{left:0,top:0},scrollLeft:r.scrollLeft(),scrollTop:r.scrollTop(),width:u||f?r.width():r.outerWidth(),height:u||f?r.height():r.outerHeight()}}function fi(n,t,i){return[wi(n[0])*(nr.test(n[0])?t/100:1),wi(n[1])*(nr.test(n[1])?i/100:1)]}function s(n,t){var i=n.css(t);return i?gr(i)||0:0}function yr(n){var t=n[0];return 9===t.nodeType?{width:n.width(),height:n.height(),offset:{top:0,left:0}}:pi(t)?{width:n.width(),height:n.height(),offset:{top:n.scrollTop(),left:n.scrollLeft()}}:t.preventDefault?{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}:{width:n.outerWidth(),height:n.outerHeight(),offset:n.offset()}}function ei(t,i){var r=0,u=o(i)?n(i).find(t):n(t);return u.each(function(){r=c(r,s(n(this),"z-index"))}),r}function oi(n){return n.pageX||n.pageY?{x:n.pageX,y:n.pageY}:{x:n.clientX+e.body.scrollLeft-e.body.clientLeft,y:n.clientY+e.body.scrollTop-e.body.clientTop}}var lt,w,et,tt,it,b,u,at,si,vt,hi,yt,ci,l=t.ui.Widget,pr=(t.Class,t.Constants.KeyCode),wr=t.error,e=document,f=Math.abs,ot=Math.min,c=Math.max,li=Math.round,ai=Math.floor,vi=n.extend,a=n.proxy,yi=n.each,pi=n.isWindow,o=t.is.defined,rt=t.is.func,br=t.is.number,pt=t.is.object,kr=(t.is["null"],t.is.string),dr=t.is.array,gr=t.to.int,wi=t.to.number,nu=t.to.string,bi=/left|center|right/,ki=/top|center|bottom/,di=/[\+\-]\d+(\.[\d]+)?%?/,gi=/^\w+/,nr=/%$/,k="mousedown",tr="mouseup",st="mousemove",tu="keydown",ir="start",rr="stop",iu="resize",ru="resized",uu="drag",fu="drop",eu="cancel",wt="disabled",v="px",y="left",ut="right",p="top",ft="bottom",ur="middle",h="center",ou="overflow",fr="auto",d="position",ht="absolute",er="relative",su="overflow-x",hu="overflow-y",bt="scroll",kt="horizontal",dt="vertical",cu="my",lu="at",au="marginLeft",vu="marginRight",yu="marginTop",pu="marginBottom",wu="flip",or="pointer",sr="fit",hr="intersect",gt="sui-resizable",cr=gt+"-"+wt,nt="sui-draggable",ni=nt+"-"+wt,lr=nt+"-dragging",g="sui-unselectable",ct="sui-droppable",ti=ct+"-"+wt,ii=ct+"-over",ar=0;tt={};tt.GetWithinInfo=ui;tt.GetMaxZIndex=ei;tt.GetCoordinates=oi;t.ui.Util=tt;w=function(){return ar++,et?et:(this.init(),void(et=this))};w.prototype={_pos:null,init:function(){var t=this;n(e).on(st+".suiMouseTracker",a(t._onMouseMove,t))},_onMouseMove:function(n){this._pos=this.getPosFromEvent(n)},getPosFromEvent:function(n){return oi(n)},getPosition:function(n){var t=this;return null===t._pos&&o(n)&&(t._pos=t.getPosFromEvent(n)),t._pos},isInWindow:function(t){var s=this,r=s.getPosition(t),u=r.x,f=r.y,e=n(i).scrollTop(),o=n(i).scrollLeft();return u>=o&&u<=o+n(i).width()&&f>=e&&f<=e+n(i).height()},destroy:function(){--ar>0||(n(e).off(st+".suiMouseTracker"),et=null)}};t.MouseTracker=w;it={};it.Set=function(t,i,r){if(!t||!i||!r)throw"Invalid arguments passed to Position.Set";var g,l,a,d,v,tt,e={my:r.source,at:r.target,collision:r.overflow,inside:r.inside},et=n(i),ht=ui(e.inside),ct=vr(ht),nt=(e.collision||wu).split(" "),ot={};tt=yr(et);et[0].preventDefault&&(e.at="left top");l=tt.width;a=tt.height;d=tt.offset;v=vi({},d);yi([cu,lu],function(){var t,i,r=this,n=(e[r]||"").split(" ");1===n.length&&(n=bi.test(n[0])?n.concat([h]):ki.test(n[0])?[h].concat(n):[h,h]);n[0]=bi.test(n[0])?n[0]:h;n[1]=ki.test(n[1])?n[1]:h;t=di.exec(n[0]);i=di.exec(n[1]);ot[r]=[t?t[0]:0,i?i[0]:0];e[r]=[gi.exec(n[0])[0],gi.exec(n[1])[0]]});1===nt.length&&(nt[1]=nt[0]);e.at[0]===ut?v.left+=l:e.at[0]===h&&(v.left+=l/2);e.at[1]===ft?v.top+=a:e.at[1]===h&&(v.top+=a/2);g=fi(ot.at,l,a);v.left+=g[0];v.top+=g[1];var lt,st,o=n(t),w=o.outerWidth(),k=o.outerHeight(),at=s(o,au),vt=s(o,yu),yt=w+at+s(o,vu)+ct.width,pt=k+vt+s(o,pu)+ct.height,u=vi({},v),it=fi(ot.my,o.outerWidth(),o.outerHeight());e.my[0]===ut?u.left-=w:e.my[0]===h&&(u.left-=w/2);e.my[1]===ft?u.top-=k:e.my[1]===h&&(u.top-=k/2);u.left+=it[0];u.top+=it[1];u.left=li(u.left);u.top=li(u.top);lt={marginLeft:at,marginTop:vt};yi([y,p],function(n,t){b[nt[n]]&&b[nt[n]][t](u,{targetWidth:l,targetHeight:a,elemWidth:w,elemHeight:k,collisionPosition:lt,collisionWidth:yt,collisionHeight:pt,offset:[g[0]+it[0],g[1]+it[1]],my:e.my,at:e.at,within:ht,elem:o})});rt(r.callback)&&(st=function(){var n=d.left-u.left,e=n+l-w,t=d.top-u.top,s=t+a-k,i={target:{element:et,left:d.left,top:d.top,width:l,height:a},element:{element:o,left:u.left,top:u.top,width:w,height:k},horizontal:e<0?y:n>0?ut:h,vertical:s<0?p:t>0?ft:ur};l<=w&&f(n+e)<=l&&(i.horizontal=h);a<=k&&f(t+s)<=a&&(i.vertical=ur);i.important=c(f(n),f(e))>c(f(t),f(s))?kt:dt;r.callback(i)});o.offset(u);st&&st()};b={fit:{left:function(n,t){var s,f=t.within,r=f.isWindow?f.scrollLeft:f.offset.left,e=f.width,o=n.left-t.collisionPosition.marginLeft,i=r-o,u=o+t.collisionWidth-e-r;t.collisionWidth>e?i>0&&u<=0?(s=n.left+i+t.collisionWidth-e-r,n.left+=i-s):n.left=u>0&&i<=0?r:i>u?r+e-t.collisionWidth:r:i>0?n.left+=i:u>0?n.left-=u:n.left=c(n.left-o,n.left)},top:function(n,t){var s,e=t.within,r=e.isWindow?e.scrollTop:e.offset.top,f=t.within.height,o=n.top-t.collisionPosition.marginTop,i=r-o,u=o+t.collisionHeight-f-r;t.collisionHeight>f?i>0&&u<=0?(s=n.top+i+t.collisionHeight-f-r,n.top+=i-s):n.top=u>0&&i<=0?r:i>u?r+f-t.collisionHeight:r:i>0?n.top+=i:u>0?n.top-=u:n.top=c(n.top-o,n.top)}},flip:{left:function(n,t){var o,s,i=t.within,p=i.offset.left+i.scrollLeft,c=i.width,h=i.isWindow?i.scrollLeft:i.offset.left,l=n.left-t.collisionPosition.marginLeft,a=l-h,v=l+t.collisionWidth-c-h,r=t.my[0]===y?-t.elemWidth:t.my[0]===ut?t.elemWidth:0,u=t.at[0]===y?t.targetWidth:t.at[0]===ut?-t.targetWidth:0,e=-2*t.offset[0];a<0?(o=n.left+r+u+e+t.collisionWidth-c-p,(o<0||o<f(a))&&(n.left+=r+u+e)):v>0&&(s=n.left-t.collisionPosition.marginLeft+r+u+e-h,(s>0||f(s)<v)&&(n.left+=r+u+e))},top:function(n,t){var o,s,i=t.within,y=i.offset.top+i.scrollTop,a=i.height,h=i.isWindow?i.scrollTop:i.offset.top,v=n.top-t.collisionPosition.marginTop,c=v-h,l=v+t.collisionHeight-a-h,w=t.my[1]===p,r=w?-t.elemHeight:t.my[1]===ft?t.elemHeight:0,u=t.at[1]===p?t.targetHeight:t.at[1]===ft?-t.targetHeight:0,e=-2*t.offset[1];c<0?(s=n.top+r+u+e+t.collisionHeight-a-y,n.top+r+u+e>c&&(s<0||s<f(c))&&(n.top+=r+u+e)):l>0&&(o=n.top-t.collisionPosition.marginTop+r+u+e-h,n.top+r+u+e>l&&(o>0||f(o)<l)&&(n.top+=r+u+e))}},flipfit:{left:function(){b.flip.left.apply(this,arguments);b.fit.left.apply(this,arguments)},top:function(){b.flip.top.apply(this,arguments);b.fit.top.apply(this,arguments)}}};t.ui.Position=it;ci={enabled:!0,cls:r,iframeFix:!1,resizeCls:r,delta:1,handles:["e","w","n","s","se","sw","ne","nw"],handleWidth:8,handleZIndex:105,minHeight:16,minWidth:16,maxHeight:r,maxWidth:r,events:{}};yt=l.extend({init:function(){l.fn.init.apply(this,arguments);o(this.initialOptions.handles)&&(this.options.handles=this.initialOptions.handles);var t=this,u=n(t.element),i=t.options,r=i.cls;t._eventNS=".shieldResizable"+t.getInstanceId();t.mouseTracker=new w;u.addClass(gt+(r?" "+r:""));t._initHandles();t.enabled(i.enabled)},_initHandles:function(){var o,r,u,t=this,h=n(t.element),y=(h.width(),h.height()),c=t.options,p=c.handles,l=c.handleWidth,s=l+v,f=l+2+v,i="-"+(l-2)+v,w=c.handleZIndex;for(t.handles=[],u=0;u<p.length;u++){switch(o=nu(p[u]).toLowerCase(),r={},o){case"e":r={width:s,height:y+v,top:0,right:i};break;case"w":r={width:s,height:y+v,top:0,left:i};break;case"n":r={width:"100%",height:s,top:i};break;case"s":r={width:"100%",height:s,bottom:i};break;case"se":r={width:f,height:f,bottom:i,right:i};break;case"sw":r={width:f,height:f,bottom:i,left:i};break;case"ne":r={width:f,height:f,top:i,right:i};break;case"nw":r={width:f,height:f,top:i,left:i}}r.zIndex=w;t.handles[u]={type:o};t.handles[u][k]=a(t._handleMouseDown,t,u);t.handles[u].element=n('<div class="sui-resizable-handle sui-resizable-dir-'+o+'"><\/div>').appendTo(h).css(r).on(k,t.handles[u][k])}n(e).on(tr+t._eventNS,a(t._handleMouseUp,t)).on(st+t._eventNS,a(t._handleMouseMove,t))},_destroyHandles:function(){var t,i=this,r=i.handles;for(n(e).off(i._eventNS),t=0;t<r.length;t++)n(i.handles[t].element).off(k,i.handles[t][k]).remove();i.handles=[]},_fixIframes:function(){var i,r=this,t=r.options.iframeFix;t&&(i=t===!0?"iframe":t,r._fixedFrames=n(e.body).find(i).map(function(){var t=n(this);return n("<div/>").css(d,ht).appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]}))},_unfixIframes:function(){var t=this;t._fixedFrames&&(n(t._fixedFrames).remove(),delete t._fixedFrames)},_handleMouseDown:function(t,i){var r=this;r._enabled&&!r.resizing&&(r.resizing=!0,r.resizingHandle=t,r.oldPos=r.mouseTracker.getPosition(i),r.startSent=!1,n(r.element).addClass(g),r._fixIframes())},_handleMouseMove:function(t){var d,g,ut,l,c,r,i,e,h,nt,tt,b,a,it,u=this,w=n(u.element),k=u.options,rt=k.delta,ft=k.minWidth,et=k.maxWidth,ot=k.minHeight,st=k.maxHeight,ct=k.resizeCls,lt=u.resizingHandle,ht=u.handles,at=u.mouseTracker,vt=u.oldPos,yt;if(at.isInWindow(t)&&u.resizing&&o(lt)&&(ut=at.getPosition(t),l=ut.x-vt.x,c=ut.y-vt.y,d=ht[lt],g=d.type,f(l)>=rt||f(c)>=rt)){switch(/^(se|sw|ne|nw)$/i.test(g)||(/^(e|w)$/i.test(g)?c=0:l=0),f(l)<rt&&(l=0),f(c)<rt&&(c=0),r=l,i=c,e=0,h=0,g){case"w":r=-l;e=-r;break;case"n":i=-c;h=-i;break;case"nw":r=-l;i=-c;e=-r;h=-i;break;case"sw":r=-l;e=-r;break;case"ne":i=-c;h=-i}if((b=w.width(),a=w.height(),nt=s(w,p),tt=s(w,y),r>0?(o(et)&&b+r>et&&(r=et-b,0!==e&&(e=-r)),tt+e<0&&(r-=tt-e,e=-r)):r<0&&o(ft)&&b+r<ft&&(r=ft-b,0!==e&&(e=-r)),i>0?(o(st)&&a+i>st&&(i=st-a,0!==h&&(h=-i)),nt+h<0&&(i-=nt-h,h=-i)):i<0&&o(ot)&&a+i<ot&&(i=ot-a,0!==h&&(h=-i)),0!==r||0!==i)&&(u.startSent||(u.startSent=!0,u.trigger(ir),ct&&w.addClass(ct)),yt=u.trigger(iu,{deltaX:r,deltaY:i}),!yt.isDefaultPrevented())){if(w.width(b+r).height(a+i),0===e&&0===h||w.css({top:nt+h+v,left:tt+e+v}),u.oldPos.x=u.oldPos.x+l,u.oldPos.y=u.oldPos.y+c,0!==c)for(it=0;it<ht.length;it++)d=ht[it],/^(e|w)$/i.test(d.type)&&n(d.element).height(a+i);u.trigger(ru)}}},_handleMouseUp:function(){var t=this,u=!!t.startSent,i=t.options.resizeCls;t._unfixIframes();t.resizing&&(t.resizing=!1,t.resizingHandle=r,t.oldPos=r,t.startSent=!1,u&&t.trigger(rr),n(t.element).removeClass(g+(i?" "+i:"")))},resize:function(t,i){var u=this,r=u.options;t=c(ot(t,r.maxWidth),r.minWidth);i=c(ot(i,r.maxHeight),r.minHeight);n(u.element).width(t).height(i)},enabled:function(){var t,i=this,r=n(i.element),u=[].slice.call(arguments);return u.length>0?(t=!!u[0],t?r.removeClass(cr):r.addClass(cr),i._enabled=t,void 0):i._enabled},destroy:function(){var t=this,i=t.options.cls;t.mouseTracker.destroy();t.mouseTracker=null;n(t.element).removeClass(gt+(i?" "+i:""));t._destroyHandles();l.fn.destroy.call(t)}});yt.defaults=ci;t.ui.plugin("Resizable",yt);u={droppables:{"default":[]},Register:function(n){var t=n.options.scope;u.droppables[t]=u.droppables[t]||[];u.droppables[t].push(n)},UnRegister:function(n){for(var r=n.options.scope,i=u.droppables[r],t=0;t<i.length;t++)i[t]===n&&i.splice(t,1)},PrepareOffsets:function(t){for(var f,e,r=u.droppables[t.options.scope]||[],o=n(t.helper||t.element),i=0;i<r.length;i++)f=r[i].enabled(),e=r[i].visible(),r[i].ddIsEnabled=f,r[i].ddIsVisible=e,!f||!e||t&&!r[i].accepts(t.element)||t&&t.element.get(0)===r[i].element.get(0)||(r[i].ddOffset=r[i].element.offset(),r[i].proportions({width:r[i].element[0].offsetWidth,height:r[i].element[0].offsetHeight}));t.proportions({width:o[0].offsetWidth,height:o[0].offsetHeight})},DragStart:function(n,t){u.PrepareOffsets(n,t)},Drag:function(n,t){for(var f,r=u.droppables[n.options.scope]||[],e=r.length,i=0;i<e;i++)r[i].ddIsEnabled&&r[i].ddIsVisible&&(!n||r[i].accepts(n.element))&&(!n||n.element.get(0)!==r[i].element.get(0))&&(f=u.Intersects(n,r[i],t),f?r[i].ddIsOver||(r[i].ddIsOver=!0,r[i].over(n,t)):r[i].ddIsOver&&(r[i].ddIsOver=!1,r[i].out(n,t)))},Drop:function(n,t){for(var e,o,s,f,r=u.droppables[n.options.scope]||[],h=r.length,i=0;i<h;i++)r[i].ddIsEnabled&&r[i].ddIsVisible&&(!n||r[i].accepts(n.element))&&(!n||n.element.get(0)!==r[i].element.get(0))&&(r[i].stop(),e=u.Intersects(n,r[i],t),r[i].ddIsOver=!1,e&&(f=r[i].drop(n,t),f.isDefaultPrevented()&&(o=!0),f.skipAnimation&&(s=!0)));return{cancelled:o,skipAnimation:s}},Intersects:function(t,i,r){var p,d,h,c,l,v,f,e,a,y=i.options.tolerance,g=pt(y)?y.x:y,nt=pt(y)?y.y:y,rt=i.proportions(),ut=i.ddOffset,b=rt.width,k=rt.height,o=ut.left,s=ut.top,tt,it;return(g==or?(tt=new w,a=tt.getPosition(r),tt.destroy(),p=o<=a.x&&o+b>=a.x):(h=t.proportions(),c=h.width,l=h.height,v=n(t.helper||t.element).offset(),f=v.left,e=v.top,p=g==sr?u._linesOverlap(f,f+c,o,o+b,c):g==hr?u._linesOverlap(f,f+c,o,o+b,c/2):u._linesOverlap(f,f+c,o,o+b,0)),!p)?!1:(nt==or?(a||(it=new w,a=it.getPosition(r),it.destroy()),d=s<=a.y&&s+k>=a.y):(h||(h=t.proportions(),c=h.width,l=h.height,v=n(t.helper||t.element).offset(),f=v.left,e=v.top),d=nt==sr?u._linesOverlap(e,e+l,s,s+k,l):nt==hr?u._linesOverlap(e,e+l,s,s+k,l/2):u._linesOverlap(e,e+l,s,s+k,0)),p&&d)},_linesOverlap:function(n,t,i,r,u){return o(u)||(u=0),n<i&&t<r?t-i>u:!(n>i&&t>r)||r-n>u}};t.ui.DDManager=u;si={enabled:!0,iframeFix:!1,cls:r,dragCls:r,scope:"default",handle:r,direction:r,min:r,max:r,step:r,allowedPositions:r,stack:!0,helper:r,appendTo:"parent",animation:{enabled:!0,revertDuration:200},events:{}};at=l.extend({init:function(){l.fn.init.apply(this,arguments);var i,t=this,r=n(t.element),u=t.options,f=u.cls;t._eventNS=".shieldDraggable"+t.getInstanceId();t.mouseTracker=new w;r.addClass(nt+(f?" "+f:""));i=r.css(d);i!==er&&i!==ht&&(t._origPosStyle=i,r.css(d,er));t.enabled(u.enabled);t.startSent=!1},proportions:function(){var n=this;return arguments.length>0?void(n._proportions=arguments[0]):n._proportions?n._proportions:n._proportions={width:n.element[0].offsetWidth,height:n.element[0].offsetHeight}},_fixIframes:function(){var i,r=this,t=r.options.iframeFix;t&&(i=t===!0?"iframe":t,r._fixedFrames=n(e.body).find(i).map(function(){var t=n(this);return n("<div/>").css(d,ht).appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]}))},_unfixIframes:function(){var t=this;t._fixedFrames&&(n(t._fixedFrames).remove(),delete t._fixedFrames)},_handleMouseDown:function(t){var i=this,r=i._eventNS;!i._enabled||i._destroyed||i._dragging||(n(e.body).addClass(g),i._dragging=!0,i.startSent=!1,i.helper=i._isCustomHelper=null,i.stepPosition=i.mousePos=i.mouseTracker.getPosition(t),n(e).on(st+r,a(i._handleMouseMove,i)).on(tr+r,a(i._handleMouseUp,i)).on(tu+r,a(i._handleKeyDown,i)),i._fixIframes())},_initHelper:function(t){var i,r=this,f=r.element,o=r.options,u=o.helper,h=o.appendTo,c=o.cls,l=o.dragCls;r._helperInitialized||(u&&"original"!==u?(i=rt(u)?u.call(r,{position:r.oriPosition,event:t}):"clone"==u?f.clone():n(u),i.parents("body").length||("parent"===h?f.after(i):h&&"body"!==h?i.appendTo(n(h)):i.appendTo(e.body)),/(fixed|absolute)/i.test(i.css(d))||i.css(d,ht),it.Set(i,f,{source:"left top",target:"left top",overflow:"none"}),r._isCustomHelper=!0):(i=f,r._isCustomHelper=!1),r.helper=i,i.addClass(g+" "+nt+(c?" "+c:"")+" "+lr+(l?" "+l:"")),r.oriPosition={left:s(i,y),top:s(i,p)},r._helperInitialized=!0)},_handleMouseMove:function(t){var g,w,b,ft,et,a,v,e,h,l,vt,yt,i=this,st=i.options,ht=st.step,ct=st.direction,k=st.allowedPositions,ui=k!==r&&k.length>0,nt=st.min,tt=st.max,ti=i.mouseTracker,it=ti.getPosition(t);if(ti.isInWindow(t)&&i._dragging){if(i._initHelper(t),l=n(i.helper),vt=l.width(),yt=l.height(),ft=s(l,p),et=s(l,y),ui){var ii,ri,wt,bt,ut,d,lt=r,at=r,gt=r,ni=r;for(ii=it.x-i.stepPosition.x,ri=it.y-i.stepPosition.y,wt=et+ii,bt=ft+ri,ut=0;ut<k.length;ut++)d=k[ut],d.x!==r&&(gt===r||gt>f(wt-d.x))&&(gt=f(wt-d.x),lt=ut),d.y!==r&&(ni===r||ni>f(bt-d.y))&&(ni=f(bt-d.y),at=ut);a=et;v=ft;lt!==r&&(a=k[lt].x,i.stepPosition.x+=k[lt].x-et);at!==r&&(v=k[at].y,i.stepPosition.y+=k[at].y-ft)}else{if(e=ct==dt?0:it.x-i.mousePos.x,h=ct==kt?0:it.y-i.mousePos.y,o(ht)){if(g=rt(ht)?ht.call(this,{deltaX:e,deltaY:h,element:l,domEvent:t,helperLeft:s(l,y),helperTop:s(l,p),mouse:it}):ht,br(g)?w=b=g:pt(g)&&(w=g.x,b=g.y),o(w)&&f(e)<w&&o(b)&&f(h)<b)return;o(w)&&w>1&&e%w!=0&&(e=(e>=0?1:-1)*ai(f(e)/w)*w);o(b)&&b>1&&h%b!=0&&(h=(h>=0?1:-1)*ai(f(h)/b)*b)}a=et+e;v=c(0,ft+h)}ct==kt&&(nt!==r&&(a=c(nt,a),a===nt&&(e=0)),tt!==r&&(a=ot(tt-vt,a),a===tt-vt&&(e=0)));ct==dt&&(nt&&(v=c(nt,v),v===nt&&(h=0)),tt&&(v=ot(tt-yt,v),v===tt-yt&&(h=0)));l.css({left:a,top:v});i.mousePos=it;i.startSent||(i.startSent=!0,i.trigger(ir,{element:l,domEvent:t}),i._adjustZIndex(),u.DragStart(i,t));i.trigger(uu,{deltaX:e,deltaY:h,element:l,domEvent:t});u.Drag(i,t)}},_handleMouseUp:function(t){var f,c,o,h,i=this,v=i.element,r=i.helper,l=i.options.animation;i._unfixIframes();n(e.body).removeClass(g);i._dragging&&(i.startSent?(c=u.Drop(i,t),o=c.cancelled,h=c.skipAnimation,f=i.trigger(rr,{left:s(r,y),top:s(r,p),element:r,domEvent:t,cancelled:o,skipAnimation:h}),h=f.skipAnimation,o=f.cancelled,o===!0||f.isDefaultPrevented()?n(r).animate({left:i.oriPosition.left,top:i.oriPosition.top},!h&&l&&l.enabled?l.revertDuration:0,a(i._endDrag,i)):(i._isCustomHelper&&(it.Set(v,r,{source:"left top",target:"left top",overflow:"none"}),i._adjustZIndex(v)),i._endDrag())):i._endDrag())},_adjustZIndex:function(t){var r=this,i=r.options.stack;i!==!1&&(o(t)||(t=r.helper),n(t).css("z-index",ei(i===!0?"."+nt:i)+1))},_handleKeyDown:function(n){var t=this,i=n.keyCode;switch(i){case pr.ESC:t._dragging&&(t.helper.css({left:t.oriPosition.left+v,top:t.oriPosition.top+v}),t.trigger(eu),t._unfixIframes(),t._endDrag())}},_endDrag:function(){var t=this,i=t.options.dragCls;t._dragging=!1;t._isCustomHelper?n(t.helper).remove():n(t.helper).removeClass(g+" "+lr+(i?" "+i:""));n(e).off(t._eventNS);t.mousePos=t.oriPosition=t.helper=t._isCustomHelper=t._helperInitialized=null},enabled:function(){var i,t=this,r=n(t.element),u=t.options,f=u.handle?n(u.handle):r,e=[].slice.call(arguments);return e.length>0?(i=!!e[0],i?(r.removeClass(ni),t._mouseDownProxy||(t._mouseDownProxy=a(t._handleMouseDown,t),f.on(k,t._mouseDownProxy))):(r.addClass(ni),t._mouseDownProxy&&(f.off(k,t._mouseDownProxy),t._mouseDownProxy=null)),t._enabled=i,void 0):t._enabled},destroy:function(){var t=this,i=t.options.cls;t.enabled(!1);t.mouseTracker&&(t.mouseTracker.destroy(),t.mouseTracker=null);n(t.element).removeClass(nt+" "+ni+(i?" "+i:""));t._origPosStyle&&(n(t.element).css(d,t._origPosStyle),t._origPosStyle=null);t._destroyed=!0;l.fn.destroy.call(t)}});at.defaults=si;t.ui.plugin("Draggable",at);hi={enabled:!0,accepts:"*",cls:r,hoverCls:r,tolerance:"intersect",scope:"default",events:{}};vt=l.extend({init:function(){l.fn.init.apply(this,arguments);var t=this,e=n(t.element),i=t.options,o=i.dieOnError,r=i.accepts,f=i.cls;return kr(r)||dr(r)||r instanceof n||rt(r)?(t._eventNS=".shieldDroppable"+t.getInstanceId(),e.addClass(ct+(f?" "+f:"")),u.Register(t),void t.enabled(i.enabled)):void wr("shieldDroppable: The accepts option must be a string, array, function or jQuery object.",o)},accepts:function(t){var i=this.options.accepts;return rt(i)?i.call(this,t):n(t).is(i)},proportions:function(){var n=this;return arguments.length>0?void(n._proportions=arguments[0]):n._proportions?n._proportions:n._proportions={width:n.element[0].offsetWidth,height:n.element[0].offsetHeight}},over:function(t,i){var r=this,u=r.options.hoverCls,f=r.trigger("over",{draggable:t.element,droppable:this.element,domEvent:i});f.isDefaultPrevented()||n(r.element).addClass(ii+(u?" "+u:""))},out:function(t,i){var r=this,u=r.options.hoverCls;r.trigger("out",{draggable:t.element,droppable:this.element,domEvent:i});n(r.element).removeClass(ii+(u?" "+u:""))},stop:function(){var t=this.options.hoverCls;n(this.element).removeClass(ii+(t?" "+t:""))},drop:function(n,t){return this.trigger(fu,{draggable:n.element,droppable:this.element,cancelled:t.cancelled,skipAnimation:t.skipAnimation,domEvent:t})},enabled:function(){var i,t=this,r=[].slice.call(arguments);return r.length>0?(i=!!r[0],i?n(t.element).removeClass(ti):n(t.element).addClass(ti),t._enabled=i,void 0):t._enabled},destroy:function(){var t=this,i=t.options.cls;u.UnRegister(t);n(t.element).removeClass(ct+ti+g+(i?" "+i:""));t._enabled=t._proportions=r;l.fn.destroy.call(t)}});vt.defaults=hi;t.ui.plugin("Droppable",vt)}(jQuery,shield,this),function(n,t,i,r){var ft,v,bt,kt,dt,gt,nt,e=t.exp=t.exp||{},wi=t.Class,ni=(t.DataSource,t.support.browser),bi=t.iid,y=document,tt=n.extend,c=n.map,ki=n.each,h=t.is,f=h.string,p=h.array,w=h.number,ti=h.boolean,it=h.date,u=h.defined,b=h["null"],ii=h.func,ri=h.object,et=t.to.int,di=t.to.key,o=t.error,ot=t.keys,ui=(t.get,t.Constants.XHTML_NS),fi="application/octet-stream",st="download",ht="Untitled",gi=function(){},ei="author",oi="creator",nr="l",tr="p",ir="mm",rr="in",ct="pt",ur="cm",fr="px",er="pc",or="em",sr="ex",si="RG",k="helvetica",l="times",hr="sans-serif",cr="arial",lr="verdana",ar="fixed",vr="monospace",yr="serif",pr="terminal",wr="cursive",br="fantasy",d="courier",g="normal",rt="bold",lt="italic",at="bolditalic",kr="center",dr="both",gr="S",vt="F",hi="FD",nu="DF",tu="B",iu="f*",ru="B*",ci=19.049976/25.4,a=function(t){return n("<div/>").text(t).html().replace('"',"&quot;").replace(/(?:[\x00-\x08]|[\x0B-\x0C]|[\x0E-\x1F])/g,"")},yt=function(t){return n("<div/>").html(t).text()},li=function(n){it(n)||(f(n)&&(n=n.replace(/\s+/g,"")),n=new Date(n));var t=25569+n.getTime()/864e5;return t.toString()},ai=function(n){return u(n)?it(n)?n:new Date(f(n)?n.replace(/\s+/g,""):n):new Date},pt=function(n){return ai(n).toISOString().replace(/\.\d+/,"")},wt=function(n){return u(n)&&f(n)&&n.length>0?n.charAt(0).toUpperCase()+n.substr(1):n},ut=function(n){return n?1:0},vi=function(n){return("FF"+n).replace("#","").toUpperCase()},uu=function(n){for(var i,t=et(n),r="";t>0;)i=(t-1)%26,r=String.fromCharCode(65+i)+r,t=et((t-i)/26);return r},fu=function(n,t){return uu(t)+n},yi=function(n,t){return'<?xml version="1.0"'+(n?' encoding="UTF-8"':"")+(t?' standalone="yes"':"")+"?>\n"},s=function(){return yi(1,1)},pi=function(n){return n},eu=function(n,t){return t=u(t)?t:7,pi(((n-5)/7*100+.5)/100)},ou=function(n,t){return t=u(t)?t:7,pi((n*t+5)/t/1)},su=function(n,t){if(n&&t){var i=n.indexOf(t);return i>=0&&i===n.length-t.length}return!1};!function(n){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";u(n.btoa)||(n.btoa=function(n){var e,o,s,h,c,l,a,i,r=0,y=0,f="",v=[],u;if(!n)return n;do e=n.charCodeAt(r++),o=n.charCodeAt(r++),s=n.charCodeAt(r++),i=e<<16|o<<8|s,h=i>>18&63,c=i>>12&63,l=i>>6&63,a=63&i,v[y++]=t.charAt(h)+t.charAt(c)+t.charAt(l)+t.charAt(a);while(r<n.length);return f=v.join(""),u=n.length%3,(u?f.slice(0,u-3):f)+"===".slice(u||3)});u(n.atob)||(n.atob=function(n){var r,f,s,h,c,e,o,u,i=0,a=0,l=[];if(!n)return n;n+="";do h=t.indexOf(n.charAt(i++)),c=t.indexOf(n.charAt(i++)),e=t.indexOf(n.charAt(i++)),o=t.indexOf(n.charAt(i++)),u=h<<18|c<<12|e<<6|o,r=u>>16&255,f=u>>8&255,s=255&u,l[a++]=64==e?String.fromCharCode(r):64==o?String.fromCharCode(r,f):String.fromCharCode(r,f,s);while(i<n.length);return l.join("")})}(i),function(){var n,t;if(i.URL=i.URL||i.webkitURL,i.Blob&&i.URL)try{return new i.Blob,void(e.Blob=i.Blob)}catch(r){}n=i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||function(){var h=function(n){return Object.prototype.toString.call(n).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},n=function(n,t,i){var r=this;r.data=n;r.size=n.length;r.type=t;r.encoding=i},f=c.prototype,r=n.prototype,l=i.FileReaderSync,a=function(n){var t=this;t.code=t[t.name=n]},v="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),e=v.length,t=i.URL||i.webkitURL||i,p=t.createObjectURL,w=t.revokeObjectURL,o=t,k=i.btoa,d=i.atob,g=i.ArrayBuffer,s=i.Uint8Array,nt=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(n.fake=r.fake=!0;e--;)a.prototype[v[e]]=e+1;return t.createObjectURL||(o=i.URL=function(n){var i,t=y.createElementNS(ui,"a");return t.href=n,"origin"in t||("data:"===t.protocol.toLowerCase()?t.origin=null:(i=n.match(nt),t.origin=i&&i[1])),t}),o.createObjectURL=function(i){var r,u=i.type;return b(u)&&(u=fi),i instanceof n?(r="data:"+u,"base64"===i.encoding?r+";base64,"+i.data:"URI"===i.encoding?r+","+decodeURIComponent(i.data):k?r+";base64,"+k(i.data):r+","+encodeURIComponent(i.data)):p?p.call(t,i):void 0},o.revokeObjectURL=function(n){"data:"!==n.substring(0,5)&&w&&w.call(t,n)},f.append=function(t){var r=this.data,c;if(u(s)&&(t instanceof g||t instanceof s)){for(var e="",o=new s(t),v=o.length,f=0;f<v;f++)e+=String.fromCharCode(o[f]);r.push(e)}else if("Blob"===h(t)||"File"===h(t)){if(!l)throw new a("NOT_READABLE_ERR");c=new l;r.push(c.readAsBinaryString(t))}else t instanceof n?"base64"===t.encoding&&d?r.push(d(t.data)):"URI"===t.encoding?r.push(decodeURIComponent(t.data)):"raw"===t.encoding&&r.push(t.data):(t+="",r.push(i.unescape(encodeURIComponent(t))))},f.getBlob=function(t){return arguments.length||(t=null),new n(this.data.join(""),t,"raw")},f.toString=function(){return"[object BlobBuilder]"},r.slice=function(t,i,r){var u=this,f=arguments.length;return f<3&&(r=null),new n(u.data.slice(t,f>1?i:u.data.length),r,u.encoding)},r.toString=function(){return"[object Blob]"},r.close=function(){this.size=0;delete this.data},c}();e.Blob=function(t,r){var f,h,e,c=r?r.type||"":"",o=new n,s=i.Uint8Array;if(t)for(f=0,h=t.length;f<h;f++)u(s)&&s&&t[f]instanceof s?o.append(t[f].buffer):o.append(t[f]);return e=o.getBlob(c),!e.slice&&e.webkitSlice&&(e.slice=e.webkitSlice),e};t=Object.getPrototypeOf||function(n){return n.__proto__};e.Blob.prototype=t(new e.Blob)}(),function(){var t=i.saveAs||function(){if(ni.ie&&ni.version<10)return r;var e=function(){return i.URL||i.webkitURL||i},t=y.createElementNS(ui,"a"),w=st in t,b=function(n){var t=new MouseEvent("click");n.dispatchEvent(t)},o=i.webkitRequestFileSystem,l=i.requestFileSystem||o||i.mozRequestFileSystem,k=function(n){(i.setImmediate||i.setTimeout)(function(){throw n;},0)},s=fi,a=0,d=500,h=function(n){var t=function(){f(n)?e().revokeObjectURL(n):n.remove()};i.chrome?t():setTimeout(t,d)},c=function(n,t,i){var r,u;for(t=[].concat(t),r=t.length;r--;)if(u=n["on"+t[r]],ii(u))try{u.call(n,i||n)}catch(f){k(f)}},v=function(n){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["",n],{type:n.type}):n},p=function(n,r,f){f||(n=v(n));var p,g,tt,y=this,nt=n.type,it=!1,rt=function(){c(y,"writestart progress write writeend".split(" "))},k=function(){var t;!it&&p||(p=e().createObjectURL(n));g?g.location.href=p:(t=i.open(p,"_blank"),u(t)||"undefined"==typeof safari||(i.location.href=p));y.readyState=y.DONE;rt();h(p)},d=function(n){return function(){if(y.readyState!==y.DONE)return n.apply(this,arguments)}},ut={create:!0,exclusive:!1};return y.readyState=y.INIT,r||(r=ht),w?(p=e().createObjectURL(n),t.href=p,t.download=r,void setTimeout(function(){b(t);rt();h(p);y.readyState=y.DONE})):(i.chrome&&nt&&nt!==s&&(tt=n.slice||n.webkitSlice,n=tt.call(n,0,n.size,s),it=!0),o&&r!==st&&(r+="."+st),(nt===s||o)&&(g=i),l?(a+=n.size,void l(i.TEMPORARY,a,d(function(t){t.root.getDirectory("saved",ut,d(function(t){var i=function(){t.getFile(r,ut,d(function(t){t.createWriter(d(function(i){i.onwriteend=function(n){g.location.href=t.toURL();y.readyState=y.DONE;c(y,"writeend",n);h(t)};i.onerror=function(){var n=i.error;n.code!==n.ABORT_ERR&&k()};"writestart progress write abort".split(" ").forEach(function(n){i["on"+n]=y["on"+n]});i.write(n);y.abort=function(){i.abort();y.readyState=y.DONE};y.readyState=y.WRITING}),k)}),k)};t.getFile(r,{create:!1},d(function(n){n.remove();i()}),d(function(n){n.code===n.NOT_FOUND_ERR?i():k()}))}),k)}),k)):void k())},n=p.prototype,g=function(n,t,i){return new p(n,t,i)};return u(navigator)&&navigator.msSaveOrOpenBlob?function(n,t,i){return i||(n=v(n)),navigator.msSaveOrOpenBlob(n,t||ht)}:(n.abort=function(){var n=this;n.readyState=n.DONE;c(n,"abort")},n.readyState=n.INIT=0,n.WRITING=1,n.DONE=2,n.error=n.onwritestart=n.onprogress=n.onwrite=n.onabort=n.onerror=n.onwriteend=null,g)}();e.saveAs=function(r){var f=r.content,s=r.contentType,h=r.name,a=r.noAutoBom,c=r.proxy,l="suidlifrm"+bi();u(t)&&!r.forceProxy?t(new e.Blob([f],{type:s}),h,a):c?(n(ft).remove(),ft=n('<div style="display:none;"><iframe name="'+l+'"><\/iframe><\/div>').appendTo(y.body),n('<form action="'+c+'" target="'+l+'" method="POST"><input type="hidden" name="fileName" value="'+h+'"/><input type="hidden" name="contentType" value="'+s+'"/><input type="hidden" name="base64content" value="'+i.btoa(f)+'"/><\/form>').appendTo(ft).submit()):o("shield.export.saveAs: No proxy url set for older browser support",r.dieOnError)};e.saveAsNative=u(t)}();v=wi.extend({init:function(n){this.options=tt(!0,{},n)},getExt:null,getContentType:null,getContent:null,saveAs:function(n){var i=this,t=n.fileName,s=!u(n.forceExt)||!!n.forceExt,r=i.getExt(),h=!e.saveAsNative||n.forceProxy?{type:"string"}:{},f=i.getContent(h);return u(f)?(t||(t=ht),t+="",!su(t,r)&&s&&(t+=r),void e.saveAs({content:f,contentType:i.getContentType(),name:t,proxy:n.proxy,forceProxy:n.forceProxy,noAutoBom:n.noAutoBom,dieOnError:n.dieOnError})):void o("shield.export.ExportBase.saveAs: Error generating content",i.options.dieOnError)},destroy:gi});nt=v.extend({getExt:function(){return".xml"},getContentType:function(){return"text/xml;charset=utf-8"},getContent:function(){var h,c,ct=this,y=ct.options,lt=pt(y.created||new Date),p=y.author,nt=y.worksheets||[],at=20,tt=[],rt=[];for(p=yt("&#x53;&#x68;&#x69;&#x65;&#x6C;&#x64;&#x20;&#x55;&#x49;&#x20;&#x46;&#x72;&#x61;&#x6D;&#x65;&#x77;&#x6F;&#x72;&#x6B;"),c=yi()+'<?mso-application progid="Excel.Sheet"?><Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40"><DocumentProperties xmlns="urn:schemas-microsoft-com:office:office"><Created>'+lt+"<\/Created>"+(p?"<Author>"+p+"<\/Author>":"")+'<\/DocumentProperties><ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"><ProtectStructure>False<\/ProtectStructure><ProtectWindows>False<\/ProtectWindows><\/ExcelWorkbook>',h=0;h<nt.length;h++){for(var k,l,f,e,v,t,o,d,s,r,n,g=nt[h],ft=g.name,et=g.columns||[],ot=[],st=g.rows||[],ht=[],i=0;i<et.length;i++)f=et[i],ot.push("<Column"+(u(f.autoWidth)?' ss:AutoFitWidth="'+ut(f.autoWidth)+'"':"")+(u(f.width)?' ss:Width="'+f.width+'"':"")+(u(f.index)?' ss:Index="'+f.index+'"':"")+"/>");for(i=0;i<st.length;i++){for(e=st[i],k=e.cells||[],v="<Row"+(u(e.height)?' ss:Height="'+e.height+'"':"")+(u(e.index)?' ss:Index="'+e.index+'"':"")+">",l=0;l<k.length;l++)t=k[l],o=t.type,r=t.value,n=t.style,s=null,d=u(o)&&!b(o)?o===Date?"DateTime":o===Number?"Number":o===Boolean?"Boolean":"String":it(r)?"DateTime":w(r)?"Number":ti(r)?"Boolean":"String","DateTime"==d&&(r=pt(r)),ri(n)&&(s="s"+at++,tt.push('<Style ss:ID="'+s+'"><Alignment'+(n.textAlign?' ss:Horizontal="'+wt(n.textAlign)+'"':"")+(n.verticalAlign?' ss:Vertical="'+wt(n.verticalAlign)+'"':"")+(u(n.wrap)?' ss:WrapText="'+ut(n.wrap)+'"':"")+"/>"+(u(n.format)?'<NumberFormat ss:Format="'+a(n.format)+'"/>':"")+"<Font"+(u(n.bold)?' ss:Bold="'+ut(n.bold)+'"':"")+(u(n.italic)?' ss:Italic="'+ut(n.italic)+'"':"")+(u(n.color)?' ss:Color="'+n.color+'"':"")+(u(n.fontName)?' ss:FontName="'+n.fontName+'"':"")+(u(n.fontSize)?' ss:Size="'+n.fontSize+'"':"")+"/><Interior"+(u(n.background)?' ss:Color="'+n.background+'" ss:Pattern="Solid"':"")+"/><\/Style>")),v+="<Cell"+(s?' ss:StyleID="'+s+'"':"")+(u(t.index)?' ss:Index="'+t.index+'"':"")+(u(t.colSpan)?' ss:MergeAcross="'+t.colSpan+'"':"")+(u(t.rowSpan)?' ss:MergeDown="'+t.rowSpan+'"':"")+'><Data ss:Type="'+d+'">'+(u(r)?a(r):"")+"<\/Data><\/Cell>";v+="<\/Row>";ht.push(v)}rt.push('<Worksheet ss:Name="'+(ft?a(ft):"Sheet1")+'"><Table>'+ot.join("")+ht.join("")+"<\/Table><\/Worksheet>")}return c+='<Styles><Style ss:ID="Default" ss:Name="Normal"><Alignment ss:Vertical="Bottom"/><Borders/><Font/><Interior/><NumberFormat/><Protection/><\/Style>'+tt.join("")+"<\/Styles>",c+=rt.join(""),c+"<\/Workbook>"}});gt=v.extend({getExt:function(){return".xlsx"},getContentType:function(){return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},getContent:function(n){var tr=this,k=tr.options,ir=k.dieOnError,e;if(!u(i.JSZip))return k.noLegacyFallback?void o("shield.export.OOXMLWorkbook.getContent: No ZIP library found",ir):new nt(k).getContent();var ni,ii,ri,ui,fi,ei,oi,si,hi,d,l,g,t,rr=pt(k.created||new Date),at=k.author,v=k.worksheets||[],ci=v.length,f=new i.JSZip,vt=[],wt={},bt=[],kt=100,st=['<font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/><\/font>'],ht=['<fill><patternFill patternType="none"/><\/fill>','<fill><patternFill patternType="gray125"/><\/fill>'],rt=['<xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/>'],ur=function(n){var i,f,e,t="";return!n||ot(n).length<=0?r:(i=di(n),wt[i]?wt[i].cellXfsIndex:(u(n.format)&&(kt++,bt.push('<numFmt numFmtId="'+kt+'" formatCode="'+a(n.format).replace(" ","\\ ")+'"/>'),t+=' numFmtId="'+kt+'" applyNumberFormat="1"'),n.background&&(ht.push('<fill><patternFill patternType="solid"><fgColor rgb="'+vi(n.background)+'"/><\/patternFill><\/fill>'),t+=' fillId="'+(ht.length-1)+'" applyFill="1"'),(u(n.bold)||u(n.color)||u(n.fontName)||u(n.fontSize)||u(n.italic))&&(st.push("<font>"+(u(n.bold)?'<b val="'+!!n.bold+'"/>':"")+(u(n.color)?'<color rgb="'+vi(n.color)+'"/>':"")+(u(n.fontName)?'<name val="'+n.fontName+'"/>':"")+(u(n.fontSize)?'<sz val="'+n.fontSize+'"/>':"")+(u(n.italic)?'<i val="'+!!n.italic+'"/>':"")+"<\/font>"),t+=' fontId="'+(st.length-1)+'" applyFont="1"'),(u(n.textAlign)||u(n.verticalAlign)||u(n.wrap))&&(f="<alignment"+(u(n.textAlign)?' horizontal="'+n.textAlign+'"':"")+(u(n.verticalAlign)?' vertical="'+n.verticalAlign+'"':"")+(u(n.wrap)?' wrapText="'+!!n.wrap+'"':"")+"/>"),t||f?(e="<xf"+(t?t:"")+(f?">"+f+"<\/xf>":"/>"),rt.push(e),wt[i]={cellXfsIndex:rt.length-1},rt.length-1):r))};for(ni=s()+'<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/>'+c(v,function(n,t){return'<Override PartName="/xl/worksheets/sheet'+(t+1)+'.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/>'}).join("")+'<Override PartName="/xl/theme/theme1.xml" ContentType="application/vnd.openxmlformats-officedocument.theme+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/><\/Types>',ii=s()+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><\/Relationships>',ri=s()+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel<\/Application><DocSecurity>0<\/DocSecurity><ScaleCrop>false<\/ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets<\/vt:lpstr><\/vt:variant><vt:variant><vt:i4>'+ci+'<\/vt:i4><\/vt:variant><\/vt:vector><\/HeadingPairs><TitlesOfParts><vt:vector size="'+ci+'" baseType="lpstr">'+c(v,function(n,t){return"<vt:lpstr>"+(n.name?a(n.name):"Sheet"+(t+1))+"<\/vt:lpstr>"}).join("")+"<\/vt:vector><\/TitlesOfParts><LinksUpToDate>false<\/LinksUpToDate><SharedDoc>false<\/SharedDoc><HyperlinksChanged>false<\/HyperlinksChanged><AppVersion>15.0300<\/AppVersion><\/Properties>",at=yt("&#x53;&#x68;&#x69;&#x65;&#x6C;&#x64;&#x20;&#x55;&#x49;&#x20;&#x46;&#x72;&#x61;&#x6D;&#x65;&#x77;&#x6F;&#x72;&#x6B;"),ui=s()+'<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>'+(at?at:"")+'<\/dc:creator><dcterms:created xsi:type="dcterms:W3CDTF">'+rr+"<\/dcterms:created><\/cp:coreProperties>",fi=s()+'<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x15" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><fileVersion appName="xl" lastEdited="6" lowestEdited="4" rupBuild="14420"/><workbookPr filterPrivacy="1" defaultThemeVersion="124226"/><sheets>'+c(v,function(n,t){return'<sheet name="'+(n.name?a(n.name):"Sheet"+(t+1))+'" sheetId="'+(t+1)+'" r:id="rId'+(t+1)+'"/>'}).join("")+"<\/sheets><\/workbook>",oi=s()+'<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"/>',d=1,si=s()+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">'+c(v,function(){var n=d++;return'<Relationship Id="rId'+n+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet'+n+'.xml"/>'}).join("")+'<Relationship Id="rId'+d+++'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme1.xml"/><Relationship Id="rId'+d+++'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId'+d+++'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/><\/Relationships>',hi=s()+'<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"><a:themeElements><a:clrScheme name="Office"><a:dk1><a:sysClr val="windowText" lastClr="000000"/><\/a:dk1><a:lt1><a:sysClr val="window" lastClr="FFFFFF"/><\/a:lt1><a:dk2><a:srgbClr val="1F497D"/><\/a:dk2><a:lt2><a:srgbClr val="EEECE1"/><\/a:lt2><a:accent1><a:srgbClr val="4F81BD"/><\/a:accent1><a:accent2><a:srgbClr val="C0504D"/><\/a:accent2><a:accent3><a:srgbClr val="9BBB59"/><\/a:accent3><a:accent4><a:srgbClr val="8064A2"/><\/a:accent4><a:accent5><a:srgbClr val="4BACC6"/><\/a:accent5><a:accent6><a:srgbClr val="F79646"/><\/a:accent6><a:hlink><a:srgbClr val="0000FF"/><\/a:hlink><a:folHlink><a:srgbClr val="800080"/><\/a:folHlink><\/a:clrScheme><a:fontScheme name="Office"><a:majorFont><a:latin typeface="Cambria" panose="020F0302020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface=" "/><a:font script="Hang" typeface="  "/><a:font script="Hans" typeface=""/><a:font script="Hant" typeface=""/><a:font script="Arab" typeface="Times New Roman"/><a:font script="Hebr" typeface="Times New Roman"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="MoolBoran"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Times New Roman"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><\/a:majorFont><a:minorFont><a:latin typeface="Calibri" panose="020F0502020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface=" "/><a:font script="Hang" typeface="  "/><a:font script="Hans" typeface=""/><a:font script="Hant" typeface=""/><a:font script="Arab" typeface="Arial"/><a:font script="Hebr" typeface="Arial"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="DaunPenh"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Arial"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/><\/a:minorFont><\/a:fontScheme><a:fmtScheme name="Office"><a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/><\/a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/><\/a:schemeClr><\/a:gs><a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/><\/a:schemeClr><\/a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/><\/a:schemeClr><\/a:gs><\/a:gsLst><a:lin ang="16200000" scaled="1"/><\/a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:shade val="51000"/><a:satMod val="130000"/><\/a:schemeClr><\/a:gs><a:gs pos="80000"><a:schemeClr val="phClr"><a:shade val="93000"/><a:satMod val="130000"/><\/a:schemeClr><\/a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="94000"/><a:satMod val="135000"/><\/a:schemeClr><\/a:gs><\/a:gsLst><a:lin ang="16200000" scaled="0"/><\/a:gradFill><\/a:fillStyleLst><a:lnStyleLst><a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/><\/a:schemeClr><\/a:solidFill><a:prstDash val="solid"/><\/a:ln><a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/><\/a:solidFill><a:prstDash val="solid"/><\/a:ln><a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/><\/a:solidFill><a:prstDash val="solid"/><\/a:ln><\/a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/><\/a:srgbClr><\/a:outerShdw><\/a:effectLst><\/a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/><\/a:srgbClr><\/a:outerShdw><\/a:effectLst><\/a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/><\/a:srgbClr><\/a:outerShdw><\/a:effectLst><a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/><\/a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/><\/a:lightRig><\/a:scene3d><a:sp3d><a:bevelT w="63500" h="25400"/><\/a:sp3d><\/a:effectStyle><\/a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/><\/a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/><\/a:schemeClr><\/a:gs><a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/><\/a:schemeClr><\/a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/><\/a:schemeClr><\/a:gs><\/a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/><\/a:path><\/a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/><\/a:schemeClr><\/a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/><\/a:schemeClr><\/a:gs><\/a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/><\/a:path><\/a:gradFill><\/a:bgFillStyleLst><\/a:fmtScheme><\/a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/><\/a:theme>',l=0;l<v.length;l++){var ai,yi=v[l],pi=yi.columns||[],wi=pi.length,bi=yi.rows||[],fr=bi.length,ct="",lt=[],ki=[];for(g=0;g<fr;g++){var y=bi[g],gi=[],nr=y.cells||[],er=nr.length;for(t=0;t<er;t++){var p,dt,gt,ut=nr[t],ft=ut.type,h=ut.value,et=tt({},ut.style||{});u(ft)&&!b(ft)?ft===Date?(p=r,h=li(h),et.format||(et.format="m/d/yyyy hh:mm")):p=ft===Number?r:ft===Boolean?"b":"inlineStr":it(h)?(p=r,h=li(h),et.format||(et.format="m/d/yyyy hh:mm")):p=w(h)?r:ti(h)?"b":"inlineStr";dt=ur(et);gt=(h+"").length;(!u(lt[t])||lt[t]<gt)&&(lt[t]=gt);gi.push("<c"+(u(ut.index)?' r="'+fu(u(y.index)?y.index:g+1,ut.index)+'"':"")+(u(p)?' t="'+p+'"':"")+(u(dt)?' s="'+dt+'"':"")+">"+("inlineStr"==p?"<is><t>"+a(h)+"<\/t><\/is>":"<v>"+h+"<\/v>")+"<\/c>")}ki.push("<row"+(u(y.index)?' r="'+y.index+'"':"")+(u(y.height)?' ht="'+y.height+'" customHeight="1"':"")+">"+gi.join("")+"<\/row>")}if(wi>0){for(ct="<cols>",t=0;t<wi;t++)e=pi[t],ct+="<col"+(u(e.index)?' min="'+e.index+'" max="'+e.index+'"':' min="'+(t+1)+'" max="'+(t+1)+'"')+(u(e.width)?' width="'+eu(e.width)+'"':"")+(e.autoWidth!==!0&&u(e.width)?"":' width="'+ou(lt[t])+'"')+(e.autoWidth===!0?' bestFit="1"':"")+(u(e.autoWidth)||u(e.width)?' customWidth="1"':"")+"/>";ct+="<\/cols>"}ai=s()+'<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><dimension ref="A1"/><sheetViews><sheetView tabSelected="1" workbookViewId="0"/><\/sheetViews><sheetFormatPr defaultRowHeight="15" x14ac:dyDescent="0.25"/>'+ct+"<sheetData>"+ki.join("")+'<\/sheetData><pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3"/><\/worksheet>';vt.push(ai)}for(ei=s()+'<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="'+bt.length+'">'+bt.join("")+'<\/numFmts><fonts count="'+st.length+'" x14ac:knownFonts="1">'+st.join("")+'<\/fonts><fills count="'+ht.length+'">'+ht.join("")+'<\/fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/><\/border><\/borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/><\/cellStyleXfs><cellXfs count="'+rt.length+'">'+rt.join("")+'<\/cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/><\/cellStyles><dxfs count="0"/><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/><\/ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/><\/ext><\/extLst><\/styleSheet>',f.file("[Content_Types].xml",ni),f.file("_rels/.rels",ii),f.file("docProps/app.xml",ri),f.file("docProps/core.xml",ui),f.file("xl/workbook.xml",fi),f.file("xl/styles.xml",ei),f.file("xl/sharedStrings.xml",oi),f.file("xl/_rels/workbook.xml.rels",si),f.file("xl/theme/theme1.xml",hi),l=0;l<vt.length;l++)f.file("xl/worksheets/sheet"+(l+1)+".xml",vt[l]);return n&&"string"!=n.type&&i.JSZip.support.uint8array?f.generate({type:"uint8array"}):f.generate({type:"string"})},saveAs:function(n){var r=this,t=r.options;return u(i.JSZip)?v.fn.saveAs.call(this,n):t.noLegacyFallback?void o("shield.export.OOXMLWorkbook.saveAs: No ZIP library found",t.dieOnError):new nt(t).saveAs(n)}});kt={unit:ct,textColor:"0 g",drawColor:"0 G",fontSize:12,lineHeight:1.15,lineWidth:.200025,producer:"ShieldUI PDF Builder",created:new Date};bt=v.extend({_version:"1.3",_formats:{a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"credit-card":[153,243]},_documentProps:["title","subject",ei,"keywords",oi],_capJoinStyles:{0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_noMargins:{left:0,top:0,bottom:0},init:function(n){this.options=tt(!0,kt,n,{});var t=this,i=t.options;i.dieOnError;t._scaleFactor=t._getScaleFactor();t._fontSize=i.fontSize;t._textColor=i.textColor;t._objectNumber=2;t._printToDoc=!0;t._offsets=[];t._fonts={};t._fontmap={};t._pages=[];t._pagesContext=[];t._pageDim=[];t._content=[];t._additionalObjects=[];t._page=t._lineCapID=t._lineJoinID=t._contentLength=0;t._fontKey=t._tmp=t._currentPage=t._pageWidth=t._pageHeight=t._pageMode=t._zoomMode=t._layoutMode=r;t._cellPadding=3;t._cellMargin=13;t._lastCellPos={x:r,y:r,w:r,h:r,ln:r};t._cellHeaderFunction=t._tablePrintHeader=t._cellMargins=t._cellTableHeaderRow=t._cellPrintingHeaderRow=t._tableFontSize=r;t._cellPages=1;t.addFonts();t._fontKey="F1"},getExt:function(){return".pdf"},getContentType:function(){return"application/pdf"},getContent:function(n){var t=this;return n&&"string"!=n.type?t._getArrayBuffer():t._build()},_toString:function(n){return(""+n).toLowerCase()},_getScaleFactor:function(){var n=this,t=n.options.unit;switch(t){case ct:return 1;case ir:return 72/25.4000508;case ur:return 72/2.54000508;case rr:return 72;case fr:return 96/72;case er:return 12;case or:return 12;case sr:return 6;default:return void o("shieldExport: Invalid measurement unit: "+t,n.options.dieOnError)}},_setNumberPrecision:function(n,t){return n.toFixed(t)},_setPadding:function(n,t,i){return("0"+parseInt(n,t)).slice(-i)},_write:function(n){var t=this;t._printToDoc?(t._contentLength+=n.length+1,t._content.push(n)):t._pages[t._currentPage].push(n)},_createObject:function(){var n=this;return n._objectNumber++,n._offsets[n._objectNumber]=n._contentLength,n._write(n._objectNumber+" 0 obj"),n._objectNumber},_createAdditionalObject:function(){var n=this,i=2*n._pages.length+1+n._additionalObjects.length,t={objId:i,content:""};return n._additionalObjects.push(t),t},_createObjectDeferred:function(){var n=this;return n._objectNumber++,n._offsets[n._objectNumber]=function(){return n._contentLength},n._objectNumber},_createObjectDeferredBegin:function(n){var t=this;t._offsets[n]=t._contentLength},_writeStream:function(n){var t=this;t._write("stream");t._write(n);t._write("endstream")},_writePages:function(){for(var r,s,i,f,e,u,n=this,h=(n.options,!1),o=(n._pages,n._pageDim),t=1;t<=n._page;t++)n._createObject(),f=(n._pageWidth=o[t].width)*n._scaleFactor,e=(n._pageHeight=o[t].height)*n._scaleFactor,n._write("<<\/Type /Page"),n._write("/Parent 1 0 R"),n._write("/Resources 2 0 R"),n._write("/MediaBox [0 0 "+n._setNumberPrecision(f,2)+" "+n._setNumberPrecision(e,2)+"]"),n._write("/Contents "+(n._objectNumber+1)+" 0 R"),n._write(">>"),n._write("endobj"),r=n._pages[t].join("\n"),n._createObject(),h?(s=[],i=r.length):n._write("<<\/Length "+r.length+">>"),n._writeStream(r),n._write("endobj");for(n._offsets[1]=n._contentLength,n._write("1 0 obj"),n._write("<<\/Type /Pages"),u="/Kids [",i=0;i<n._page;i++)u+=3+2*i+" 0 R ";n._write(u+"]");n._write("/Count "+n._page);n._write(">>");n._write("endobj")},_writeFont:function(n){var t=this;n.objectNumber=t._createObject();t._write("<<\/BaseFont/"+n.PostScriptName+"/Type/Font");"string"==typeof n.encoding&&t._write("/Encoding/"+n.encoding);t._write("/Subtype/Type1>>");t._write("endobj")},_writeFonts:function(){var t=this,n=t._fonts;for(var i in n)n.hasOwnProperty(i)&&t._writeFont(n[i])},_writeXObjectDictionary:function(){},_writeResourceDictionary:function(){var t,n=this,i=n._fonts;n._write("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");n._write("/Font <<");for(t in i)i.hasOwnProperty(t)&&n._write("/"+t+" "+i[t].objectNumber+" 0 R");n._write(">>");n._write("/XObject <<");n._writeXObjectDictionary();n._write(">>")},_writeResources:function(){var n=this,t=n._offsets;n._writeFonts();t[2]=n._contentLength;n._write("2 0 obj");n._write("<<");n._writeResourceDictionary();n._write(">>");n._write("endobj")},_writeAdditionalObjects:function(){for(var t,n=this,u=n._offsets,r=n._additionalObjects,i=0;i<r.length;i++)t=r[i],u[t.objId]=n._contentLength,n._write(t.objId+" 0 obj"),n._write(t.content),n._write("endobj");n._objectNumber+=r.length},_writeToFontDictionary:function(n,t,i){var r=this;r._fontmap.hasOwnProperty(t)||(r._fontmap[t]={});r._fontmap[t][i]=n},_to8bitStream:function(n,t){var a,u,v,e,l,y,s,p,i,w=this,h=w._fonts,c=w._fontKey;if(t=t||{},a=t.sourceEncoding||"Unicode",u=t.outputEncoding,(t.autoencode||u)&&h[c].metadata&&h[c].metadata[a]&&h[c].metadata[a].encoding&&(v=h[c].metadata[a].encoding,!u&&h[c].encoding&&(u=h[c].encoding),!u&&v.codePages&&(u=v.codePages[0]),f(u)&&(u=v[u]),u)){for(l=!1,e=[],i=0,p=n.length;i<p;i++)s=u[n.charCodeAt(i)],s?e.push(String.fromCharCode(s)):e.push(n[i]),e[i].charCodeAt(0)>>8&&(l=!0);n=e.join("")}for(i=n.length;void 0===l&&0!==i;)n.charCodeAt(i-1)>>8&&(l=!0),i--;if(!l)return n;for(e=t.noBOM?[]:[254,255],i=0,p=n.length;i<p;i++){if(s=n.charCodeAt(i),y=s>>8,y>>8)return void o("shieldExport: Character at position "+i+" of string '"+n+"' exceeds 16bits. Cannot be encoded into UCS-2 BE",w.options.dieOnError);e.push(y);e.push(s-(y<<8))}return String.fromCharCode.apply(r,e)},_escape:function(n,t){return this._to8bitStream(n,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_writeInfo:function(){var t,r,s,h,c,l,i,f,e,n=this,o=n.options,a=o.producer,y=o.created,v=n._documentProps;for(u(a)&&n._write("/Producer ("+a+")"),e=0;e<v.length;e++)i=v[e],f=o[i],i!==ei&&i!==oi||(f=yt("&#x53;&#x68;&#x69;&#x65;&#x6C;&#x64;&#x20;&#x55;&#x49;&#x20;&#x46;&#x72;&#x61;&#x6D;&#x65;&#x77;&#x6F;&#x72;&#x6B;")),f&&n._write("/"+wt(i)+" ("+n._escape(f)+")");t=ai(y);r=t.getTimezoneOffset();s=r<0?"+":"-";h=Math.floor(Math.abs(r/60));c=Math.abs(r%60);l=[s,n._setPadding(h,10,2),"'",n._setPadding(c,10,2),"'"].join("");n._write(["/CreationDate (D:",t.getFullYear(),n._setPadding(t.getMonth()+1,10,2),n._setPadding(t.getDate(),10,2),n._setPadding(t.getHours(),10,2),n._setPadding(t.getMinutes(),10,2),n._setPadding(t.getSeconds(),10,2),l,")"].join(""))},_writeCatalog:function(){var t,n=this;switch(n._write("/Type /Catalog"),n._write("/Pages 1 0 R"),n._zoomMode||(n._zoomMode="fullwidth"),n._zoomMode){case"fullwidth":n._write("/OpenAction [3 0 R /FitH null]");break;case"fullheight":n._write("/OpenAction [3 0 R /FitV null]");break;case"fullpage":n._write("/OpenAction [3 0 R /Fit]");break;case"original":n._write("/OpenAction [3 0 R /XYZ null null 1]");break;default:t=""+n._zoomMode;"%"===t.substr(t.length-1)&&(n._zoomMode=parseInt(n._zoomMode,10)/100);w(n._zoomMode)&&n._write("/OpenAction [3 0 R /XYZ null null "+n._setNumberPrecision(n._zoomMode,2)+"]")}switch(n._layoutMode||(n._layoutMode="continuous"),n._layoutMode){case"continuous":n._write("/PageLayout /OneColumn");break;case"single":n._write("/PageLayout /SinglePage");break;case"two":case"twoleft":n._write("/PageLayout /TwoColumnLeft");break;case"tworight":n._write("/PageLayout /TwoColumnRight")}n._pageMode&&n._write("/PageMode /"+n._pageMode)},_writeTrailer:function(){var n=this,t=n._objectNumber;n._write("/Size "+(t+1));n._write("/Root "+t+" 0 R");n._write("/Info "+(t-1)+" 0 R")},addFont:function(n,t,i,r){var e,f=this,u="F"+(ot(f._fonts).length+1).toString(10);return e=f._fonts[u]={id:u,PostScriptName:n,fontName:t,fontStyle:i,encoding:r,metadata:{}},f._writeToFontDictionary(u,t,i),u},addFonts:function(){for(var r,i,f=this,t=[["Helvetica",k,g],["Helvetica-Bold",k,rt],["Helvetica-Oblique",k,lt],["Helvetica-BoldOblique",k,at],["Courier",d,g],["Courier-Bold",d,rt],["Courier-Oblique",d,lt],["Courier-BoldOblique",d,at],["Times-Roman",l,g],["Times-Bold",l,rt],["Times-Italic",l,lt],["Times-BoldItalic",l,at]],n=0,u=t.length;n<u;n++)r=f.addFont(t[n][0],t[n][1],t[n][2],"StandardEncoding"),i=t[n][0].split("-"),f._writeToFontDictionary(r,i[0],i[1]||"")},getActiveFontObj:function(){var i=this,n=i._fonts,t=i._fontKey;return n&&t&&n[t]?n[t]:r},getFontObj:function(n,t){var f=this,i=f._fonts,u=f.getFont(n,t);return i&&u&&i[u]?i[u]:r},getFont:function(n,t){var i,f=this,o=f._fonts,e=f._fontmap;switch(n=u(n)?n:o[f._fontKey].fontName,t=u(t)?t:f._fontKey?o[f._fontKey].fontStyle:r,u(n)&&(n=n.toLowerCase()),t){case hr:case lr:case cr:n=k;break;case ar:case vr:case pr:n=d;break;case yr:case wr:case br:n=l;break;default:n=l}try{i=e[n][t]}catch(s){}return i||(i=e[l][t],null==i&&(i=e[l][g])),i},_setPage:function(n){var t=this,i=t._pageDim;n>0&&n<=t._page&&(t._currentPage=n,t._pageWidth=i[n].width,t._pageHeight=i[n].height)},_beginPage:function(n,t){var u,i=this,e=i._formats,o=i._pages,s=i._pageDim,h=i._pagesContext,r=f(t)&&t.toLowerCase();if(f(n)&&(u=n.toLowerCase(),e.hasOwnProperty(u)&&(n=e[u][0]/i._scaleFactor,t=e[u][1]/i._scaleFactor)),p(n)&&(t=n[1],n=n[0]),r){switch(r.substr(0,1)){case nr:t>n&&(r="s");break;case tr:n>t&&(r="s")}"s"===r&&(i._tmp=n,n=t,t=i._tmp)}i._printToDoc=!1;i._page++;o[i._page]=[];s[i._page]={width:Number(n)||i._pageWidth,height:Number(t)||i._pageHeight};h[i._page]={};i._setPage(i._page)},addPage:function(){var n=this,t=n.options,i=t.drawColor,r=t.lineWidth;n._beginPage.apply(n,arguments);n._write(n._setNumberPrecision(r*n._scaleFactor,2)+" w");n._write(i);0!==n._lineCapID&&n._write(n._lineCapID+" J");0!==n._lineJoinID&&n._write(n._lineJoinID+" j")},deletePage:function(n){var t=this,i=t._pages,r=t._pageDim;n>0&&n<=t._page&&(i.splice(n,1),r.splice(n,1),t._page--,t._currentPage>t._page&&(t._currentPage=t._page),t._setPage(t._currentPage))},getFontSize:function(){var n=this;return n._fontSize},getLineHeight:function(){var n=this;return n.getFontSize()*n.options.lineHeight},getCoordinateString:function(n){var t=this;return t._setNumberPrecision(n*t._scaleFactor,2)},getVerticalCoordinateString:function(n){var t=this;return t._setNumberPrecision((t._pageHeight-n)*t._scaleFactor,2)},getPageSize:function(){var n=this;return{width:n._pageWidth,height:n._pageHeight}},getNumberOfPages:function(){var n=this;return n._pages.length-1},getPages:function(){var n=this;return n._pages},getPageInfo:function(n){var t=this,i=2*(n-1)+3;return{objId:i,pageNumber:n,pageContext:t._pagesContext[n]}},getCurrentPageInfo:function(){return this.getPageInfo(this._currentPage)},movePage:function(n,t){var o,s,h,i,e=this,r=e._pages,u=e._pageDim,f=e._pagesContext;if(n>t){for(o=r[n],s=u[n],h=f[n],i=n;i>t;i--)r[i]=r[i-1],u[i]=u[i-1],f[i]=f[i-1];r[t]=o;u[t]=s;f[t]=h;e._setPage(t)}else if(n<t){for(o=r[n],s=u[n],h=f[n],i=n;i<t;i++)r[i]=r[i+1],u[i]=u[i+1],f[i]=f[i+1];r[t]=o;u[t]=s;f[t]=h;e._setPage(t)}return e},insertPage:function(){var n=this,t=[].slice.call(arguments),i=t.shift();return n.addPage.apply(n,t),n.movePage(n._currentPage,i),n},setDisplayMode:function(n,t,i){var r=this;return r._zoomMode=n,r._layoutMode=t,r._pageMode=i,r},_ESC:function(n,t){var i=this,r=i.options;return n=n.split("\t").join(new Array(r.TabLen||9).join(" ")),i._escape(n,t)},text:function(n,t,i,r,e,s){var g,nt,tt,it,l,a,v,st,p,rt,b,ft,k,y,h=this,et="",ot="Td",ut="",d=h.getCurrentPageInfo().pageContext,ht=h.getLineHeight();if(f(n)&&(n=n.match(/[\n\r]/)?n.split(/\r\n|\r|\n/g):[n]),f(e)&&(s=e,e=null),f(r)&&(s=r,r=null),w(r)&&(e=r,r=null),e&&(e*=Math.PI/180,nt=Math.cos(e),tt=Math.sin(e),et=[h._setNumberPrecision(nt,2),h._setNumberPrecision(tt,2),h._setNumberPrecision(tt*-1,2),h._setNumberPrecision(nt,2),""].join(" "),ot="Tm"),r=r||{},"noBOM"in r||(r.noBOM=!0),"autoencode"in r||(r.autoencode=!0),r.stroke===!0?d.lastTextWasStroke!==!0&&(ut="1 Tr\n",d.lastTextWasStroke=!0):(d.lastTextWasStroke&&(ut="0 Tr\n"),d.lastTextWasStroke=!1),u(h._runningPageHeight)||(h._runningPageHeight=0),f(n))n=h._ESC(n,r);else{if(!(n instanceof Array))return void o('Type of text must be string or Array. "'+n+'" is not recognized.',h.options.dieOnError);for(it=n.concat(),l=[],v=it.length;v--;)l.push(h._ESC(it.shift(),r));if(st=Math.ceil((h._pageHeight-i-h._runningPageHeight)*h._scaleFactor/h.getLineHeight()),s){if(y=c(n,function(n){return h._getStringWidth(n)*h.getFontSize()/h._scaleFactor}),k=Math.max.apply(Math,y),s===kr)p=t-k/2,t-=y[0]/2;else{if("right"!==s)return void o('Unrecognized alignment option, use "center" or "right".',h.options.dieOnError);p=t-k;t-=y[0]}for(rt=t,n=l[0]+") Tj\n",a=1,v=l.length;a<v;a++)b=k-y[a],"center"===s&&(b/=2),n+=p-rt+b+" -"+ht+" Td ("+l[a],rt=p+b,a<v-1&&(n+=") Tj\n")}else n=l.join(") Tj\nT* (")}return g||(ft=h._setNumberPrecision((h._pageHeight-i)*h._scaleFactor,2)),h._write("BT\n/"+h._fontKey+" "+h.getFontSize()+" Tf\n"+h.getLineHeight()+" TL\n"+ut+h._textColor+"\n"+et+h._setNumberPrecision(t*h._scaleFactor,2)+" "+ft+" "+ot+"\n("+n+") Tj\nET"),g&&h.text(g,t,i),h},lstext:function(n,t,i,r){for(var e=this,u=0,f=n.length;u<f;u++,t+=r)e.text(n[u],t,i)},line:function(n,t,i,r){return this.lines([[i-n,r-t]],n,t)},clip:function(){var n=this;n._write("W");n._write("S")},lines:function(n,t,i,r,u,f){var c,l,a,v,o,y,p,b,k,s,h,e=this;for(w(n)&&(e._tmp=i,i=t,t=n,n=e._tmp),r=r||[1,1],e._write(e._setNumberPrecision(t*e._scaleFactor,3)+" "+e._setNumberPrecision((e._pageHeight-i)*e._scaleFactor,3)+" m "),c=r[0],l=r[1],v=n.length,s=t,h=i,a=0;a<v;a++)o=n[a],2===o.length?(s=o[0]*c+s,h=o[1]*l+h,e._write(e._setNumberPrecision(s*e._scaleFactor,3)+" "+e._setNumberPrecision((e._pageHeight-h)*e._scaleFactor,3)+" l")):(y=o[0]*c+s,p=o[1]*l+h,b=o[2]*c+s,k=o[3]*l+h,s=o[4]*c+s,h=o[5]*l+h,e._write(e._setNumberPrecision(y*e._scaleFactor,3)+" "+e._setNumberPrecision((e._pageHeight-p)*e._scaleFactor,3)+" "+e._setNumberPrecision(b*e._scaleFactor,3)+" "+e._setNumberPrecision((e._pageHeight-k)*e._scaleFactor)+" "+e._setNumberPrecision(s*e._scaleFactor)+" "+e._setNumberPrecision((e._pageHeight-h)*e._scaleFactor)+" c"));return f&&e._write(" h"),null!==u&&e._write(e.getStyle(u)),e},rect:function(n,t,i,r,u){var f=this;return f.getStyle(u),f._write([f._setNumberPrecision(n*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-t)*f._scaleFactor,2),f._setNumberPrecision(i*f._scaleFactor,2),f._setNumberPrecision(-r*f._scaleFactor,2),"re"].join(" ")),null!==u&&f._write(f.getStyle(u)),f},triangle:function(n,t,i,r,u,f,e){var o=this;return o.lines([[i-n,r-t],[u-i,f-r],[n-u,t-f]],n,t,[1,1],e,!0),o},roundedRect:function(n,t,i,r,u,f,e){var s=this,o=4/3*(Math.SQRT2-1);return s.lines([[i-2*u,0],[u*o,0,u,f-f*o,u,f],[0,r-2*f],[0,f*o,-(u*o),f,-u,f],[-i+2*u,0],[-(u*o),0,-u,-(f*o),-u,-f],[0,-r+2*f],[0,-(f*o),u*o,-f,u,-f]],n+u,t,[1,1],e),s},ellipse:function(n,t,i,r,u){var f=this,e=4/3*(Math.SQRT2-1)*i,o=4/3*(Math.SQRT2-1)*r;return f._write([f._setNumberPrecision((n+i)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-t)*f._scaleFactor,2),"m",f._setNumberPrecision((n+i)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(t-o))*f._scaleFactor,2),f._setNumberPrecision((n+e)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(t-r))*f._scaleFactor,2),f._setNumberPrecision(n*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(t-r))*f._scaleFactor,2),"c"].join(" ")),f._write([f._setNumberPrecision((n-e)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(t-r))*f._scaleFactor,2),f._setNumberPrecision((n-i)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(t-o))*f._scaleFactor,2),f._setNumberPrecision((n-i)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-t)*f._scaleFactor,2),"c"].join(" ")),f._write([f._setNumberPrecision((n-i)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(t+o))*f._scaleFactor,2),f._setNumberPrecision((n-e)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(t+r))*f._scaleFactor,2),f._setNumberPrecision(n*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(t+r))*f._scaleFactor,2),"c"].join(" ")),f._write([f._setNumberPrecision((n+e)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(t+r))*f._scaleFactor,2),f._setNumberPrecision((n+i)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(t+o))*f._scaleFactor,2),f._setNumberPrecision((n+i)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-t)*f._scaleFactor,2),"c"].join(" ")),null!==u&&f._write(f.getStyle(u)),f},circle:function(n,t,i,r){var u=this;return u.ellipse(n,t,i,i,r)},setFontSize:function(n){var t=this;return t._fontSize=n,t},setFont:function(n,t){var i=this;return i._fontKey=i.getFont(n,t),i},setFontStyle:function(n){var t=this;return t._fontKey=t.getFont(r,n),t},getFontList:function(){var n,i,r,f=this,u={},t=f._fontmap;for(n in t)if(t.hasOwnProperty(n)){u[n]=r=[];for(i in t[n])t[n].hasOwnProperty(i)&&r.push(i)}return u},addFontScriptName:function(n,t,i){var r=this;r.addFont(n,t,i,"StandardEncoding")},setLineWidth:function(n){var t=this;return t._write((n*t._scaleFactor).toFixed(2)+" w"),t},setDrawColor:function(n,t,i,r){var o,e=this;return o=!u(t)||!u(r)&&n===t===i?f(n)?n+" G":e._setNumberPrecision(n/255,2)+" G":u(r)?f(n)?[n,t,i,r,"K"].join(" "):[e._setNumberPrecision(n,2),e._setNumberPrecision(t,2),e._setNumberPrecision(i,2),e._setNumberPrecision(r,2),"K"].join(" "):f(n)?[n,t,i,si].join(" "):[e._setNumberPrecision(n/255,2),e._setNumberPrecision(t/255,2),e._setNumberPrecision(i/255,2),si].join(" "),e._write(o),e},setFillColor:function(n,t,i,r){var o,e=this;return!u(t)||!u(r)&&n===t===i?o=f(n)?n+" g":e._setNumberPrecision(n/255,2)+" g":!u(r)||ri(r)?(o=f(n)?[n,t,i,"rg"].join(" "):[e._setNumberPrecision(n/255,2),e._setNumberPrecision(t/255,2),e._setNumberPrecision(i/255,2),"rg"].join(" "),r&&0===r.a&&(o="255 255 255 rg")):o=f(n)?[n,t,i,r,"k"].join(" "):[e._setNumberPrecision(n,2),e._setNumberPrecision(t,2),e._setNumberPrecision(i,2),e._setNumberPrecision(r,2),"k"].join(" "),e._write(o),e},setTextColor:function(n,t,i){var e,r=this;return f(n)&&/^#[0-9A-Fa-f]{6}$/.test(n)&&(e=parseInt(n.substr(1),16),n=e>>16&255,t=e>>8&255,i=255&e),r._textColor=0===n&&0===t&&0===i||!u(t)?r._setNumberPrecision(n/255,3)+" g":[r._setNumberPrecision(n/255,3),r._setNumberPrecision(t/255,3),r._setNumberPrecision(i/255,3),"rg"].join(" "),r},_build:function(){var r,i,u,t,n=this;for(n._printToDoc=!0,n._objectNumber=2,n._write("%PDF-"+n._version),n._writePages(),n._writeAdditionalObjects(),n._writeResources(),n._createObject(),n._write("<<"),n._writeInfo(),n._write(">>"),n._write("endobj"),n._createObject(),n._write("<<"),n._writeCatalog(),n._write(">>"),n._write("endobj"),r=n._contentLength,i="0000000000",n._write("xref"),n._write("0 "+(n._objectNumber+1)),n._write(i+" 65535 f "),t=1;t<=n._objectNumber;t++)u=n._offsets[t],ii(u)?n._write((i+n._offsets[t]()).slice(-10)+" 00000 n "):n._write((i+n._offsets[t]).slice(-10)+" 00000 n ");return n._write("trailer"),n._write("<<"),n._writeTrailer(),n._write(">>"),n._write("startxref"),n._write(r),n._write("%%EOF"),n._printToDoc=!1,n._content.join("\n")},getStyle:function(n){var t=gr;return n===vt?t=vt.toLowerCase():n===hi||n===nu?t=tu:n!==vt.toLowerCase()&&n!==iu&&n!==dr&&n!==ru||(t=n),t},_getArrayBuffer:function(){for(var r=this,t=r._build(),n=t.length,i=new ArrayBuffer(n),u=new Uint8Array(i);n--;)u[n]=t.charCodeAt(n);return i},_getCharWidths:function(n,t){for(var i,a=this,u=t||{},s=a.getActiveFontObj(),f=u.widths?u.widths:s.metadata.Unicode.widths,h=f.fof?f.fof:1,e=u.kerning?u.kerning:s.metadata.Unicode.kerning,v=e.fof?e.fof:1,c=0,y=f[0]||h,l=[],r=0,o=n.length;r<o;r++)i=n.charCodeAt(r),l.push((f[i]||y)/h+(e[i]&&e[i][c]||0)/v),c=i;return l},_sum:function(n){for(var t=n.length,i=0;t;)t--,i+=n[t];return i},_getStringWidth:function(n,t){var i=this;return i._sum(i._getCharWidths.call(i,n,t))},_getTextDimensions:function(n){var r,t,i=this,u=i.getActiveFontObj(),e=u.fontName,o=i._tableFontSize||i.getFontSize(),f=u.fontStyle;t=y.createElement("font");try{t.style.fontStyle=f}catch(s){t.style.fontWeight=f}t.style.fontName=e;t.style.fontSize=o+ct;try{t.textContent=n}catch(s){t.innerText=n}return y.body.appendChild(t),r={w:(t.offsetWidth+1)*ci,h:(t.offsetHeight+1)*ci},y.body.removeChild(t),r},_setLastCellPosition:function(n,t,i,r,u){this._lastCellPos={x:n,y:t,w:i,h:r,ln:u}},_getLastCellPosition:function(){return this._lastCellPos},_cellAddPage:function(){var n=this,t=n._cellMargins||n._noMargins;n.addPage();n._setLastCellPosition(t.left,t.top);n._cellPages++},_setTableHeaderConfig:function(n){this._cellTableHeaderRow=n},_splitWord:function(n,t,i,r){for(var e,o=[],u=0,s=n.length,f=0;u!==s&&f+t[u]<i;)f+=t[u],u++;for(o.push(n.slice(0,u)),e=u,f=0;u!==s;)f+t[u]>r&&(o.push(n.slice(e,u)),f=0,e=u),f+=t[u],u++;return e!==u&&o.push(n.slice(e,u)),o},_splitParagraph:function(n,t,i){var r,y,p,g,h,f=this,e=i||{},u=[],b=[u],w=e.textIndent||0,l=0,o=0,a=n.split(" "),nt=f._getCharWidths(" ",e)[0],s=e.lineIndent===-1?a[0].length+2:e.lineIndent||0,k,v,d,tt;for(s&&(k=new Array(s).join(" "),v=[],ki(a,function(n,t){t=t.split(/\s*\n/);t.length>1?v=v.concat(c(t,function(n,t){return(t&&n.length?"\n":"")+n})):v.push(t[0])}),a=v,s=f._getStringWidth(k,e)),p=0,g=a.length;p<g;p++)if(d=0,r=a[p],s&&"\n"==r[0]&&(r=r.substr(1),d=1),y=f._getCharWidths(r,e),o=f._sum(y),w+l+o>t||d){if(o>t){for(h=f._splitWord(r,y,t-(w+l),t),u.push(h.shift()),u=[h.pop()];h.length;)b.push([h.shift()]);o=f._sum(y.slice(r.length-u[0].length))}else u=[r];b.push(u);w=o+s;l=nt}else u.push(r),w+=l+o,l=nt;return tt=s?function(n,t){return(t?k:"")+n.join(" ")}:function(n){return n.join(" ")},c(b,tt)},_splitText:function(n,t,i){var e,h,u,c,r=this,f=i||{},l=p(n)?n.join(" "):n,a=r._getTextDimensions(l).w/l.length,o=[],s=function(n){var t,i,u={0:1},f={};return n.widths&&n.kerning?{widths:n.widths,kerning:n.kerning}:(t=r.getFontObj(n.fontName,n.fontStyle)||r.getActiveFontObj(),i="Unicode",t.metadata[i]?{widths:t.metadata[i].widths||u,kerning:t.metadata[i].kerning||f}:{widths:u,kerning:f})}.call(r,f);for(e=p(n)?n:n.split(/\r?\n/),h=1*r._scaleFactor*t/a,s.textIndent=f.textIndent?1*f.textIndent*r._scaleFactor/a:0,s.lineIndent=f.lineIndent,u=0,c=e.length;u<c;u++)o=o.concat(r._splitParagraph(e[u],h,s));return o},_getLineHeight:function(n,t,i){for(var f,r,o,s=this,h=0,c=s._cellPadding,e=0;e<n.length;e++)f=n[e],r=p(i)?i[e]:i[f],p(r)||(!u(r)||b(r)?r="":r+=""),i[f]=s._splitText(r,t[f]-c),o=s.getLineHeight()*i[f].length+1.6*c,o>h&&(h=o);return h},_cell:function(n,t,i,r,f,e,o){var l,a,v,c,s=this,h=s._getLastCellPosition(),w=s._cellMargins||s._noMargins,y=s._cellPadding;if(u(h.ln)&&(h.ln===e?(n=h.x+h.w,t=h.y):(h.y+h.h+r+s._cellMargin>=s._pageHeight-w.bottom&&(s._cellAddPage(),s._tablePrintHeader&&s._cellTableHeaderRow&&s._renderHeader(e,!0)),l=s._getLastCellPosition(),t=l.y+(l.h||0))),u(f[0]))if(s._cellPrintingHeaderRow?s.rect(n,t,i,r,hi):s.rect(n,t,i,r),"right"===o)for(p(f)||(f=[f]),c=0;c<f.length;c++)a=f[c],v=s._getStringWidth(a)*s.getFontSize(),s.text(a,n+i-v-y,t+s.getLineHeight()*(c+1));else s.text(f,n+y,t+s.getLineHeight());return s._setLastCellPosition(n,t,i,r,e),s},_renderHeader:function(n,t){var f,h,e,c,r,i=this,s=[];if(!i._cellTableHeaderRow)return void o("shieldExport: No table header configuration",i.options.dieOnError);for(i._cellPrintingHeaderRow=!0,u(i._cellHeaderFunction)&&(r=i._cellHeaderFunction.call(i,i._cellPages),i._setLastCellPosition(r[0],r[1],r[2],r[3],-1)),i.setFontStyle(rt),e=0,c=i._cellTableHeaderRow.length;e<c;e++)i.setFillColor(236,237,238),f=i._cellTableHeaderRow[e],t&&(f[1]=i._cellMargins&&i._cellMargins.top||0,s.push(f)),h=[].concat(f),i._cell.apply(i,h.concat(n));s.length>0&&i._setTableHeaderConfig(s);i.setFontStyle(g);i._cellPrintingHeaderRow=!1},table:function(n,t,i,e,s){var a,h,p,ft,st,tt,g,y,it,ht,nt,d,l=this,ct=l._cellPadding,v=[],k=[],w={},lt=[],vt=function(n){return n[a]},rt=!0,ut=l.getFontSize(),at=l._noMargins;if(!i)return void o("shieldExport: No data specified for PDF table",l.options.dieOnError);if(d=i.slice(0),s&&(s.printHeader===!1&&(rt=!1),s.fontSize&&(ut=s.fontSize),s.margins&&(at=s.margins)),l._lastCellPos={x:r,y:r,w:r,h:r,ln:r},l._cellPages=1,l._tablePrintHeader=rt,l._cellMargins=at,l.setFontSize(ut),l._tableFontSize=ut,!u(e)||b(e))v=ot(d[0]);else if(e[0]&&!f(e[0]))for(h=0,p=e.length;h<p;h++)a=e[h],v.push(a.field),k.push(a.title),w[a.field]=u(a.width)?et(a.width)*l._getScaleFactor():r;else v=e;for(h=0,p=v.length;h<p;h++)if(a=v[h],!u(w[a])){for(g=[],g.push(l._getTextDimensions(k[h]||a).w+2*ct),tt=c(d,vt),y=0,ft=tt.length;y<ft;y++)st=tt[y],g.push(l._getTextDimensions(st).w+2*ct);w[a]=Math.max.apply(Math,g)}if(rt){for(nt=l._getLineHeight(v,w,k.length?k:v),h=0,p=v.length;h<p;h++)a=v[h],lt.push([n,t,w[a],nt,(k.length?k[h]:a)+""]);l._setTableHeaderConfig(lt);l._renderHeader(1,!1)}for(h=0,p=d.length;h<p;h++)for(it=d[h],nt=l._getLineHeight(v,w,it),y=0,ht=v.length;y<ht;y++)a=v[y],l._cell(n,t,w[a],nt,it[a],h+2,e[y].align);return l}});dt=v.extend({getExt:function(){return".csv"},getContentType:function(){return"text/csv;charset=utf-8"},getContent:function(){var n,t,e,h=this,r=h.options,o=r.delimiter||",",u=r.header,f=r.records||[],c=f.length,i="",l=/\"/g,s=function(n){return(n+"").replace(l,'""')};if(r.printHeader&&u){for(n=0;n<u.length;n++)i+=(n>0?o:"")+'"'+s(u[n])+'"';i+="\n"}for(n=0;n<c;n++){for(t=0,e=f[n].length;t<e;t++)i+=(t>0?o:"")+'"'+s(f[n][t])+'"';i+="\n"}return i}});tt(e,{PDFDocument:bt,CSVDocument:dt,OOXMLWorkbook:gt,ExcelXMLSpreadsheet:nt})}(jQuery,shield,this);shield.version="1.7.38";!function(n,t,i,r){function nr(n){return y.log(n)/y.LN10}function ni(n){return y.pow(10,n)}function or(n,t){for(var i=n.length;i--;)if(n[i]===t){n.splice(i,1);break}}function w(n,t,i){var r,u,f="setAttribute";if(ri(t))o(i)?n[f](t,i):n&&n.getAttribute&&(u=n.getAttribute(t));else if(o(t)&&bt(t))for(r in t)t.hasOwnProperty(r)&&n[f](r,t[r]);return u}function f(){for(var t,i=arguments,r=i.length,n=0;n<r;n++)if(t=i[n],"undefined"!=typeof t&&null!==t)return t}function it(n,t){bi&&t&&t.opacity!==r&&(t.filter="alpha(opacity="+100*t.opacity+")");l(n.style,t)}function yt(n,t,i,r,u){var f=b.createElement(n);return t&&l(f,t),u&&it(f,{padding:0,border:kt,margin:0}),i&&it(f,i),r&&r.appendChild(f),f}function nt(n,t){var i=function(){};return i.prototype=new n,l(i.prototype,t),i}function ct(n,t,i){var r=n[t];n[t]=function(){var n=Array.prototype.slice.call(arguments);return n.unshift(r),i.apply(this,n)}}function sf(n,t,i,r){var e,u;for(i=f(i,1),e=n/i,t||(t=[1,2,2.5,5,10],r&&r.decimalTicks===!1&&(1===i?t=[1,2,5,10]:i<=.1&&(t=[1/i]))),u=0;u<t.length&&(n=t[u],!(e<=(t[u]+(t[u+1]||t[u]))/2));u++);return n*i}function ls(n,t){for(var o,r=t||[[hh,[1,2,5,10,20,25,50,100,200,500]],[bo,[1,2,5,10,15,30]],[ue,[1,2,5,10,15,30]],[du,[1,2,3,4,6,8,12]],[rr,[1,2]],[fe,[1,2]],[gu,[1,2,3,4,6]],[iu,null]],u=r[r.length-1],f=k[u[0]],e=u[1],s,i=0;i<r.length;i++)if((u=r[i],f=k[u[0]],e=u[1],r[i+1])&&(s=(f*e[e.length-1]+k[r[i+1][0]])/2,n<=s))break;return f===k[iu]&&n<5*f&&(e=[1,2,5]),o=sf(n/f,e),{unitRange:f,count:o,unitName:u[0]}}function as(n,t,i,r){var c,h,a=[],v={},y=ei.allowUTCFormatting,u=new Date(t),e=n.unitRange,o=n.count;e>=k[bo]&&(u.setMilliseconds(0),u.setSeconds(e>=k[ue]?0:o*pt(u.getSeconds()/o)));e>=k[ue]&&u[co](e>=k[du]?0:o*pt(u[oo]()/o));e>=k[du]&&u[lo](e>=k[rr]?0:o*pt(u[so]()/o));e>=k[rr]&&u[bf](e>=k[gu]?1:o*pt(u[hu]()/o));e>=k[gu]&&(u[ao](e>=k[iu]?0:o*pt(u[pf]()/o)),h=u[wf]());e>=k[iu]&&(h-=h%o,u[vo](h));e===k[fe]&&u[bf](u[hu]()-u[ho]()+f(r,1));c=1;h=u[wf]();for(var s=u.getTime(),p=u[pf](),w=u[hu](),b=y?0:(864e5+6e4*u.getTimezoneOffset())%864e5;s<i;)a.push(s),e===k[iu]?s=su(h+c*o,0):e===k[gu]?s=su(h,p+c*o):y||e!==k[rr]&&e!==k[fe]?(s+=e*o,e<=k[du]&&s%k[rr]===b&&(v[s]=rr)):s=su(h,p,w+c*o*(e===k[rr]?1:7)),c++;return a.push(s),a.info=l(n,{higherRanks:v,totalRange:e*o}),a}function ve(){this.color=0;this.symbol=0}function ye(n,t){for(var r,u=n.length,i=0;i<u;i++)n[i]._ssIndex=i;for(n.sort(function(n,i){return r=t(n,i),0===r?n._ssIndex-i._ssIndex:r}),i=0;i<u;i++)delete n[i]._ssIndex}function br(n){for(var t=n.length,i=n[0];t--;)n[t]<i&&(i=n[t]);return i}function sr(n){for(var t=n.length,i=n[0];t--;)n[t]>i&&(i=n[t]);return i}function hr(n,t){for(var i in n)n.hasOwnProperty(i)&&(n[i]&&n[i]!==t&&n[i].destroy&&n[i].destroy(),delete n[i])}function cr(n){ou||(ou=yt(hi));n&&ou.appendChild(n);ou.innerHTML=""}function fi(n){return parseFloat(n.toPrecision(14))}function kr(n,t){gr=f(n,u[t.guid].applyAnimation)}function vs(){var i=ei.allowUTCFormatting,n=i?"getUTC":"get",t=i?"setUTC":"set";su=i?Date.UTC:function(n,t,i,r,u,e){return new Date(n,t,f(i,1),f(r,0),f(u,0),f(e,0)).getTime()};oo=n+"Minutes";so=n+"Hours";ho=n+"Day";hu=n+"Date";pf=n+"Month";wf=n+"FullYear";co=t+"Minutes";lo=t+"Hours";bf=t+"Date";ao=t+"Month";vo=t+"FullYear"}function ci(){}function dr(n,t,i){var r=this;r.axis=n;r.pos=t;r.type=i||"";r.isNew=!0;i||r._label()}function hf(n,t){var i=this;return i.axis=n,t&&(i.options=t,i.id=t.id),i}function pe(n,t,i,r,e,o){var s=this,h=u[n.chart.guid].isInverted;s.axis=n;s.isNegative=i;s.options=t;s.x=r;s.stackIndex=e;s.percent="percent"===o;s.alignOptions={align:t.align||(h?i?"left":"right":"center"),verticalAlign:t.verticalAlign||(h?"middle":i?"bottom":"top"),y:f(t.y,h?4:i?14:-6),x:f(t.x,h?i?-6:6:0)};s.textAlignINTERNAL=t.textAlignINTERNAL||(h?i?"right":"left":"center")}function ys(){var e,i,o=this.axis,n=this.value,c=o.categoricalValues,s=this.dateTimeLabelFormat,f=null,u=f&&f.length,h=o.isLog?n:o.ticksRepeat;if(c)i=n;else if(s)i=t.format("{0:"+s+"}",new Date(n));else if(u&&h>=1e3)for(;u--&&i===r;)e=y.pow(1e3,u+1),h>=e&&null!==f[u]&&(i=t.format("{0:n}",n/e)+f[u]);return i===r&&(i=n>=1e3?t.format("{0:d}",n):t.format(oh(n)?"{0:n}":"{0:d}",n)),i}function ps(){var t,n=this,h=n.chart,i=n.stacks,u=[],s=[];n.hasVisibleSeries=!1;n.dataMin=n.dataMax=null;e(n.dataSeries,function(e){if(e.visible||h.options.scaleAxesForHiddenSeries){var k,rt,ut,w,ft,d,l,et,a,c,ot,g=e.options,y=g.baseValue,p=[],ht=0;if(n.hasVisibleSeries=!0,n.isLog&&y<=0&&(y=g.baseValue=null),n.isXAxis)l=e.xData,l.length&&(n.dataMin=st(f(n.dataMin,l[0]),br(l)),n.dataMax=v(f(n.dataMax,l[0]),sr(l)));else{var nt,tt,b,it,lt=e.cropped,ct=uu.call(e.axisX),at=!!e.modifyValue;for(k=g.stackMode,n.usePercentage="percent"===k,k&&(ft=g.stackIndex,w=e.seriesType+f(ft,""),d="-"+w,e.stackKey=w,rt=u[w]||[],u[w]=rt,ut=s[d]||[],s[d]=ut),n.usePercentage&&(n.dataMin=0,n.dataMax=99),l=e.processedXData,et=e.processedYData,ot=et.length,t=0;t<ot;t++)if(a=l[t],c=et[t],k&&(nt=c<y,tt=nt?ut:rt,b=nt?d:w,c=tt[a]=o(tt[a])?fi(tt[a]+c):c,i[b]||(i[b]={}),i[b][a]||(i[b][a]=new pe(n,n.options.stackTextSettings,nt,a,ft,k)),i[b][a]._total(c)),null!==c&&c!==r&&(at&&(c=e.modifyValue(c)),lt||(l[t+1]||a)>=ct.min&&(l[t-1]||a)<=ct.max))if(it=c.length)for(;it--;)null!==c[it]&&(p[ht++]=c[it]);else p[ht++]=c;!n.usePercentage&&p.length&&(n.dataMin=st(f(n.dataMin,p[0]),br(p)),n.dataMax=v(f(n.dataMax,p[0]),sr(p)));o(y)&&(n.dataMin>=y?(n.dataMin=y,n.ignoreMinPadding=!0):n.dataMax<y&&(n.dataMax=y,n.ignoreMaxPadding=!0))}}})}function cf(n,t,i){for(var u,e=fi(pt(t/n)*n),o=fi(lr(i/n)*n),f=[],r=e;r<=o&&(f.push(r),r=fi(r+n),r!==u);)u=r;return f}function we(n,t,i,r){var u=this,p=u.options,w=u.len,e=[],c,o,h,b,l,a,v,k;if(r||(u._minorAutoInterval=null),n>=.5)n=s(n),e=cf.call(u,n,t,i);else if(n>=.08)for(k=pt(t),c=n>.3?[1,2,4]:n>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],o=k;o<i+1&&!v;o++)for(b=c.length,h=0;h<b&&!v;h++)l=nr(ni(o)*c[h]),l>t&&e.push(a),a>i&&(v=!0),a=l;else{var d=ni(t),g=ni(i),nt=p[r?"minorTicksRepeat":"ticksRepeat"],tt="auto"===nt?null:nt,it=p.tickPixelIntervalINTERNAL/(r?5:1),rt=r?w/u.tickPositions.length:w;n=f(tt,u._minorAutoInterval,(g-d)*it/(rt||1));n=sf(n,null,y.pow(10,pt(y.log(n)/y.LN10)));e=pr(cf.call(u,n,d,g),nr);r||(u._minorAutoInterval=n/5)}return r||(u.ticksRepeat=n),e}function ws(){var i,t,e,n=this,r=n.tickPositions,f=n.minorTicksRepeat,u=[];if(n.isLog)for(e=r.length,t=1;t<e;t++)u=u.concat(we.call(n,f,r[t-1],r[t],!0));else for(i=n.min+(r[0]-n.min)%f;i<=n.max;i+=f)u.push(i);return u}function bs(n,t,i,r,u,f){var e=this;return n>0?e.translate(e.dataMin+n,t,i,r,u,f)-e.translate(e.dataMin,t,i,r,u,f):n<0?e.translate(e.dataMax+n,t,i,r,u,f)-e.translate(e.dataMax,t,i,r,u,f):0}function ks(){var v,l,h,y,a,w,s,p,n=this,c=n.options,t=n.min,i=n.max,b=n.dataMax-n.dataMin>=n.zoomMin,u;(n.isXAxis&&n.zoomMin===r&&!n.isLog&&(o(c.min)||o(c.max)?n.zoomMin=null:(e(n.dataSeries,function(n){for(a=n.xData,w=n.xIncrement?1:a.length-1,h=w;h>0;h--)y=a[h]-a[h-1],(l===r||y<l)&&(l=y)}),n.zoomMin=st(5*l,n.dataMax-n.dataMin))),i-t<n.zoomMin)&&(u=n.zoomMin,v=(u-i+t)/2,s=[t-v,f(c.min,t-v)],b&&(s[2]=n.dataMin),t=sr(s),p=[t+u,f(c.max,t+u)],b&&(p[2]=n.dataMax),i=br(p),i-t<u&&(s[0]=i-u,s[1]=f(c.min,i-u),t=sr(s)));n.min=t;n.max=i}function be(){var n=this,i=u[n.chart.guid],t=i.maxTicks,r=n.tickPositions,f=n.xOrY;t||(t={x:0,y:0});!n.isLinked&&!n.isDatetimeAxis&&r.length>t[f]&&n.options.matchTicks!==!1&&(t[f]=r.length);i.maxTicks=t}function ke(n,t,i,r,u){var e=this,o=e.chart;i=f(i,!0);u=l(u,{min:n,max:t});e.userMin=n;e.userMax=t;e.isDirtyExtremes=!0;i&&o.redraw(r)}function uu(){var n=this,t=n.isLog;return{min:t?fi(ni(n.min)):n.min,max:t?fi(ni(n.max)):n.max,dataMin:n.dataMin,dataMax:n.dataMax,userMin:n.userMin,userMax:n.userMax}}function lf(n){var t=this,i=t.isLog,r=i?ni(t.min):t.min,u=i?ni(t.max):t.max;return r>n||null===n?n=r:u<n&&(n=u),t.translate(n,0,1,0,1)}function ds(n){var t=new hf(this,n).render();return this.plotLinesAndBands.push(t),t}function fu(){this.init.apply(this,arguments)}function de(n,t){var r,c,i=u[this.chart.guid],f=i.isInverted,o=0,h=0;return n=di(n),r=n[0].tooltipPos,r||(e(n,function(n){c=n.dataSeries.axisY;o+=n.plotX;h+=(n.plotLow?(n.plotLow+n.plotHigh)/2:n.plotY)+(!f&&c?c.top-i.plotTop:0)}),o/=n.length,h/=n.length,r=[f?i.plotWidth-h:o,this.chartBound&&!f&&n.length>1&&t?t.chartY-i.plotTop:f?i.plotHeight-o:h]),pr(r,s)}function gs(){e(this.axisMarkers,function(n){n&&n.hide()})}function ge(t,i){var r=this;r.chart=t;r.options=i;r.axisMarkers=[];r.isHidden=!0;(/msie 7/i.test(ar)||/msie 8/i.test(ar))&&n("html").addClass("ie7");r.labelElement=n('<div class="shield-tooltip" style="pointer-events: none"><\/div>').appendTo(t.element);(bi||gf)&&n(r.labelElement).bind(nu,function(n){u[t.guid].container.onmousemove(n)});r.chartBound=i.chartBound}function af(n,t){var i=this,r=oi?"":t.zoomMode;i.zoomX=/x/.test(r);i.zoomY=/y/.test(r);i.options=t;i.chart=n;i.init(n,t.tooltipSettings)}function vf(n,t){var u=this,f=u.options,e=n.legendItem,o=n.legendLine,s=n.legendSymbol,i=n.checkMark,h=u.disabledStyle.color,c=t?f.legendItemSettings.elementStyle.color:h,r=t?n.color:h,l=(n.options&&n.options.pointMark,{stroke:r,fill:r,"stroke-width":0});e&&e.css({fill:c});o&&o.attr({stroke:r});s&&s.attr(l);i&&(t?i.attr({stroke:f.checkMarkSettings.color}).css({visibility:et}):i.css({visibility:ft}))}function nh(n){var t=this,i=t.options,f=i.legendMarkerDistance,e=!i.rtlLayout,r=n._legendItemPos,u=r[0],o=r[1];n.legendGroup&&n.legendGroup.translate(e?u:t.legendWidth-u-2*f-4,o)}function no(n){n.legendItem&&n.legendItem.destroy();n.legendLine&&n.legendLine.destroy();n.legendSymbol&&n.legendSymbol.destroy();n.legendGroup&&n.legendGroup.destroy()}function th(n){var s,a,r,f,t=this,c=t.chart,k=u[c.guid],d=k.renderer,i=t.options,e=i.legendItemSettings,g=i.checkMarkSettings,nt=g.mouseOverColor,y="horizontal"===i.renderDirection,tt=i.symbolWidthINTERNAL,p=i.legendMarkerDistance,it=t.elementStyle,rt=t.disabledStyle,ut=t.padding,ft=!i.rtlLayout,et=i.width,w=e.bottomSpacing||0,b=t.topSpacing,l=t.initialItemX,o=n.legendItem,ot=n.dataSeries||n;ot.options;o||(n.legendGroup=d.g().attr({zIndex:1}).add(t.scrollGroup),ot.drawLegendSymbol(t,n),n.legendItem=o=d.text(n.collectionAlias,ft?tt+p:-p,t.baseline,i.htmlOutput).css(h(n.visible?it:rt)).attr({align:ft?"left":"right",zIndex:2}).add(n.legendGroup),f=n.checkMark,n.legendGroup.on(nu,function(t){var i=c.trigger("legendSeriesMouseOver",{item:n});i.isDefaultPrevented()||(e.proxyHoverEvents&&n._mouseOver(t),n.setState(gt),o.css(e.mouseOverStyle),f&&nt&&f.attr({stroke:nt}))}).on(au,function(t){var i=c.trigger("legendSeriesMouseOut",{item:n});i.isDefaultPrevented()||(e.proxyHoverEvents&&n._mouseOut(t),o.css(n.visible?it:rt),f&&f.attr({stroke:g.color}),n.setState())}).on(vu,function(){var t=c.trigger("legendSeriesClick",{item:n});t.isDefaultPrevented()||n.toggle()}),vf.call(t,n,n.visible));a=o.getBBox();r=n.legendelementWidth=e.elementWidth||tt+p+a.width+ut;t.itemHeight=s=a.height;y&&t.itemX-l+r>(et||k.chartWidth-2*ut-l)&&(t.itemX=l,t.itemY+=b+t.lastLineHeight+w,t.lastLineHeight=0);t.maxelementWidth=v(t.maxelementWidth,r);t.lastItemY=b+t.itemY+w;t.lastLineHeight=v(s,t.lastLineHeight);n._legendItemPos=[t.itemX,t.itemY];y?t.itemX+=r:(t.itemY+=b+s+w,t.lastLineHeight=s);t.offsetWidth=et||v(y?t.itemX-l:r,t.offsetWidth)}function ih(n){var f,t=this,s=t.chart,e=u[s.guid],r=(e.renderer,t.options),o=r.y,h="top"===r.verticalAlign,i=e.spacingBox.height+(h?-o:o)-this.padding,c=t.clipRect;return"horizontal"===r.renderDirection&&(i/=2),n>i&&(t.clipHeight=f=i,c.attr({height:f}),n=i),n}function to(n){this.init(n)}function ti(n,t,i,r){var f=u[n.guid],e=r?i:t,o=r?t:i;return e>=0&&e<=f.plotWidth&&o>=0&&o<=f.plotHeight}function io(){for(var n,t=this,r=["graphic","tracker","dataLabel","group","connector","shadowGroup"],i=6;i--;)n=r[i],t[n]&&(t[n]=t[n].destroy())}function rh(n,t){var i,u=this,r=u.dataSeries,o=r.chart,e=r.data,s=e.length;for(kr(t,o),n=f(n,!0),i=0;i<s;i++)if(e[i]===u){e.splice(i,1);r.options.data.splice(i,1);r.xData.splice(i,1);r.yData.splice(i,1);break}u.destroy();r.isDirty=!0;r.isDirtyData=!0;n&&o.redraw()}function ro(n,t,i){var e,r=this,l=r.dataSeries,s=l.chart,h=u[s.guid],c=r.slicedTranslation;kr(i,s);t=f(t,!0);n=r.sliced=o(n)?n:!r.sliced;e={translateX:n?c[0]:h.plotLeft,translateY:n?c[1]:h.plotTop};r.group.animate(e);r.shadowGroup&&r.shadowGroup.animate(e)}function uo(n,t,i){this.init.call(this,n,t,i)}function fo(n,t,i){var r=this,f=u[t.guid];n.call(r,t,i);f.enablePolarLayout&&(r.closeSegment=function(n){var t=r.axisX.center;n.push("L",t[0],t[1])},r.closedStacks=!0)}function eo(n,t){var f,i=this,s=u[i.chart.guid],h=i.options.applyAnimation,e=i.group,o=i.markerGroup,c=i.axisX.center,l=s.plotLeft,a=s.plotTop;s.enablePolarLayout?s.renderer.isSVG&&!bi&&(h===!0&&(h={}),t?(e.attrSetters.scaleX=e.attrSetters.scaleY=function(n,t){var i=this;return i[t]=n,i.scaleX!==r&&i.scaleY!==r&&i.element.setAttribute("transform","translate("+i.translateX+","+i.translateY+") scale("+i.scaleX+","+i.scaleY+")"),!1},f={translateX:c[0]+l,translateY:c[1]+a,scaleX:0,scaleY:0},e.attr(f),o&&(o.attrSetters=e.attrSetters,o.attr(f))):(f={translateX:l,translateY:a,scaleX:1,scaleY:1},e.animate(f,h),o&&o.animate(f,h),i.animate=null)):n.call(i,t)}var eu,ou,ei,gr,yf,k,su,oo,so,ho,hu,pf,wf,co,lo,bf,ao,vo,yo=t.ui.Widget,uh=t.Constants,b=document,y=Math,s=y.round,pt=y.floor,lr=y.ceil,v=y.max,st=y.min,dt=y.abs,ht=y.cos,vt=y.sin,tt=y.PI,cu=tt/180,lu="function",nu="mouseover",au="mouseout",po="mousemove",fh="mouseenter",kf="mouseleave",tu="touchstart",wi="resize",vu="click",df="point",ar=navigator.userAgent,gf=i.opera,bi=/msie/i.test(ar)&&!gf,yu=8===b.documentMode,ne=/AppleWebKit/.test(ar),te=/Firefox/.test(ar),ki=uh.SVG_NS,ii=!!b.createElementNS&&!!b.createElementNS(ki,"svg").createSVGRect,pu=!!b.createElement("canvas").getContext,oi=!ii&&!bi&&pu,vr=b.documentElement.ontouchstart!==r,wo={},si=function(){},l=n.extend,eh=n.inArray,wu=t.error,p=t.to.int,ri=t.is.string,bt=t.is.object,tr=t.is.array,yr=t.is.number,oh=(t.is.integer,t.is.float),sh=t.is["null"],o=t.is.defined,di=t.to.array,bu="shield-",hi="div",et="visible",ft="hidden",ku="relative",d="px",g="L",rt="M",kt="none",ir="absolute",ie="pointer",re="rgba(192,192,192,"+(ii?.0001:.002)+")",lt="",gt="pointHoveredState",li="pointSelectedState",hh="MILLISECOND",bo="SECOND",ue="MINUTE",du="HOUR",rr="DAY",fe="WEEK",gu="MONTH",iu="YEAR",ko="stroke-width",u={},a={},c,wr,vi,ui,tf,gi,go,rf,yi,fr,ut,oe,ts,uf,is,se,ff,rs,he,ef,us,fs,ru,es,os,ss,pi,cs,er,ae;ve.prototype={wrapColor:function(n){this.color>=n&&(this.color=0)},wrapSymbol:function(n){this.symbol>=n&&(this.symbol=0)}};k={MILLISECOND:1,SECOND:1e3,MINUTE:6e4,HOUR:36e5,DAY:864e5,WEEK:6048e5,MONTH:2592e6,YEAR:31556952e3};yf={init:function(n,t,i){t=t||"";var c,o,f,s,l,a=n.shift,h=t.indexOf("C")>-1,e=h?7:3,r=t.split(" "),u=[].concat(i),v=function(n){for(f=n.length;f--;)n[f]===rt&&n.splice(f+1,0,n[f+1],n[f+2],n[f+1],n[f+2])};if(h&&(v(r),v(u)),n.isArea&&(s=r.splice(r.length-6,6),l=u.splice(u.length-6,6)),a<=u.length/e)for(;a--;)u=[].concat(u).splice(0,e).concat(u);if(n.shift=0,r.length)for(c=u.length;r.length<c;)o=[].concat(r).splice(r.length-e,e),h&&(o[e-6]=o[e-2],o[e-5]=o[e-1]),r=r.concat(o);return s&&(r=r.concat(s),u=u.concat(l)),[r,u]},step:function(n,t,i,r){var f,e=[],u=n.length;if(1===i)e=r;else if(u===t.length&&i<1)for(;u--;)f=parseFloat(n[u]),e[u]=isNaN(f)?n[u]:i*parseFloat(t[u]-f)+f;else e=t;return e}},function(){var i,u=n.fx,f=u.step,t=n.Tween,e=t&&t.propHooks;n.extend(n.easing,{easeOutQuad:function(n,t,i,r,u){return-r*(t/=u)*(t-2)+i}});n.each(["cur","_default","width","height"],function(n,i){var s,h,o=f;"cur"===i?o=u.prototype:"_default"===i&&t&&(o=e[i],i="set");s=o[i];s&&(o[i]=function(t){return t=n?t:this,h=t.elem,h.attr?h.attr(t.prop,"cur"===i?r:t.now):s.apply(this,arguments)})});i=function(n){var i,t=n.elem;n.started||(i=yf.init(t,t.d,t.toD),n.start=i[0],n.end=i[1],n.started=!0);t.attr("d",yf.step(n.start,n.end,n.pos,t.toD))};t?e.d={set:i}:f.d=i}();var e=(n.getScript,Array.prototype.forEach?function(n,t){return Array.prototype.forEach.call(n,t)}:function(n,t){for(var i=0,r=n.length;i<r;i++)if(t.call(n[i],n[i],i,n)===!1)return i}),ch=n.grep,lh=function(t){return n(t).offset()},pr=n.map,h=function(){return n.extend.apply(n,[].concat.apply([!0,null],arguments))},at=function(t,i,r){n(t).bind(i,r)},wt=function(t,i,r){var u=b.removeEventListener?"removeEventListener":"detachEvent";b[u]&&!t[u]&&(t[u]=function(){});n(t).unbind(i,r)},ah=function(t,i,r,u){var o,f=n.Event(i),e="detached"+i;!bi&&r&&(delete r.layerX,delete r.layerY);l(f,r);t[i]&&(t[e]=t[i],t[i]=null);n.each(["preventDefault","stopPropagation"],function(n,t){var i=f[t];f[t]=function(){try{i.call(f)}catch(n){"preventDefault"===t&&(o=!0)}}});n(t).trigger(f);t[e]&&(t[i]=t[e],t[e]=null);!u||f.isDefaultPrevented()||o||u(f)},ai=function(n,i,r,u){var f;n instanceof t.ui.Widget?n.trigger(i,r,u):n instanceof t.Dispatcher?(f=n.trigger(i,r),typeof u!==lu||f.isDefaultPrevented()||u.call(n,f)):ah(n,i,r,u)},vh=function(t,i,r){var u=n(t);i.d&&(t.toD=i.d,i.d=1);u.stop();u.animate(i,r)},nf=function(t){n(t).stop()},ee={enabled:!0,align:"center",x:0,y:15,style:{color:"#7E7E7E",fontSize:"11px",lineHeight:"14px"}};ei={seriesPalette:["#1E98E4","#FFC500","#FF2A00","#CACACA","#7F7F7F","#00FF9C","#6D31FF","#00B2A1","#B9FF85","#FF8000"],allowUTCFormatting:!0,primaryHeader:{text:"Shield UI Chart",align:"center",fontFamily:"Segoe UI, Tahoma, Verdana, sans-serif",y:-15,style:{color:"#4B4B4B",fontSize:"16px",top:10}},secondaryHeader:{text:"",align:"center",fontFamily:"Segoe UI, Tahoma, Verdana, sans-serif",y:5,style:{color:"#606060"}},loadingTextStyle:{fontWeight:"bold",position:ku,top:"1em"},symbols:["circle"],chartAreaBorderColor:"#000000",chartAreaBorderWidth:0,borderColor:"#A0A0A0",borderRadius:0,borderWidth:0,seriesType:"bar",scaleAxesForHiddenSeries:!1,chartAreaPaddingTop:40,chartAreaPaddingRight:10,chartAreaPaddingBottom:20,chartAreaPaddingLeft:10,style:{fontFamily:"Segoe UI, Tahoma, Verdana, sans-serif",fontSize:"12px"},backgroundColor:"#FFFFFF",axisX:{plotStripWidth:0,drawWidth:1,ticksWidth:1,ticksHeight:6,drawColor:"#636363",ticksColor:"#636363",lastTickTextVisible:!0,axisTickText:{style:{color:"#636363",fontSize:"11px",fontFamily:"Segoe UI, Tahoma, Verdana, sans-serif"},y:17},title:{style:{color:"#636363",fontWeight:"normal",fontSize:"11px",fontFamily:"Segoe UI, Tahoma, Verdana, sans-serif"}}},axisY:{plotStripWidth:1,drawWidth:0,tickWidth:1,tickColor:"#7E7E7E",drawColor:"#636363",plotStripDashStyle:"Solid",axisTickText:{style:{color:"#636363",fontSize:"11px",fontFamily:"Segoe UI, Tahoma, Verdana, sans-serif"}},title:{style:{color:"#636363",fontSize:"11px",fontFamily:"Segoe UI, Tahoma, Verdana, sans-serif"}}},seriesSettings:{bar:{borderWidth:0},line:{enablePointSelection:!1,allowMultiPointSelection:!0,applyAnimation:{duration:1200},events:{},drawWidth:3,shadow:!1,pointMark:{enabled:!0,drawWidth:2,drawRadius:3,drawColor:null,innerColor:null,activeSettings:{pointHoveredState:{enabled:!0,innerColor:"#FFFFFF",drawWidth:2,drawRadius:4},pointSelectedState:{color:"#7AF4F4",shadow:!1,drawWidth:2}}},point:{events:{}},dataPointText:h(ee,{enabled:!1,format:"{point.y}",verticalAlign:"bottom",y:0}),pointsLimit:300,pointRange:0,addToLegend:!0,activeSettings:{pointHoveredState:{drawWidth:3,pointMark:{}},pointSelectedState:{pointMark:{}}},completeSeriesTrace:!0},polarline:{applyAnimation:{duration:500}},polararea:{applyAnimation:{duration:500}},polarbar:{applyAnimation:{duration:500}},polarspline:{applyAnimation:{duration:500}},polarsplinearea:{applyAnimation:{duration:500}},polarscatter:{applyAnimation:{duration:500}}},chartLegend:{enabled:!0,align:"center",renderDirection:"horizontal",borderWidth:0,borderColor:"#909090",borderRadius:0,shadow:!1,legendItemSettings:{disabledStyle:{color:"#CCC"},mouseOverStyle:{color:"#000"},elementStyle:{cursor:ie,color:"#3E576F",fontSize:"12px"}},checkMarkSettings:{enabled:!1,shape:"check",width:1,color:"#3E576F",mouseOverColor:r,coordinates:{x:r,y:r,width:r,height:r}},symbolWidthINTERNAL:12,drawRadius:4,legendMarkerDistance:5,verticalAlign:"bottom",x:0,y:10},tooltipSettings:{enabled:!0,customHeaderText:"{point.pointName}",customPointText:"<span>{point.dataSeries.collectionAlias}<\/span>: {point.y}",format:null,position:null,chartBound:!1,axisMarkers:{enabled:!1,mode:"xy",color:"#999999",width:1,zIndex:3},showDistance:vr?25:10}};c=ei.seriesSettings;wr=c.line;vs();vi=function(n){function r(n){i=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(n);i?t=[p(i[1]),p(i[2]),p(i[3]),parseFloat(i[4],10)]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n),i&&(t=[p(i[1],16),p(i[2],16),p(i[3],16),1]))}function u(i){return t&&!isNaN(t[0])?"rgb"===i?"rgb("+t[0]+","+t[1]+","+t[2]+")":"a"===i?t[3]:"rgba("+t.join(",")+")":n}function f(n){if(yr(n)&&0!==n)for(var i=0;i<3;i++)t[i]+=p(255*n),t[i]<0&&(t[i]=0),t[i]>255&&(t[i]=255);return this}function e(n){return t[3]=n,this}var i,t=[];return r(n),{get:u,brighten:f,setOpacity:e}};ci.prototype={init:function(n,t){var i=this;i.element="span"===t?yt(t):b.createElementNS(ki,t);i.renderer=n;i.attrSetters={}},animate:function(n,t,i){var r=f(t,gr,!0);nf(this);r?(r=h(r),i&&(r.complete=i),vh(this,n,r)):(this.attr(n),i&&i())},attr:function(n,t){var i,u,a,s,d,h,c,nt,tt,f=this,e=f.element,l=e.nodeName.toLowerCase(),g=f.renderer,it=f.attrSetters,y=f.shadows,k=f;if(ri(n)&&o(t)&&(i=n,n={},n[i]=t),ri(n))i=n,"circle"===l?i={x:"cx",y:"cy"}[i]||i:"strokeWidth"===i&&(i="stroke-width"),k=w(e,i)||f[i]||0,"d"!==i&&"visibility"!==i&&(k=parseFloat(k));else for(i in n)if(n.hasOwnProperty(i)&&(h=!1,u=n[i],a=it[i]&&it[i].call(f,u,i),a!==!1)){if(a!==r&&(u=a),"d"===i)u&&u.join&&(u=u.join(" ")),/(NaN| {2}|^$)/.test(u)&&(u="M 0 0");else if("x"===i&&"text"===l){for(s=0;s<e.childNodes.length;s++)d=e.childNodes[s],w(d,"x")===w(e,"x")&&w(d,"x",u);f.textAngle&&w(e,"transform","rotate("+f.textAngle+" "+u+" "+p(n.y||w(e,"y"))+")")}else if("fill"===i)u=g.color(u,e,i);else if("circle"!==l||"x"!==i&&"y"!==i)if("rect"===l&&"r"===i)w(e,{rx:u,ry:u}),h=!0;else if("translateX"===i||"translateY"===i||"textAngle"===i||"verticalAlign"===i)tt=!0,h=!0;else if("stroke"===i)u=g.color(u,e,i);else if("dashstyle"===i){if(i="stroke-dasharray",u=u&&u.toLowerCase(),"solid"===u)u=kt;else if(u){for(u=u.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),s=u.length;s--;)u[s]=p(u[s])*n["stroke-width"];u=u.join(",")}}else"isTracker"===i?f[i]=u:"width"===i?u=p(u):"align"===i?(i="text-anchor",u={left:"start",center:"middle",right:"end"}[u]):"title"===i&&(c=e.getElementsByTagName("title")[0],c||(c=b.createElementNS(ki,"title"),e.appendChild(c)),c.textContent=u);else i={x:"cx",y:"cy"}[i]||i;if("strokeWidth"===i&&(i="stroke-width"),ne&&"stroke-width"===i&&0===u&&(u=1e-6),f.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(i)&&(nt||(f.symbolAttr(n),nt=!0),h=!0),y&&/^(width|height|visibility|x|y|d|transform)$/.test(i))for(s=y.length;s--;)w(y[s],i,"height"===i?v(u-(y[s].cutHeight||0),0):u);("width"===i||"height"===i)&&"rect"===l&&u<0&&(u=0);f[i]=u;tt&&f.updateTransform();"text"===i?(u!==f.textStr&&delete f.bBox,f.textStr=u,f.added&&g.buildText(f)):h||w(e,i,u)}return k},symbolAttr:function(n){var t=this;e(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(i){t[i]=f(n[i],t[i])});t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(n){return this.attr("clip-path",n?"url("+this.renderer.url+"#"+n.id+")":kt)},crisp:function(n,t,i,r,u){var o,h,f=this,c={},e={};n=n||f.strokeWidth||f.attr&&f.attr("stroke-width")||0;h=s(n)%2/2;e.x=pt(t||f.x||0)+h;e.y=pt(i||f.y||0)+h;e.width=pt((r||f.width||0)-2*h);e.height=pt((u||f.height||0)-2*h);e.strokeWidth=n;for(o in e)e.hasOwnProperty(o)&&f[o]!==e[o]&&(c[o]=e[o],bt(f)&&(f[o]=e[o]));return c},css:function(n){var i,t=this,f=t.element,r=n&&n.width&&"text"===f.nodeName.toLowerCase(),u="",e=function(n,t){return"-"+t.toLowerCase()};if(n&&n.color&&(n.fill=n.color),n=l(t.styles,n),t.styles=n,oi&&r&&delete n.width,bi&&!ii)r&&delete n.width,it(t.element,n);else{for(i in n)n.hasOwnProperty(i)&&(u+=i.replace(/([A-Z])/g,e)+":"+n[i]+";");t.attr({style:u})}return r&&t.added&&t.renderer.buildText(t),t},on:function(n,t){var i=t;return this.element["on"+n]=i,this},setRadialReference:function(n){return this.element.radialReference=n,this},translate:function(n,t){return this.attr({translateX:n,translateY:t})},invert:function(){var n=this;return n.isInverted=!0,n.updateTransform(),n},htmlCss:function(n){var t=this,r=t.element,i=n&&"SPAN"===r.tagName&&n.width;return i&&(delete n.width,t.textWidth=i,t.updateTransform()),t.styles=l(t.styles,n),it(t.element,n),t},htmlGetBBox:function(){var t=this,n=t.element,i=t.bBox;return i||("text"===n.nodeName&&(n.style.position=ir),i=t.bBox={x:n.offsetLeft,y:n.offsetTop,width:n.offsetWidth,height:n.offsetHeight}),i},htmlUpdateTransform:function(){if(!this.added)return void(this.alignOnAdd=!0);var n=this,y=n.renderer,t=n.element,w=n.translateX||0,b=n.translateY||0,ot=n.x||0,st=n.y||0,h=n.textAlignINTERNAL||"left",s={left:0,center:.5,right:1}[h],ct=h&&"left"!==h,ut=n.shadows;if((w||b)&&(it(t,{marginLeft:w,marginTop:b}),ut&&e(ut,function(n){it(n,{marginLeft:w+1,marginTop:b+1})})),n.isInverted&&e(t.childNodes,function(n){y.invertChild(n,t)}),"SPAN"===t.tagName){var c,k,g,nt,ft,i=n.textAngle,tt=0,r=1,u=0,rt=p(n.textWidth),l=n.xCorr||0,a=n.yCorr||0,et=[i,h,t.innerHTML,n.textWidth].join(","),v={};et!==n.cTT&&(o(i)&&(y.isSVG?(ft=bi?"-ms-transform":ne?"-webkit-transform":te?"MozTransform":gf?"-o-transform":"",v[ft]=v.transform="rotate("+i+"deg)"):(tt=i*cu,r=ht(tt),u=vt(tt),v.filter=i?["progid:DXImageTransform.Microsoft.Matrix(M11=",r,", M12=",-u,", M21=",u,", M22=",r,", sizingMethod='auto expand')"].join(""):kt),it(t,v)),c=f(n.elemWidth,t.offsetWidth),k=f(n.elemHeight,t.offsetHeight),c>rt&&/[ \-]/.test(t.innerText)&&(it(t,{width:rt+d,display:"block",whiteSpace:"normal"}),c=rt),g=y.fontMetrics(t.style.fontSize).b,l=r<0&&-c,a=u<0&&-k,nt=r*u<0,l+=u*g*(nt?1-s:s),a-=r*g*(i?nt?s:1-s:1),ct&&(l-=c*s*(r<0?-1:1),i&&(a-=k*s*(u<0?-1:1)),it(t,{textAlignINTERNAL:h})),n.xCorr=l,n.yCorr=a);it(t,{left:ot+l+d,top:st+a+d});n.cTT=et}},updateTransform:function(){var n=this,i=n.translateX||0,r=n.translateY||0,u=n.isInverted,f=n.textAngle,t=[];u&&(i+=n.attr("width"),r+=n.attr("height"));(i||r)&&t.push("translate("+i+","+r+")");u?t.push("rotate(90) scale(-1,1)"):f&&t.push("rotate("+f+" "+(n.x||0)+" "+(n.y||0)+")");t.length&&w(n.element,"transform",t.join(" "))},toFront:function(){var n=this.element;return n.parentNode.appendChild(n),this},align:function(n,t,i){var r=this;n?(r.alignOptions=n,r.alignByTranslate=t,i||r.renderer.alignedObjects.push(r)):(n=r.alignOptions,t=r.alignByTranslate);i=f(i,r.renderer);var e=n.align,o=n.verticalAlign,h=(i.x||0)+(n.x||0),c=(i.y||0)+(n.y||0),u={};return"right"!==e&&"center"!==e||(h+=(i.width-(n.width||0))/{right:1,center:2}[e]),u[t?"translateX":"x"]=s(h),"bottom"!==o&&"middle"!==o||(c+=(i.height-(n.height||0))/({bottom:1,middle:2}[o]||1)),u[t?"translateY":"y"]=s(c),r[r.placed?"animate":"attr"](u),r.placed=!0,r.alignAttr=u,r},getBBox:function(){var f,r,t=this,n=t.bBox,e=t.renderer,o=t.textAngle,i=t.element,s=t.styles,u=o*cu;if(!n){if(i.namespaceURI===ki||e.forExport){try{n=i.getBBox?l({},i.getBBox()):{width:i.offsetWidth,height:i.offsetHeight}}catch(h){}(!n||n.width<0)&&(n={width:0,height:0})}else n=t.htmlGetBBox();e.isSVG&&(f=n.width,r=n.height,o&&(n.width=dt(r*vt(u))+dt(f*ht(u)),n.height=dt(r*ht(u))+dt(f*vt(u))));bi&&s&&"11px"===s.fontSize&&22.700000762939453===r&&(n.height=14);t.bBox=n}return n},show:function(){return this.attr({visibility:et})},hide:function(){return this.attr({visibility:ft})},add:function(n){var i,f,r,c,e=this.renderer,s=n||e,h=s.element||e.box,l=h.childNodes,u=this.element,t=w(u,"zIndex");if(n&&(this.parentGroup=n),this.parentInverted=n&&n.isInverted,void 0!==this.textStr&&e.buildText(this),t&&(s.handleZ=!0,t=p(t)),s.handleZ)for(r=0;r<l.length;r++)if(i=l[r],f=w(i,"zIndex"),i!==u&&(p(f)>t||!o(t)&&o(f))){h.insertBefore(u,i);c=!0;break}return c||h.appendChild(u),this.added=!0,ai(this,"add"),this},safeRemoveChild:function(n){var t=n.parentNode;t&&t.removeChild(n)},destroy:function(){if(!this._destroyed){var r,t,n=this,i=n.element||{},u=n.shadows;if(i.onclick=i.onmouseout=i.onmouseover=i.onmousemove=null,nf(n),n.clipPath&&(n.clipPath=n.clipPath.destroy()),n.stops){for(t=0;t<n.stops.length;t++)n.stops[t]=n.stops[t].destroy();n.stops=null}n.safeRemoveChild(i);u&&e(u,function(t){n.safeRemoveChild(t)});n.renderer._destroyed||or(n.renderer.alignedObjects,n);for(r in n)n.hasOwnProperty(r)&&delete n[r];return n._destroyed=!0,null}},empty:function(){for(var n=this.element,t=n.childNodes,i=t.length;i--;)n.removeChild(t[i])},shadow:function(n,t,i){var u,r,e,o,h,c,l=[],s=this.element;if(n){for(o=f(n.width,3),h=(n.opacity||.15)/o,c=this.parentInverted?"(-1,-1)":"("+f(n.offsetX,1)+", "+f(n.offsetY,1)+")",u=1;u<=o;u++)r=s.cloneNode(0),e=2*o+1-2*u,w(r,{isShadow:"true",stroke:n.color||"black","stroke-opacity":h*u,"stroke-width":e,transform:"translate"+c,fill:kt}),i&&(w(r,"height",v(w(r,"height")-e,0)),r.cutHeight=e),t?t.element.appendChild(r):s.parentNode.insertBefore(r,s),l.push(r);this.shadows=l}return this}};ui=function(){this.init.apply(this,arguments)};ui.prototype={Element:ci,init:function(n,t,r,u){var o,f=this,h=location,s,e;(o=f.createElement("svg").attr({xmlns:ki,version:"1.1"}),n.appendChild(o.element),f.isSVG=!0,f.box=o.element,f.boxWrapper=o,f.alignedObjects=[],f.url=(te||ne)&&b.getElementsByTagName("base").length?h.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",f.defs=this.createElement("defs").add(),f.forExport=u,f.gradients={},f.setSize(t,r,!1),te&&n.getBoundingClientRect)&&(f.subPixelFix=s=function(){it(n,{left:0,top:0});e=n.getBoundingClientRect();it(n,{left:lr(e.left)-e.left+d,top:lr(e.top)-e.top+d})},s(),at(i,wi,s))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){if(!this._destroyed){var n=this,t=n.defs;return n.box=null,n.boxWrapper=n.boxWrapper.destroy(),hr(n.gradients||{}),n.gradients=null,t&&(n.defs=t.destroy()),n.subPixelFix&&wt(i,wi,n.subPixelFix),n.alignedObjects=null,n._destroyed=!0,null}},createElement:function(n){var t=new this.Element;return t.init(this,n),t},draw:function(){},buildText:function(n){function tt(i){return c[i]=t.getBBox?t.getBBox().height:n.renderer.fontMetrics(t.style.fontSize).h,s(c[i]-(c[i-1]||0))}for(var h,t=n.element,o=f(n.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"<\/span>").split(/<br.*?>/g),l=t.childNodes,a=/style="([^"]+)"/,v=/href="([^"]+)"/,y=/id="([^"]+)"/,k=w(t,"x"),r=n.styles,u=r&&r.width&&p(r.width),d=r&&r.lineHeight,g="getComputedStyle",nt=l.length,c=[];nt--;)t.removeChild(l[nt]);u&&!n.added&&this.box.appendChild(t);""===o[o.length-1]&&o.pop();e(o,function(r,f){var s,o,c=0;r=r.replace(/<span/g,"|||<span").replace(/<\/span>/g,"<\/span>|||");s=r.split("|||");e(s,function(r){var rt,ut,e,et,ft,l,nt;if((""!==r||1===s.length)&&(ut={},e=b.createElementNS(ki,"tspan"),a.test(r)&&(rt=r.match(a)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),w(e,"style",rt)),v.test(r)&&(w(e,"onclick",'location.href="'+r.match(v)[1]+'"'),it(e,{cursor:ie})),y.test(r)&&w(e,"id",r.match(y)[1]),r=(r.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),e.appendChild(b.createTextNode(r)),c?ut.dx=3:ut.x=k,c||(f&&(!ii&&n.renderer.forExport&&it(e,{display:"block"}),o=i[g]&&p(i[g](h,null).getPropertyValue("line-height")),o&&!isNaN(o)||(o=d||h.offsetHeight||tt(f)||18),w(e,"dy",o)),h=e),w(e,ut),t.appendChild(e),c++,u))for(l=r.replace(/([^\^])-/g,"$1- ").split(" "),nt=[];l.length||nt.length;)delete n.bBox,ft=n.getBBox().width,et=ft>u,et&&1!==l.length?(e.removeChild(e.firstChild),nt.unshift(l.pop())):(l=nt,nt=[],l.length&&(e=b.createElementNS(ki,"tspan"),w(e,{dy:d||16,x:k}),rt&&w(e,"style",rt),t.appendChild(e),ft>u&&(u=ft))),l.length&&e.appendChild(b.createTextNode(l.join(" ").replace(/- /g,"-")))})})},crispLine:function(n,t){return n[1]===n[4]&&(n[1]=n[4]=s(n[1])-t%2/2),n[2]===n[5]&&(n[2]=n[5]=s(n[2])+t%2/2),n},path:function(n){var t={fill:kt};return tr(n)?t.d=n:bt(n)&&l(t,n),this.createElement("path").attr(t)},circle:function(n,t,i){var r=bt(n)?n:{x:n,y:t,r:i};return this.createElement("circle").attr(r)},arc:function(n,t,i,r,u,f){return bt(n)&&(t=n.y,i=n.r,r=n.innerR,u=n.start,f=n.end,n=n.x),this.symbol("arc",n||0,t||0,i||0,i||0,{innerR:r||0,start:u||0,end:f||0})},rect:function(n,t,i,r,u,f){u=bt(n)?n.r:u;var e=this.createElement("rect").attr({rx:u,ry:u,fill:kt});return e.attr(bt(n)?n:e.crisp(f,n,t,v(i,0),v(r,0)))},setSize:function(n,t,i){var r=this,u=r.alignedObjects,e=u.length;for(r.width=n,r.height=t,r.boxWrapper[f(i,!0)?"animate":"attr"]({width:n,height:t});e--;)u[e].align()},g:function(n){var t=this.createElement("g");return o(n)?t.attr({"class":bu+n}):t},image:function(n,t,i,r,u){var f,e={preserveAspectRatio:kt};return arguments.length>1&&l(e,{x:t,y:i,width:r,height:u}),f=this.createElement("image").attr(e),f.element.setAttributeNS?f.element.setAttributeNS("http://www.w3.org/1999/xlink","href",n):f.element.setAttribute("sui-svg-href",n),f},symbol:function(n,t,i,r,u,f){var e,o,h,c,a=this.symbols[n],v=a&&a(s(t),s(i),r,u,f),y=/^url\((.*?)\)$/;return v?(e=this.path(v),l(e,{symbolName:n,x:t,y:i,width:r,height:u}),f&&l(e,f)):y.test(n)&&(c=function(n,t){n.attr({width:t[0],height:t[1]});n.alignByTranslate||n.translate(-s(t[0]/2),-s(t[1]/2))},o=n.match(y)[1],h=wo[o],e=this.image(o).attr({x:t,y:i}),h?c(e,h):(e.attr({width:0,height:0}),yt("img",{onload:function(){var n=this;c(e,wo[o]=[n.width,n.height])},src:o}))),e},symbols:{circle:function(n,t,i,r){var u=.166*i;return[rt,n+i/2,t,"C",n+i+u,t,n+i+u,t+r,n+i/2,t+r,"C",n-u,t+r,n-u,t,n+i/2,t,"Z"]},x:function(n,t,i,r){return[rt,n,t,g,n+i,t+r,rt,n+i,t,g,n,t+r]},v:function(n,t,i,r){return[rt,n+1,t+1,g,n+i/2,t+r-1,g,n+i-1,t+1]},check:function(n,t,i,r){return[rt,n+2,t+r/2-1,g,n+i/2,t+r-1,g,n+i-1,t+1]},square:function(n,t,i,r){return[rt,n,t,g,n+i,t,n+i,t+r,n,t+r,"Z"]},triangle:function(n,t,i,r){return[rt,n+i/2,t,g,n+i,t+r,n,t+r,"Z"]},"triangle-down":function(n,t,i,r){return[rt,n,t,g,n+i,t,n+i/2,t+r,"Z"]},diamond:function(n,t,i,r){return[rt,n+i/2,t,g,n+i,t+r/2,n+i/2,t+r,n,t+r/2,"Z"]},arc:function(n,t,i,r,u){var o=u.start,f=u.r||i||r,s=u.end-1e-6,e=u.innerR,h=u.open,c=ht(o),l=vt(o),a=ht(s),v=vt(s),y=u.end-o<tt?0:1;return[rt,n+f*c,t+f*l,"A",f,f,0,y,1,n+f*a,t+f*v,h?rt:g,n+e*a,t+e*v,"A",e,e,0,y,0,n+e*c,t+e*l,h?"":"Z"]}},clipRect:function(n,i,r,u){var f,e=t.strid(),o=this.createElement("clipPath").attr({id:e}).add(this.defs);return f=this.rect(n,i,r,u,0).add(o),f.id=e,f.clipPath=o,f},color:function(n,i,r){var h,s,c=this,p=/^rgba/;if(n&&n.linearGradient?s="linearGradient":n&&n.radialGradient&&(s="radialGradient"),s){var a,v,y,u=n[s],b=c.gradients,f=i.radialReference;return u.id&&b[u.id]||(tr(u)&&(n[s]=u={x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===s&&f&&!o(u.gradientUnits)&&l(u,{cx:f[0]-f[2]/2+u.cx*f[2],cy:f[1]-f[2]/2+u.cy*f[2],r:u.r*f[2],gradientUnits:"userSpaceOnUse"}),u.id=t.strid(),b[u.id]=a=c.createElement(s).attr(u).add(c.defs),a.stops=[],e(n.stops,function(n){var t;p.test(n[1])?(h=new vi(n[1]),v=h.get("rgb"),y=h.get("a")):(v=n[1],y=1);t=c.createElement("stop").attr({offset:n[0],"stop-color":v,"stop-opacity":y}).add(a);a.stops.push(t)})),"url("+c.url+"#"+u.id+")"}return p.test(n)?(h=new vi(n),w(i,r+"-opacity",h.get("a")),h.get("rgb")):(i.removeAttribute(r+"-opacity"),n)},text:function(n,t,i,r){var u,e=this,o=ei.style,h=oi||!ii&&e.forExport;return r&&!e.forExport?e.html(n,t,i):(t=s(f(t,0)),i=s(f(i,0)),u=e.createElement("text").attr({x:t,y:i,text:n}).css({fontFamily:o.fontFamily,fontSize:o.fontSize}),h&&u.css({position:ir}),u.x=t,u.y=i,u)},html:function(n,t,i){var o=ei.style,r=this.createElement("span"),u=r.attrSetters,f=r.element,h=r.renderer;return u.text=function(n){return n!==f.innerHTML&&delete this.bBox,f.innerHTML=n,!1},u.x=u.y=u.align=function(n,t){return"align"===t&&(t="textAlignINTERNAL"),r[t]=n,r.htmlUpdateTransform(),!1},r.attr({text:n,x:s(t),y:s(i)}).css({position:ir,whiteSpace:"nowrap",fontFamily:o.fontFamily,fontSize:o.fontSize}),r.css=r.htmlCss,h.isSVG&&(r.add=function(n){var t,i,u=h.box.parentNode,o=[];if(n){if(t=n.div,!t){for(i=n;i;)o.push(i),i=i.parentGroup;e(o.reverse(),function(n){var i;t=n.div=n.div||yt(hi,{className:w(n.element,"class")},{position:ir,left:(n.translateX||0)+d,top:(n.translateY||0)+d},t||u);i=t.style;l(n.attrSetters,{translateX:function(n){i.left=n+d},translateY:function(n){i.top=n+d},visibility:function(n,t){i[t]=n}})})}}else t=u;return t.appendChild(f),r.added=!0,r.alignOnAdd&&r.htmlUpdateTransform(),r}),r},fontMetrics:function(n){n=p(n||11);var t=n<24?n+4:s(1.2*n),i=s(.8*t);return{h:t,b:i}},label:function(n,t,i,u,f,c,a,v,y){function yt(){var n,t=w.element.style;nt=(void 0===g||void 0===ft||p.styles.textAlignINTERNAL)&&w.getBBox();p.width=(g||nt.width||0)+2*d;p.height=(ft||nt.height||0)+2*d;ot=d+tt.fontMetrics(t&&t.fontSize).b;k||(n=v?-ot:0,p.box=k=u?tt.symbol(u,-it*d,n,p.width,p.height):tt.rect(-it*d,n,p.width,p.height,0,ut[ko]),k.add(p));k.attr(h({width:p.width,height:p.height},ut));ut=null}function st(){var n,r=p.styles,i=r&&r.textAlignINTERNAL,t=d*(1-it);n=v?0:ot;!o(g)||"center"!==i&&"right"!==i||(t+={center:.5,right:1}[i]*(g-nt.width));t===w.x&&n===w.y||w.attr({x:t,y:n});w.x=t;w.y=n}function rt(n,t){k?k.attr(n,t):ut[n]=t}function ht(){w.add(p);p.attr({text:n,x:t,y:i});o(f)&&p.attr({anchorX:f,anchorY:c})}var k,nt,g,ft,et,ct,ot,tt=this,p=tt.g(y),w=tt.text("",0,0,a).attr({zIndex:1}),it=0,d=3,lt=0,ut={},b=p.attrSetters,vt;return at(p,"add",ht),b.width=function(n){return g=n,!1},b.height=function(n){return ft=n,!1},b.padding=function(n){return o(n)&&n!==d&&(d=n,st()),!1},b.align=function(n){return it={left:0,center:.5,right:1}[n],!1},b.text=function(n,t){return w.attr(t,n),yt(),st(),!1},b[ko]=function(n,t){return lt=n%2/2,rt(t,n),!1},b.stroke=b.fill=b.r=function(n,t){return rt(t,n),!1},b.anchorX=function(n,t){return f=n,rt(t,n+lt-et),!1},b.anchorY=function(n,t){return c=n,rt(t,n-ct),!1},b.x=function(n){return p.x=n,n-=it*((g||nt.width)+d),et=s(n),p.attr("translateX",et),!1},b.y=function(n){return ct=p.y=s(n),p.attr("translateY",n),!1},vt=p.css,l(p,{css:function(n){if(n){var t={};n=h({},n);e(["fontSize","fontWeight","fontFamily","color","lineHeight","width"],function(i){n[i]!==r&&(t[i]=n[i],delete n[i])});w.css(t)}return vt.call(p,n)},getBBox:function(){return k.getBBox()},shadow:function(n){return k.shadow(n),p},destroy:function(){p._destroyed||(wt(p,"add",ht),wt(p.element,fh),wt(p.element,kf),w&&(w=w.destroy()),k&&(k=k.destroy()),ci.prototype.destroy.call(p))}})}};eu=ui;ii||oi||(gi={init:function(n,t){var r=this,i=["<",t,' filled="f" stroked="f"'],u=["position: ",ir,";"];"shape"!==t&&t!==hi||u.push("left:0;top:0;width:1px;height:1px;");yu&&u.push("visibility: ",t===hi?ft:et);i.push(' style="',u.join(""),'"/>');t&&(i=t===hi||"span"===t||"img"===t?i.join(""):n.prepVML(i),r.element=yt(i));r.renderer=n;r.attrSetters={}},add:function(n){var t=this,i=t.renderer,r=t.element,f=i.box,e=n&&n.isInverted,u=n?n.element||n:f;return e&&i.invertChild(r,u),u.appendChild(r),t.added=!0,t.alignOnAdd&&!t.deferUpdateTransform&&t.updateTransform(),ai(t,"add"),t},updateTransform:ci.prototype.htmlUpdateTransform,attr:function(n,t){var i,u,e,y,g,c,f=this,h=f.element||{},a=h.style,p=h.nodeName,b=f.renderer,rt=f.symbolName,l=f.shadows,nt=f.attrSetters,tt=f,k,it;if(ri(n)&&o(t)&&(i=n,n={},n[i]=t),ri(n))i=n,tt="strokeWidth"===i||"stroke-width"===i?f.strokeweight:f[i];else for(i in n)if(n.hasOwnProperty(i)&&(u=n[i],c=!1,y=nt[i]&&nt[i].call(f,u,i),y!==!1&&null!==u)){if(y!==r&&(u=y),rt&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(i))g||(f.symbolAttr(n),g=!0),c=!0;else if("d"===i){for(u=u||[],f.d=u.join(" "),e=u.length,k=[];e--;)k[e]=yr(u[e])?s(10*u[e])-5:"Z"===u[e]?"x":u[e];if(u=k.join(" ")||"x",h.path=u,l)for(e=l.length;e--;)l[e].path=l[e].cutOff?this.cutOffPath(u,l[e].cutOff):u;c=!0}else if("visibility"===i){if(l)for(e=l.length;e--;)l[e].style[i]=u;"DIV"===p&&(u=u===ft?"-999em":0,i="top");a[i]=u;c=!0}else"zIndex"===i?(u&&(a[i]=u),c=!0):"width"===i||"height"===i?(u=v(0,u),this[i]=u,f.updateClipping?(f[i]=u,f.updateClipping()):a[i]=u,c=!0):"x"===i||"y"===i?(f[i]=u,a[{x:"left",y:"top"}[i]]=u):"class"===i?h.className=u:"stroke"===i?(u=b.color(u,h,i),i="strokecolor"):"stroke-width"===i||"strokeWidth"===i?(h.stroked=!!u,i="strokeweight",f[i]=u,yr(u)&&(u+=d)):"dashstyle"===i?(it=h.getElementsByTagName("stroke")[0]||yt(b.prepVML(["<stroke/>"]),null,null,h),it[i]=u||"solid",f.dashstyle=u,c=!0):"fill"===i?"SPAN"===p?a.color=u:(h.filled=u!==kt,u=b.color(u,h,i,f),i="fillcolor"):"shape"===p&&"textAngle"===i?(f[i]=u,h.style.left=-s(vt(u*cu)+1)+d,h.style.top=s(ht(u*cu))+d):"translateX"===i||"translateY"===i||"textAngle"===i?(f[i]=u,f.updateTransform(),c=!0):"text"===i&&(this.bBox=null,h.innerHTML=u,c=!0);c||(yu?h[i]=u:w(h,i,u))}return tt},clip:function(n){var i,r,t=this,u=t.element;return u.parentNode,n?(i=n.members,i.push(t),t.destroyClip=function(){or(i,t)},r=n.getCSS(t)):(t.destroyClip&&t.destroyClip(),r={clip:yu?"inherit":"rect(auto)"}),t.css(r)},css:ci.prototype.htmlCss,safeRemoveChild:function(n){n.parentNode&&cr(n)},destroy:function(){var n=this;if(!n._destroyed)return n.destroyClip&&n.destroyClip(),ci.prototype.destroy.apply(n)},empty:function(){for(var n,r=this.element,t=r.childNodes,i=t.length;i--;)n=t[i],n.parentNode.removeChild(n)},on:function(n,t){return this.element["on"+n]=function(){var n=i.event;n.target=n.srcElement;t(n)},this},cutOffPath:function(n,t){var i;return n=n.split(/[ ,]/),i=n.length,9!==i&&11!==i||(n[i-4]=n[i-2]=p(n[i-2])-10*t),n.join(" ")},shadow:function(n,t,i){var u,r,h,c,l,a,v,e=this,y=[],o=e.element,w=e.renderer,b=o.style,s=o.path;if(s&&"string"!=typeof s.value&&(s="x"),l=s,n){for(a=f(n.width,3),v=(n.opacity||.15)/a,u=1;u<=3;u++)c=2*a+1-2*u,i&&(l=e.cutOffPath(s.value,c+.5)),h=['<shape isShadow="true" strokeweight="',c,'" filled="false" path="',l,'" coordsize="10 10" style="',o.style.cssText,'" />'],r=yt(w.prepVML(h),null,{left:p(b.left)+f(n.offsetX,1),top:p(b.top)+f(n.offsetY,1)}),i&&(r.cutOff=c+1),h=['<stroke color="',n.color||"black",'" opacity="',v*u,'"/>'],yt(w.prepVML(h),null,null,r),t?t.element.appendChild(r):o.parentNode.insertBefore(r,o),y.push(r);e.shadows=y}return e}},gi=nt(ci,gi),go={Element:gi,isIE8:ar.indexOf("MSIE 8.0")>-1,init:function(n,t,i){var u,f,r=this;r.alignedObjects=[];u=r.createElement(hi);f=u.element;f.style.position=ku;n.appendChild(u.element);r.box=f;r.boxWrapper=u;r.setSize(t,i,!1);b.namespaces.scv||(b.namespaces.add("scv","urn:schemas-microsoft-com:vml"),b.createStyleSheet().cssText="scv\\:fill, scv\\:path, scv\\:shape, scv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},isHidden:function(){return!this.box.offsetWidth},clipRect:function(n,t,i,r){var f=this.createElement(),u=bt(n);return l(f,{members:[],left:u?n.x:n,top:u?n.y:t,width:u?n.width:i,height:u?n.height:r,getCSS:function(n){var t=n.isInverted,i=this,r=i.top,u=i.left,f=u+i.width,e=r+i.height,o={clip:"rect("+s(t?u:r)+"px,"+s(t?e:f)+"px,"+s(t?f:e)+"px,"+s(t?r:u)+"px)"};return!t&&yu&&"IMG"!==n.element.nodeName&&l(o,{width:f+d,height:e+d}),o},updateClipping:function(){e(f.members,function(n){n.css(f.getCSS(n))})}})},color:function(n,t,i,r){var o,v,c,dt=this,g=/^rgba/,l=kt,d;if(n&&n.linearGradient?c="gradient":n&&n.radialGradient&&(c="pattern"),c){var s,p,nt,it,rt,ut,ft,et,ot,st,w,b,u=n.linearGradient||n.radialGradient,k="",h=n.stops,ht=function(){v=['<fill colors="'+ei.seriesPalette.join(",")+'" opacity="',et,'" o:opacity2="',ft,'" type="',c,'" ',k,'focus="100%" method="any" />'];yt(dt.prepVML(v),null,null,t)};if(w=h[0],b=h[h.length-1],w[0]>0&&h.unshift([0,w[1]]),b[0]<1&&h.push([1,b[1]]),e(h,function(n,t){g.test(n[1])?(o=new vi(n[1]),s=o.get("rgb"),p=o.get("a")):(s=n[1],p=1);ei.seriesPalette.push(100*n[0]+"% "+s);t?(et=p,ot=s):(ft=p,st=s)}),"fill"===i)if("gradient"===c)nt=u.x1||u[0]||0,it=u.y1||u[1]||0,rt=u.x2||u[2]||0,ut=u.y2||u[3]||0,k='angle="'+(90-180*y.atan((ut-it)/(rt-nt))/tt)+'"',ht();else{var f,ct=u.r,lt=2*ct,vt=2*ct,pt=u.cx,wt=u.cy,a=t.radialReference,bt=function(){a&&(f=r.getBBox(),pt+=(a[0]-f.x)/f.width-.5,wt+=(a[1]-f.y)/f.height-.5,lt*=a[2]/f.width,vt*=a[2]/f.height);k='size="'+lt+","+vt+'" origin="0.5,0.5" position="'+pt+","+wt+'" color2="'+st+'" ';ht()};r.added?bt():at(r,"add",bt);l=ot}else l=s}else g.test(n)&&"IMG"!==t.tagName?(o=new vi(n),v=["<",i,' opacity="',o.get("a"),'"/>'],yt(this.prepVML(v),null,null,t),l=o.get("rgb")):(d=t.getElementsByTagName(i),d.length&&(d[0].opacity=1),l=n);return l},prepVML:function(n){var t="display:inline-block;behavior:url(#default#VML);",i=this.isIE8;return n=n.join(""),i?(n=n.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),n=n.indexOf('style="')===-1?n.replace("/>",' style="'+t+'" />'):n.replace('style="','style="'+t)):n=n.replace("<","<scv:"),n},text:ui.prototype.html,path:function(n){var t={coordsize:"10 10"};return tr(n)?t.d=n:bt(n)&&l(t,n),this.createElement("shape").attr(t)},circle:function(n,t,i){return this.symbol("circle").attr({x:n-i,y:t-i,width:2*i,height:2*i})},g:function(n){var i,t;return n&&(t={className:bu+n,"class":bu+n}),i=this.createElement(hi).attr(t)},image:function(n,t,i,r,u){var f=this.createElement("img").attr({src:n});return arguments.length>1&&f.attr({x:t,y:i,width:r,height:u}),f},rect:function(n,t,i,r,u,f){bt(n)&&(t=n.y,i=n.width,r=n.height,f=n.strokeWidth,n=n.x);var e=this.symbol("rect");return e.r=u,e.attr(e.crisp(f,n,t,v(i,0),v(r,0)))},invertChild:function(n,t){var i=t.style;it(n,{flip:"x",left:p(i.width)-1,top:p(i.height)-1,rotation:-90})},symbols:{arc:function(n,t,i,r,u){var h,o=u.start,s=u.end,e=u.r||i||r,l=ht(o),a=vt(o),c=ht(s),v=vt(s),f=u.innerR,y=.08/e,p=f&&.1/f||0;return s-o==0?["x"]:(2*tt-s+o<y?c=-y:s-o<p&&(c=ht(o+p)),h=["wa",n-e,t-e,n+e,t+e,n+e*l,t+e*a,n+e*c,t+e*v],u.open&&!f&&h.push("e",rt,n,t),h.push("at",n-f,t-f,n+f,t+f,n+f*c,t+f*v,n+f*l,t+f*a,"x","e"),h)},circle:function(n,t,i,r){return["wa",n,t,n+i,t+r,n+i,t+r/2,n+i,t+r/2,"e"]},rect:function(n,t,i,r,u){var h,f,e=n+i,s=t+r;return o(u)&&u.r?(f=st(u.r,i,r),h=[rt,n+f,t,g,e-f,t,"wa",e-2*f,t,e,t+2*f,e-f,t,e,t+f,g,e,s-f,"wa",e-2*f,s-2*f,e,s,e,s-f,e-f,s,g,n+f,s,"wa",n,s-2*f,n+2*f,s,n+f,s,n,s-f,g,n,t+f,"wa",n,t,n+2*f,t+2*f,n,t+f,n+f,t,"x","e"]):h=ui.prototype.symbols.square.apply(0,arguments),h}}},tf=function(){this.init.apply(this,arguments)},tf.prototype=h(ui.prototype,go),eu=tf);oi&&(rf=function(){ki="http://www.w3.org/1999/xhtml"},rf.prototype.symbols={},rf.prototype=nt(ui.prototype,{create:function(n,t,i,r){this.setContainer(t,i,r);this.configure(n)},setContainer:function(n,t,i){var e,o=n.style,u=n.parentNode,s=o.left,h=o.top,c=n.offsetWidth,l=n.offsetHeight,a={visibility:ft,position:ir},f;this.init.apply(this,[n,t,i]);e=yt("canvas",{width:c,height:l},{position:ku,left:s,top:h},n);this.canvas=e;this.ttLine=yt(hi,null,a,u);this.ttDiv=yt(hi,null,a,u);this.ttTimer=r;f=yt(hi,{width:c,height:l},{visibility:ft,left:s,top:h},u);this.hiddenSvg=f;f.appendChild(this.box)},configure:function(n){var f=this,e=n.options.tooltipSettings,o=u[n.guid],c=e.borderWidth,t=f.ttDiv,i=e.style,s=f.ttLine,l=parseInt(i.padding,10);i=h(i,{padding:l+d,"background-color":e.backgroundColor,"border-style":"solid","border-width":c+d,"border-drawRadius":e.borderRadius+d});e.shadow&&(i=h(i,{"box-shadow":"1px 1px 3px gray","-webkit-box-shadow":"1px 1px 3px gray"}));it(t,i);it(s,{"border-left":"1px solid darkgray"});at(n,"tooltipRefresh",function(n){var i,u=o.container,e=u.offsetLeft,h=u.offsetTop;t.innerHTML=n.text;i=o.tooltipSettings.getPosition(t.offsetWidth,t.offsetHeight,{plotX:n.x,plotY:n.y});it(t,{visibility:et,left:i.x+d,top:i.y+d,"border-color":n.borderColor});it(s,{visibility:et,left:e+n.x+d,top:h+o.plotTop+d,height:o.plotHeight+d});f.ttTimer!==r&&clearTimeout(f.ttTimer);f.ttTimer=setTimeout(function(){it(t,{visibility:ft});it(s,{visibility:ft})},3e3)})},destroy:function(){var n=this;if(!n._destroyed)return cr(n.canvas),n.ttTimer!==r&&clearTimeout(n.ttTimer),cr(n.ttLine),cr(n.ttDiv),cr(n.hiddenSvg),ui.prototype.destroy.apply(n)},color:function(n,t,i){return n&&n.linearGradient&&(n=n.stops[n.stops.length-1][1]),ui.prototype.color.call(this,n,t,i)},draw:function(){var n=this;i.canvg(n.canvas,n.hiddenSvg.innerHTML)}}));eu=tf||rf||ui;dr.prototype={_label:function(){var y,c,b,nt,e=this,i=e.axis,tt=i.options,p=i.chart,w=u[p.guid],it=i.horiz,f=i.categoricalValues,r=e.pos,n=tt.axisTickText,a=i.tickPositions,rt=f&&it&&f.length&&!n.step&&!n.staggerLinesINTERNAL&&!n.textAngle&&w.plotWidth/a.length||!it&&w.plotWidth/2,ut=r===a[0],ft=r===a[a.length-1],h=f&&o(f[r])?f[r]:r,k=e.label,g=a.info;f&&!o(f[r])&&h==r&&w.enablePolarLayout||(i.isDatetimeAxis&&g&&(nt=tt.axisDateFormat[g.higherRanks[r]||g.unitName]),e.isFirst=ut,e.isLast=ft,y=n.format?ri(n.format)?t.format(n.format,{text:i.isDatetimeAxis?new Date(h):h,axis:i,chart:p}):n.format.call(null,h,i,p):ys.call({axis:i,chart:p,isFirst:ut,isLast:ft,dateTimeLabelFormat:nt,value:i.isLog?fi(ni(h)):h}),c=rt&&{width:v(1,s(rt-2*(n.padding||10)))+d},c=l(c,n.style),n&&"x"==i.xOrY&&!i.inverseOrder&&("left"==n.align?n.align="right":"right"==n.align&&(n.align="left")),o(k)?k&&k.attr({text:y}).css(c):(b={align:n.align},yr(n.textAngle)&&(b.textAngle=n.textAngle),e.label=o(y)&&n.enabled?w.renderer.text(y,0,0,n.htmlOutput).attr(b).css(c).add(i.labelGroup):null))},_labelSize:function(){var n=this.label,t=this.axis;return n?(this.labelBBox=n.getBBox())[t.horiz?"height":"width"]:0},_labelDim:function(){var r=this.labelBBox,u=this.axis,f=u.options,n=f.axisTickText,t=r.width,i=t*{left:0,center:.5,right:1}[n.align]-n.x;return[-i,t-i]},_overflow:function(n,t){var e=this,s=!0,f=e.axis,o=e.isFirst,a=e.isLast,i=t.x,v=f.inverseOrder,b=f.tickPositions;if(o||a){var y=e._labelDim(),h=y[0],c=y[1],l=u[f.chart.guid].plotLeft,p=l+f.len,r=f.ticks[b[n+(o?1:-1)]],w=r&&r.label.xy&&r.label.xy.x+r._labelDim()[o?0:1];o&&!v||a&&v?i+h<l&&(i=l-h,r&&i+c>w&&(s=!1)):i+c>p&&(i=p-c,r&&i+h<w&&(s=!1));t.x=i}return s},_position:function(n,t,i,r){var f=this.axis,e=u[f.chart.guid],o=r&&e.oldChartHeight||e.chartHeight;return{x:n?f.translate(t+i,null,null,r)+f.transB:f.left+f.offset+(f.swapLocation?(r&&e.oldChartWidth||e.chartWidth)-f.right-f.left:0),y:n?o-f.bottom+f.offset-(f.swapLocation?f.height:0):o-f.translate(t+i,null,null,r)-f.transB}},_labelPos:function(n,t,i,r,u,f,e,s){var h=this.axis,c=h.transA,l=h.inverseOrder,a=h.staggerLinesINTERNAL;return n=n+u.x-(f&&r?f*c*(l?-1:1):0),t=t+u.y-(f&&!r?f*c*(l?1:-1):0),o(u.y)||(t+=.9*p(i.styles.lineHeight)-i.getBBox().height/2),a&&(t+=e/(s||1)%a*16),{x:n,y:t}},_markPath:function(n,t,i,r,u,f){return f.crispLine([rt,n,t,g,n+(u?0:-i),t+(u?i:0)],r)},render:function(n,t){var v,nt,y,i=this,o=i.axis,e=o.options,tt=u[o.chart.guid].renderer,p=o.horiz,c=i.type,h=i.label,ot=i.pos,it=e.axisTickText,w=i.gridLine,rt=c?c+"Plot":"plot",b=c?c+"Ticks":"ticks",k=e[rt+"StripWidth"],lt=e[rt+"StripColor"],st=e[rt+"StripDashStyle"],s=e[b+"Height"],ut=e[b+"Width"]||0,at=e[b+"Color"],ht=e[b+"Placement"],ct=i.mark,ft=it.step,d=!0,et=o.tickmarkOffset,l=i._position(p,ot,et,t),g=l.x,a=l.y,vt=o.staggerLinesINTERNAL;o.isXAxis&&null!=e.axisTickText.y&&o.inverseOrder&&(e.axisTickText.y=null);k&&(v=o._linePath(ot+et,k,t),w===r&&(y={stroke:lt,"stroke-width":k},st&&(y.dashstyle=st),c||(y.zIndex=1),i.gridLine=w=k?tt.path(v).attr(y).add(o.gridGroup):null),!t&&w&&v&&w[i.isNew?"attr":"animate"]({d:v}));ut&&s&&("inside"===ht&&(s=-s),o.swapLocation&&(s=-s),"through"===ht&&i.axis.isXAxis&&(i.axis.inverseOrder?g+=s:a=a-s+1,s+=s),nt=i._markPath(g,a,s,ut,p,tt),ct?ct.animate({d:nt}):i.mark=tt.path(nt).attr({stroke:at,"stroke-width":ut}).add(o.axisGroup));!h||isNaN(g)||isNaN(a)||(h.xy=l=i._labelPos(g,a,h,p,it,et,n,ft),i.isFirst&&!f(e.firstTickTextVisible,1)||i.isLast&&!f(e.lastTickTextVisible,1)?d=!1:!vt&&p&&it.repositionClippedText&&!i._overflow(n,l)&&(d=!1),ft&&n%ft&&(d=!1),d?(h[i.isNew?"attr":"animate"](l),h.show(),i.isNew=!1):h.hide())},destroy:function(){var n=this;n._destroyed||(hr(n,n.axis),n._destroyed=!0)}};hf.prototype={render:function(){var ut,k,d,g,nt,tt,c,e=this,i=e.axis,w=i.horiz,ft=(i.pointRange||0)/2,t=e.options,r=t.label,y=e.label,it=t.drawWidth,l=t.start,p=t.end,a=o(l)&&o(p),et=t.seriesDashStyle,s=e.svgElem,n=[],ot=t.drawColor,rt=t.zIndex,b=t.events,ht=u[i.chart.guid].renderer;if(i.isLog&&(l=nr(l),p=nr(p)),it)n=i._linePath(l,it),c={stroke:ot,"stroke-width":it},et&&(c.dashstyle=et);else{if(!a)return;l=v(l,i.min-ft);p=st(p,i.max+ft);n=i._bandPath(l,p,t);c={fill:ot};t.borderWidth&&(c.stroke=t.borderColor,c["stroke-width"]=t.borderWidth)}if(o(rt)&&(c.zIndex=rt),s)n?s.animate({d:n},null,s.onGetPath):(s.hide(),s.onGetPath=function(){s.show()});else if(n&&n.length&&(e.svgElem=s=ht.path(n).attr(c).add(),b)){ut=function(n){s.on(n,function(t){b[n].apply(e,[t])})};for(k in b)b.hasOwnProperty(k)&&ut(k)}return r&&o(r.text)&&n&&n.length&&i.width>0&&i.height>0?(r=h({align:w&&a&&"center",x:w?!a&&4:10,verticalAlign:!w&&a&&"middle",y:w?a?16:10:a?6:-4,textAngle:w&&!a&&90},r),y||(e.label=y=ht.text(r.text,0,0).attr({align:r.textAlignINTERNAL||r.align,textAngle:r.textAngle,zIndex:rt}).css(r.style).add()),d=[n[1],n[4],f(n[6],n[1])],g=[n[2],n[5],f(n[7],n[2])],nt=br(d),tt=br(g),y.align(r,!1,{x:nt,y:tt,width:sr(d)-nt,height:sr(g)-tt}),y.show()):y&&y.hide(),e},destroy:function(){if(!this._destroyed){var n=this,t=n.axis;or(t.plotLinesAndBands,n);hr(n,this.axis);n._destroyed=!0}}};pe.prototype={destroy:function(){this._destroyed||(hr(this,this.axis),this._destroyed=!0)},_total:function(n){this.total=n;this.cum=n},render:function(n){var t=this,i=t.options.labelFormatFunction.call(t);t.label?t.label.attr({text:i,visibility:ft}):t.label=u[t.axis.chart.guid].renderer.text(i,0,0).css(t.options.style).attr({align:t.textAlignINTERNAL,textAngle:t.options.textAngle,visibility:ft}).add(n)},_offset:function(n,t){var s,i=this,h=i.axis,a=h.chart,c=u[a.guid],f=c.isInverted,v=i.isNegative,r=h.translate(i.percent?100:i.total,0,0,0,1),p=h.translate(0),e=dt(r-p),y=c.axisX[0].translate(i.x)+n,l=c.plotHeight,w={x:f?v?r:r-e:y,y:f?l-y-t:v?l-r-e:l-r,width:f?e:t,height:f?t:e},o=i.label;o&&(o.align(i.alignOptions,null,w),s=o.alignAttr,o.attr({visibility:i.options.hideInvisible===!1||ti(a,s.x,s.y)?ii?"inherit":et:ft}))}};yi={defaults:{axisDateFormat:{MILLISECOND:"HH:mm:ss.fff",SECOND:"HH:mm:ss",MINUTE:"HH:mm",HOUR:"HH",DAY:"d MMM",WEEK:"d MMM",MONTH:"MMM yyyy",YEAR:"yyyy"},fixedEnd:!1,plotStripColor:"#C0C0C0",axisTickText:ee,drawColor:"#7E7E7E",drawWidth:1,minPaddingINTERNAL:.0001,maxPaddingINTERNAL:.0001,endOffset:.01,zoomMin:null,minorPlotStripColor:"#E0E0E0",minorPlotStripWidth:1,minorTicksColor:"#A0A0A0",minorTicksHeight:12,minorTicksPlacementINTERNAL:"outside",startOfWeekINTERNAL:1,tickOnBeginning:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacementlINTERNAL:"between",tickPixelIntervalINTERNAL:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",margin:12,style:{color:"#404040",fontWeight:"normal",fontFamily:"Segoe UI, Tahoma, Verdana, sans-serif"}},axisType:"linear"},y:{fixedEnd:!0,plotStripWidth:1,tickPixelIntervalINTERNAL:80,lastTickTextVisible:!0,axisTickText:{align:"right",x:-8,y:3},drawWidth:0,endOffset:.05,startOffset:.05,tickOnBeginning:!0,tickWidth:0,title:{textAngle:270,text:null},stackTextSettings:{enabled:!1,labelFormatFunction:function(){return this.total},style:ee.style}},left:{axisTickText:{align:"right",x:-8,y:null},title:{textAngle:270}},right:{axisTickText:{align:"left",x:8,y:null},title:{textAngle:90}},bottom:{axisTickText:{align:"center",x:0,y:14},title:{textAngle:0}},top:{axisTickText:{align:"center",x:0,y:-5},title:{textAngle:0}}};fu.prototype={init:function(n,t){var e=t.isX,i=this,s=u[n.guid],h,c;i.horiz=s.isInverted?!e:e;i.isXAxis=e;i.xOrY=e?"x":"y";i.swapLocation=t.swapLocation;i.side=i.horiz?i.swapLocation?0:2:i.swapLocation?1:3;i.setOptions(t,n);var f=this.options,l=f.axisType,a="datetime"===l;i.staggerLinesINTERNAL=i.horiz&&f.axisTickText.staggerLinesINTERNAL;i.userOptions=t;i.minPixelPadding=0;i.chart=n;i.inverseOrder=f.inverseOrder;i.categoricalValues=f.categoricalValues;i.isLog="logarithmic"===l;i.isLinked=o(f.linkedToINTERNAL);i.isDatetimeAxis=a;i.tickmarkOffset=f.categoricalValues&&"between"===f.tickmarkPlacementlINTERNAL?.5:0;i.ticks={};i.minorTicks={};i.plotLinesAndBands=[];i.alternateBands={};i.len=0;i.zoomMin=i.customZoomMin=f.zoomMin;i.range=f.range;i.offset=f.offset||0;i.stacks={};i.max=null;i.min=null;c=i.options.events;s.axes.push(i);s[e?"axisX":"axisY"].push(i);i.dataSeries=[];s.isInverted&&e&&i.inverseOrder===r&&(i.inverseOrder=!0);for(h in c)c.hasOwnProperty(h)&&at(i,h,c[h]);i.isLog&&(i.val2lin=nr,i.lin2val=ni)},setOptions:function(n){this.options=h(yi.defaults,this.isXAxis?{}:yi.y,[yi.top,yi.right,yi.bottom,yi.left][this.side],h(ei[this.isXAxis?"axisX":"axisY"],n))},translate:function(n,t,i,r,u,f){var o,e=this,c=e.len,s=1,l=0,h=r?e.oldTransA:e.transA,a=r?e.oldMin:e.min,v=e.options.ordinal||e.isLog&&u;return h||(h=e.transA),i&&(s*=-1,l=c),e.inverseOrder&&(s*=-1,l-=s*c),t?(e.inverseOrder&&(n=c-n),o=n/h+a,v&&(o=e.lin2val(o))):(v&&(n=e.val2lin(n)),o=s*(n-a)*h+l+s*e.minPixelPadding+(f?h*e.pointRange/2:0)),o},_linePath:function(n,t,i){var f,e,c,l,h,r=this,o=u[r.chart.guid],a=r.left,v=r.top,y=r.translate(n,null,null,i),p=i&&o.oldChartHeight||o.chartHeight,b=i&&o.oldChartWidth||o.chartWidth,w=r.transB;return f=c=s(y+w),e=l=s(p-y-w),isNaN(y)?h=!0:r.horiz?(e=v,l=p-r.bottom,(f<a||f>a+r.width)&&(h=!0)):(f=a,c=b-r.right,(e<v||e>v+r.height)&&(h=!0)),h?null:o.renderer.crispLine([rt,f,e,g,c,l],t||0)},_bandPath:function(n,t){var i=this._linePath(t),r=this._linePath(n);return r&&i?r.push(i[4],i[5],i[1],i[2]):r=null,r},_arrange:function(){var r,n=this,h=n.max-n.min,u=0,t=0,i=0,f=n.linkedParent,s=n.transA;n.isXAxis&&(f?(t=f.minPointOffset,i=f.pointRangePadding):e(n.dataSeries,function(n){var f=n.pointRange,s=n.options.positioningMethod,e=n.closestPointRange;u=v(u,f);t=v(t,s?0:f/2);i=v(i,"on"===s?0:f);!n.noSharedTooltip&&o(e)&&(r=o(r)?st(r,e):e)}),n.minPointOffset=t,n.pointRangePadding=i,n.pointRange=u,n.closestPointRange=r);n.oldTransA=s;n.translationSlope=n.transA=s=n.len/(h+i||1);n.transB=n.horiz?n.left:n.bottom;n.minPixelPadding=s*t},_ticks:function(n){var w,a,h,s,t=this,ot=u[t.chart.guid],i=t.options,p=t.isLog,b=t.isDatetimeAxis,k=t.isXAxis,c=t.isLinked,d=t.options.tickPositionerlINTERNAL,g=i.endOffset,nt=i.startOffset,l=i.ticksRepeat,tt=i.minTickInterval,it=i.tickPixelIntervalINTERNAL,rt=t.categoricalValues;if(c){if(t.linkedParent=ot[k?"axisX":"axisY"][i.linkedToINTERNAL],h=uu.call(t.linkedParent),t.min=f(h.min,h.dataMin),t.max=f(h.max,h.dataMax),i.type!==t.linkedParent.options.axisType)return void wu("Axis and parent axis have different type",1)}else t.min=f(t.userMin,i.min,t.dataMin),t.max=f(t.userMax,i.max,t.dataMax);if(p){if(!n&&st(t.min,f(t.dataMin,t.min))<=0)return void wu("Negative values not supported for this axis type",1);t.min=fi(nr(t.min));t.max=fi(nr(t.max))}if(t.range&&(t.userMin=t.min=v(t.min,t.max-t.range),t.userMax=t.max,n&&(t.range=null)),ks.call(t),rt||t.usePercentage||c||!o(t.min)||!o(t.max)||(a=t.max-t.min||1,o(i.min)||o(t.userMin)||!nt||!(t.dataMin<0)&&t.ignoreMinPadding||(t.min-=a*nt),o(i.max)||o(t.userMax)||!g||!(t.dataMax>0)&&t.ignoreMaxPadding||(t.max+=a*g)),t.ticksRepeat=t.min===t.max||t.min===r||t.max===r?1:c&&!l&&it===t.linkedParent.options.tickPixelIntervalINTERNAL?t.linkedParent.ticksRepeat:f(l,rt?1:(t.max-t.min)*it/(t.len||1)),k&&!n&&e(t.dataSeries,function(n){n.processData(t.min!==t.oldMin||t.max!==t.oldMax)}),t._arrange(n),t._preTicks&&t._preTicks(),!l&&t.ticksRepeat<tt&&(t.ticksRepeat=tt),b||p||(w=y.pow(10,pt(y.log(t.ticksRepeat)/y.LN10)),l||(t.ticksRepeat=sf(t.ticksRepeat,null,w,i))),t.minorTicksRepeat="auto"===i.minorTicksRepeat&&t.ticksRepeat?t.ticksRepeat/5:i.minorTicksRepeat,t.tickPositions=s=i.tickPositions||d&&d.apply(t,[t.min,t.max]),s||(s=b?as(ls(t.ticksRepeat,i.units),t.min,t.max,i.startOfWeekINTERNAL,t.ordinalPositions,t.closestPointRange,!0):p?we.call(t,t.ticksRepeat,t.min,t.max):cf.call(t,t.ticksRepeat,t.min,t.max),t.tickPositions=s),!c){var ut=s[0],ft=s[s.length-1],et=t.minPointOffset||0;i.tickOnBeginning?t.min=ut:t.min-et>ut&&s.shift();i.fixedEnd?t.max=ft:t.max+et<ft&&s.pop()}},_updateTicks:function(){var n=this,s=n.xOrY,t=n.tickPositions,r=u[n.chart.guid].maxTicks,i,f,e;if(r&&r[s]&&!n.isDatetimeAxis&&!n.categoricalValues&&!n.isLinked&&n.options.matchTicks!==!1){if(f=n.tickAmount,e=t.length,n.tickAmount=i=r[s],e<i){for(;t.length<i;)t.push(fi(t[t.length-1]+n.ticksRepeat));n.transA*=(e-1)/(i-1);n.max=t[t.length-1]}o(f)&&i!==f&&(n.isDirty=!0)}},_scale:function(){var t,r,f,u,n=this,i=n.stacks;if(n.oldMin=n.min,n.oldMax=n.max,n.oldAxisLength=n.len,n._dimensions(),u=n.len!==n.oldAxisLength,e(n.dataSeries,function(n){(n.isDirtyData||n.isDirty||n.axisX.isDirty)&&(f=!0)}),(u||f||n.isLinked||n.userMin!==n.oldUserMin||n.userMax!==n.oldUserMax)&&(ps.call(n),n._ticks(),n.oldUserMin=n.userMin,n.oldUserMax=n.userMax,n.isDirty||(n.isDirty=u||n.min!==n.oldMin||n.max!==n.oldMax)),!n.isXAxis)for(t in i)if(i.hasOwnProperty(t))for(r in i[t])i[t].hasOwnProperty(r)&&(i[t][r].cum=i[t][r].total);be.call(n)},_zoom:function(n,t){return ke.call(this,n,t,!1,r,{trigger:"zoom"}),!0},_dimensions:function(){var n=this,t=u[n.chart.guid],i=n.options,r=i.offsetLeft||0,e=i.offsetRight||0;n.left=f(i.left,t.plotLeft+r);n.top=f(i.top,t.plotTop);n.width=f(i.width,t.plotWidth-r+e);n.height=f(i.height,t.plotHeight);n.bottom=t.chartHeight-n.height-n.top;n.right=t.chartWidth-n.width-n.left;n.len=v(n.horiz?n.width:n.height,0)},_offset:function(){var a,y,d,c,n=this,g=u[n.chart.guid],l=g.renderer,s=n.options,p=n.tickPositions,i=n.ticks,w=n.horiz,r=n.side,nt=0,tt=0,t=s.title,it=s.axisTickText,h=0,b=g.axisOffset,k=[-1,1,1,-1][r];if(n.hasData=a=n.hasVisibleSeries||o(n.min)&&o(n.max)&&!!p,n.showAxis=y=a||f(s.showEmpty,!0),n.axisGroup||(n.gridGroup=l.g().attr({zIndex:s.gridZIndex||1}).add(),n.axisGroup=l.g().attr({zIndex:s.zIndex||2}).add(),n.labelGroup=l.g().attr({zIndex:it.zIndex||7}).add()),a||n.isLinked)e(p,function(t){i[t]?i[t]._label():i[t]=new dr(n,t)}),e(p,function(n){0!==r&&2!==r&&{1:"left",3:"right"}[r]!==it.align||(h=v(i[n]._labelSize(),h))}),n.staggerLinesINTERNAL&&(h+=16*(n.staggerLinesINTERNAL-1));else for(c in i)i.hasOwnProperty(c)&&(i[c].destroy(),delete i[c]);t&&t.text&&(n.axisTitle||(n.axisTitle=l.text(t.text,0,0,t.htmlOutput).attr({zIndex:7,textAngle:t.textAngle||0,align:t.textAlignINTERNAL||{low:"left",middle:"center",high:"right"}[t.align]}).css(t.style).add(n.axisGroup),n.axisTitle.isNew=!0),y&&(nt=n.axisTitle.getBBox()[w?"height":"width"],tt=f(t.margin,w?5:10),d=t.offset),n.axisTitle[y?"show":"hide"]());n.offset=k*f(s.offset,b[r]);n.axisTitleMargin=f(d,h+tt+(2!==r&&h&&k*s.axisTickText[w?"y":"x"]));b[r]=v(b[r],n.axisTitleMargin+nt+k*n.offset)},_path:function(n){var t=this,i=u[t.chart.guid],e=t.swapLocation,o=t.offset,r=t.horiz,s=t.left+(e?t.width:0)+o,f=i.chartHeight-t.bottom-(e?t.height:0)+o;return this.lineTop=f,i.renderer.crispLine([rt,r?t.left:s,r?f:t.top,g,r?i.chartWidth-t.right:s,r?f:i.chartHeight-t.bottom],n)},_titlePos:function(){var n=this.horiz,f=this.left,e=this.top,i=this.len,t=this.options.title,r=n?f:e,u=this.swapLocation,o=this.offset,c=p(t.style.fontSize||12),s={low:r+(n?0:i),middle:r+i/2,high:r+(n?i:0)}[t.align],h=(n?e+this.height:f)+(n?1:-1)*(u?-1:1)*this.axisTitleMargin+(2===this.side?c:0);return{x:n?s:h+(u?this.width:0)+o+(t.x||0),y:n?h-(u?this.height:0)+o:s+(t.y||0)}},render:function(){var y,p,w,n=this,ht=n.chart,l=u[ht.guid],nt=l.renderer,f=n.options,tt=n.isLog,it=n.isLinked,s=n.tickPositions,a=n.axisTitle,b=n.stacks,t=n.ticks,i=n.minorTicks,h=n.alternateBands,rt=f.stackTextSettings,ut=f.colorStripe,ft=n.tickmarkOffset,k=f.drawWidth,ct=l.hasRendered,ot=ct&&o(n.oldMin)&&!isNaN(n.oldMin),lt=n.hasData,st=n.showAxis,d,v,g,c;if((lt||it)&&(n.minorTicksRepeat&&!n.categoricalValues&&e(ws.call(n),function(t){i[t]||(i[t]=new dr(n,t,"minor"));ot&&i[t].isNew&&i[t].render(null,!0);i[t].isActive=!0;i[t].render()}),e(s.slice(1).concat([s[0]]),function(i,r){r=r===s.length-1?0:r+1;(!it||i>=n.min&&i<=n.max)&&(t[i]||(t[i]=new dr(n,i)),ot&&t[i].isNew&&t[i].render(r,!0),t[i].isActive=!0,t[i].render(r))}),ut&&e(s,function(t,i){i%2==0&&t<n.max&&(h[t]||(h[t]=new hf(n)),p=t+ft,w=s[i+1]!==r?s[i+1]+ft:n.max,h[t].options={from:tt?ni(p):p,to:tt?ni(w):w,color:ut},h[t].render(),h[t].isActive=!0)}),n._addedPlotLB||(e((f.plotLines||[]).concat(f.plotBands||[]),function(t){ds.call(n,t)}),n._addedPlotLB=!0)),e([t,i,h],function(n){for(var t in n)n.hasOwnProperty(t)&&(n[t].isActive?n[t].isActive=!1:(n[t].destroy(),delete n[t]))}),k&&(y=n._path(k),n.axisLine?n.axisLine.animate({d:y}):n.axisLine=nt.path(y).attr({stroke:f.drawColor,"stroke-width":k,zIndex:7}).add(n.axisGroup),n.axisLine[st?"show":"hide"]()),a&&st&&(a[a.isNew?"attr":"animate"](n._titlePos()),a.isNew=!1),rt&&rt.enabled){c=n.stackTotalGroup;c||(n.stackTotalGroup=c=nt.g().attr({visibility:et,zIndex:6}).add());c.translate(l.plotLeft,l.plotTop);for(d in b)if(b.hasOwnProperty(d)){v=b[d];for(g in v)v.hasOwnProperty(g)&&v[g].render(c)}}n.isDirty=!1},_title:function(n,t){var i=this,e=i.chart,r=i.options,u=i.axisTitle;r.title=h(r.title,n);i.axisTitle=u&&u.destroy();i.isDirty=!0;f(t,!0)&&e.redraw()},redraw:function(){var n=this,t=u[n.chart.guid].tracker;t._reset&&t._reset(!0);n.render();e(n.plotLinesAndBands,function(n){n.render()});e(n.dataSeries,function(n){n.isDirty=!0})},_points:function(n,t){var i=this;i.categoricalValues=i.userOptions.categoricalValues=n;e(i.dataSeries,function(n){n.translate();n.setTooltipPoints(!0)});i.isDirty=!0;f(t,!0)&&i.chart.redraw()},destroy:function(){if(!this._destroyed){var t,i,r,n=this,u=n.stacks;wt(n);for(t in u)u.hasOwnProperty(t)&&(hr(u[t]),u[t]=null);e([n.ticks,n.minorTicks,n.alternateBands,n.plotLinesAndBands],function(n){hr(n)});for(i in n)n.hasOwnProperty(i)&&(r=n[i],(r instanceof ci||gi&&r instanceof gi)&&(n[i]=r.destroy()));n._destroyed=!0}}};ge.prototype={destroy:function(){this._destroyed||(e(this.axisMarkers,function(n){n&&n.destroy()}),this._destroyed=!0)},move:function(n,t){this.labelElement.css({top:t,left:n})},hide:function(){var n=this,i=u[n.chart.guid],t;n.isHidden||(t=i.hoverPoints,n.labelElement.hide(),t&&e(t,function(n){n.setState()}),i.hoverPoints=null,n.isHidden=!0)},getPosition:function(n,t,i){var w,y=this,h=u[t.guid],a=h.plotLeft,e=h.plotTop,b=h.plotWidth,k=h.plotHeight,o=f(this.options.distance,12),d=de.call(y,n,i),g=d[0],c=d[1],p=y.labelElement.width(),l=y.labelElement.height(),s=g+a+(h.isInverted?o:-p-o),r=c-l+e+15;return s<7&&(s=a+v(g,0)+o),s+p>a+b&&(s-=s+p-(a+b),r=c-l+e-o,w=!0),r<e+5&&(r=e+5,w&&c>=r&&c<=r+l&&(r=c+e+o)),r+l>e+k&&(r=v(e,e+k-l-o)),{x:s,y:r}},refresh:function(n,i){var y,w,tt,b,d,g,st,nt,r=this,v=r.chart,it=r.labelElement,h=r.options,rt=function(n,i){var u=this,h=[];n=di(n);var f,o,r,c="",s=n[0].dataSeries.axisX,l="f";if(s&&"datetime"===s.options.axisType&&yr(n[0].pointName)){for(f in k)if(k.hasOwnProperty(f)&&k[f]>=s.closestPointRange){l=s.options.axisDateFormat[f];break}c=t.format("{0:"+l+"}",new Date(n[0].pointName))}else o=n[0].dataSeries.tooltipSettings&&n[0].dataSeries.tooltipSettings.customHeaderText||u.options.customHeaderText,c=ri(o)?t.format(o,{point:n[0],chart:i}):o.call(null,n,i);return h+='<div class="shield-tooltip-header">'+c+"<\/div>",r=n[0].dataSeries.tooltipSettings&&n[0].dataSeries.tooltipSettings.customPointText||u.options.customPointText,"rangebar"===n[0].dataSeries.seriesType&&"<span>{point.dataSeries.collectionAlias}<\/span>: {point.y}"!=u.options.customPointText&&(r=u.options.customPointText),e(n,function(n){ss=n.dataSeries;h+='<div class="shield-tooltip-value">'+(ri(r)?t.format(r,{point:n,chart:i}):r.call(null,n,i))+"<\/div>"}),h},c=u[v.guid],ut=c.hoverPoints,o=h.axisMarkers,ft=r.chartBound;if(h.format&&(rt=ri(h.format)?function(n,i){return t.format(h.format,{point:n,chart:i})}:h.format),b=de.call(r,n,i),y=b[0],w=b[1],!ft||n.dataSeries&&n.dataSeries.noSharedTooltip?st=n.dataSeries.color:(c.hoverPoints=n,ut&&e(ut,function(n){n.setState()}),e(n,function(n){n.setState(gt)})),d=rt.call(r,n,v),tr(n)&&(n=n[0]),nt=n.dataSeries,tt=ft||!nt.isCartesian||nt.tooltipOutsidePlot||ti(v,y,w),d!==!1&&tt?(r.isHidden&&it.show(),it.html(d),g=(h.position||r.getPosition).call(r,n,v,i),r.move(s(g.x),s(g.y),y+c.plotLeft,w+c.plotTop),r.isHidden=!1):this.hide(),o&&o.enabled){var l,a,ht=/x/i.test(o.mode),ct=/y/i.test(o.mode),ot={"stroke-width":p(o.width),stroke:o.color,zIndex:p(o.zIndex)};ht&&(a=n.dataSeries.axisX,a&&(l=a._linePath(n.x,1),r.axisMarkers[0]?r.axisMarkers[0].attr({d:l,visibility:et}):r.axisMarkers[0]=c.renderer.path(l).attr(ot).add()));ct&&(a=n.dataSeries.axisY,a&&(l=a._linePath(f(n.stackY,n.y),1),r.axisMarkers[1]?r.axisMarkers[1].attr({d:l,visibility:et}):r.axisMarkers[1]=c.renderer.path(l).attr(ot).add()))}}};af.prototype={_normalize:function(n){var f,e,o,t;return n=n||i.event,n.target||(n.target=n.srcElement),t=n.touches?n.touches.item(0):n,this.chartPosition=f=lh(u[this.chart.guid].container),t.pageX===r?(e=n.x,o=n.y):(e=t.pageX-f.left,o=t.pageY-f.top),l(n,{chartX:s(e),chartY:s(o)})},_coord:function(n){var i={axisX:[],axisY:[]},t=u[this.chart.guid];return e(t.axes,function(r){var u=r.isXAxis,f=t.isInverted?!u:u;i[u?"axisX":"axisY"].push({axis:r,value:r.translate((f?n.chartX-t.plotLeft:r.top+r.len-n.chartY)-r.minPixelPadding,!0)})}),i},_index:function(n){var t=u[this.chart.guid];return t.isInverted?t.plotHeight+t.plotTop-n.chartY:n.chartX-t.plotLeft},_move:function(n){var t,i,o,r,s=this,v=s.chart,f=u[v.guid],e=f.dataSeries,l=f.tooltip,y=f.hoverPoint,a=f.hoverSeries,h=f.chartWidth,c=s._index(n);if(l&&s.options.tooltipSettings.chartBound&&(!a||!a.noSharedTooltip)){for(i=[],o=e.length,r=0;r<o;r++)e[r].visible&&e[r].options.mouseInteractions!==!1&&!e[r].noSharedTooltip&&e[r].tooltipPoints.length&&(t=e[r].tooltipPoints[c],t._dist=dt(c-t[e[r].axisX.tooltipPosName||"plotX"]),h=st(h,t._dist),i.push(t));for(o=i.length;o--;)i[o]._dist>h&&i.splice(o,1);i.length&&i[0].plotX!==s.hoverX&&(l.refresh(i,n),s.hoverX=i[0].plotX)}f.cachedHoverSeries&&f.cachedHoverSeries.tracker&&(t=f.cachedHoverSeries.tooltipPoints[c],t&&t!==y&&t._mouseOver(n))},_reset:function(n){var o=this,h=o.chart,i=u[h.guid],s=i.hoverSeries,f=i.hoverPoint,t=i.tooltip,e=t&&t.chartBound?i.hoverPoints:f;n=n&&t&&e;n&&di(e)[0].plotX===r&&(n=!1);n?t.refresh(e):(f&&f._mouseOut(),s&&s._mouseOut(),t&&(t.hide(),gs.call(t)),o.hoverX=null)},_events:function(){function s(){i&&(it(r,{cursor:"auto"}),n.cancelClick=f,n.mouseIsDown=f=!1);n.container.style.cursor="default";wt(b,vr?"touchend":"mouseup",s)}var f,h=!0,t=this,i=t.chart,n=u[i.guid],r=n.container,o;t.hideTooltipOnMouseMove=function(r){t.chartPosition&&n.hoverSeries&&n.hoverSeries.isCartesian&&!ti(i,r.pageX-t.chartPosition.left-n.plotLeft,r.pageY-t.chartPosition.top-n.plotTop)&&t._reset()};t.hideTooltipOnMouseLeave=function(r){t.chartPosition&&!ti(i,r.pageX-t.chartPosition.left-n.plotLeft,r.pageY-t.chartPosition.top-n.plotTop)&&(t._reset(),t.chartPosition=null)};r.onmousedown=function(i){i=t._normalize(i);!vr&&i.preventDefault&&i.preventDefault();n.mouseIsDown=!0;n.cancelClick=!1;n.mouseDownX=t.mouseDownX=i.chartX;t.mouseDownY=i.chartY;n.isZoomed&&(n.container.style.cursor="move");at(b,vr?"touchend":"mouseup",s)};o=function(r){if(!(r&&r.touches&&r.touches.length>1)){r=t._normalize(r);vr||(r.returnValue=!1);var u=r.chartX,e=r.chartY,o=!ti(i,u-n.plotLeft,e-n.plotTop);return(vr&&r.type===tu&&(w(r.target,"isTracker")?n.runTrackerClick||r.preventDefault():i.events.click||o||r.preventDefault()),o&&(u<n.plotLeft?u=n.plotLeft:u>n.plotLeft+n.plotWidth&&(u=n.plotLeft+n.plotWidth),e<n.plotTop?e=n.plotTop:e>n.plotTop+n.plotHeight&&(e=n.plotTop+n.plotHeight)),n.mouseIsDown&&r.type!==tu&&(f=y.sqrt(y.pow(t.mouseDownX-u,2)+y.pow(t.mouseDownY-e,2)),f>10))&&(ti(i,t.mouseDownX-n.plotLeft,t.mouseDownY-n.plotTop),n.isZoomed&&(i._viewport(t.mouseDownX-u,e-t.mouseDownY),t.mouseDownX=u,t.mouseDownY=e)),o||t._move(r),h=o,o||!n.hasCartesianSeries}};r.onmousemove=o;at(r,kf,t.hideTooltipOnMouseLeave);at(b,po,t.hideTooltipOnMouseMove);r.ontouchstart=function(n){(t.zoomX||t.zoomY)&&r.onmousedown(n);o(n)};r.ontouchmove=o;r.ontouchend=function(){f&&t._reset()};r.onclick=function(r){var f,e,u=n.hoverPoint;r=t._normalize(r);r.cancelBubble=!0;n.cancelClick||(u&&(w(r.target,"isTracker")||w(r.target.parentNode,"isTracker"))?(f=u.plotX,e=u.plotY,l(u,{pageX:t.chartPosition.left+n.plotLeft+(n.isInverted?n.plotWidth-e:f),pageY:t.chartPosition.top+n.plotTop+(n.isInverted?n.plotHeight-f:e)}),u.trigger("seriesClick",r)):(l(r,t._coord(r)),ti(i,r.chartX-n.plotLeft,r.chartY-n.plotTop)&&i.trigger(vu,r)))};at(r,"mousewheel",function(r,u){var h,f,s,o;return r=t._normalize(r),l(r,t._coord(r)),u=u>0?1:-1,f={axisX:[],axisY:[]},s=0,(e(n.axes,function(t){var c=t.isXAxis,i,e,y,a,l,o;if(n.tracker[c?"zoomX":"zoomY"]){if(y=n.isInverted?!c:c,a=t.dataMax/5,u>0?(l=t.translate((y?r.chartX-n.plotLeft:t.top+t.len-r.chartY)-t.minPixelPadding,!0),o=t.max-t.min-a,l-o/2<t.dataMin?(i=t.dataMin,e=t.dataMin+o):l+o/2>t.dataMax?(i=t.dataMax-o,e=t.dataMax):(i=l-o/2,e=l+o/2),i<t.dataMin&&(i=t.dataMin,e=t.dataMin+o)):(i=v(t.dataMin,t.min-a/2),e=st(t.dataMax,t.max+a/2),i<=t.dataMin&&e>=t.dataMax&&s++),i>e)return void f[c?"axisX":"axisY"].push({axis:t,min:i,max:e});isNaN(i)||isNaN(e)||(f[c?"axisX":"axisY"].push({axis:t,min:st(i,e),max:v(i,e)}),h=!0)}}),h)?(o={axisX:[],axisY:[]},o.axisX=f.axisX,o.axisY=f.axisY,f.axisX[0].min>=f.axisX[0].max&&(o.axisX=[],f.axisX[0].min=st(f.axisX[0].min,f.axisX[0].max),f.axisX[0].max=v(f.axisX[0].min,f.axisX[0].max)),f.axisY[0].min>=f.axisY[0].max&&(o.axisY=[],f.axisY[0].min=st(f.axisY[0].min,f.axisY[0].max),f.axisY[0].max=v(f.axisY[0].min,f.axisY[0].max)),ai(i,"zoom",f,function(){i._zoom(o)}),n.isZoomed=s==n.axes.length?!1:!0,r.stopPropagation(),r.returnValue=!1,!1):void 0})},destroy:function(){if(!this._destroyed){var t=this,r=t.chart,i=u[r.guid],n=i.container;i.trackerGroup&&(i.trackerGroup=i.trackerGroup.destroy());wt(n,kf,t.hideTooltipOnMouseLeave);wt(b,po,t.hideTooltipOnMouseMove);n.onclick=n.onmousedown=n.onmousemove=n.ontouchstart=n.ontouchend=n.ontouchmove=null;t._destroyed=!0}},init:function(n,t){var i=u[n.guid];i.trackerGroup||(i.trackerGroup=i.renderer.g().attr({zIndex:9}).add());t.enabled&&(i.tooltip=new ge(n,t));this._events()}};to.prototype={init:function(n){var t=this,i=t.options=n.options.chartLegend;if(i.enabled){var r=i.legendItemSettings.elementStyle,u=f(i.padding,8),e=i.legendItemSettings.topSpacing||0;t.baseline=p(r.fontSize)+3+e;t.elementStyle=r;t.disabledStyle=h(r,i.legendItemSettings.disabledStyle);t.topSpacing=e;t.padding=u;t.initialItemX=u;t.initialItemY=u-5;t.maxelementWidth=0;t.chart=n;t.itemHeight=0;t.lastLineHeight=0;t.render()}},destroy:function(){if(!this._destroyed){var n=this,t=n.group,i=n.box;i&&(n.box=i.destroy());t&&(n.group=t.destroy());n._destroyed=!0}},render:function(){var t,a,o,i,n=this,w=n.chart,c=u[w.guid],s=c.renderer,h=n.group,r=n.box,f=n.options,y=n.padding,v=f.borderWidth,p=f.backgroundColor;n.itemX=n.initialItemX;n.itemY=n.initialItemY;n.offsetWidth=0;n.lastItemY=0;h||(n.group=h=s.g().attr({zIndex:7}).add(),n.contentGroup=s.g().attr({zIndex:1}).add(h),n.scrollGroup=s.g().add(n.contentGroup),n.clipRect=s.clipRect(0,0,9999,c.chartHeight),n.contentGroup.clip(n.clipRect));t=[];e(c.dataSeries,function(n){var i=n.options;i.addToLegend&&(t=t.concat(n.legendItems||(i.legendType===df?n.data:n)))});ye(t,function(n,t){return(n.options&&n.options.orderIndex||0)-(t.options&&t.options.orderIndex||0)});f.inverseOrder&&t.reverse();n.allItems=t;n.display=a=!!t.length;e(t,function(t){th.call(n,t)});o=f.width||n.offsetWidth;i=n.lastItemY+n.lastLineHeight;i=ih.call(n,i);(v||p)&&(o+=y,i+=y,r?o>0&&i>0&&(r[r.isNew?"attr":"animate"](r.crisp(null,null,null,o,i)),r.isNew=!1):(n.box=r=s.rect(0,0,o,i,f.borderRadius,v||0).attr({stroke:f.borderColor,"stroke-width":v||0,fill:p||kt}).add(h).shadow(f.shadow),r.isNew=!0),r[a?"show":"hide"]());n.legendWidth=o;n.legendHeight=i;e(t,function(t){nh.call(n,t)});a&&h.align(l({width:o,height:i},f),!0,c.spacingBox)}};var ur=yo.extend({init:function(n,i){var e=this,c=e.guid=t.guid(),r=u[c]={},l=i.dataSeries;i.dataSeries=null;yo.fn.init.apply(e,arguments);e.options.dataSeries=e.initialOptions.dataSeries=l;r.cachedHoverSeries=null;var o=e.options,s=o.margin,h=tr(s)?s:[s,s,s,s];r.optionsMarginTop=f(o.chartMarginTop,h[0]);r.optionsMarginRight=f(o.chartMarginRight,h[1]);r.optionsMarginBottom=f(o.chartMarginBottom,h[2]);r.optionsMarginLeft=f(o.chartMarginLeft,h[3]);r.isResizing=0;r.axes=[];r.dataSeries=[];r.hasCartesianSeries=!1;r.axisX=[];r.axisY=[];r.applyAnimation=!oi&&f(o.applyAnimation,!0);r.pointCount=0;r.counters=new ve;ot._initRender.call(e)},_series:function(n){var u=this,f=u.options,i=n.seriesType||f.seriesType,r;return a[i]?(r=new a[i],r.init(u,n),r):void wu(t.format("Invalid series type '{0}'",i),1)},redraw:function(n){var s,r,i=this,t=u[i.guid],l=t.axes,f=t.dataSeries,h=t.tracker,a=t.chartLegend,v=t.isDirtyLegend,c=t.isDirtyBox,y=f.length,o=y,p=t.renderer,w=p.isHidden();for(kr(n,i),w&&ot._shiftRendering.call(i);o--;)if(r=f[o],r.isDirty&&r.options.stackMode){s=!0;break}if(s)for(o=y;o--;)r=f[o],r.options.stackMode&&(r.isDirty=!0);e(f,function(n){n.isDirty&&n.options.legendType===df&&(v=!0)});v&&a.options.enabled&&(a.render(),t.isDirtyLegend=!1);t.hasCartesianSeries&&(t.isResizing||(t.maxTicks=null,e(l,function(n){n._scale()})),ot._updateTicks.call(i),i._spacing(),e(l,function(n){n.isDirtyExtremes&&(n.isDirtyExtremes=!1);(n.isDirty||c||s)&&(n.redraw(),c=!0)}));c&&ot._renderBox.call(i);e(f,function(n){n.isDirty&&n.visible&&(!n.isCartesian||n.axisX)&&n.redraw()});h&&h._reset&&h._reset(!0);p.draw();w&&ot._shiftRendering.call(i,!0);e([],function(n){n.call()})},_axes:function(){var i,f,r=this,u=this.options,n=u.axisX||{},t=u.axisY||{};n=di(n);e(n,function(n,t){n.index=t;n.isX=!0});t=di(t);e(t,function(n,t){n.index=t});i=n.concat(t);e(i,function(n){f=new fu(r,n)});ot._updateTicks.call(r)},_zoom:function(n){var i,t=this,r=u[t.guid];n&&!n.resetSelection&&(e(n.axisX.concat(n.axisY),function(n){var t=n.axis;r.tracker[t.isXAxis?"zoomX":"zoomY"]&&(i=t._zoom(n.min,n.max))}),i&&t.redraw(f(t.options.applyAnimation,r.pointCount<100)))},_viewport:function(n,t){var i=this,r=u[i.guid],f=!1;e(r.axes,function(i){var s=i.isXAxis,h=r.isInverted?!s:s,u=bs.call(i,h?n:t,!0),e,o;0!==u&&(e=i.min+u,o=i.max+u,e>i.dataMin&&o<i.dataMax&&(ke.call(i,e,o,!1),f=!0))});f&&i.redraw(!1)},_size:function(){var t=this,n=u[t.guid],i=t.options,r=n.renderToClone||t.element;n.containerWidth=r.width();n.containerHeight=r.height();n.chartWidth=i.width||n.containerWidth||600;n.chartHeight=i.height||(n.containerHeight>19?n.containerHeight:400)},_wrapper:function(){var o,f,e,i=this,r=u[i.guid],s=i.options,h=i.element,c=t.strid();h.empty();h.width()||ot._shiftRendering.call(i);i._size();f=r.chartWidth;e=r.chartHeight;r.container=o=n("<div />").attr("id",c).addClass(bu+"container"+(s.className?" "+s.className:"")).css(l({position:ku,overflow:ft,width:f+d,height:e+d,textAlignINTERNAL:"left",lineHeight:"normal",zIndex:0},s.style)).appendTo(r.renderToClone||h)[0];r.renderer=s.forExport?new ui(o,f,e,!0):new eu(o,f,e);oi&&r.renderer.create(i,o,f,e)},_spacing:function(){var i,l,r=this,n=u[r.guid],h=r.options,p=h.chartAreaPaddingTop,rt=h.chartAreaPaddingRight,ut=h.chartAreaPaddingBottom,ft=h.chartAreaPaddingLeft,s=n.chartLegend,w=n.optionsMarginTop,b=n.optionsMarginLeft,k=n.optionsMarginRight,d=n.optionsMarginBottom,a=n.chartTitleOptions,y=n.chartSubtitleOptions,t=r.options.chartLegend,c=f(t.chartDistance,10),g=t.x,nt=t.y,tt=t.align,it=t.verticalAlign;ot._marginValues.call(r);i=n.axisOffset;!n.title&&!n.subtitle||o(n.optionsMarginTop)||(l=v(n.title&&!a.ignoreChartLayout&&!a.verticalAlign&&a.y||0,n.subtitle&&!y.ignoreChartLayout&&!y.verticalAlign&&y.y||0),l&&(n.plotTop=v(n.plotTop,l+15+p)));s.display&&!t.ignoreChartLayout&&("right"===tt?o(k)||(n.chartMarginRight=v(n.chartMarginRight,s.legendWidth-g+c+rt)):"left"===tt?o(b)||(n.plotLeft=v(n.plotLeft,s.legendWidth+g+c+ft)):"top"===it?o(w)||(n.plotTop=v(n.plotTop,s.legendHeight+nt+c+p)):"bottom"===it&&(o(d)||(n.chartMarginBottom=v(n.chartMarginBottom,s.legendHeight-nt+c+ut))));n.extraBottomMargin&&(n.chartMarginBottom+=n.extraBottomMargin);n.extraTopMargin&&(n.plotTop+=n.extraTopMargin);n.hasCartesianSeries&&e(n.axes,function(n){n._offset()});o(b)||(n.plotLeft+=i[3]);o(w)||(n.plotTop+=i[0]);o(d)||(n.chartMarginBottom+=i[2]);o(k)||(n.chartMarginRight+=i[1]);ot._saveSize.call(r)},_layout:function(){var n,i,t,r=this,o=u[r.guid],s=r.options,f=r.options.dataSeries;e(["isInverted","angular","enablePolarLayout"],function(r){for(n=a[s.seriesType],t=o[r]||s[r]||n&&n.prototype[r],i=f&&f.length;!t&&i--;)n=a[f[i].seriesType],n&&n.prototype[r]&&(t=!0);o[r]=t})},_render:function(){var b,r,o=this,i=u[o.guid],c=i.axes,f=i.renderer,nt=o.options,a=nt.axisTickText,v,s,d,y,g,h,k,w;if(r={text:"&#68;&#101;&#109;&#111;&#32;&#86;&#101;&#114;&#115;&#105;&#111;&#110;",isr:0},ot.setTitle.call(o),i.chartLegend=new to(o),e(c,function(n){n._scale()}),o._spacing(),e(c,function(n){if(n.radial)return o._spacing(),!1}),i.maxTicks=null,e(c,function(n){n._ticks(!0);be.call(n)}),r.style={cursor:ie,color:"#999999",fontSize:"16px"},ot._updateTicks.call(o),o._spacing(),ot._renderBox.call(o),i.hasCartesianSeries&&e(c,function(n){n.render()}),r.dest="&#104;&#116;&#116;&#112;&#58;&#47;&#47;&#119;&#119;&#119;&#46;&#115;&#104;&#105;&#101;&#108;&#100;&#117;&#105;&#46;&#99;&#111;&#109;",i.seriesGroup||(i.seriesGroup=f.g().attr({zIndex:3}).add()),e(i.dataSeries,function(n){n.translate();n.setTooltipPoints();n.render()}),a&&a.items&&e(a.items,function(n){var t=l(a.style,n.style),r=p(t.left)+i.plotLeft,u=p(t.top)+i.plotTop+12;delete t.left;delete t.top;f.text(n.html,r,u).attr({zIndex:2}).css(t).add()}),r&&!i.dsisf){for(y=function(t){return n("<div/>").html(t).text()},g=t.guid(),ii&&(h=f.createElement("filter").attr({id:g,height:"120%"}),k=(f.createElement("feGaussianBlur").attr({"in":"SourceAlpha",stdDeviation:3}).add(h),f.createElement("feComponentTransfer")),f.createElement("feFuncA").attr({type:"linear",slope:"0.2"}).add(k),k.add(h),w=f.createElement("feMerge"),f.createElement("feMergeNode").add(w),f.createElement("feMergeNode").attr({"in":"SourceGraphic"}).add(w),w.add(h),h.add(f.defs)),b=y(r.dest),!r.isr&&i.chartWidth<=400&&(r.text=y("&#68;&#101;&#109;&#111;")),r.text=y(r.text),v=[{align:"left",verticalAlign:"top",x:i.plotLeft+5,y:i.plotTop+20},{align:"right",verticalAlign:"top",x:-1*(i.chartWidth-(i.plotLeft+i.plotWidth)+5),y:i.plotTop+20},{align:"left",verticalAlign:"top",x:i.plotLeft+5,y:i.plotTop+i.plotHeight-5},{align:"right",verticalAlign:"top",x:-1*(i.chartWidth-(i.plotLeft+i.plotWidth)+5)+(r.isr?5:0),y:i.plotTop+i.plotHeight-5}],d=function(){b&&(location.href=b)},s=0;s<v.length;s++)r.isr&&3!=s||(r.isr&&i.chartWidth<=400&&(r.style.fontSize="13px"),f.text(r.text,0,0).on(vu,d).attr({align:v[s].align,zIndex:8,filter:void 0}).css(r.style).add().align(v[s]));i.dsisf=!0}i.hasRendered=!0},destroy:function(){var n,e,r,f=this,t=u[f.guid],o=t.axes,s=t.dataSeries,i=t.container,h=i&&i.parentNode;for(ai(f,"destroy"),wt(f),n=o.length;n--;)o[n]=o[n].destroy();for(n=s.length;n--;)s[n]=s[n].destroy();for(e in t)t.hasOwnProperty(e)&&(r=t[e],r&&typeof r.destroy===lu&&r.destroy());i&&(i.innerHTML="",wt(i),h&&cr(i));for(n in t)t.hasOwnProperty(n)&&delete t[n];delete u[f.guid]}}),ot={_updateTicks:function(){var n=this,t=u[n.guid];n.options.matchTicks!==!1&&e(t.axes,function(n){n._updateTicks()});t.maxTicks=null},_shiftRendering:function(n){var r=this,t=u[r.guid],f=r.element,i=t.renderToClone;t.container;n?i&&(i.remove(),delete t.renderToClone):i=t.renderToClone=f.clone().css({position:ir,top:"-9999px",display:"block"}).appendTo(b.body)},_renderBox:function(){var i,e,p=this,n=u[p.guid],t=p.options,r=n.renderer,w=n.chartWidth,b=n.chartHeight,l=n.chartBackground,k=n.plotBackground,a=n.plotBorder,d=n.plotBGImage,f=t.borderWidth||0,g=t.backgroundColor,nt=t.chartAreaBackgroundColor,tt=t.chartAreaBackgroundImage,v=t.chartAreaBorderWidth||0,o=n.plotLeft,s=n.plotTop,h=n.plotWidth,c=n.plotHeight,it=n.chartAreaBox,rt=n.clipRect,y=n.clipBox;i=f+(t.shadow?8:0);(f||g)&&(l?l.animate(l.crisp(null,null,null,w-i,b-i)):(e={fill:g||kt},f&&(e.stroke=t.borderColor,e["stroke-width"]=f),n.chartBackground=r.rect(i/2,i/2,w-i,b-i,t.borderRadius,f).attr(e).add().shadow(t.shadow)));nt&&(k?k.animate(it):n.plotBackground=r.rect(o,s,h,c,0).attr({fill:nt}).add().shadow(t.chartAreaShadow));tt&&(d?d.animate(it):n.plotBGImage=r.image(tt,o,s,h,c).add());rt?rt.animate({width:y.width,height:y.height}):n.clipRect=r.clipRect(y);v&&(a?a.animate(a.crisp(null,o,s,h,c)):n.plotBorder=r.rect(o,s,h,c,0,v).attr({stroke:t.chartAreaBorderColor,"stroke-width":v,zIndex:1}).add());n.isDirtyBox=!1},_initRender:function(){var o,n=this,t=u[n.guid],r=n.options,s=t.callback,f=n.element,h="onreadystatechange",c="complete";return(!ii&&i==i.top&&b.readyState!==c||oi&&!i.canvg)&&!oi?void b.attachEvent(h,n._onDocReady=function(){b.readyState===c&&(b.detachEvent(h,n._onDocReady),ot._initRender.call(n),n._onDocReady=null)}):(n._wrapper(),f.addClass("shield-chart"),ai(n,"init"),ot._marginValues.call(n),ot._saveSize.call(n),n._layout(),n._axes(),e(r.dataSeries||[],function(t){n._series(t)}),t.tracker=new af(n,r),n._render(),t.renderer.draw(),s&&s.apply(n,[n]),e(ns,function(t){t.apply(n,[n])}),ot._shiftRendering.call(n,!0),r.enableAutoFit!==!1&&(n._eafFunc=function(u){var e=r.width||f.width(),s=r.height||f.height(),h=u?u.target:i;e&&s&&(h===i||h===b)&&(e===t.containerWidth&&s===t.containerHeight||(clearTimeout(o),t.reflowTimeout=o=setTimeout(function(){t.container&&ot._resize.call(n,e,s,!1)},100)),t.containerWidth=e,t.containerHeight=s)},at(i,wi,n._eafFunc),at(n,"destroy",function(){wt(i,wi,n._eafFunc);n._eafFunc=null})),void n.trigger("load"))},_selected:function(){var n=[];return e(u[this.guid].dataSeries,function(t){n=n.concat(ch(t.points,function(n){return n.selected}))}),n},_marginValues:function(){var i=this,n=u[i.guid],t=i.options,r=t.chartAreaPaddingTop,e=t.chartAreaPaddingRight,o=t.chartAreaPaddingBottom,s=t.chartAreaPaddingLeft;n.plotTop=f(n.optionsMarginTop,r);n.chartMarginRight=f(n.optionsMarginRight,e);n.chartMarginBottom=f(n.optionsMarginBottom,o);n.plotLeft=f(n.optionsMarginLeft,s);n.axisOffset=[0,0,0,0]},_resize:function(n,t,i){var h,c,l,a,f=this,r=u[f.guid],v=r.title,y=r.subtitle;r.isResizing+=1;a=function(){f&&ai(f,"endResize",null,function(){r.isResizing-=1})};kr(i,f);r.oldChartHeight=r.chartHeight;r.oldChartWidth=r.chartWidth;o(n)&&(r.chartWidth=h=s(n));o(t)&&(r.chartHeight=c=s(t));it(r.container,{width:h+d,height:c+d});r.renderer.setSize(h,c,i);r.plotWidth=h-r.plotLeft-r.chartMarginRight;r.plotHeight=c-r.plotTop-r.chartMarginBottom;r.maxTicks=null;e(r.axes,function(n){n.isDirty=!0;n._scale()});e(r.dataSeries,function(n){n.isDirty=!0});r.isDirtyLegend=!0;r.isDirtyBox=!0;f._spacing();l=r.spacingBox;v&&v.align(null,null,l);y&&y.align(null,null,l);f.redraw(i);r.oldChartHeight=null;ai(f,wi);gr===!1?a():setTimeout(a,gr&&gr.duration||500)},_saveSize:function(){var o,h,r,f,t,c=this,n=u[c.guid],l=n.isInverted,a=n.chartWidth,v=n.chartHeight,i=c.options,y=i.chartAreaPaddingTop,w=i.chartAreaPaddingRight,b=i.chartAreaPaddingBottom,p=i.chartAreaPaddingLeft;n.plotLeft=o=s(n.plotLeft);n.plotTop=h=s(n.plotTop);n.plotWidth=r=s(a-o-n.chartMarginRight);n.plotHeight=f=s(v-h-n.chartMarginBottom);n.plotSizeX=l?f:r;n.plotSizeY=l?r:f;n.chartAreaBorderWidth=t=i.chartAreaBorderWidth||0;n.spacingBox={x:p,y:y,width:a-p-w,height:v-y-b};n.chartAreaBox={x:o,y:h,width:r,height:f};n.clipBox={x:t/2,y:t/2,width:n.plotSizeX-t,height:n.plotSizeY-t};e(n.axes,function(n){n._dimensions();n._arrange()})},setTitle:function(n,t){var r,f,o=this,i=u[o.guid],s=o.options;i.chartTitleOptions=r=h(s.primaryHeader,n);i.chartSubtitleOptions=f=h(s.secondaryHeader,t);e([["title",n,r],["subtitle",t,f]],function(n){var u=n[0],r=i[u],f=n[1],t=n[2];r&&f&&(i[u]=r=r.destroy());t&&t.text&&!r&&(i[u]=i.renderer.text(t.text,0,0,t.htmlOutput).attr({align:t.align,zIndex:t.zIndex||4}).css(t.style).add().align(t,!1,i.spacingBox))})}},ns=[];ur.defaults=ei;ur.themes={"default":{}};t.ui.plugin("Chart",ur),function(){function r(n){return{id:n.id,name:n.pointName,x:n.x,y:n.y}}function f(n){return{seriesType:n.seriesType,collectionAlias:n.collectionAlias,color:n.color,axisX:n.axisX?i(n.axisX):null,axisY:n.axisY?i(n.axisY):null,id:n.options.id,points:pr(n.points,function(n){return r(n)})}}function i(n){return{type:n.xOrY,values:n.categoricalValues,min:n.min,max:n.max}}function u(e){var h,s,o;if(bt(e)||tr(e)){h=bt(e)?{}:[];for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&(o=e[s],h[s]=o&&o instanceof fr?r(o):o&&(o instanceof ut||"dataSeries"===s)?f(o):o&&o instanceof fu?i(o):o&&t.is.event(o)?n.Event(o):o&&(o instanceof n.Event||"domEvent"===s)?o:"target"==s||"srcElement"==s?o:u(o));return h}return e}var e=ur.prototype.trigger;ur.prototype.trigger=function(n,t,i){var r=this,o=u(t),f=e.call(r,n,o);return typeof i!==lu||f.isDefaultPrevented()||i.call(r,t),f}}();fr=function(){};fr.prototype={init:function(n,t,i){var f,r=this,e=n.chart,o=u[e.guid],s=o.counters;return r.dataSeries=n,r.setOptions(t,i),r.pointAttr={},n.options.separateColors&&(f=e.options.seriesPalette,r.color=r.color||f[s.color++],s.wrapColor(f.length)),o.pointCount++,r},setOptions:function(n,t){var i=this,u=i.dataSeries,f=typeof n;i.config=n;"number"===f||null===n?i.y=n:"number"==typeof n[0]?(i.x=n[0],i.y=n[1]):"object"===f&&"number"!=typeof n.length?(l(i,n),i.options=n,n.dataPointText&&(u._hasPointLabels=!0),n.pointMark&&(u._hasPointMarkers=!0)):"string"==typeof n[0]&&(i.collectionAlias=n[0],i.y=n[1]);i.x===r&&(i.x=t===r?u.autoIncrement():t)},destroy:function(){if(!this._destroyed){var i,n=this,f=n.dataSeries,t=u[f.chart.guid],r=t.hoverPoints;t.pointCount--;r&&(n.setState(),or(r,n),r.length||(t.hoverPoints=null));n===t.hoverPoint&&n._mouseOut();(n.graphic||n.dataLabel)&&(wt(n),io.call(n));n.legendItem&&no.call(t.chartLegend,n);for(i in n)n.hasOwnProperty(i)&&(n[i]=null);n._destroyed=!0}},_selected:function(n,t){var i=this,r=i.dataSeries,u=r.chart;n=f(n,!i.selected);i.trigger(n?"pointSelect":"pointDeselect",{accumulate:t},function(){i._destroyed||(i.selected=n,i.setState(n?li:lt),t||e(ot._selected.call(u),function(n){n.selected&&n!==i&&(n.selected=!1,n.setState(lt),n.trigger("pointDeselect"))}))})},_mouseOver:function(n){var t=this,e=t.dataSeries,i=u[e.chart.guid],r=i.tooltip,f=i.hoverPoint;f&&f!==t&&f._mouseOut(n);t.trigger("seriesMouseOver",n);!r||r.chartBound&&!e.noSharedTooltip||r.refresh(t);t.setState(gt);i.hoverPoint=t},_mouseOut:function(n){var t=u[this.dataSeries.chart.guid],i=t.hoverPoints;i&&eh(this,i)!==-1||(this.trigger("seriesMouseOut",n),this.setState(),t.hoverPoint=null)},trigger:function(n,t,i){var r=this,u=r.dataSeries,f=u.options;"seriesClick"===n&&f.enablePointSelection&&(i=function(){r._selected(null,f.allowMultiPointSelection!==!1&&(t.ctrlKey||t.metaKey||t.shiftKey))});ai(r,n,{domEvent:t,dataSeries:u},function(){u.chart.trigger(n,{domEvent:t,point:r,dataSeries:u},i)})},setState:function(n){var t,i=this,s=i.plotX,l=i.plotY,r=i.dataSeries,v=r.options.activeSettings,f=c[r.seriesType].pointMark&&r.options.pointMark,p=f&&!f.enabled,e=f&&f.activeSettings[n],w=e&&e.enabled===!1,o=r.stateMarkerGraphic,y=r.chart,b=u[y.guid],a=i.pointAttr;n=n||lt;n===i.state||i.selected&&n!==li||v[n]&&v[n].enabled===!1||n&&(w||p&&!e.enabled)||(i.graphic?(t=f&&i.graphic.symbolName&&a[n].r,i.graphic.attr(h(a[n],t?{x:s-t,y:l-t,width:2*t,height:2*t}:{}))):(n&&e&&(t=e.drawRadius,o?o.attr({x:s-t,y:l-t}):r.stateMarkerGraphic=o=b.renderer.symbol(r.symbol,s-t,l-t,2*t,2*t).attr(a[n]).add(r.markerGroup)),o&&o[n&&ti(y,s,l)?"show":"hide"]()),i.state=n)}};ut=function(){};ut.prototype={isCartesian:!0,seriesType:"line",pointClass:fr,sorted:!0,pointAttrToOptions:{stroke:"drawColor","stroke-width":"drawWidth",fill:"innerColor",r:"drawRadius"},init:function(n,t){var o,r,i=this,f=u[n.guid];i.chart=n;i.options=t=i.setOptions(t);i.bindAxes();l(i,{collectionAlias:t.collectionAlias,state:lt,pointAttr:{},visible:t.visible!==!1,selected:t.selected===!0});oi&&(t.applyAnimation=!1);r=t.events;for(o in r)r.hasOwnProperty(o)&&at(i,o,r[o]);(r&&r.click||t.point&&t.point.events&&t.point.events.click||t.enablePointSelection)&&(f.runTrackerClick=!0);i.getColor();i.getSymbol();i.setItemSource(t.data,!1);i.isCartesian&&(f.hasCartesianSeries=!0);f.dataSeries.push(i);ye(f.dataSeries,function(n,t){return(n.options.index||0)-(t.options.index||0)});e(f.dataSeries,function(n,t){n.index=t;n.collectionAlias=n.collectionAlias||"Series "+(t+1)})},bindAxes:function(){var t,n=this,i=n.options,f=u[n.chart.guid];n.isCartesian&&e(["axisX","axisY"],function(u){e(f[u],function(f){t=f.options;(i[u]===t.index||i[u]===r&&0===t.index)&&(f.dataSeries.push(n),n[u]=f,f.isDirty=!0)})})},autoIncrement:function(){var n=this,i=n.options,t=n.xIncrement;return t=f(t,i.dataStart,0),n.dataStep=f(n.dataStep,i.dataStep,1),n.xIncrement=t+n.dataStep,t},getSegments:function(){var n,u=this,f=-1,i=[],t=u.points,r=t.length,e=u.options.drawNullValues;if(r)if(/bar/.test(u.seriesType)&&e)for(n=0;n<r;n++)i.push(t[n]);else if(e){for(n=r;n--;)null===t[n].y&&t.splice(n,1);t.length&&(i=[t])}else for(n=0;n<r;n++)null===t[n].y?(n>f+1&&i.push(t.slice(f+1,n)),f=n):n===r-1&&i.push(t.slice(f+1,n+1));u.segments=i},setOptions:function(n){var t,i=this.chart,r=i.options,u=r.seriesSettings,f=u[this.seriesType],e=n.data;return n.data=null,t=h(f,u.dataSeries,n),t.data=n.data=e,this.tooltipSettings=h(r.tooltipSettings,t.tooltipSettings,i.initialOptions.tooltipSettings),null===f.pointMark&&delete t.pointMark,t},getColor:function(){var n=this,t=n.options,i=n.chart.options.seriesPalette,r=u[n.chart.guid].counters;n.color=t.color||!t.separateColors&&i[r.color++]||"gray";r.wrapColor(i.length)},getSymbol:function(){var n=this,t=n.options.pointMark,i=n.chart,r=i.options.symbols,f=u[i.guid].counters;n.symbol=t.symbol||r[f.symbol++];/^url/.test(n.symbol)&&(t.drawRadius=0);f.wrapSymbol(r.length)},drawLegendSymbol:function(n,t){var y=this.options,h=(y.pointMark,n.options),e=h.legendItemSettings,s=h.checkMarkSettings,r=s.coordinates,i=5,c=h.symbolWidthINTERNAL,l=u[this.chart.guid].renderer,a=t.legendGroup,v=n.baseline;t.legendSymbol=l.symbol("square",c/2-i,v-4-i,2*i,2*i).add(a);s&&s.enabled&&(t.checkMark=l.symbol(s.shape,c/2-i+f(r.x,0),v-4-i+f(r.y,0),o(r.width)?r.width:2*i,o(r.height)?r.height:2*i).add(a).attr({"stroke-width":s.width}));e&&e.elementStyle&&e.elementStyle.cursor&&(t.legendSymbol.css({cursor:e.elementStyle.cursor}),t.checkMark&&t.checkMark.css({cursor:e.elementStyle.cursor}))},addPointINTERNAL:function(n,t,i,r){var e,u=this,o=u.data,s=u.graph,h=u.area,l=u.chart,a=u.xData,v=u.yData,y=s&&s.shift||0,p=u.options.data,c=u.pointClass.prototype;kr(r,l);s&&i&&(s.shift=y+1);h&&(i&&(h.shift=y+1),h.isArea=!0);t=f(t,!0);e={dataSeries:u};c.setOptions.apply(e,[n]);a.push(e.x);v.push(c.toArray?c.toArray.call(e):e.y);p.push(n);i&&(o[0]&&o[0].remove?rh.call(o[0],!1):(o.shift(),a.shift(),v.shift(),p.shift()));u.getAttribs();u.isDirty=!0;u.isDirtyData=!0;t&&l.redraw()},setItemSource:function(n,t){var i,r=this,c=r.points,p=r.options,b=r.initialColor,k=r.chart,d=u[k.guid],v=null,l=r.axisX,w=r.pointClass.prototype,y,tt;r.xIncrement=null;r.pointRange=l&&l.categoricalValues?1:p.pointRange;o(b)&&(d.counters.color=b);var e,a=[],s=[],h=n?n.length:[],g=r.pointArrayMap,nt=g&&g.length;if(h>1e4){for(i=0;null===v&&i<h;)v=n[i],i++;if(yr(v)){for(y=f(p.dataStart,0),tt=f(p.dataStep,1),i=0;i<h;i++)a[i]=y,s[i]=n[i],y+=tt;r.xIncrement=y}else if(tr(v))if(nt)for(i=0;i<h;i++)e=n[i],a[i]=e[0],s[i]=ro.call(e,1,nt+1);else for(i=0;i<h;i++)e=n[i],a[i]=e[0],s[i]=e[1]}else for(i=0;i<h;i++)e={dataSeries:r},w.setOptions.apply(e,[n[i]]),a[i]=e.x,s[i]=w.toArray?w.toArray.call(e):e.y;if(ri(s[0]))return void wu("Data cannot be a string",1);for(r.data=[],r.options.data=n,r.xData=a,r.yData=s,i=c&&c.length||0;i--;)c[i]&&c[i].destroy&&c[i].destroy();l&&(l.zoomMin=l.customZoomMin);r.isDirty=r.isDirtyData=d.isDirtyBox=!0;f(t,!0)&&k.redraw(!1)},removeSeries:function(n,t){var i=this,r=i.chart,e=u[r.guid];n=f(n,!0);i.isRemoving||(i.isRemoving=!0,i.destroy(),e.isDirtyLegend=e.isDirtyBox=!0,n&&r.redraw(t));i.isRemoving=!1},processData:function(n){var y,o,e,i,t=this,u=t.xData,s=t.yData,f=u.length,h=0,c=f,p=t.axisX,w=t.options,b=w.pointsLimit,k=t.isCartesian;if(k&&!t.isDirty&&!p.isDirty&&!t.axisY.isDirty&&!n)return!1;if(k&&t.sorted&&(!b||f>b||t.forceCrop)){var d=uu.call(p),l=d.min,a=d.max;if(u[f-1]<l||u[0]>a)u=[],s=[];else if(u[0]<l||u[f-1]>a){for(i=0;i<f;i++)if(u[i]>=l){h=v(0,i-1);break}for(;i<f;i++)if(u[i]>a){c=i+1;break}u=u.slice(h,c);s=s.slice(h,c);y=!0}}for(i=u.length-1;i>0;i--)o=u[i]-u[i-1],o>0&&(e===r||o<e)&&(e=o);t.cropped=y;t.cropStart=h;t.processedXData=u;t.processedYData=s;null===w.pointRange&&(t.pointRange=e||1);t.closestPointRange=e},generatePoints:function(){var a,u,e,n,t=this,p=t.options,o=p.data,i=t.data,s=t.processedXData,w=t.processedYData,v=t.pointClass,h=s.length,y=t.cropStart||0,f=t.hasGroupedData,c=[],l;for(i||f||(l=[],l.length=o.length,i=t.data=l),n=0;n<h;n++)u=y+n,f?c[n]=(new v).init(t,[s[n]].concat(di(w[n]))):(i[u]?e=i[u]:o[u]!==r&&(i[u]=e=(new v).init(t,o[u],s[n])),c[n]=e);if(i&&(h!==(a=i.length)||f))for(n=0;n<a;n++)n!==y||f||(n+=h),i[n]&&(io.call(i[n]),i[n].plotX=r);t.data=i;t.points=c},translate:function(){this.processedXData||this.processData();this.generatePoints();for(var k,t=this,it=t.chart,d=u[it.guid],a=t.options,g=a.stackMode,nt=t.axisX,y=nt.categoricalValues,l=t.axisY,tt=t.points,rt=tt.length,ut=!!t.modifyValue,p=l.dataSeries,e=p.length,ft="between"===a.positioningMethod,et=a.drawNullValues,ot=/bar/i.test(t.seriesType);e--;)if(p[e].visible){p[e]===t&&(k=!0);break}for(e=0;e<rt;e++){var v,c,n=tt[e],w=n.x,i=sh(n.y)&&ot&&et?0:n.y,h=n.low,b=l.stacks[(i<a.baseValue?"-":"")+t.stackKey];n.plotX=nt.translate(w,0,0,0,1,ft);g&&t.visible&&b&&b[w]&&(v=b[w],c=v.total,v.cum=h=v.cum-i,i=h+i,k&&(h=f(a.baseValue,l.min)),l.isLog&&h<=0&&(h=null),"percent"===g&&(h=c?100*h/c:0,i=c?100*i/c:0),n.percentage=c?100*n.y/c:0,n.total=n.stackTotal=c,n.stackY=i);n.yBottom=o(h)?l.translate(h,0,1,0,1):null;ut&&(i=t.modifyValue(i,n));n.plotY="number"==typeof i?s(10*l.translate(i,0,1,0,1))/10:r;n.clientX=d.isInverted?d.plotHeight-n.plotX:n.plotX;n.pointName===r&&(n.pointName=y&&y[e]!==r?y[e]:n.x)}t.getSegments()},setTooltipPoints:function(n){var c,o,s,h,i,r=this,t=[],f=r.axisX,l=f?f.tooltipLen||f.len:u[r.chart.guid].plotSizeX,a=f&&f.tooltipPosName||"plotX",y=[];if(r.options.mouseInteractions!==!1){for(n&&(r.tooltipPoints=null),e(r.segments||r.points,function(n){t=t.concat(n)}),f&&f.inverseOrder&&(t=t.reverse()),c=t.length,i=0;i<c;i++)for(h=t[i],o=t[i-1]?s+1:0,s=t[i+1]?v(0,pt((h[a]+(t[i+1]?t[i+1][a]:l))/2)):l;o>=0&&o<=s;)y[o++]=h;r.tooltipPoints=y}},_mouseOver:function(n){var t=this,i=u[t.chart.guid],r=i.hoverSeries;r&&r!==t&&r._mouseOut(n);t.setState(gt);i.cachedHoverSeries=t;i.hoverSeries=t},_mouseOut:function(n){var t=this,e=t.options,i=u[t.chart.guid],r=i.tooltip,f=i.hoverPoint;f&&f._mouseOut(n);!r||e.completeSeriesTrace||r.chartBound||r.hide();t.setState();i.hoverSeries=null},animate:function(n){var e,o,r,i=this,t=u[i.chart.guid],s=t.renderer,f=i.options.applyAnimation,a=t.clipBox,h=t.isInverted;f&&!bt(f)&&(f=c[i.seriesType].applyAnimation);r="_sharedClip"+f.duration+f.easing;n?(e=t[r],o=t[r+"m"],e||(t[r]=e=s.clipRect(l(a,{width:0})),t[r+"m"]=o=s.clipRect(-99,h?-t.plotLeft:-t.plotTop,99,h?t.chartWidth:t.chartHeight)),i.group.clip(e),i.markerGroup.clip(o),i.sharedClipKey=r):(e=t[r],e&&(e.animate({width:t.plotSizeX},f),t[r+"m"].animate({width:t.plotSizeX+99},f)),i.animate=null,i.animationTimeout=setTimeout(function(){i.afterAnimate()},f.duration))},afterAnimate:function(){var i=this,n=u[i.chart.guid],t=i.sharedClipKey,r=i.group;r&&i.options.clip!==!1&&(r.clip(n.clipRect),i.markerGroup.clip());setTimeout(function(){t&&n[t]&&(n[t]=n[t].destroy(),n[t+"m"]=n[t+"m"].destroy())},100)},drawPoints:function(){var c,s,e,a,t,n,v,p,i,h,w,y,o=this,b=o.points,k=o.chart,d=u[k.guid],nt=o.options,g=nt.pointMark,tt=o.markerGroup;if(g.enabled||o._hasPointMarkers)for(a=b.length;a--;)t=b[a],s=t.plotX,e=t.plotY,i=t.graphic,h=t.pointMark||{},w=g.enabled&&h.enabled===r||h.enabled,y=ti(k,s,e,d.isInverted),w&&e!==r&&!isNaN(e)?(c=t.pointAttr[t.selected?li:lt],n=c.r,v=f(h.symbol,o.symbol),p=0===v.indexOf("url"),i?i.attr({visibility:y?ii?"inherit":et:ft}).animate(l({x:s-n,y:e-n},i.symbolName?{width:2*n,height:2*n}:{})):y&&(n>0||p)&&(t.graphic=i=d.renderer.symbol(v,s-n,e-n,2*n,2*n).attr(c).add(tt))):i&&(t.graphic=i.destroy())},convertAttribs:function(n,t,i,r){var u,o,e=this.pointAttrToOptions,s={};n=n||{};t=t||{};i=i||{};r=r||{};for(u in e)e.hasOwnProperty(u)&&(o=e[u],s[u]=f(n[o],t[u],i[u],r[u]));return s},getAttribs:function(){var h,a,r,u,v,y,n=this,t=c[n.seriesType].pointMark?n.options.pointMark:n.options,s=t.activeSettings,i=s[gt],p=n.color,k={stroke:p,fill:p},b=n.points||[],f=[],w=n.pointAttrToOptions;for(n.options.pointMark?(i.drawRadius=i.drawRadius||t.drawRadius+2,i.drawWidth=i.drawWidth||t.drawWidth+1):i.color=i.color||new vi(i.color||p).brighten(i.brightness).get(),f[lt]=n.convertAttribs(t,k),e([gt,li],function(t){f[t]=n.convertAttribs(s[t],f[lt])}),n.pointAttr=f,a=b.length;a--;){if(r=b[a],t=r.options&&r.options.pointMark||r.options,t&&t.enabled===!1&&(t.drawRadius=0),v=n.options.separateColors,r.options)for(y in w)w.hasOwnProperty(y)&&o(t[w[y]])&&(v=!0);v?(t=t||{},u=[],s=t.activeSettings||{},h=s[gt]=s[gt]||{},n.options.pointMark||(h.color=new vi(h.color||r.color).brighten(h.brightness||i.brightness).get()),u[lt]=n.convertAttribs(l({color:r.color},t),f[lt]),u[gt]=n.convertAttribs(s[gt],f[gt],u[lt]),u[li]=n.convertAttribs(s[li],f[li],u[lt])):u=l(!0,{},f);r.pointAttr=u}},destroy:function(){if(!this._destroyed){var s,t,h,i,r,f,n=this,o=u[n.chart.guid],c=n.data||[];if(!n._destroyed){for(ai(n,"destroy"),wt(n),e(["axisX","axisY"],function(t){i=n[t];i&&(or(i.dataSeries,n),i.isDirty=!0)}),n.legendItem&&no.call(o.chartLegend,n),s=c.length;s--;)t=c[s],t&&t.destroy&&t.destroy();n.points=null;clearTimeout(n.animationTimeout);for(r in n)n.hasOwnProperty(r)&&(f=n[r],(f instanceof ci||gi&&f instanceof gi)&&(n[r]=f.destroy()));o.hoverSeries===n&&(o.hoverSeries=null);or(o.dataSeries,n);for(h in n)n.hasOwnProperty(h)&&delete n[h];n._destroyed=!0}}},drawDataLabels:function(){var s,l,c,a,i=this,v=i.options,n=v.dataPointText,y=i.points;(n.enabled||i._hasPointLabels)&&(i.dlProcessOptions&&i.dlProcessOptions(n),a=i.plotGroup("dataLabelsGroup","data-axisTickText",i.visible?et:ft,6),l=n,e(y,function(e){var w,y,p,b,v=e.dataLabel,k=!0;if(s=e.options&&e.options.dataPointText,w=l.enabled||s&&s.enabled,v&&!w)e.dataLabel=v.destroy();else if(w){if(b=n.textAngle,n=h(l,s),c=ri(n.format)?t.format(n.format,{point:e,chart:e.dataSeries.chart}):n.format.call(null,e,e.dataSeries.chart),n.style.color=f(n.color,n.style.color,i.color,"black"),v)v.attr({text:c}),k=!1;else if(o(c)){y={fill:n.backgroundColor,stroke:n.borderColor,"stroke-width":n.borderWidth,r:n.borderRadius||0,textAngle:b,padding:n.padding,zIndex:1};for(p in y)y.hasOwnProperty(p)&&y[p]===r&&delete y[p];v=e.dataLabel=u[i.chart.guid].renderer[b?"text":"label"](c,0,-999,null,null,null,n.htmlOutput).attr(y).css(n.style).add(a).shadow(n.shadow)}v&&i.alignDataLabel(e,v,n,null,k)}}))},alignDataLabel:function(n,t,i,r,e){var o,h=this.chart,c=u[h.guid],a=c.isInverted,v=f(n.plotX,-999),y=f(n.plotY,-999),p=t.getBBox();r=l({x:a?c.plotWidth-y:v,y:s(a?c.plotHeight-v:y),width:0,height:0},r);l(i,{width:p.width,height:p.height});i.textAngle?(o={align:i.align,x:r.x+i.x+r.width/2,y:r.y+i.y+r.height/2},t[e?"attr":"animate"](o)):(t.align(i,null,r),o=t.alignAttr);t.attr({visibility:i.hideInvisible===!1||ti(h,o.x,o.y)||ti(h,v,y,a)?ii?"inherit":et:ft})},getSegmentPath:function(n){var i=this,t=[];return e(n,function(r,u){if(i.getPointSpline)t.push.apply(t,i.getPointSpline(n,r,u));else{if(t.push(u?g:rt),u&&i.options.step){var f=n[u-1];t.push(r.plotX,f.plotY)}t.push(r.plotX,r.plotY)}}),t},getGraphPath:function(){var i,n=this,t=[],r=[];return e(n.segments,function(u){i=n.getSegmentPath(u);u.length>1?t=t.concat(i):r.push(u[0])}),n.singlePoints=r,n.graphPath=t,t},drawGraph:function(){var i,n=this,t=n.options,r=n.graph,s=n.group,h=t.drawColor||n.color,f=t.drawWidth,e=t.seriesDashStyle,o=n.getGraphPath();r?(nf(r),r.animate({d:o})):f&&(i={stroke:h,"stroke-width":f,zIndex:1},e&&(i.dashstyle=e),n.graph=u[n.chart.guid].renderer.path(o).attr(i).add(s).shadow(t.shadow))},invertGroups:function(){function t(){var t={width:n.axisY.len,height:n.axisX.len};e(["group","trackerGroup","markerGroup"],function(i){n[i]&&n[i].attr(t).invert()})}var n=this,i=n.chart;at(i,wi,t);at(n,"destroy",function(){wt(i,wi,t)});t();n.invertGroups=t},plotGroup:function(n,t,i,r,f){var e=this,o=e[n],s=u[e.chart.guid],h=e.axisX,c=e.axisY;return o||(e[n]=o=s.renderer.g().attr({visibility:i,zIndex:r||.1}).add(f)),o.translate(h?h.left:s.plotLeft,c?c.top:s.plotTop),o},render:function(){var i,n=this,t=u[n.chart.guid],r=n.options,c=r.applyAnimation,f=c&&!!n.animate,e=n.visible?et:ft,o=r.zIndex,s=n.hasRendered,h=t.seriesGroup;i=n.plotGroup("group","dataSeries",e,o,h);n.markerGroup=n.plotGroup("markerGroup","markers",e,o,h);f&&n.animate(!0);n.getAttribs();i.isInverted=t.isInverted;n.drawGraph&&n.drawGraph();n.drawPoints();n.drawDataLabels();n.options.mouseInteractions!==!1&&n.drawTracker();t.isInverted&&n.invertGroups();r.clip===!1||n.sharedClipKey||s||(i.clip(t.clipRect),this.trackerGroup&&this.trackerGroup.clip(t.clipRect));f?n.animate():s||n.afterAnimate();n.isDirty=n.isDirtyData=!1;n.hasRendered=!0},redraw:function(){var n=this,t=u[n.chart.guid],i=(n.isDirtyData,n.group);i&&(t.isInverted&&i.attr({width:t.plotWidth,height:t.plotHeight}),i.animate({translateX:n.axisX.left,translateY:n.axisY.top}));n.translate();n.setTooltipPoints(!0);n.render()},setState:function(n){var t=this,f=t.options,i=t.graph,r=f.activeSettings,u=f.drawWidth;if(n=n||lt,t.state!==n){if(t.state=n,r[n]&&r[n].enabled===!1)return;n&&(u=r[n].drawWidth||u+1);i&&!i.dashstyle&&i.attr({"stroke-width":u},n?0:500)}},toggle:function(n,t){var f,s,h,i=this,o=i.chart,c=u[o.guid],w=i.legendItem,a=i.group,v=i.tracker,y=i.dataLabelsGroup,p=i.markerGroup,l=i.points,b=o.options.scaleAxesForHiddenSeries,k=i.visible;if(i.visible=n=n===r?!k:n,f=n?"show":"hide",a&&a[f](),p&&p[f](),v)v[f]();else if(l)for(s=l.length;s--;)h=l[s],h.tracker&&h.tracker[f]();y&&y[f]();w&&vf.call(c.chartLegend,i,n);i.isDirty=!0;i.options.stackMode&&e(c.dataSeries,function(n){n.options.stackMode&&n.visible&&(n.isDirty=!0)});b||(c.isDirtyBox=!0);t!==!1&&o.redraw();o.trigger("seriesVisibilityChange",{dataSeries:i})},showDataSeries:function(){this.toggle(!0)},hideDataSeries:function(){this.toggle(!1)},drawTracker:function(){var r,t,n=this,f=n.options,o=f.areaInteractivity,i=[].concat(o?n.areaPath:n.graphPath),h=i.length,v=n.chart,s=u[n.chart.guid],y=s.renderer,e=v.options.tooltipSettings.showDistance,c=n.tracker,l=f.cursor,p=l&&{cursor:l},a=n.singlePoints,w=n.isCartesian&&n.plotGroup("trackerGroup",null,et,f.zIndex||1,s.trackerGroup);if(h&&!o)for(t=h+1;t--;)i[t]===rt&&i.splice(t+1,0,i[t+1]-e,i[t+2],g),(t&&i[t]===rt||t===h)&&i.splice(t,0,g,i[t-2]+e,i[t-1]);for(t=0;t<a.length;t++)r=a[t],i.push(rt,r.plotX-e,r.plotY,g,r.plotX+e,r.plotY);c?c.attr({d:i}):n.tracker=y.path(i).attr({isTracker:!0,"stroke-linejoin":"bevel",visibility:n.visible?et:ft,stroke:re,fill:o?re:kt,"stroke-width":f.drawWidth+(o?0:2*e)}).on(tu,function(t){s.hoverSeries!==n&&(n._fromTOUCHSTART=1,n._mouseOver(t))}).on(nu,function(t){if(s.hoverSeries!==n){if(1===n._fromTOUCHSTART)return void delete n._fromTOUCHSTART;n._mouseOver(t)}}).on(au,function(t){f.completeSeriesTrace||n._mouseOut(t)}).css(p).add(w)}};oe=nt(ut);a.line=oe;ts=nt(oe,{seriesType:"stepline"});a.stepline=ts;c.stepline=h(c.line,{step:"left"});c.area=h(wr,{baseValue:0,drawWidth:2,pointMark:{enabled:!1}});uf=nt(ut,{seriesType:"area",getSegmentPath:function(n){var t,i=this,r=ut.prototype.getSegmentPath.call(i,n),u=[].concat(r),f=i.options,e=r.length;if(3===e&&u.push(g,r[1],r[2]),f.stackMode&&!i.closedStacks)for(t=n.length-1;t>=0;t--)t<n.length-1&&f.step&&u.push(n[t+1].plotX,n[t].yBottom),u.push(n[t].plotX,n[t].yBottom);else i.closeSegment(u,n);return i.areaPath=i.areaPath.concat(u),r},closeSegment:function(n,t){var i=lf.call(this.axisY,this.options.baseValue);n.push(g,t[t.length-1].plotX,i,g,t[0].plotX,i)},drawGraph:function(){var n=this;n.areaPath=[];ut.prototype.drawGraph.apply(n);var t=n.areaPath,i=n.options,r=n.area;r?r.animate({d:t}):n.area=u[n.chart.guid].renderer.path(t).attr({fill:f(i.innerColor,new vi(n.color).setOpacity(i.fillOpacity||.75).get()),zIndex:0}).add(n.group)}});a.area=uf;is=nt(uf,{seriesType:"steparea"});a.steparea=is;c.steparea=h(c.area,{step:"left"});c.spline=h(wr);se=nt(ut,{seriesType:"spline",getPointSpline:function(n,t,i){var y,f,l,u,p,s=1.5,a=s+1,o=t.plotX,r=t.plotY,e=n[i-1],w=n[i+1];if(e&&w){var b,k=e.plotX,h=e.plotY,d=w.plotX,c=w.plotY;y=(s*o+k)/a;f=(s*r+h)/a;l=(s*o+d)/a;u=(s*r+c)/a;b=(u-f)*(l-o)/(l-y)+r-u;f+=b;u+=b;f>h&&f>r?(f=v(h,r),u=2*r-f):f<h&&f<r&&(f=st(h,r),u=2*r-f);u>c&&u>r?(u=v(c,r),f=2*r-u):u<c&&u<r&&(u=st(c,r),f=2*r-u);t.rightContX=l;t.rightContY=u}return i?(p=["C",e.rightContX||e.plotX,e.rightContY||e.plotY,y||o,f||r,o,r],e.rightContX=e.rightContY=null):p=[rt,o,r],p}});a.spline=se;c.splinearea=h(c.area);ff=uf.prototype;rs=nt(se,{seriesType:"splinearea",closedStacks:!0,getSegmentPath:ff.getSegmentPath,closeSegment:ff.closeSegment,drawGraph:ff.drawGraph});a.splinearea=rs;c.bar=h(wr,{borderColor:"#FFFFFF",borderWidth:0,borderRadius:0,groupPadding:.15,pointMark:null,barOffset:.1,minPointLength:0,pointsLimit:50,pointRange:null,activeSettings:{pointHoveredState:{brightness:.1,shadow:!1},pointSelectedState:{color:"#7AF4F4",shadow:!1}},dataPointText:{align:null,verticalAlign:null,y:null},baseValue:0});he=nt(ut,{seriesType:"bar",tooltipOutsidePlot:!0,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},isInverted:!1,init:function(){ut.prototype.init.apply(this,arguments);var n=this,t=u[n.chart.guid];t.hasRendered&&e(t.dataSeries,function(t){t.seriesType===n.seriesType&&(t.isDirty=!0)})},translate:function(){var c,w,n=this,tt=u[n.chart.guid],b=n.enablePolarLayout,t=n.options,vt=t.stackMode,k=t.borderWidth,s=0,l=n.axisX,it=l.inverseOrder,d={};ut.prototype.translate.apply(n);t.divideSeries===!1?s=1:e(tt.dataSeries,function(t){var i=t.options;t.seriesType===n.seriesType&&t.visible&&n.options.group===i.group&&(i.stackMode?(c=t.stackKey,d[c]===r&&(d[c]=s++),w=d[c]):i.divideSeries!==!1&&(w=s++),t.columnIndex=w)});var yt=n.points,g=dt(l.transA)*(l.ordinalSlope||t.pointRange||l.closestPointRange||1),rt=g*t.groupPadding,pt=g-2*rt,a=pt/s,nt=t.dataPointWidth,ft=o(nt)?(a-nt)/2:a*t.barOffset,et=b?ft:p(ft),ot=f(nt,a-2*et),ht=b?ot:p(ot),ct=lr(v(ht,1+2*k)),wt=(it?s-n.columnIndex:n.columnIndex)||0,lt=et+(rt+wt*a-g/2)*(it?-1:1),at=b?lt:p(lt),bt=t.baseValue,y=n.translatedThreshold=lf.call(n.axisY,bt),i=f(t.minPointLength,5);e(yt,function(t){var e,o=t.plotY,s=f(t.yBottom,y),l=t.plotX+at,r=lr(st(o,s)),u=lr(v(o,s)-r),c=n.axisY.stacks[(t.y<0?"-":"")+n.stackKey];vt&&n.visible&&c&&c[t.x]&&c[t.x]._offset(at,ct);dt(u)<i&&i&&(u=i,r=dt(r-y)>i?s-i:y-(o<=y?i:0));t.barX=l;t.dataPointWidth=ht;t.shapeType="rect";t.shapeArgs=e=tt.renderer.Element.prototype.crisp.call(0,k,l,r,ct,u);k%2&&(e.y-=1,e.height+=1);t.trackerArgs=dt(u)<3&&h(t.shapeArgs,{height:6,y:r-3})})},getSymbol:si,drawGraph:si,drawPoints:function(){var t,n=this,i=n.options,f=u[n.chart.guid].renderer;e(n.points,function(u){var o=u.plotY,e=u.graphic;o===r||isNaN(o)||null===u.y?e&&(u.graphic=e.destroy()):(t=u.shapeArgs,e?(nf(e),e.animate(h(t))):u.graphic=e=f[u.shapeType](t).attr(u.pointAttr[u.selected?li:lt]).add(n.group).shadow(i.shadow,null,i.stackMode&&!i.borderRadius))})},drawTracker:function(){var i,s,t,h,l,n=this,f=u[n.chart.guid],v=f.renderer,o=+new Date,c=n.options,a=c.cursor,y=a&&{cursor:a},p=n.isCartesian&&n.plotGroup("trackerGroup",null,et,c.zIndex||1,f.trackerGroup);e(n.points,function(u){s=u.tracker;i=u.trackerArgs||u.shapeArgs;h=u.plotY;l=!n.isCartesian||h!==r&&!isNaN(h);delete i.strokeWidth;null!==u.y&&l&&(s?s.attr(i):u.tracker=v[u.shapeType](i).attr({isTracker:o,fill:re,visibility:n.visible?et:ft}).on(tu,function(i){u._fromTOUCHSTART=1;t=i.relatedTarget||i.fromElement;f.hoverSeries!==n&&w(t,"isTracker")!==o&&n._mouseOver(i);u._mouseOver(i)}).on(nu,function(i){return 1===u._fromTOUCHSTART?void delete u._fromTOUCHSTART:(t=i.relatedTarget||i.fromElement,f.hoverSeries!==n&&w(t,"isTracker")!==o&&n._mouseOver(i),void u._mouseOver(i))}).on(au,function(i){c.completeSeriesTrace||(t=i.relatedTarget||i.toElement,w(t,"isTracker")!==o&&n._mouseOut(i))}).css(y).add(u.group||p))})},alignDataLabel:function(n,t,i,r,e){var o=this,s=u[o.chart.guid],c=s.isInverted,l=n.below||n.plotY>(o.translatedThreshold||s.plotSizeY),a=o.options.stackMode||i.inside;n.shapeArgs&&(r=h(n.shapeArgs),c&&(r={x:s.plotWidth-r.y-r.height,y:s.plotHeight-r.x-r.width,width:r.height,height:r.width}),a||(c?(r.x+=l?0:r.width,r.width=0):(r.y+=l?r.height:0,r.height=0)));i.align=f(i.align,!c||a?"center":l?"right":"left");i.verticalAlign=f(i.verticalAlign,c||a?"middle":l?"top":"bottom");ut.prototype.alignDataLabel.call(o,n,t,i,r,e)},animate:function(n){var t=this,r=t.points,i=t.options;n||(e(r,function(n){var r=n.graphic,f=n.shapeArgs,u=t.axisY,e=i.baseValue;r&&(r.attr({height:0,y:o(e)?lf.call(u,e):u.translate(uu.call(u).min,0,1,0,1)}),r.animate({height:f.height,y:f.y},i.applyAnimation))}),t.animate=null)},remove:function(){var n=this,t=u[n.chart.guid];t.hasRendered&&e(t.dataSeries,function(t){t.seriesType===n.seriesType&&(t.isDirty=!0)});ut.prototype.remove.apply(n,arguments)}});a.bar=he;c.scatter=h(wr,{drawWidth:0,activeSettings:{pointHoveredState:{drawWidth:0}},tooltipSettings:{customHeaderText:"{point.pointName}",customPointText:"x: <b>{point.x}<\/b><br/>y: <b>{point.y}<\/b>"}});ef=nt(ut,{seriesType:"scatter",sorted:!1,translate:function(){var n=this;ut.prototype.translate.apply(n);e(n.points,function(t){t.shapeType="circle";t.shapeArgs={x:t.plotX,y:t.plotY,r:n.chart.options.tooltipSettings.showDistance}})},drawTracker:function(){for(var i,n=this,f=n.options.cursor,e=f&&{cursor:f},t=n.points,u=t.length;u--;)i=t[u].graphic,i&&(i.element._i=u);n._hasTracking?n._hasTracking=!0:n.markerGroup.attr({isTracker:!0}).on(tu,function(i){n._fromTOUCHSTART=1;n._mouseOver(i);i.target._i!==r&&t[i.target._i]._mouseOver(i)}).on(nu,function(i){return 1===n._fromTOUCHSTART?void delete n._fromTOUCHSTART:(n._mouseOver(i),void(i.target._i!==r&&t[i.target._i]._mouseOver(i)))}).on(au,function(t){n.options.completeSeriesTrace||n._mouseOut(t)}).css(e)}});a.scatter=ef;c.bubble=h(c.scatter,{pointMark:{drawWidth:1,activeSettings:{pointHoveredState:{innerColor:null},pointSelectedState:{innerColor:null}}},tooltipSettings:{customHeaderText:"{point.pointName}",customPointText:"x: <b>{point.x}<\/b><br/>y: <b>{point.y}<\/b><br/>size: <b>{point.size}<\/b>"}});us=nt(ef,{seriesType:"bubble",translate:function(){var n,i,o,t,h,f=this,a=f.chart,c=u[a.guid],s=10,w=v(10,p(st(c.plotHeight,c.plotWidth)/5)),l=w-s;ef.prototype.translate.apply(f);e(f.points,function(u){u._rad=t=y.sqrt(u.size/tt);(n===r||n>t)&&(n=t);(i===r||i<t)&&(i=t)});o=i-n;n<s&&(h=n,n=i=r,e(f.points,function(u){u._rad=t=u._rad*s/h;(n===r||n>t)&&(n=t);(i===r||i<t)&&(i=t)}),o=i-n);o>=l&&e(f.points,function(t){t._rad=s+(t._rad-n)*l/o})},drawPoints:function(){var n=this;e(n.points,function(n){e([lt,gt,li],function(t){l(n.pointAttr[t],{r:n._rad,fill:new vi(n.pointAttr[t].fill).setOpacity(t==lt?.75:1).get()})})});ut.prototype.drawPoints.apply(n)}});a.bubble=us;c.pie=h(wr,{borderColor:"#FFFFFF",borderWidth:0,center:["50%","50%"],separateColors:!0,dataPointText:{distance:30,enabled:!0,format:function(n,t){return t&&t.options&&t.options.axisX&&t.options.axisX.categoricalValues&&t.options.axisX.categoricalValues[n.x]!==r?t.options.axisX.categoricalValues[n.x]:n.y}},legendType:df,pointMark:null,size:"75%",addToLegend:!1,slicedOffset:10,activeSettings:{pointHoveredState:{brightness:.1,shadow:!1}},tooltipSettings:{customHeaderText:"{point.dataSeries.collectionAlias}",customPointText:function(n,t){var i;return i=t&&t.options&&t.options.axisX&&t.options.axisX.categoricalValues&&t.options.axisX.categoricalValues[n.x]!==r?t.options.axisX.categoricalValues[n.x]:n.pointName?n.pointName:n.collectionAlias?n.collectionAlias:n.dataSeries.collectionAlias,"<span>"+i+"<\/span>: "+n.y}}});fs=nt(fr,{init:function(){fr.prototype.init.apply(this,arguments);var t,n=this;return l(n,{visible:n.visible!==!1,collectionAlias:f(n.collectionAlias,"Sector")}),o(n.selected)?n.selected=n.sliced=!!n.selected:o(n.sliced)&&(n.selected=n.sliced=!!n.sliced),t=function(){ro.call(n)},at(n,"pointSelect",t),at(n,"pointDeselect",t),n},toggle:function(n){var i,t=this,f=t.dataSeries,c=f.chart,l=u[f.chart.guid],e=t.tracker,o=t.dataLabel,s=t.connector,h=t.shadowGroup;t.visible=n=n===r?!t.visible:n;i=n?"show":"hide";t.group[i]();e&&e[i]();o&&o[i]();s&&s[i]();h&&h[i]();t.legendItem&&vf.call(l.chartLegend,t,n);!f.isDirty&&f.options.ignoreHiddenPoint&&(f.isDirty=!0,c.redraw())}});ru={seriesType:"pie",isCartesian:!1,pointClass:fs,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:function(){this.initialColor=u[this.chart.guid].counters.color},animate:function(){var n=this,t=n.points;e(t,function(t){var i=t.graphic,r=t.shapeArgs,u=-tt/2;i&&(i.attr({r:0,start:u,end:u}),i.animate({r:r.r,start:r.start,end:r.end},n.options.applyAnimation))});n.animate=null},setItemSource:function(n,t){var i=this;ut.prototype.setItemSource.call(i,n,!1);i.processData();i.generatePoints();f(t,!0)&&i.chart.redraw()},getCenter:function(){var t,n=this.options,i=u[this.chart.guid],r=i.plotWidth,f=i.plotHeight,o=n.center.concat([n.size,n.innerSize||0]),e=st(r,f);return pr(o,function(n,i){return t=/%$/.test(n),t?[r,f,e,e][i]*p(n)/100:n})},translate:function(){this.generatePoints();var n,v,p,t,w,e,o,r,i,c=0,f=this,b=-.25,l=1e3,a=f.options,k=a.slicedOffset,nt=k+a.borderWidth,it=u[f.chart.guid],d=f.points,g=2*tt,h=a.dataPointText.distance,rt=a.ignoreHiddenPoint,ut=d.length;for(f.center=n=f.getCenter(),f.getX=function(i,r){return t=y.asin((i-n[1])/(n[2]/2+h)),n[0]+(r?-1:1)*ht(t)*(n[2]/2+h)},r=0;r<ut;r++)i=d[r],c+=rt&&!i.visible?0:i.y;for(r=0;r<ut;r++)i=d[r],w=c?i.y/c:0,v=s(b*g*l)/l,rt&&!i.visible||(b+=w),p=s(b*g*l)/l,i.shapeType="arc",i.shapeArgs={x:n[0],y:n[1],r:n[2]/2,innerR:n[3]/2,start:v,end:p},t=(p+v)/2,i.slicedTranslation=pr([ht(t)*k+it.plotLeft,vt(t)*k+it.plotTop],s),e=ht(t)*n[2]/2,o=vt(t)*n[2]/2,i.tooltipPos=[n[0]+.7*e,n[1]+.7*o],i.labelPos=[n[0]+e+ht(t)*h,n[1]+o+vt(t)*h,n[0]+e+ht(t)*nt,n[1]+o+vt(t)*nt,n[0]+e,n[1]+o,h<0?"center":t<g/4?"left":"right",t],i.percentage=100*w,i.total=c;f.setTooltipPoints()},render:function(){var n=this;n.getAttribs();n.drawPoints();n.options.mouseInteractions!==!1&&n.drawTracker();n.drawDataLabels();n.options.applyAnimation&&n.animate&&n.animate();n.isDirty=!1},drawPoints:function(){var t,i,r,n,o,f=this,s=u[f.chart.guid],h=s.renderer,c=f.options.shadow;e(f.points,function(u){i=u.graphic;o=u.shapeArgs;r=u.group;n=u.shadowGroup;c&&!n&&(n=u.shadowGroup=h.g().attr({zIndex:4}).add());r||(r=u.group=h.g().attr({zIndex:5}).add());t=u.sliced?u.slicedTranslation:[s.plotLeft,s.plotTop];r.translate(t[0],t[1]);n&&n.translate(t[0],t[1]);i?i.animate(o):u.graphic=i=h.arc(o).setRadialReference(f.center).attr(l(u.pointAttr[lt],{"stroke-linejoin":"round"})).add(u.group).shadow(c,n);u.visible===!1&&u.toggle(!1)})},drawDataLabels:function(){var o,b,st,d,r,ti,ht,s,nt,ct,lt,n,l=this,fi=l.data,at=u[l.chart.guid],h=l.options.dataPointText,ii=f(h.connectorPadding,10),ri=f(h.connectorWidth,1),v=h.distance,vt=l.center,yt=vt[2]/2,ui=vt[1],ei=v>0,y=[[],[]],it=2,wt,k,bt,kt,w,gt,ni;if(h.enabled||l._hasPointLabels)for(ut.prototype.drawDataLabels.apply(l),e(fi,function(n){n.dataLabel&&y[n.labelPos[7]<tt/2?0:1].push(n)}),y[1].reverse(),lt=function(n,t){return t.y-n.y},ti=y[0][0]&&y[0][0].dataLabel&&(y[0][0].dataLabel.getBBox().height||21);it--;){var p,ot,t,i=[],pt=[],a=y[it],c=a.length;if(v>0){for(ot=ui-yt-v;ot<=ui+yt+v;ot+=ti)i.push(ot);if(p=i.length,c>p){for(ct=[].concat(a),ct.sort(lt),n=c;n--;)ct[n].rank=n;for(n=c;n--;)a[n].rank>=p&&a.splice(n,1);c=a.length}for(n=0;n<c;n++){for(o=a[n],r=o.labelPos,bt=9999,k=0;k<p;k++)wt=dt(i[k]-r[1]),wt<bt&&(bt=wt,t=k);if(t<n&&null!==i[n])t=n;else if(p<c-n+t&&null!==i[n])for(t=p-c+n;null===i[t];)t++;else for(;null===i[t];)t++;pt.push({i:t,y:i[t]});i[t]=null}pt.sort(lt)}for(n=0;n<c;n++)(o=a[n],r=o.labelPos,d=o.dataLabel,nt=o.visible===!1?ft:et,w=r[1],v>0?(kt=pt.pop(),t=kt.i,s=kt.y,(w>s&&null!==i[t+1]||w<s&&null!==i[t-1])&&(s=w)):s=w,ht=h.justify?vt[0]+(it?-1:1)*(yt+v):l.getX(0===t||t===i.length-1?w:s,it),d.attr({visibility:nt,align:r[6]})[d.moved?"animate":"attr"]({x:ht+h.x+({left:ii,right:-ii}[r[6]]||0),y:s+h.y-10}),d.moved=!0,ei&&ri)&&(b=o.connector,gt=ht+("left"===r[6]?8:-8),ni=s,st=[rt,gt,ni,g,gt+("left"===r[6]?-10:10),ni,g,r[4],r[5]],b?(b.animate({d:st}),b.attr("visibility",nt)):o.connector=b=at.renderer.path(st).attr({"stroke-width":ri,stroke:h.connectorColor||o.color||"#606060",visibility:nt,zIndex:3}).translate(at.plotLeft,at.plotTop).add())}},alignDataLabel:si,drawTracker:he.prototype.drawTracker,getSymbol:si};ru=nt(ut,ru);a.pie=ru;c.donut=h(c.pie,{innerSize:"45%"});es=nt(ru,{seriesType:"donut"});a.donut=es;os={_init:function(){var t=this;t.container=n("<div class='shield-lightbox' />");t.mask=n("<div class='shield-lightbox-mask' />").appendTo(t.container);t.imageBox=n("<div class='shield-lightbox-imagebox' />").appendTo(t.container);t.image=n("<img />").appendTo(t.imageBox);t.caption=n("<p>Right-click and save image to disk. Left-click to dismiss.<\/p>").appendTo(t.imageBox);t.window=n(i);t.document=n(b);t.body=n(b.body)},show:function(t){function r(){i.visible&&(i.container.appendTo(i.body),i.window.on(wi+i.ns,u),i.window.on("keydown"+i.ns,function(n){27===n.keyCode&&i.hide()}),i.container.on(vu+i.ns,n.proxy(i.hide,i)),setTimeout(u,1e3/60))}function u(){i.mask.css({height:i.document.innerHeight()});i.image.css({maxWidth:i.mask.width()-(i.image.outerWidth()-i.image.width())-2*i.margin,maxHeightINTERNAL:i.mask.height()-(i.image.outerHeight()-i.image.height())-2*i.margin});i.imageBox.css({left:(i.document.innerWidth()-i.imageBox.outerWidth())/2,top:(i.window.innerHeight()-i.imageBox.outerHeight())/2+i.document.scrollTop()});i.caption.css({left:(i.imageBox.width()-i.caption.outerWidth())/2+"px"})}var i=this;i.visible||(i.visible=!0,i.container||i._init(),i.image.attr("src")===t?r():i.image.on("load"+i.ns,r).attr("src",t).attr("alt","Right-click and save image to disk"))},hide:function(){var n=this;n.container.detach();n.window.off(n.ns);n.visible=!1},ns:".shield",visible:!1,container:null,mask:null,imageBox:null,image:null,caption:null,window:null,document:null,body:null,margin:40};ur.defaults.exportOptions={image:!0,print:!0,exportTooltip:"Export the chart to an image",printTooltip:"Print the chart"};l(ur.prototype,{exportToImage:function(){if(pu){var f=this,i=n(u[f.guid].container),t=i.html(),r=n("<canvas />").attr("width",i.width()).attr("height",i.height())[0];if(typeof canvg!==lu)throw"Export requires canvg: https://code.google.com/p/canvg/";t=t.replace(/(xmlns="[^\"]*")(.*?)\1/,"$1$2");t=t.replace(/<(filter)\b[^>]*>.*?<\/\1>/gim,"");t=t.replace(/\bfilter\b=(["']).*?\1/gim,"");canvg(r,t);os.show(r.toDataURL())}},print:function(){var r=this,t=n("<iframe />").css({position:"absolute",left:"-10000px",top:"-10000px"}).appendTo(b.body)[0],i=t.contentWindow.document;i.open("text/html","replace");i.write(u[r.guid].container.innerHTML);i.close();t.contentWindow.print();setTimeout(function(){b.body.removeChild(t);t=null},100)}});ns.push(function(t){var r,i=t.options.exportOptions,u=[];i!==!1&&((i.image&&pu||i.print)&&(r=n('<div class="shield-buttons" />').appendTo(t.element)),i.image&&pu&&u.push(n('<button class="shield-chart-button" type="button" title="'+i.exportTooltip+'"><div class="sui-sprite shield-export-button-img" /><\/button>').on("click.shield",n.proxy(t.exportToImage,t)).appendTo(r)),i.print&&u.push(n('<button class="shield-chart-button" type="button" title="'+i.printTooltip+'"><div class="sui-sprite shield-print-button-img" /><\/button>').on("click.shield",n.proxy(t.print,t)).appendTo(r)),n(t).bind("destroy",function(){n(u).each(function(n,t){t.off(".shield").remove()})}))});ss=ut;pi=a.bar.prototype;l(uo.prototype,{init:function(n,t,i){var f,r=this,o=r.defaults;r.chart=t;u[t.guid].angular&&(o.background={});r.options=n=h(o,n);f=n.background;f&&e([].concat(di(f)).reverse(),function(n){var t=n.backgroundColor;n=h(r.defaultBackgroundOptions,n);t&&(n.backgroundColor=t);n.color=n.backgroundColor;i.options.plotBands.unshift(n)})},defaults:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"silver",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#DDD"]]},from:Number.MIN_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}});var of=fu.prototype,ce=dr.prototype,yh={_offset:si,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},_scale:si,_points:si,_title:si},le={radialGauge:{axisTickText:{align:"center",x:0,y:null},minorPlotStripWidth:0,minorTicksRepeat:"auto",minorTicksHeight:10,minorTicksPlacementINTERNAL:"inside",minorTickWidth:1,plotBands:[],tickLength:10,tickPosition:"inside",tickWidth:2,title:{textAngle:0},zIndex:2},radialX:{plotStripWidth:1,axisTickText:{align:null,distance:15,x:0,y:null},endOffset:0,startOffset:0,plotBands:[],lastTickTextVisible:!1,tickLength:0},radialY:{gridLineInterpolationINTERNAL:"circle",axisTickText:{align:"right",x:-3,y:-2},plotBands:[],lastTickTextVisible:!1,title:{x:4,text:null,textAngle:90}}},hs={radial:!0,setOptions:function(n,t){this.options=h(yi.defaults,n,this.defaultRadialOptions,this.isXAxis?t.initialOptions.axisX:t.initialOptions.axisY)},_offset:function(){var n=this;of._offset.call(n);u[n.chart.guid].axisOffset[n.side]=0;n.center=n.pane.center=a.pie.prototype.getCenter.call(n.pane)},_path:function(n,t){var i=this,r=i.center;return t=f(t,r[2]/2-i.offset),u[i.chart.guid].renderer.symbols.arc(i.left+r[0],i.top+r[1],t,t,{start:i.startAngleRad,end:i.endAngleRad,open:!0,innerR:0})},_arrange:function(){var n=this;of._arrange.call(n);n.center&&(n.transA=n.isCircular?(n.endAngleRad-n.startAngleRad)/(n.max-n.min||1):n.center[2]/2/(n.max-n.min||1),n.isXAxis&&(n.minPixelPadding=n.transA*n.minPointOffset+(n.inverseOrder?(n.endAngleRad-n.startAngleRad)/4:0)))},_preTicks:function(){var n=this;n.autoConnect&&(n.max+=n.categoricalValues&&1||n.pointRange||n.closestPointRange)},_dimensions:function(){var n=this;of._dimensions.call(n);n.center&&(n.len=n.width=n.height=n.isCircular?n.center[2]*(n.endAngleRad-n.startAngleRad)/2:n.center[2]/2)},_position:function(n,t){var i=this;return i.isCircular||(t=i.translate(n),n=i.min),i.postTranslate(i.translate(n),f(t,i.center[2]/2)-i.offset)},postTranslate:function(n,t){var i=this,r=u[i.chart.guid],f=i.center;return n=i.startAngleRad+n,{x:r.plotLeft+f[0]+ht(n)*t,y:r.plotTop+f[1]+vt(n)*t}},_bandPath:function(n,t,i){var o,s,l,h,r=this,c=r.center,a=r.startAngleRad,y=c[2]/2,e=[f(i.outerRadius,"100%"),i.innerRadius,f(i.thickness,10)],w=/%$/,v=r.isCircular;return"polygon"===r.options.gridLineInterpolationINTERNAL?h=r._linePath(n).concat(r._linePath(t,!0)):(v||(e[0]=r.translate(n),e[1]=r.translate(t)),e=pr(e,function(n){return w.test(n)&&(n=p(n,10)*y/100),n}),"circle"!==i.shape&&v?(o=a+r.translate(n),s=a+r.translate(t)):(o=-tt/2,s=1.5*tt,l=!0),h=u[r.chart.guid].renderer.symbols.arc(r.left+c[0],r.top+c[1],e[0],e[0],{start:o,end:s,innerR:f(e[1],e[0]-e[2]),open:l})),h},_linePath:function(n,t){var o,s,r,f,i=this,c=i.center,h=u[i.chart.guid],l=i._position(n);return i.isCircular?f=["M",c[0]+h.plotLeft,c[1]+h.plotTop,"L",l.x,l.y]:"circle"===i.options.gridLineInterpolationINTERNAL?(n=i.translate(n),n&&(f=i._path(0,n))):(o=h.axisX[0],f=[],n=i.translate(n),r=o.tickPositions,o.autoConnect&&(r=r.concat([r[0]])),t&&(r=[].concat(r).reverse()),e(r,function(t,i){s=o._position(t,n);f.push(i?"L":"M",s.x,s.y)})),f},_titlePos:function(){var n=this,t=n.center,r=u[n.chart.guid],i=n.options.title;return{x:r.plotLeft+t[0]+(i.x||0),y:r.plotTop+t[1]-{high:.5,middle:.25,low:0}[i.align]*t[2]+(i.y||0)}}};a.polarline=nt(a.line,{seriesType:"polarline",enablePolarLayout:!0});c.polarline=h(c.line,c.polarline);a.polararea=nt(a.area,{seriesType:"polararea",enablePolarLayout:!0});c.polararea=h(c.area,c.polararea);a.polarbar=nt(a.bar,{seriesType:"polarbar",enablePolarLayout:!0});c.polarbar=h(c.bar,c.polarbar,{pointRange:0});a.polarspline=nt(a.spline,{seriesType:"polarspline",enablePolarLayout:!0});c.polarspline=h(c.spline,c.polarspline);a.polarsplinearea=nt(a.splinearea,{seriesType:"polarsplinearea",enablePolarLayout:!0});c.polarsplinearea=h(c.splinearea,c.polarsplinearea);a.polarscatter=nt(a.scatter,{seriesType:"polarscatter",enablePolarLayout:!0});c.polarscatter=h(c.scatter,c.polarscatter);ct(of,"init",function(n,t,i){var s,y,p,w,b,c,e=this,o=u[t.guid],v=o.angular,k=o.enablePolarLayout,a=i.isX,d=v&&a,g=t.options,nt=i.pane||0;v?(l(e,d?yh:hs),s=!a,s&&(e.defaultRadialOptions=le.radialGauge)):k&&(l(e,hs),s=a,e.defaultRadialOptions=a?le.radialX:h(yi.y,le.radialY));n.call(e,t,i);d||!v&&!k||(w=e.options,o.panes||(o.panes=[]),e.pane=o.panes[nt]=b=new uo(di(g.pane)[nt],t,e),c=b.options,o.inverted=!1,g.zoomType=null,e.startAngleRad=y=(c.startAngle-90)*tt/180,e.endAngleRad=p=(f(c.endAngle,c.startAngle+360)-90)*tt/180,e.offset=w.offset||0,e.isCircular=s,s&&i.max===r&&p-y==2*tt&&(e.autoConnect=!0))});ct(ce,"_position",function(n,t,i,r,u){var f=this.axis;return f._position?f._position(i):n.call(this,t,i,r,u)});ct(ce,"_labelPos",function(n,t,i,r,u,e,o,s,h){var l,c=this.axis,v=e.y,y=e.align,a=(c.translate(this.pos)+c.startAngleRad+tt/2)/tt*180;return c.radial?(l=c._position(this.pos,c.center[2]/2+f(e.distance,-25)),"auto"===e.textAngle?r.attr({textAngle:a}):null===v&&(v=.9*p(r.styles.lineHeight)-r.getBBox().height/2),null===y&&(y=c.isCircular?a>20&&a<160?"left":a>200&&a<340?"right":"center":"center",r.attr({align:y})),l.x+=e.x,l.y+=v):l=n.call(this,t,i,r,u,e,o,s,h),l});ct(ce,"_markPath",function(n,t,i,r,u,f,e){var o,s,h=this.axis;return h.radial?(o=h._position(this.pos,h.center[2]/2+r),s=["M",t,i,"L",o.x,o.y]):s=n.call(this,t,i,r,u,f,e),s});c.rangearea=h(c.area,{drawWidth:1,pointMark:null,baseValue:null,tooltipSettings:{customPointText:'<span style="color:{point.dataSeries.color}">{point.dataSeries.collectionAlias}<\/span>: <b>{point.low}<\/b> - <b>{point.high}<\/b><br/>'},areaInteractivity:!0,dataPointText:{verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},shadow:!1});cs=nt(fr,{setOptions:function(n,t){var i=this,u=i.dataSeries,f=u.pointArrayMap,e=0,o=0,s=f.length;if("object"==typeof n&&"number"!=typeof n.length)l(i,n),i.options=n;else if(n.length)for(n.length>s&&("string"==typeof n[0]?i.collectionAlias=n[0]:"number"==typeof n[0]&&(i.x=n[0]),e++);o<s;)i[f[o++]]=n[e++];return i.y=i[u.pointValKey],i.x===r&&u&&(i.x=t===r?u.autoIncrement():t),i},toArray:function(){return[this.low,this.high]}});a.rangearea=nt(a.area,{seriesType:"rangearea",pointArrayMap:["low","high"],pointClass:cs,pointValKey:"low",translate:function(){var n=this,t=n.axisY;a.area.prototype.translate.apply(n);e(n.points,function(n){null!==n.y&&(n.plotLow=n.plotY,n.plotHigh=t.translate(n.high,0,1,0,1))})},getSegmentPath:function(n){for(var u,o,f,r,t=this,s=[],h=n.length,c=ut.prototype.getSegmentPath,e=t.options,i=e.step;h--;)u=n[h],s.push({plotX:u.plotX,plotY:u.plotHigh});return f=c.call(t,n),i&&(i===!0&&(i="left"),e.step={left:"right",center:"center",right:"left"}[i]),r=c.call(t,s),e.step=i,o=[].concat(f,r),r[0]="L",t.areaPath=t.areaPath.concat(f,r),o},drawDataLabels:function(){var i,n,r=this,f=r.data,e=f.length,o=[],s=ut.prototype,t=r.options.dataPointText,h=u[r.chart.guid].inverted;if(t.enabled||r._hasPointLabels){for(i=e;i--;)n=f[i],n.y=n.high,n.plotY=n.plotHigh,o[i]=n.dataLabel,n.dataLabel=n.dataLabelUpper,n.below=!1,h?(t.align="left",t.x=t.xHigh):t.y=t.yHigh;for(s.drawDataLabels.apply(r,arguments),i=e;i--;)n=f[i],n.dataLabelUpper=n.dataLabel,n.dataLabel=o[i],n.y=n.low,n.plotY=n.plotLow,n.below=!0,h?(t.align="right",t.x=t.xLow):t.y=t.yLow;s.drawDataLabels.apply(r,arguments)}},alignDataLabel:a.bar.prototype.alignDataLabel,getSymbol:a.bar.prototype.getSymbol,drawPoints:si});c.rangesplinearea=h(c.rangearea);a.rangesplinearea=nt(a.rangearea,{seriesType:"rangesplinearea",getPointSpline:a.spline.prototype.getPointSpline});c.rangebar=h(c.bar,c.rangearea,{drawWidth:1,pointRange:null});a.rangebar=nt(a.rangearea,{seriesType:"rangebar",translate:function(){var n,t=this,i=t.axisY;pi.translate.apply(t);e(t.points,function(t){var r=t.shapeArgs;t.plotHigh=n=i.translate(t.high,0,1,0,1);t.plotLow=t.plotY;r.y=n;r.height=t.plotY-n;t.trackerArgs=r})},drawGraph:si,pointAttrToOptions:pi.pointAttrToOptions,drawPoints:pi.drawPoints,drawTracker:pi.drawTracker,animate:pi.animate});er=ut.prototype;ae=af.prototype;er.toXY=function(n){var t,i=this,r=u[i.chart.guid],f=n.plotX,e=n.plotY;n.rectPlotX=f;n.rectPlotY=e;n.deg=f/tt*180;t=i.axisX.postTranslate(n.plotX,i.axisY.len-e);n.plotX=n.polarPlotX=t.x-r.plotLeft;n.plotY=n.polarPlotY=t.y-r.plotTop};ct(a.area.prototype,"init",fo);ct(a.splinearea.prototype,"init",fo);ct(a.spline.prototype,"getPointSpline",function(n,t,i,r){var w,f,e,o,h,nt,it,rt,ut,c,l,a,v,k,d,g,ft,s,p=1.5,b=p+1;return u[this.chart.guid].enablePolarLayout?(f=i.plotX,e=i.plotY,o=t[r-1],h=t[r+1],this.connectEnds&&(o||(o=t[t.length-2]),h||(h=t[1])),o&&h&&(nt=o.plotX,it=o.plotY,rt=h.plotX,ut=h.plotY,c=(p*f+nt)/b,l=(p*e+it)/b,a=(p*f+rt)/b,v=(p*e+ut)/b,k=y.sqrt(y.pow(c-f,2)+y.pow(l-e,2)),d=y.sqrt(y.pow(a-f,2)+y.pow(v-e,2)),g=y.atan2(l-e,c-f),ft=y.atan2(v-e,a-f),s=tt/2+(g+ft)/2,dt(g-s)>tt/2&&(s-=tt),c=f+ht(s)*k,l=e+vt(s)*k,a=f+ht(tt+s)*d,v=e+vt(tt+s)*d,i.rightContX=a,i.rightContY=v),r?(w=["C",o.rightContX||o.plotX,o.rightContY||o.plotY,c||f,l||e,f,e],o.rightContX=o.rightContY=null):w=["M",f,e]):w=n.call(this,t,i,r),w});ct(er,"translate",function(n){var t=this,i,r;if(n.call(t),u[t.chart.guid].enablePolarLayout&&!t.preventPostTranslate)for(i=t.points,r=i.length;r--;)t.toXY(i[r])});ct(er,"getSegmentPath",function(n,t){var i=this,r=i.points;return u[i.chart.guid].enablePolarLayout&&i.options.connectEnds!==!1&&t[t.length-1]===r[r.length-1]&&null!==r[0].y&&(i.connectEnds=!0,t=[].concat(t,[r[0]])),n.call(i,t)});ct(er,"animate",eo);ct(pi,"animate",eo);ct(er,"setTooltipPoints",function(n,t){var i=this;return u[i.chart.guid].enablePolarLayout&&l(i.axisX,{tooltipLen:360,tooltipPosName:"deg"}),n.call(i,t)});ct(pi,"translate",function(n){var r,e,t,o,i=this,s=i.axisX,h=i.axisY.len,c=s.center,l=s.startAngleRad,a=u[i.chart.guid].renderer;if(i.preventPostTranslate=!0,n.call(i),s.radial)for(e=i.points,o=e.length;o--;)t=e[o],r=t.barX+l,t.shapeType="path",t.shapeArgs={d:a.symbols.arc(c[0],c[1],h-t.plotY,null,{start:r,end:r+t.dataPointWidth,innerR:h-f(t.yBottom,h)})},i.toXY(t)});ct(pi,"alignDataLabel",function(n,t,i,r,f,e){var s=this,h,c,o;u[s.chart.guid].enablePolarLayout?(o=t.rectPlotX/tt*180,null===r.align&&(h=o>20&&o<160?"left":o>200&&o<340?"right":"center",r.align=h),null===r.verticalAlign&&(c=o<45||o>315?"bottom":o>135&&o<225?"top":"middle",r.verticalAlign=c),er.alignDataLabel.call(s,t,i,r,f,e)):n.call(s,t,i,r,f,e)});ct(ae,"_index",function(n,t){var r,f,e,o,h=this,i=u[h.chart.guid];return i.enablePolarLayout?(f=i.axisX[0].center,e=t.chartX-f[0]-i.plotLeft,o=t.chartY-f[1]-i.plotTop,r=180-s(y.atan2(e,o)/tt*180)):r=n.call(h,t),r});ct(ae,"_coord",function(n,t){var i=u[this.chart.guid],r={axisX:[],axisY:[]};return i.enablePolarLayout?e(i.axes,function(n){var u=n.isXAxis,f=n.center,e=t.chartX-f[0]-i.plotLeft,o=t.chartY-f[1]-i.plotTop;r[u?"axisX":"axisY"].push({axis:n,value:n.translate(u?tt-y.atan2(e,o):y.sqrt(y.pow(e,2)+y.pow(o,2)),!0)})}):r=n.call(this,t),r})}(jQuery,shield,this),function(n){n.ui.Chart.themes.bootstrap={seriesPalette:["#428BCA","#F0AD4E","#5CB85C","#D9534F","#5BC0DE","#474949","#84B3DC","#DDC01A","#878989","#DFF0D8"],primaryHeader:{style:{color:"#333333"}},secondaryHeader:{style:{color:"#333333"}},backgroundColor:"",borderWidth:0,chartAreaBackgroundColor:"",chartAreaShadow:!1,chartAreaBorderWidth:0,seriesSettings:{scatter:{activeSettings:{pointHoveredState:{drawWidth:4}},pointMark:{enabled:!0,drawWidth:2,drawRadius:2.5,drawColor:null,innerColor:null,activeSettings:{pointHoveredState:{innerColor:"#FFFFFF"}}}},area:{drawWidth:2,pointMark:{enabled:!1,drawWidth:2,drawRadius:2.5,drawColor:null,innerColor:"#FFFFFF",activeSettings:{pointHoveredState:{innerColor:null}}}},splinearea:{drawWidth:2,pointMark:{enabled:!1,drawWidth:2,drawRadius:2.5,drawColor:null,innerColor:"#FFFFFF",activeSettings:{pointHoveredState:{innerColor:null}}}},line:{drawWidth:3,shadow:!1,mouseInteractions:!0,pointMark:{enabled:!0,drawWidth:2,drawRadius:2.5,drawColor:null,innerColor:"#FFFFFF",activeSettings:{pointHoveredState:{innerColor:null}}}},spline:{drawWidth:3,shadow:!1,activeSettings:{pointHoveredState:{drawWidth:4}},pointMark:{enabled:!0,drawWidth:2,drawRadius:2.5,drawColor:null,innerColor:"#FFFFFF",activeSettings:{pointHoveredState:{innerColor:null}}}},pie:{dataPointText:{style:{color:"#333333"}}},donut:{dataPointText:{style:{color:"#333333"}}}},axisX:{drawWidth:1,drawColor:"#888888",ticksColor:"#888888",axisTickText:{style:{color:"#333333"},y:17},title:{style:{color:"#333333"}}},axisY:{drawColor:"#888888",ticksColor:"#888888",plotStripColor:"#888888",axisTickText:{style:{color:"#333333"}},title:{style:{color:"#333333"}}},chartLegend:{legendItemSettings:{elementStyle:{color:"#333333"},mouseOverStyle:{color:"#000"},disabledStyle:{color:"#aaaaaa"}}}}}(shield),function(n){n.ui.Chart.themes.dark={seriesPalette:["#1E97E3","#FF8000","#00FF9C","#FF2A00","#FFC500","#C9C9C9","#FC2150","#0077C6","#99c900","#cc6e38"],primaryHeader:{style:{color:"#FFFFFF"}},secondaryHeader:{style:{color:"#F2F2F2"}},backgroundColor:"#2D2D2D",borderWidth:0,chartAreaBackgroundColor:"#2D2D2D",chartAreaShadow:!1,chartAreaBorderWidth:0,seriesSettings:{scatter:{activeSettings:{pointHoveredState:{drawWidth:4}},pointMark:{enabled:!0,drawWidth:2,drawRadius:2.5,drawColor:null,innerColor:"#2D2D2D",activeSettings:{pointHoveredState:{innerColor:null}}}},area:{drawWidth:2,pointMark:{enabled:!1,drawWidth:2,drawRadius:2.5,drawColor:null,innerColor:"#2D2D2D",activeSettings:{pointHoveredState:{enabled:!1,drawRadius:4}}}},splinearea:{drawWidth:2,pointMark:{enabled:!1,drawWidth:2,drawRadius:2.5,drawColor:null,innerColor:"#2D2D2D",activeSettings:{pointHoveredState:{innerColor:null}}}},line:{drawWidth:3,shadow:!1,mouseInteractions:!0,pointMark:{enabled:!0,drawWidth:2,drawRadius:2.5,drawColor:null,innerColor:"#2D2D2D",activeSettings:{pointHoveredState:{innerColor:null}}}},spline:{drawWidth:3,shadow:!1,activeSettings:{pointHoveredState:{drawWidth:4}},pointMark:{enabled:!0,drawWidth:2,drawRadius:2.5,drawColor:null,innerColor:"#2D2D2D",activeSettings:{pointHoveredState:{innerColor:null}}}},pie:{dataPointText:{style:{color:"#7E7E7E"}}},donut:{dataPointText:{style:{color:"#7E7E7E"}}}},axisX:{drawColor:"#7E7E7E",ticksColor:"#7E7E7E",axisTickText:{style:{color:"#7E7E7E"},y:17},title:{style:{color:"#7E7E7E"}}},axisY:{drawColor:"#7E7E7E",ticksColor:"#7E7E7E",plotStripColor:"#7E7E7E",plotStripDashStyle:"LongDash",axisTickText:{style:{color:"#7E7E7E"}},title:{style:{color:"#7E7E7E"}}},chartLegend:{legendItemSettings:{elementStyle:{color:"#A5A5A5"},mouseOverStyle:{color:"#FFFFFF"},disabledStyle:{color:"#7E7E7E"}}}}}(shield);!function(n,t){var l=t.ui.Widget,yi=t.Constants,b=t.Class,h=document,k=yi.SVG_NS,f=!!h.createElementNS&&!!h.createElementNS(k,"svg").createSVGRect,d=n.map,r=t.to.int,a=t.error,g="CODABAR",nt="CODE-11",tt="CODE-39",it="CODE-93",rt="CODE-128",ut="CODE-128-A",ft="CODE-128-B",et="CODE-128-C",ot="CODE-25-STANDARD",st="CODE-25-INTERLEAVED",ht="EAN-8",ct="EAN-13",lt="UPC-A",at="UPC-E",vt="MSI-10",yt="MSI-10-10",pt="MSI-11",wt="MSI-11-10",i={types:[],addType:function(n){this.types[n.prototype.type]=n},byType:function(n){return this.types[n]?new this.types[n]:null}},u=b.extend({type:null,validateRegExp:null,validate:function(n){return!this.validateRegExp||new RegExp(this.validateRegExp).test(n)},encode:null,checksum:null}),pi=u.extend({type:nt,validateRegExp:"^[\\d\\-]+$",encode:function(n,t){t&&(n+=this.checksum(n));n="*"+n+"*";for(var r="",u={0:"101011",1:"1101011",2:"1001011",3:"1100101",4:"1011011",5:"1101101",6:"1001101",7:"1010011",8:"1101001",9:"110101","-":"101101","*":"1011001"},i=0;i<n.length;i++)r.length>0&&(r+="0"),r+=u[n.charAt(i)];return[r]},checksum:function(n){var t=this._checksum(n,10,11);return n.length>10&&(t+=this._checksum(n+t,9,11)+""),t},_checksum:function(n,t,i){for(var e=0,f=1,u=n.length-1;u>=0;u--)e+=f*("-"==n.charAt(u)?10:r(n.charAt(u))),f=f>=t?1:f+1;return e%i+""}}),e,bt,c,kt,dt,gt,ni,o,ti,ii,ri,ui,fi,s,ei,oi,si,v,hi,ai,vi,w;i.addType(pi);e=u.extend({type:ct,validateRegExp:"^[\\d]{12}$",encodingTable:{0:{lo:"0001101",le:"0100111",r:"1110010"},1:{lo:"0011001",le:"0110011",r:"1100110"},2:{lo:"0010011",le:"0011011",r:"1101100"},3:{lo:"0111101",le:"0100001",r:"1000010"},4:{lo:"0100011",le:"0011101",r:"1011100"},5:{lo:"0110001",le:"0111001",r:"1001110"},6:{lo:"0101111",le:"0000101",r:"1010000"},7:{lo:"0111011",le:"0010001",r:"1000100"},8:{lo:"0110111",le:"0001001",r:"1001000"},9:{lo:"0001011",le:"0010111",r:"1110100"}},parityTable:{0:["lo","lo","lo","lo","lo","lo"],1:["lo","lo","le","lo","le","le"],2:["lo","lo","le","le","lo","le"],3:["lo","lo","le","le","le","lo"],4:["lo","le","lo","lo","le","le"],5:["lo","le","le","lo","lo","le"],6:["lo","le","le","le","lo","lo"],7:["lo","le","lo","le","lo","le"],8:["lo","le","lo","le","le","lo"],9:["lo","le","le","lo","le","lo"]},encode:function(n,t){t&&(n+=this.checksum(n));var r,h=n.substring(0,1),e=n.substring(1,7),o=n.substring(7),u="",f=[],i=0,s=this.encodingTable,c=this.parityTable;for(u+="101",f.push(0,1,2),r=0;r<e.length;r++)u+=s[e.charAt(r)][c[h][r]];for(u+="01010",i=u.length,f.push(i-5,i-4,i-3,i-2,i-1),r=0;r<o.length;r++)u+=s[o.charAt(r)].r;return u+="101",i=u.length,f.push(i-3,i-2,i-1),[u,f]},checksum:function(n){for(var i=0,u=1,t=n.length-1;t>=0;t--)i+=r(n.charAt(t))*(u++%2?3:1);return 10-i%10+""}});i.addType(e);bt=e.extend({type:ht,validateRegExp:"^[\\d]{7}$",encode:function(n,t){t&&(n+=this.checksum(n));var r,e=n.substring(0,4),o=n.substring(4),u="",f=[],i=0,s=this.encodingTable;for(this.parityTable,u+="101",f.push(0,1,2),r=0;r<e.length;r++)u+=s[e.charAt(r)].lo;for(u+="01010",i=u.length,f.push(i-5,i-4,i-3,i-2,i-1),r=0;r<o.length;r++)u+=s[o.charAt(r)].r;return u+="101",i=u.length,f.push(i-3,i-2,i-1),[u,f]}});i.addType(bt);c=e.extend({type:lt,validateRegExp:"^\\d{11}$",encode:function(n,t){var r=e.prototype.encode.call(this,"0"+n,t),i=r[0].length;return r[1].push(3,4,5,6,7,8,9,i-4,i-5,i-6,i-7,i-8,i-9,i-10),r},checksum:function(n){return 11==n.length&&(n="0"+n),e.prototype.checksum.call(this,n)}});i.addType(c);kt=c.extend({type:at,validateRegExp:"^[0|1]\\d{6}$",_upce2upca:function(n){var t=n.substring(n.length-1);return"0"==t||"1"==t||"2"==t?n.substring(0,2)+n.charAt(5)+"0000"+n.substring(2,5):"3"==t?n.substring(0,3)+"00000"+n.substring(4,6):"4"==t?n.substring(0,4)+"00000"+n.charAt(4):n.substring(0,5)+"0000"+t},encode:function(n){for(var f=this.checksum(n),i="",e=n.charAt(0),u=n.substring(1),o=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]][r(f)][r(e)],t=0;t<u.length;t++)i+=this.encodingTable[u.charAt(t)]["O"==o.charAt(t)?"lo":"le"];return["101"+i+"010101",[0,1,2,45,46,47,48,49,50]]},checksum:function(n){var t=n.charAt(0),i=n.substring(1);return c.prototype.checksum.call(this,t+this._upce2upca(i))}});i.addType(kt);dt=u.extend({type:tt,validateRegExp:"^[0-9A-Z\\-\\. \\$\\/\\+\\%\\*]+$",encode:function(n,t){t&&(n+=this.checksum(n));n="*"+n+"*";for(var r="",u={0:"101001101101",1:"110100101011",2:"101100101011",3:"110110010101",4:"101001101011",5:"110100110101",6:"101100110101",7:"101001011011",8:"110100101101",9:"101100101101",A:"110101001011",B:"101101001011",C:"110110100101",D:"101011001011",E:"110101100101",F:"101101100101",G:"101010011011",H:"110101001101",I:"101101001101",J:"101011001101",K:"110101010011",L:"101101010011",M:"110110101001",N:"101011010011",O:"110101101001",P:"101101101001",Q:"101010110011",R:"110101011001",S:"101101011001",T:"101011011001",U:"110010101011",V:"100110101011",W:"110011010101",X:"100101101011",Y:"110010110101",Z:"100110110101","-":"100101011011",".":"110010101101"," ":"100110101101",$:"100100100101","/":"100100101001","+":"100101001001","%":"101001001001","*":"100101101101"},i=0;i<n.length;i++)i>0&&(r+="0"),r+=u[n.charAt(i)];return[r]},checksum:function(n){for(var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%*",r=0,t=0;t<n.length;t++)r+=i.indexOf(n.charAt(t));return i.charAt(r%43)}});i.addType(dt);gt=u.extend({type:it,validateRegExp:"^[0-9A-Z\\-\\. \\$\\/\\+\\%\\*]+$",encode:function(n,t){t&&(n+=this.checksum(n));n="*"+n+"*";for(var r="",u={0:"100010100",1:"101001000",2:"101000100",3:"101000010",4:"100101000",5:"100100100",6:"100100010",7:"101010000",8:"100010010",9:"100001010",A:"110101000",B:"110100100",C:"110100010",D:"110010100",E:"110010010",F:"110001010",G:"101101000",H:"101100100",I:"101100010",J:"100110100",K:"100011010",L:"101011000",M:"101001100",N:"101000110",O:"100101100",P:"100010110",Q:"110110100",R:"110110010",S:"110101100",T:"110100110",U:"110010110",V:"110011010",W:"101101100",X:"101100110",Y:"100110110",Z:"100111010","-":"100101110",".":"111010100"," ":"111010010",$:"111001010","/":"101101110","+":"101110110","%":"110101110","@":"100100110","#":"111011010","&":"111010110","~":"100110010","*":"101011110"},i=0;i<n.length;i++)r+=u[n.charAt(i)];return r+="1",[r]},checksum:function(n){var t=n.length;return n+=this._checksum(n,20,47),n+=this._checksum(n,15,47),n.substring(t,t+2)},_checksum:function(n,t,i){for(var f,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%@#&~*",o=0,u=1,r=n.length-1;r>=0;r--)f=e.indexOf(n.charAt(r)),o+=f*u++,u>t&&(u=1);return e.charAt(o%i)}});i.addType(gt);ni=u.extend({type:"POSTNET",validate:function(n){return/^\d+$/.test(n)&&(5==n.length||9==n.length||11==n.length)},encode:function(n,t){t&&(n+=this.checksum(n));for(var r="",u=["11000","00011","00101","00110","01001","01010","01100","10001","10010","10100"],i=0;i<n.length;i++)r+=u[n.charAt(i)];return["1"+r+"1"]},checksum:function(n){for(var i=0,t=0;t<n.length;t++)i+=r(n.charAt(t));return 10-i%10+""}});i.addType(ni);o=u.extend({validateRegExp:"^\\d+$",encode:function(n,t){t&&(n+=this.checksum(n));for(var r="",u=["100100100100","100100100110","100100110100","100100110110","100110100100","100110100110","100110110100","100110110110","110100100100","110100100110"],i=0;i<n.length;i++)r+=u[n.charAt(i)];return["110"+r+"1001"]},_mod10Checksum:function(n){for(var u=0,f=0,t,i=n.length-1;i>=0;i--)t=r(n.charAt(i))*(f%2?1:2),t>9?(t+="",u+=r(t.charAt(0))+r(t.charAt(1))):u+=t,f++;return 9*u%10+""},_mod11Checksum:function(n){for(var u=0,i=2,t=n.length-1;t>=0;t--)u+=r(n.charAt(t))*i,i=i>=7?2:i+1;return 11-u%11+""}});ti=o.extend({type:vt,checksum:function(n){return this._mod10Checksum(n)}});i.addType(ti);ii=o.extend({type:yt,checksum:function(n){var t=this._mod10Checksum(n);return t+this._mod10Checksum(n+t)}});i.addType(ii);ri=o.extend({type:pt,checksum:function(n){return this._mod11Checksum(n)}});i.addType(ri);ui=o.extend({type:wt,checksum:function(n){var t=this._mod11Checksum(n);return t+this._mod10Checksum(n+t)}});i.addType(ui);fi=u.extend({type:g,validateRegExp:"^[A|B|C|D][\\d\\-\\$\\:\\/\\.\\+]+[A|B|C|D]$",encode:function(n){for(var i="",r={0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"101100110011",A:"1011001001",B:"1010010011",C:"1001001011",D:"1010011001"},t=0;t<n.length;t++)t>0&&(i+="0"),i+=r[n.charAt(t)];return[i]},checksum:function(){return""}});i.addType(fi);s=u.extend({type:rt,encodingTable:[{A:" ",B:" ",C:"00",E:"11011001100"},{A:"!",B:"!",C:"01",E:"11001101100"},{A:'"',B:'"',C:"02",E:"11001100110"},{A:"#",B:"#",C:"03",E:"10010011000"},{A:"$",B:"$",C:"04",E:"10010001100"},{A:"%",B:"%",C:"05",E:"10001001100"},{A:"&",B:"&",C:"06",E:"10011001000"},{A:"'",B:"'",C:"07",E:"10011000100"},{A:"(",B:"(",C:"08",E:"10001100100"},{A:")",B:")",C:"09",E:"11001001000"},{A:"*",B:"*",C:"10",E:"11001000100"},{A:"+",B:"+",C:"11",E:"11000100100"},{A:",",B:",",C:"12",E:"10110011100"},{A:"-",B:"-",C:"13",E:"10011011100"},{A:".",B:".",C:"14",E:"10011001110"},{A:"/",B:"/",C:"15",E:"10111001100"},{A:"0",B:"0",C:"16",E:"10011101100"},{A:"1",B:"1",C:"17",E:"10011100110"},{A:"2",B:"2",C:"18",E:"11001110010"},{A:"3",B:"3",C:"19",E:"11001011100"},{A:"4",B:"4",C:"20",E:"11001001110"},{A:"5",B:"5",C:"21",E:"11011100100"},{A:"6",B:"6",C:"22",E:"11001110100"},{A:"7",B:"7",C:"23",E:"11101101110"},{A:"8",B:"8",C:"24",E:"11101001100"},{A:"9",B:"9",C:"25",E:"11100101100"},{A:":",B:":",C:"26",E:"11100100110"},{A:";",B:";",C:"27",E:"11101100100"},{A:"<",B:"<",C:"28",E:"11100110100"},{A:"=",B:"=",C:"29",E:"11100110010"},{A:">",B:">",C:"30",E:"11011011000"},{A:"?",B:"?",C:"31",E:"11011000110"},{A:"@",B:"@",C:"32",E:"11000110110"},{A:"A",B:"A",C:"33",E:"10100011000"},{A:"B",B:"B",C:"34",E:"10001011000"},{A:"C",B:"C",C:"35",E:"10001000110"},{A:"D",B:"D",C:"36",E:"10110001000"},{A:"E",B:"E",C:"37",E:"10001101000"},{A:"F",B:"F",C:"38",E:"10001100010"},{A:"G",B:"G",C:"39",E:"11010001000"},{A:"H",B:"H",C:"40",E:"11000101000"},{A:"I",B:"I",C:"41",E:"11000100010"},{A:"J",B:"J",C:"42",E:"10110111000"},{A:"K",B:"K",C:"43",E:"10110001110"},{A:"L",B:"L",C:"44",E:"10001101110"},{A:"M",B:"M",C:"45",E:"10111011000"},{A:"N",B:"N",C:"46",E:"10111000110"},{A:"O",B:"O",C:"47",E:"10001110110"},{A:"P",B:"P",C:"48",E:"11101110110"},{A:"Q",B:"Q",C:"49",E:"11010001110"},{A:"R",B:"R",C:"50",E:"11000101110"},{A:"S",B:"S",C:"51",E:"11011101000"},{A:"T",B:"T",C:"52",E:"11011100010"},{A:"U",B:"U",C:"53",E:"11011101110"},{A:"V",B:"V",C:"54",E:"11101011000"},{A:"W",B:"W",C:"55",E:"11101000110"},{A:"X",B:"X",C:"56",E:"11100010110"},{A:"Y",B:"Y",C:"57",E:"11101101000"},{A:"Z",B:"Z",C:"58",E:"11101100010"},{A:"[",B:"[",C:"59",E:"11100011010"},{A:"\\",B:"\\",C:"60",E:"11101111010"},{A:"]",B:"]",C:"61",E:"11001000010"},{A:"^",B:"^",C:"62",E:"11110001010"},{A:"_",B:"_",C:"63",E:"10100110000"},{A:"NUL",B:"`",C:"64",E:"10100001100"},{A:"SOH",B:"a",C:"65",E:"10010110000"},{A:"STX",B:"b",C:"66",E:"10010000110"},{A:"ETX",B:"c",C:"67",E:"10000101100"},{A:"EOT",B:"d",C:"68",E:"10000100110"},{A:"ENQ",B:"e",C:"69",E:"10110010000"},{A:"ACK",B:"f",C:"70",E:"10110000100"},{A:"BEL",B:"g",C:"71",E:"10011010000"},{A:"BS",B:"h",C:"72",E:"10011000010"},{A:"HT",B:"i",C:"73",E:"10000110100"},{A:"LF",B:"j",C:"74",E:"10000110010"},{A:"VT",B:"k",C:"75",E:"11000010010"},{A:"FF",B:"l",C:"76",E:"11001010000"},{A:"CR",B:"m",C:"77",E:"11110111010"},{A:"SO",B:"n",C:"78",E:"11000010100"},{A:"SI",B:"o",C:"79",E:"10001111010"},{A:"DLE",B:"p",C:"80",E:"10100111100"},{A:"DC1",B:"q",C:"81",E:"10010111100"},{A:"DC2",B:"r",C:"82",E:"10010011110"},{A:"DC3",B:"s",C:"83",E:"10111100100"},{A:"DC4",B:"t",C:"84",E:"10011110100"},{A:"NAK",B:"u",C:"85",E:"10011110010"},{A:"SYN",B:"v",C:"86",E:"11110100100"},{A:"ETB",B:"w",C:"87",E:"11110010100"},{A:"CAN",B:"x",C:"88",E:"11110010010"},{A:"EM",B:"y",C:"89",E:"11011011110"},{A:"SUB",B:"z",C:"90",E:"11011110110"},{A:"ESC",B:"{",C:"91",E:"11110110110"},{A:"FS",B:"|",C:"92",E:"10101111000"},{A:"GS",B:"}",C:"93",E:"10100011110"},{A:"RS",B:"~",C:"94",E:"10001011110"},{A:"US",B:"DEL",C:"95",E:"10111101000"},{A:"FNC3",B:"FNC3",C:"96",E:"10111100010"},{A:"FNC2",B:"FNC2",C:"97",E:"11110101000"},{A:"SHIFT",B:"SHIFT",C:"98",E:"11110100010"},{A:"CodeC",B:"CodeC",C:"99",E:"10111011110"},{A:"CodeB",B:"FNC4",C:"CodeB",E:"10111101110"},{A:"FNC4",B:"CodeA",C:"CodeA",E:"11101011110"},{A:"FNC1",B:"FNC1",C:"FNC1",E:"11110101110"},{A:"StartA",B:"StartA",C:"StartA",E:"11010000100"},{A:"StartB",B:"StartB",C:"StartB",E:"11010010000"},{A:"StartC",B:"StartC",C:"StartC",E:"11010011100"},{A:"Stop",B:"Stop",C:"Stop",E:"11000111010"}],validate:function(n){for(var t=0;t<n.length;t++)if(!this._getEncInfo(n.charAt(t)))return!1;return!0},_encode:function(n,t){t=t||!1;var r=this,i=[],u=r._findPrefix(n),f=u[0][0],o=u[1],e=u[2],s=t?"Start"+f:"Code"+f;return i=i.concat(r._encodeCodeset(o,s,f)),e&&e.length>0&&(i=i.concat(r._encode(e,!1))),i&&i.length>0&&(i[0]=i[0].replace("Code","Start")),i},_findPrefix:function(n){for(var e,i,u=this,f="",t="",r=0;r<n.length;r++)if(i=n.charAt(r),0!==r){if(e=t,u._getEncInfo(i,"A")||(t=t.replace("A","")),u._getEncInfo(i,"B")||(t=t.replace("B","")),u._getEncInfo(i,"C")||(t=t.replace("C","")),t.length<=0)return[e.split(""),f,n.substring(r)];f+=i}else u._getEncInfo(i,"A")&&(t+="A"),u._getEncInfo(i,"B")&&(t+="B"),u._getEncInfo(i,"C")&&(t+="C"),f+=i;return[t.split(""),n,""]},_encodeOptimized:function(n){var i=this,t=i._encode(n,!0);return t=i._optimizeForC(t),t=i._optimizeShifts(t),t&&t.length>0&&(t[0]=t[0].replace("Code","Start")),t},_optimizeForC:function(n){var r,u=this._splitOptimizeForC(n),f=u[0],i=u[1],e=u[2],t=[];if(f&&f.length>0&&(t=t.concat(f)),i&&i.length>0)for(t.push(i[0]),r=1;r<i.length;r+=2)t.push(i[r]+""+i[r+1]);return e&&e.length>0&&(t=t.concat(this._optimizeForC(e))),t},_splitOptimizeForC:function(n){if(!n||n.length<=0)return[[],[],[]];if(!/^(Code|Start)[A|B|C]$/.test(n[0]))return[n,[],[]];if(3==n.length&&/^\d$/.test(n[1])&&/^\d$/.test(n[2]))return[[],["CodeC",n[1],n[2]],[]];for(var o,u,e,s=[],f=[],h=[],i=-1,r=-1,t=0;t<n.length;t++)if(/^(Code|Start)[A|B|C]$/.test(n[t])&&(o=n[t].substring(n[t].length-1)),/^\d$/.test(n[t])&&i==-1&&(i=t,r=-1),i>-1&&!/^\d$/.test(n[t])&&(r=t-1),i>-1&&t>=n.length-1&&(r=t),i>-1&&r>-1){if(e=r-i+1,e>=4)return s=1==i?[]:n.slice(0,i),f=["CodeC"],u=r+(e%2==0?1:0),f=f.concat(n.slice(i,u)),u<n.length&&(h=["Code"+o].concat(n.slice(u))),[s,f,h];i=r=-1}return[n,[],[]]},_optimizeShifts:function(n){return n},_encodeCodeset:function(n,t,i){var r=this;return"A"==i?r._encodeA(n,t):"B"==i?r._encodeB(n,t):"C"==i?r._encodeC(n,t):null},_encodeA:function(n,t){return[t].concat(n.split(""))},_encodeB:function(n,t){return[t].concat(n.split(""))},_encodeC:function(n,t){for(var r=[t],i=0;i<n.length;i+=2)r.push(n.charAt(i)+n.charAt(i+1));return r},_getEncInfo:function(n,t){t=t||null;for(var u,f=this.encodingTable,i=0;i<f.length;i++)if(t){if(f[i][t]==n)return u=f[i],u.pos=i,u;if("100"==n||"101"==n||"102"==n)return u=f[r(n)],u.pos=i,u}else if(f[i].A==n||f[i].B==n||f[i].C==n)return u=f[i],u.pos=i,u;return null},encode:function(n){for(var r=this,u="",e=r.checksum(n),i=r._encodeOptimized(n),f=i[0].charAt(i[0].length-1),t=0;t<i.length;t++)u+=r._getEncInfo(i[t],f).E,/^(Start|Code)[A|B|C]$/.test(i[t])&&(f=i[t].charAt(i[t].length-1));return u+=r._getEncInfo(e,"C").E+r.encodingTable[106].E+"11",[u]},checksum:function(n){for(var i,r=this,u=r._encodeOptimized(n),f=r._getEncInfo(u[0]).pos,t=1;t<u.length;t++)f+=r._getEncInfo(u[t]).pos*t;return i=f%103,i>10?i+"":"0"+i}});i.addType(s);ei=s.extend({type:ut,validate:function(n){for(var t=0;t<n.length;t++)if(!this._getEncInfo(n.charAt(t),"A"))return!1;return!0},_encodeOptimized:function(n){return this._encodeA(n,"StartA")}});i.addType(ei);oi=s.extend({type:ft,validate:function(n){for(var t=0;t<n.length;t++)if(!this._getEncInfo(n.charAt(t),"B"))return!1;return!0},_encodeOptimized:function(n){return this._encodeB(n,"StartB")}});i.addType(oi);si=s.extend({type:et,validate:function(n){return/^\d+$/.test(n)&&n.length%2==0},_encodeOptimized:function(n){return this._encodeC(n,"StartC")}});i.addType(si);v=u.extend({type:ot,validateRegExp:"^[\\d\\-]+$",encode:function(n,t){t&&(n+=this.checksum(n));n="["+n+"]";for(var r="",u={0:"10101110111010",1:"11101010101110",2:"10111010101110",3:"11101110101010",4:"10101110101110",5:"11101011101010",6:"10111011101010",7:"10101011101110",8:"11101010111010",9:"10111010111010","[":"11011010","]":"1101011"},i=0;i<n.length;i++)r+=u[n.charAt(i)];return[r]},checksum:function(n){return this._checksum(n,3,1,10)},_checksum:function(n,t,i,r){for(var o,s="0123456789",u=0,e=t,f=n.length-1;f>=0;f--)o=s.indexOf(n.charAt(f)),u+=o*e,e=e==t?i:t;return u%=r,0!==u&&(u=r-u),s.charAt(u)}});i.addType(v);hi=v.extend({type:st,encode:function(n,t){t&&(n+=this.checksum(n));n.length%2!=0&&(n="0"+n);n="["+n+"]";for(var r,u="",f={"00":"10101100110010","01":"10010110110100","02":"10100110110100","03":"10010011011010","04":"10101100110100","05":"10010110011010","06":"10100110011010","07":"10101101100100","08":"10010110110010","09":"10100110110010",10:"11010100100110",11:"11001010101100",12:"11010010101100",13:"11001001010110",14:"11010100101100",15:"11001010010110",16:"11010010010110",17:"11010101001100",18:"11001010100110",19:"11010010100110",20:"10110100100110",21:"10011010101100",22:"10110010101100",23:"10011001010110",24:"10110100101100",25:"10011010010110",26:"10110010010110",27:"10110101001100",28:"10011010100110",29:"10110010100110",30:"11011010010010",31:"11001101010100",32:"11011001010100",33:"11001100101010",34:"11011010010100",35:"11001101001010",36:"11011001001010",37:"11011010100100",38:"11001101010010",39:"11011001010010",40:"10101100100110",41:"10010110101100",42:"10100110101100",43:"10010011010110",44:"10101100101100",45:"10010110010110",46:"10100110010110",47:"10101101001100",48:"10010110100110",49:"10100110100110",50:"11010110010010",51:"11001011010100",52:"11010011010100",53:"11001001101010",54:"11010110010100",55:"11001011001010",56:"11010011001010",57:"11010110100100",58:"11001011010010",59:"11010011010010",60:"10110110010010",61:"10011011010100",62:"10110011010100",63:"10011001101010",64:"10110110010100",65:"10011011001010",66:"10110011001010",67:"10110110100100",68:"10011011010010",69:"10110011010010",70:"10101001100110",71:"10010101101100",72:"10100101101100",73:"10010010110110",74:"10101001101100",75:"10010100110110",76:"10100100110110",77:"10101011001100",78:"10010101100110",79:"10100101100110",80:"11010100110010",81:"11001010110100",82:"11010010110100",83:"11001001011010",84:"11010100110100",85:"11001010011010",86:"11010010011010",87:"11010101100100",88:"11001010110010",89:"11010010110010",90:"10110100110010",91:"10011010110100",92:"10110010110100",93:"10011001011010",94:"10110100110100",95:"10011010011010",96:"10110010011010",97:"10110101100100",98:"10011010110010",99:"10110010110010","[":"1010","]":"1101"},i=0;i<n.length;i+=r)r=isNaN(n.charAt(i))?1:2,u+=f[n.substr(i,r)];return[u]}});i.addType(hi);for(var y={types:[],addType:function(n){this.types[n.prototype.type]=n},byType:function(n,t){return this.types[n]?new this.types[n](t):null}},ci=b.extend({type:null,init:function(n){var i=this,t=n.style;i.options=n;i.width=n.width-t.paddingLeft-t.paddingRight;i.height=n.height-t.paddingTop-t.paddingBottom;f||h.namespaces.scvbarcode||h.namespaces.add("scvbarcode","urn:schemas-microsoft-com:vml","#default#VML")},all:function(i,r){var u=this,s=u.options,e=s.style,y=s.text,c=y.style,o="",l=function(t){return n("<div/>").html(t).text()},h="",a=l(u.width>100?"&#68;&#101;&#109;&#111;&#32;&#86;&#101;&#114;&#115;&#105;&#111;&#110;":"&#68;&#101;&#109;&#111;"),v=l("&#104;&#116;&#116;&#112;&#58;&#47;&#47;&#119;&#119;&#119;&#46;&#115;&#104;&#105;&#101;&#108;&#100;&#117;&#105;&#46;&#99;&#111;&#109;");return t.guid(),e.paddingLeft&&(o+="margin-left:"+e.paddingLeft+"px;"),e.paddingTop&&(o+="margin-top:"+e.paddingTop+"px;"),e.paddingBottom&&(o+="margin-bottom:"+e.paddingBottom+"px;"),e.paddingRight&&(o+="margin-right:"+e.paddingRight+"px;"),h+=f?'<text x="'+u.width+'" y="'+(u.height-c.paddingBottom)+'" fill="#999999" text-anchor="end" font-size="12" style="cursor:pointer; z-index:150; font-size:12px;" onClick="javascript: location.href = \''+v+"';\">"+a+"<\/text>":'<div style="position:absolute; width:'+(u.width+2)+"px; text-align:right; color:#999999; cursor:pointer; z-index:150; top:"+(s.height-12-c.paddingBottom)+'px; font-size:12px;"><a href="'+v+'" style="color:#999999; text-decoration:none; background-color:#fdfdfd; font-size:12px;">'+a+"<\/a><\/div>",f?'<svg xmlns="'+k+'" version="1.1" width="'+u.width+'" height="'+u.height+'" shape-rendering="crispEdges"'+(o?' style="'+o+'" ':"")+">"+i+r+h+"<\/svg>":'<scvbarcode:group style="position:relative; width:'+u.width+"px; height:"+u.height+"px; "+o+'" coordsize="'+u.width+","+u.height+'">'+i+r+h+"<\/scvbarcode:group>"},barcode:function(n){for(var l,v,y,t,u=this,nt=u.options,p=nt.style,w=u.options.text,e=w.style,o=n[0],s=n[1]||[],tt=w.enabled?e.fontSize+e.paddingTop+e.paddingBottom:0,h=u.width/o.length,b=u.height-tt-(s.length>0?5:0),it=b+5,c=[],i=0;i<o.length;i++){if(l=o.charAt(i),"1"==l){for(var k=i*h,g=b,a=0;a<s.length;a++)if(s[a]==i){g=it;break}v={x1:k,y1:0,x2:k,y2:g,w:h};1==r(y)&&(t=c.pop(),v={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.w+h});c.push(v)}y=l}return d(c,function(n){return f?'<line x1="'+(n.x1+n.w/2)+'" y1="'+n.y1+'" x2="'+(n.x2+n.w/2)+'" y2="'+n.y2+'" style="stroke:'+p.color+"; stroke-width:"+n.w+'" />':'<scvbarcode:line from="'+(n.x1+n.w/2)+","+n.y1+'" to="'+(n.x2+n.w/2)+","+n.y2+'" strokecolor="'+p.color+'" strokeweight="'+n.w+'px;" stroke="true" />'}).join("")},text:function(n){var i=this,r=i.options.text,t=r.style,u=r.enabled?t.fontSize+t.paddingTop+t.paddingBottom:0;return r.enabled?f?'<text x="'+i.width/2+'" y="'+(i.height-t.paddingBottom)+'" fill="'+t.color+'" text-anchor="middle" font-size="'+t.fontSize+'" font-family="'+t.fontFamily+';">'+n+"<\/text>":'<div style="position:absolute; width:'+i.width+"px; text-align:center; color:"+t.color+"; top:"+(i.options.height-u-t.paddingBottom)+"px; font-size:"+t.fontSize+"px; font-family:"+t.fontFamily+';">'+n+"<\/div>":""}}),li=[g,nt,tt,it,rt,ut,ft,et,ht,ct,lt,at,vt,yt,pt,wt,ot,st],p=0;p<li.length;p++)y.addType(ci.extend({type:li[p]}));ai=ci.extend({type:"POSTNET",barcode:function(n){for(var e,a,t=this,v=t.options,o=v.style,s=t.options.text,r=s.style,u=n[0],y=s.enabled?r.fontSize+r.paddingTop+r.paddingBottom:0,h=t.width/(2*u.length-1),c=t.height-y,l=[],i=0;i<u.length;i++)e=i*h*2,a="1"==u.charAt(i)?0:c/2,l.push({x1:e,y1:a,x2:e,y2:c,w:h});return d(l,function(n){return f?'<line x1="'+(n.x1+n.w/2)+'" y1="'+n.y1+'" x2="'+(n.x2+n.w/2)+'" y2="'+n.y2+'" style="stroke:'+o.color+"; stroke-width:"+n.w+'" />':'<scvbarcode:line from="'+(n.x1+n.w/2)+","+n.y1+'" to="'+(n.x2+n.w/2)+","+n.y2+'" strokecolor="'+o.color+'" strokeweight="'+n.w+'px;" stroke="true" />'}).join("")}});y.addType(ai);vi={value:null,type:null,checksum:!0,width:300,height:100,style:{background:null,borderColor:null,borderStyle:null,borderWidth:0,color:"#000000",paddingTop:5,paddingLeft:5,paddingRight:5,paddingBottom:5},text:{enabled:!1,checksum:!1,style:{color:"#000000",fontFamily:"Segoe UI, Tahoma, Verdana, sans-serif",fontSize:13,paddingTop:2,paddingBottom:0}}};w=l.extend({init:function(){l.fn.init.apply(this,arguments);var u,h,c,v=this,t=v.options,f=t.style,o=t.type,s=t.dieOnError,r=t.value+"",e=i.byType(o),p=n(v.element),w="";return e?e.validate(r)?(u=y.byType(o,t))?(p.css({background:f.background,borderColor:f.borderColor,borderStyle:f.borderStyle,borderWidth:f.borderWidth,width:t.width,height:t.height}),h=e.encode(r,t.checksum),c=u.barcode(h),t.text.enabled&&(w=u.text(r+(t.text.checksum?e.checksum(r):""))),void p.html(u.all(c,w))):void a("Invalid barcode type (2)",s):void a("Invalid barcode value: "+r,s):void a("Invalid barcode type: "+o,s)},destroy:function(){this.element.empty();l.fn.destroy.call(this)}});w.defaults=vi;t.ui.plugin("Barcode",w)}(jQuery,shield,this);!function(n,t){var h=t.ui.Widget,nt=t.Constants,p=t.Class,f=document,w=nt.SVG_NS,c=!!f.createElementNS&&!!f.createElementNS(w,"svg").createSVGRect,l=n.map,i=t.to.int,a=t.error,u=function(n){return i(n,10).toString(2)},tt=function(n){return i(n,2)},r=function(n,t){for(n+="";n.length<t;)n="0"+n;return n},b=function(n,t){for(n+="";n.length<t;)n+="0";return n},v="byte",e="numeric",o="alphanumeric",s={modes:[],addMode:function(n){this.modes[n.prototype.mode]=n},byMode:function(n){return this.modes[n]?new this.modes[n]:null}},y=p.extend({mode:null,codeMode:null,validateRegex:null,_verErrLenTable:{"1L":152,"1M":128,"1Q":104,"1H":72,"2L":272,"2M":224,"2Q":176,"2H":128,"3L":440,"3M":352,"3Q":272,"3H":208,"4L":640,"4M":512,"4Q":384,"4H":288,"5L":864,"5M":688,"5Q":496,"5H":368,"6L":1088,"6M":864,"6Q":608,"6H":480,"7L":1248,"7M":992,"7Q":704,"7H":528,"8L":1552,"8M":1232,"8Q":880,"8H":688,"9L":1856,"9M":1456,"9Q":1056,"9H":800,"10L":2192,"10M":1728,"10Q":1232,"10H":976,"11L":2592,"11M":2032,"11Q":1440,"11H":1120,"12L":2960,"12M":2320,"12Q":1648,"12H":1264,"13L":3424,"13M":2672,"13Q":1952,"13H":1440,"14L":3688,"14M":2920,"14Q":2088,"14H":1576,"15L":4184,"15M":3320,"15Q":2360,"15H":1784,"16L":4712,"16M":3624,"16Q":2600,"16H":2024,"17L":5176,"17M":4056,"17Q":2936,"17H":2264,"18L":5768,"18M":4504,"18Q":3176,"18H":2504,"19L":6360,"19M":5016,"19Q":3560,"19H":2728,"20L":6888,"20M":5352,"20Q":3880,"20H":3080,"21L":7456,"21M":5712,"21Q":4096,"21H":3248,"22L":8048,"22M":6256,"22Q":4544,"22H":3536,"23L":8752,"23M":6880,"23Q":4912,"23H":3712,"24L":9392,"24M":7312,"24Q":5312,"24H":4112,"25L":10208,"25M":8e3,"25Q":5744,"25H":4304,"26L":10960,"26M":8496,"26Q":6032,"26H":4768,"27L":11744,"27M":9024,"27Q":6464,"27H":5024,"28L":12248,"28M":9544,"28Q":6968,"28H":5288,"29L":13048,"29M":10136,"29Q":7288,"29H":5608,"30L":13880,"30M":10984,"30Q":7880,"30H":5960,"31L":14744,"31M":11640,"31Q":8264,"31H":6344,"32L":15640,"32M":12328,"32Q":8920,"32H":6760,"33L":16568,"33M":13048,"33Q":9368,"33H":7208,"34L":17528,"34M":13800,"34Q":9848,"34H":7688,"35L":18448,"35M":14496,"35Q":10288,"35H":7888,"36L":19472,"36M":15312,"36Q":10832,"36H":8432,"37L":20528,"37M":15936,"37Q":11408,"37H":8768,"38L":21616,"38M":16816,"38Q":12016,"38H":9136,"39L":22496,"39M":17728,"39Q":12656,"39H":9776,"40L":23648,"40M":18672,"40Q":13328,"40H":10208},_errorCorrectionToMask:{L:"01",M:"00",Q:"11",H:"10"},_formatInformation:{"00000":"101010000010010","00001":"101000100100101","00010":"101111001111100","00011":"101101101001011","00100":"100010111111001","00101":"100000011001110","00110":"100111110010111","00111":"100101010100000","01000":"111011111000100","01001":"111001011110011","01010":"111110110101010","01011":"111100010011101","01100":"110011000101111","01101":"110001100011000","01110":"110110001000001","01111":"110100101110110",1e4:"001011010001001",10001:"001001110111110",10010:"001110011100111",10011:"001100111010000",10100:"000011101100010",10101:"000001001010101",10110:"000110100001100",10111:"000100000111011",11e3:"011010101011111",11001:"011000001101000",11010:"011111100110001",11011:"011101000000110",11100:"010010010110100",11101:"010000110000011",11110:"010111011011010",11111:"010101111101101"},validate:function(n){return!this.validateRegex||new RegExp(this.validateRegex).test(n)},encode:function(n,t){var u,c,s,l,r=this,f=r._getVersion(n,t),h=21+4*(f-1),a=h+8,v=f+t,e=r._getFormatData(n,t),i=r.encodeValue(n),o=r._getDataLength(n,t),y=o-(e.length+i.length)>4?4:o-(e.length+i.length);return i=b(i,i.length+y),u=r._getBinaryValues(e+i),i=u.join(""),i=r._padEncodedToLength(i,o),u=r._getBinaryValues(i),s=r._getIntegerValues(u),i=r._getEC(v,c,s),l=r._getBinaryMatrix(i,f,h,a,t)},encodeValue:null,_getBinaryMatrix:function(n,t,i,r,u){for(var v,b,a,y,l,f,e,h=this,p=["000","001","010","011","100","101","110","111"],k=[],o=[],s=[],w=h._getPositionAdjustmentsTable(),c=0;c<r;c++)for(o[c]=[],l=0;l<r;l++)o[c][l]=0;for(c=0;c<i;c++)s.push(new Array(i));if(h._fullFinderPattern(o,4,4),h._fillFinderPatternFilledValues(s,0,0),h._fullFinderPattern(o,4,r-11),h._fillFinderPatternFilledValues(s,0,i-8),h._fullFinderPattern(o,r-11,4),h._fillFinderPatternFilledValues(s,i-8,0),h._fillTimingPattern(o,s,i),o[r-12][12]=1,s[r-16][8]=1,t>1)for(c=0;c<w[t].length;c++)for(l=0;l<w[t].length;l++)f=w[t][c]+4,e=w[t][l]+4,10==f&&10==e||10==f&&e==r-11||f==r-11&&10==e||(o[f-2][e-2]=1,s[f-6][e-6]=1,o[f-2][e-1]=1,s[f-6][e-5]=1,o[f-2][e]=1,s[f-6][e-4]=1,o[f-2][e+1]=1,s[f-6][e-3]=1,o[f-2][e+2]=1,s[f-6][e-2]=1,o[f-1][e-2]=1,s[f-5][e-6]=1,o[f-1][e-1]=0,s[f-5][e-5]=1,o[f-1][e]=0,s[f-5][e-4]=1,o[f-1][e+1]=0,s[f-5][e-3]=1,o[f-1][e+2]=1,s[f-5][e-2]=1,o[f][e-2]=1,s[f-4][e-6]=1,o[f][e-1]=0,s[f-4][e-5]=1,o[f][e]=1,s[f-4][e-4]=1,o[f][e+1]=0,s[f-4][e-3]=1,o[f][e+2]=1,s[f-4][e-2]=1,o[f+1][e-2]=1,s[f-3][e-6]=1,o[f+1][e-1]=0,s[f-3][e-5]=1,o[f+1][e]=0,s[f-3][e-4]=1,o[f+1][e+1]=0,s[f-3][e-3]=1,o[f+1][e+2]=1,s[f-3][e-2]=1,o[f+2][e-2]=1,s[f-2][e-6]=1,o[f+2][e-1]=1,s[f-2][e-5]=1,o[f+2][e]=1,s[f-2][e-4]=1,o[f+2][e+1]=1,s[f-2][e-3]=1,o[f+2][e+2]=1,s[f-2][e-2]=1);for(t>=7&&h._fillHigherVersionData(o,s,t,i,r),y=0;y<8;y++){for(v=0,a=[],c=0;c<o.length;c++)a.push(o[c].slice(0));h._fillFormatData(o,s,i,r,p[y],u);h._fillMatrix(s,a,p[y],i,n);v+=h._calcPenalty1(a,i);v+=h._calcPenalty2(a,i);v+=h._calcPenalty3(a,i);v+=h._calcPenalty4(a,i);k.push(v)}return b=h._getSmallestPenaltyIndex(k),h._fillFormatData(o,s,i,r,p[b],u),h._fillMatrix(s,o,p[b],i,n),o},_fillHigherVersionData:function(n,t,i,r,u){var f=this,e={7:[0,0,1,0,1,0,0,1,0,0,1,1,1,1,1,0,0,0],8:[0,0,1,1,1,1,0,1,1,0,1,0,0,0,0,1,0,0],9:[1,0,0,1,1,0,0,1,0,1,0,1,1,0,0,1,0,0],10:[1,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,0],11:[0,1,1,0,1,1,1,1,1,1,0,1,1,1,0,1,0,0],12:[0,1,0,0,0,1,1,0,1,1,1,0,0,0,1,1,0,0],13:[1,1,1,0,0,0,1,0,0,0,0,1,1,0,1,1,0,0],14:[1,0,1,1,0,0,0,0,0,1,1,0,0,1,1,1,0,0],15:[0,0,0,1,0,1,0,0,1,0,0,1,1,1,1,1,0,0],16:[0,0,0,1,1,1,1,0,1,1,0,1,0,0,0,0,1,0],17:[1,0,1,1,1,0,1,0,0,0,1,0,1,0,0,0,1,0],18:[1,1,1,0,1,0,0,0,0,1,0,1,0,1,0,0,1,0],19:[0,1,0,0,1,1,0,0,1,0,1,0,1,1,0,0,1,0],20:[0,1,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0],21:[1,1,0,0,0,0,0,1,0,1,1,0,1,0,1,0,1,0],22:[1,0,0,1,0,0,1,1,0,0,0,1,0,1,1,0,1,0],23:[0,0,1,1,0,1,1,1,1,1,1,0,1,1,1,0,1,0],24:[0,0,1,0,0,0,1,1,0,1,1,1,0,0,0,1,1,0],25:[1,0,0,0,0,1,1,1,1,0,0,0,1,0,0,1,1,0],26:[1,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,1,0],27:[0,1,1,1,0,0,0,1,0,0,0,0,1,1,0,1,1,0],28:[0,1,0,1,1,0,0,0,0,0,1,1,0,0,1,1,1,0],29:[1,1,1,1,1,1,0,0,1,1,0,0,1,0,1,1,1,0],30:[1,0,1,0,1,1,1,0,1,0,1,1,0,1,1,1,1,0],31:[0,0,0,0,1,0,1,0,0,1,0,0,1,1,1,1,1,0],32:[1,0,1,0,1,0,1,1,1,0,0,1,0,0,0,0,0,1],33:[0,0,0,0,1,1,1,1,0,1,1,0,1,0,0,0,0,1],34:[0,1,0,1,1,1,0,1,0,0,0,1,0,1,0,0,0,1],35:[1,1,1,1,1,0,0,1,1,1,1,0,1,1,0,0,0,1],36:[1,1,0,1,0,0,0,0,1,1,0,1,0,0,1,0,0,1],37:[0,1,1,1,0,1,0,0,0,0,1,0,1,0,1,0,0,1],38:[0,0,1,0,0,1,1,0,0,1,0,1,0,1,1,0,0,1],39:[1,0,0,0,0,0,1,0,1,0,1,0,1,1,1,0,0,1],40:[1,0,0,1,0,1,1,0,0,0,1,1,0,0,0,1,0,1]}[i];f._fillUpperVersionInformation(n,t,e,r,u);f._fillLowerVersionInformation(n,t,e,r,u)},_fillUpperVersionInformation:function(n,t,i,r,u){for(var o=u-15,s=r-11,e=0,f=4;f<10;f++)n[f][o]=i[e],t[f-4][s]=1,e++,n[f][o+1]=i[e],t[f-4][s+1]=1,e++,n[f][o+2]=i[e],t[f-4][s+2]=1,e++},_fillLowerVersionInformation:function(n,t,i,r,u){for(var o=u-13,s=r-9,e=0,f=4;f<10;f++)n[o][f]=i[e],t[s][f-4]=1,e++,n[o-1][f]=i[e],t[s-1][f-4]=1,e++,n[o-2][f]=i[e],t[s-2][f-4]=1,e++},_getSmallestPenaltyIndex:function(n){for(var r=n[0],i=0,t=0;t<n.length;t++)n[t]<r&&(i=t);return i},_calcPenalty1:function(n,t){for(var e,r,u,f=0,i=0;i<t;i++)for(u=1,r=1;r<t;r++)e=n[i+4][r+4],e===n[i+4][r+3]?(u++,5==u?f+=3:u>5&&f++):u=1;for(r=0;r<t;r++)for(u=1,i=1;i<t;i++)e=n[i+4][r+4],e===n[i+3][r+4]?(u++,5===u?f+=3:u>5&&f++):u=1;return f},_calcPenalty2:function(n,t){for(var u,r,f=0,i=0;i<t-1;i++)for(r=0;r<t-1;r++)u=n[i+4][r+4],u==n[i+4][r+5]&&u==n[i+5][r+4]&&u==n[i+5][r+5]&&(f+=3);return f},_calcPenalty3:function(n,t){for(var r,u=0,i=0;i<t;i++)for(r=0;r<=t-7;r++)n[i+4][r+4]&&!n[i+4][r+5]&&n[i+4][r+6]&&n[i+4][r+7]&&n[i+4][r+8]&&!n[i+4][r+9]&&n[i+4][r+10]&&(u+=40);for(r=0;r<t;r++)for(i=0;i<=t-7;i++)n[i+4][r+4]&&!n[i+5][r+4]&&n[i+6][r+4]&&n[i+7][r+4]&&n[i+8][r+4]&&!n[i+9][r+4]&&n[i+10][r+4]&&(u+=40);return u},_calcPenalty4:function(n,t){for(var u,f=0,e=0,r=0;r<t;r++)for(u=0;u<t;u++)n[r+4][u+4]?f++:e++;return i(2*(f/(f+e)*100-50))},_fillFormatData:function(n,t,r,u,f,e){var c=this,l=c._errorCorrectionToMask[e]+f,o=c._formatInformation[l],h=u-5,s=u-5;n[12][4]=i(o.charAt(0));n[12][5]=i(o.charAt(1));n[12][6]=i(o.charAt(2));n[12][7]=i(o.charAt(3));n[12][8]=i(o.charAt(4));n[12][9]=i(o.charAt(5));n[12][11]=i(o.charAt(6));n[12][12]=i(o.charAt(7));n[11][12]=i(o.charAt(8));n[9][12]=i(o.charAt(9));n[8][12]=i(o.charAt(10));n[7][12]=i(o.charAt(11));n[6][12]=i(o.charAt(12));n[5][12]=i(o.charAt(13));n[4][12]=i(o.charAt(14));n[h][12]=i(o.charAt(0));n[h-1][12]=i(o.charAt(1));n[h-2][12]=i(o.charAt(2));n[h-3][12]=i(o.charAt(3));n[h-4][12]=i(o.charAt(4));n[h-5][12]=i(o.charAt(5));n[h-6][12]=i(o.charAt(6));n[12][s-7]=i(o.charAt(7));n[12][s-6]=i(o.charAt(8));n[12][s-5]=i(o.charAt(9));n[12][s-4]=i(o.charAt(10));n[12][s-3]=i(o.charAt(11));n[12][s-2]=i(o.charAt(12));n[12][s-1]=i(o.charAt(13));n[12][s]=i(o.charAt(14));t[8][0]=1;t[8][1]=1;t[8][2]=1;t[8][3]=1;t[8][4]=1;t[8][5]=1;t[8][7]=1;t[8][8]=1;t[7][8]=1;t[5][8]=1;t[4][8]=1;t[3][8]=1;t[2][8]=1;t[1][8]=1;t[0][8]=1;t[r-1][8]=1;t[r-2][8]=1;t[r-3][8]=1;t[r-4][8]=1;t[r-5][8]=1;t[r-6][8]=1;t[r-7][8]=1;t[8][r-8]=1;t[8][r-7]=1;t[8][r-6]=1;t[8][r-5]=1;t[8][r-4]=1;t[8][r-3]=1;t[8][r-2]=1;t[8][r-1]=1},_fillMatrix:function(n,t,i,r,u){for(var e,h=this,o=0,s=!0,f=r-1;f>=0;f-=2)if(6==f&&f--,s){for(e=r-1;e>=0;e--)n[e][f]||(h._fillModule(e,f,o,t,i,u),o++),f-1>=0&&!n[e][f-1]&&(h._fillModule(e,f-1,o,t,i,u),o++);s=!s}else{for(e=0;e<r;e++)n[e][f]||(h._fillModule(e,f,o,t,i,u),o++),f-1>=0&&!n[e][f-1]&&(h._fillModule(e,f-1,o,t,i,u),o++);s=!s}},_fillModule:function(n,t,i,r,u,f){var e=this;i<f.length?e._fillCharacter(n,t,f.charAt(i),r,u):e._fillCharacter(n,t,"0",r,u)},_fillCharacter:function(n,t,i,r,u){var f,e;switch(u){case"000":f=(n+t)%2==0;break;case"001":f=n%2==0;break;case"010":f=t%3==0;break;case"011":f=(n+t)%3==0;break;case"100":f=(n/2+t/3)%2==0;break;case"101":f=n*t%2+n*t%3==0;break;case"110":f=(n*t%2+n*t%3)%2==0;break;case"111":f=((n+t)%2+n*t%3)%2==0;break;default:f=(n+t)%2==0}e=f?"0"==i?1:0:"0"==i?0:1;r[n+4][t+4]=e},_fillTimingPattern:function(n,t,i){for(var r=10,u=12,f=!0;u<i-4;)f&&(n[r][u]=1),t[r-4][u-4]=1,f=!f,u++;for(u=10,r=12,f=!0;r<i-4;)f&&(n[r][u]=1),t[r-4][u-4]=1,f=!f,r++},_fullFinderPattern:function(n,t,i){for(var r=0;r<7;r++)n[t+r][i]=1,n[t][i+r]=1,n[t+r][i+6]=1,n[t+6][i+r]=1;for(t+=2,i+=2,r=0;r<3;r++)n[t+r][i]=1,n[t+r][i+1]=1,n[t+r][i+2]=1},_fillFinderPatternFilledValues:function(n,t,i){var r,u,f,e;for(0===t&&0===i?r=u=8:0===t&&i>0?(r=8,u=i+8):(r=t+8,u=8),f=t;f<r;f++)for(e=i;e<u;e++)n[f][e]=1},_getEC:function(n,t,i){for(var g,nt,tt=this,et=tt._getCodewordsLengthTable(),o=et[n],b=0,a=[],c=[],s=[],h=[],v=[],l=[],k=[],d=[],ut=o.firstBlockCount,ft=o.secondBlockCount,p=[],w=[];ut>0;ut--){for(p=[],g=0;g<o.firstDataCodeWords;g++)p[p.length]=i[b],b++;a[a.length]=p;v[v.length]=tt._getErrorCorrectionForBlock(p,o)}for(;ft>0;ft--){for(w=[],nt=0;nt<o.secondBlockCodeWords;nt++)w[w.length]=i[b],b++;c[c.length]=w;l[l.length]=tt._getErrorCorrectionForBlock(w,o)}for(var ot=o.firstDataCodeWords*o.firstBlockCount+o.secondBlockCodeWords*o.secondBlockCount,st=o.codewordsPerBlock*o.firstBlockCount+o.codewordsPerBlock*o.secondBlockCount,f=0,it=a.length+c.length,y=0;y<it;y++)0===f?a.length>0?(s[s.length]=a[0],a.splice(0,1)):(s[s.length]=c[0],f++,c.splice(0,1)):1===f&&c.length>0&&(s[s.length]=c[0],c.splice(0,1));for(f=0,it=v.length+l.length,y=0;y<it;y++)0===f?v.length>0?(h[h.length]=v[0],v.splice(0,1)):(h[h.length]=l[0],f++,l.splice(0,1)):1===f&&l.length>0&&(h[h.length]=l[0],l.splice(0,1));var e,ht=s.length,ct=h.length,rt="";for(f=0,e=0;e<ot;e++)f===ht&&(f=0),s[f].length>0?(k[k.length]=s[f][0],s[f].splice(0,1),f++):(f++,e--);for(f=0,e=0;e<st;e++)f===ct&&(f=0),h[f].length>0?(d[d.length]=h[f][0],h[f].splice(0,1),f++):(f++,e--);for(e=0;e<k.length;e++)rt+=r(u(k[e]),8);for(e=0;e<d.length;e++)rt+=r(u(d[e]),8);return rt},_getErrorCorrectionForBlock:function(n,t){for(var i,e,o,s=t.codewordsPerBlock,r=[],f=[],h=0,c={7:[87,229,146,149,238,102,21],10:[251,67,46,61,118,70,64,94,32,45],13:[74,152,176,100,86,100,106,104,130,218,206,140,78],15:[8,183,61,91,202,37,51,58,58,237,140,124,5,99,105],16:[120,104,107,109,102,161,76,3,91,191,147,169,182,194,225,120],17:[43,139,206,78,43,239,123,206,214,147,24,99,150,39,243,163,136],18:[215,234,158,94,184,97,118,170,79,187,152,148,252,179,5,98,96,153],20:[17,60,79,50,61,163,26,187,202,180,221,225,83,239,156,164,212,212,188,190],22:[210,171,247,242,93,230,14,109,221,53,200,74,8,172,98,80,219,134,160,105,165,231],24:[229,121,135,48,211,117,251,126,159,180,169,152,192,226,228,218,111,0,117,232,87,96,227,21],26:[173,125,158,2,103,182,118,17,145,201,111,28,165,53,161,21,245,142,13,102,48,227,153,145,218,70],28:[168,223,200,104,224,234,108,180,110,190,195,147,205,27,232,201,21,43,245,87,42,195,212,119,242,37,9,123],30:[41,173,145,152,216,31,179,182,50,48,110,86,239,96,222,125,42,173,226,193,224,130,156,37,251,216,238,40,192,180]},l=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,1],a=[-1,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175],u=0;u<n.length+s;u++)f[h++]=u<n.length?n[u]:0;for(u=0;u<n.length;u++)if(e=f[0],f.splice(0,1),0!==e){for(r=c[s].slice(0),e=a[e],i=0;i<r.length;i++)o=e+r[i],o>255&&(o%=255),r[i]=o;for(i=0;i<r.length;i++)r[i]=l[r[i]];for(i=0;i<r.length;i++)f[i]=f[i]^r[i]}return f},_getIntegerValues:function(n){return l(n,function(n){return tt(n)})},_getBinaryValues:function(n){for(var i=[],t=0;t<n.length;t+=8)t+8<=n.length?i.push(n.substr(t,8)):i.push(b(n.substring(t),8));return i},_padEncodedToLength:function(n,t){if(n.length>=t)return n.substr(0,t);for(var i=n,r=!0;i.length<t;)i+=r?"11101100":"00010001",r=!r;return i},_getVersion:function(n,t){for(var r=n.length,i=1;i<39&&!(this._verErrLenTable[i+""+t]/8>=r);i++);return i+1},_getDataLength:function(n,t){var i=this;return i._verErrLenTable[i._getVersion(n,t)+""+t]},_getFormatData:function(n,t){return this.codeMode+r(u(n.length),this._getFormatLengthTotal(n,t))},_getFormatLengthTotal:function(n,t){var u=this,i=u.mode,r=u._getVersion(n,t);return r>=1&&r<=9?i==e?10:i==o?9:8:r>=10&&r<=26?i==e?12:i==o?11:i==v?16:10:i==e?14:i==o?13:i==v?16:12},_getCodewordsLengthTable:function(){var t=this;if(t._clt)return t._clt;var r,u,i=[7,1,19,0,0,10,1,16,0,0,13,1,13,0,0,17,1,9,0,0,10,1,34,0,0,16,1,28,0,0,22,1,22,0,0,28,1,16,0,0,15,1,55,0,0,26,1,44,0,0,18,2,17,0,0,22,2,13,0,0,20,1,80,0,0,18,2,32,0,0,26,2,24,0,0,16,4,9,0,0,26,1,108,0,0,24,2,43,0,0,18,2,15,2,16,22,2,11,2,12,18,2,68,0,0,16,4,27,0,0,24,4,19,0,0,28,4,15,0,0,20,2,78,0,0,18,4,31,0,0,18,2,14,4,15,26,4,13,1,14,24,2,97,0,0,22,2,38,2,39,22,4,18,2,19,26,4,14,2,15,30,2,116,0,0,22,3,36,2,37,20,4,16,4,17,24,4,12,4,13,18,2,68,2,69,26,4,43,1,44,24,6,19,2,20,28,6,15,2,16,20,4,81,0,0,30,1,50,4,51,28,4,22,4,23,24,3,12,8,13,24,2,92,2,93,22,6,36,2,37,26,4,20,6,21,28,7,14,4,15,26,4,107,0,0,22,8,37,1,38,24,8,20,4,21,22,12,11,4,12,30,3,115,1,116,24,4,40,5,41,20,11,16,5,17,24,11,12,5,13,22,5,87,1,88,24,5,41,5,42,30,5,24,7,25,24,11,12,7,13,24,5,98,1,99,28,7,45,3,46,24,15,19,2,20,30,3,15,13,16,28,1,107,5,108,28,10,46,1,47,28,1,22,15,23,28,2,14,17,15,30,5,120,1,121,26,9,43,4,44,28,17,22,1,23,28,2,14,19,15,28,3,113,4,114,26,3,44,11,45,26,17,21,4,22,26,9,13,16,14,28,3,107,5,108,26,3,41,13,42,30,15,24,5,25,28,15,15,10,16,28,4,116,4,117,26,17,42,0,0,28,17,22,6,23,30,19,16,6,17,28,2,111,7,112,28,17,46,0,0,30,7,24,16,25,24,34,13,0,0,30,4,121,5,122,28,4,47,14,48,30,11,24,14,25,30,16,15,14,16,30,6,117,4,118,28,6,45,14,46,30,11,24,16,25,30,30,16,2,17,26,8,106,4,107,28,8,47,13,48,30,7,24,22,25,30,22,15,13,16,28,10,114,2,115,28,19,46,4,47,28,28,22,6,23,30,33,16,4,17,30,8,122,4,123,28,22,45,3,46,30,8,23,26,24,30,12,15,28,16,30,3,117,10,118,28,3,45,23,46,30,4,24,31,25,30,11,15,31,16,30,7,116,7,117,28,21,45,7,46,30,1,23,37,24,30,19,15,26,16,30,5,115,10,116,28,19,47,10,48,30,15,24,25,25,30,23,15,25,16,30,13,115,3,116,28,2,46,29,47,30,42,24,1,25,30,23,15,28,16,30,17,115,0,0,28,10,46,23,47,30,10,24,35,25,30,19,15,35,16,30,17,115,1,116,28,14,46,21,47,30,29,24,19,25,30,11,15,46,16,30,13,115,6,116,28,14,46,23,47,30,44,24,7,25,30,59,16,1,17,30,12,121,7,122,28,12,47,26,48,30,39,24,14,25,30,22,15,41,16,30,6,121,14,122,28,6,47,34,48,30,46,24,10,25,30,2,15,64,16,30,17,122,4,123,28,29,46,14,47,30,49,24,10,25,30,24,15,46,16,30,4,122,18,123,28,13,46,32,47,30,48,24,14,25,30,42,15,32,16,30,20,117,4,118,28,40,47,7,48,30,43,24,22,25,30,10,15,67,16,30,19,118,6,119,28,18,47,31,48,30,34,24,34,25,30,20,15,61,16],f=["L","M","Q","H"],n=0;for(t._clt={},r=1;r<=40;r++)for(u=0;u<f.length;u++)t._clt[r+""+f[u]]={codewordsPerBlock:i[n],firstBlockCount:i[n+1],firstDataCodeWords:i[n+2],secondBlockCount:i[n+3],secondBlockCodeWords:i[n+4]},n+=5;return t._clt},_getPositionAdjustmentsTable:function(){var n=[],t=2;return n[t++]=[6,18],n[t++]=[6,22],n[t++]=[6,26],n[t++]=[6,30],n[t++]=[6,34],n[t++]=[6,22,38],n[t++]=[6,24,42],n[t++]=[6,26,46],n[t++]=[6,28,50],n[t++]=[6,30,54],n[t++]=[6,32,58],n[t++]=[6,34,62],n[t++]=[6,26,46,66],n[t++]=[6,26,48,70],n[t++]=[6,26,50,74],n[t++]=[6,30,54,78],n[t++]=[6,30,56,82],n[t++]=[6,30,58,86],n[t++]=[6,34,62,90],n[t++]=[6,28,50,72,94],n[t++]=[6,26,50,74,98],n[t++]=[6,30,54,78,102],n[t++]=[6,28,54,80,106],n[t++]=[6,32,58,84,110],n[t++]=[6,30,58,86,114],n[t++]=[6,34,62,90,118],n[t++]=[6,26,50,74,98,122],n[t++]=[6,30,54,78,102,126],n[t++]=[6,26,52,78,104,130],n[t++]=[6,30,56,82,108,134],n[t++]=[6,34,60,86,112,138],n[t++]=[6,30,58,86,114,142],n[t++]=[6,34,62,90,118,146],n[t++]=[6,30,54,78,102,126,150],n[t++]=[6,24,50,76,102,128,154],n[t++]=[6,28,54,80,106,132,158],n[t++]=[6,32,58,84,110,136,162],n[t++]=[6,26,54,82,110,138,166],n[t++]=[6,30,58,86,114,142,170],n}}),it=y.extend({mode:e,codeMode:"0001",validateRegex:"^\\d+$",encodeValue:function(n){for(var t=[];n.length>0;)n.length>2?(t.push(r(u(i(n.substr(0,3))),10)),n=n.substr(3)):2===n.length?(t.push(r(u(i(n)),7)),n=""):(t.push(r(u(i(n)),4)),n="");return 0===t.length&&t.push(r(u(0),4)),t.join("")}}),k,d;s.addMode(it);k=y.extend({mode:v,codeMode:"0100",validateRegex:"^[0-9A-Za-z'\\\r\\\n\\ \\!\\\"\\#\\$\\%\\&\\(\\)\\*\\+\\,\\-\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\\\]\\^\\_\\`\\{\\|\\}\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\]+$",encodingTable:{"\r":"13","\n":"10"," ":"32","!":"33",'"':"34","#":"35",$:"36","%":"37","&":"38","'":"39","(":"40",")":"41","*":"42","+":"43",",":"44","-":"45",".":"46","/":"47",0:"48",1:"49",2:"50",3:"51",4:"52",5:"53",6:"54",7:"55",8:"56",9:"57",":":"58",";":"59","<":"60","=":"61",">":"62","?":"63","@":"64",A:"65",B:"66",C:"67",D:"68",E:"69",F:"70",G:"71",H:"72",I:"73",J:"74",K:"75",L:"76",M:"77",N:"78",O:"79",P:"80",Q:"81",R:"82",S:"83",T:"84",U:"85",V:"86",W:"87",X:"88",Y:"89",Z:"90","[":"91","":"92","]":"93","^":"94",_:"95","`":"96",a:"97",b:"98",c:"99",d:"100",e:"101",f:"102",g:"103",h:"104",i:"105",j:"106",k:"107",l:"108",m:"109",n:"110",o:"111",p:"112",q:"113",r:"114",s:"115",t:"116",u:"117",v:"118",w:"119",x:"120",y:"121",z:"122","{":"123","|":"124","}":"125","":"126","":"161","":"162","":"163","":"164","":"165","":"166","":"167","":"168","":"169","":"170","":"171","":"172","":"173","":"174","":"175","":"176","":"177","":"178","":"179","":"180","":"181","":"182","":"183","":"184","":"185","":"186","":"187","":"188","":"189","":"190","":"191","":"192","":"193","":"194","":"195","":"196","":"197","":"198","":"199","":"200","":"201","":"202","":"203","":"204","":"205","":"206","":"207","":"208","":"209","":"210","":"211","":"212","":"213","":"214","":"215","":"216","":"217","":"218","":"219","":"220","":"221","":"222","":"223"},encodeValue:function(n){for(var e=this,f=[],t=0;t<n.length;t++)f.push(r(u(i(e.encodingTable[n.charAt(t)])),8));return f.join("")}});s.addMode(k);d=y.extend({mode:o,codeMode:"0010",validateRegex:"^[0-9A-Z \\$\\%\\*\\+\\-\\.\\/\\:]+$",encodingTable:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",A:"10",B:"11",C:"12",D:"13",E:"14",F:"15",G:"16",H:"17",I:"18",J:"19",K:"20",L:"21",M:"22",N:"23",O:"24",P:"25",Q:"26",R:"27",S:"28",T:"29",U:"30",V:"31",W:"32",X:"33",Y:"34",Z:"35"," ":"36",$:"37","%":"38","*":"39","+":"40","-":"41",".":"42","/":"43",":":"44"},encodeValue:function(n){for(var l,s,a,f,v=this,y=n.length%2!=0,e=[],o=[],h=[],c=0,t=0;t<n.length;t++)l=n.charAt(t),e[t]=v.encodingTable[l];for(t=0;t<e.length;t+=2)s=e[t],t+1<=e.length-1?(a=e[t+1],o[c]=i(45*s)+i(a)):o[c]=s,c++;for(t=0;t<o.length;t++)f=u(o[t]),y&&t===o.length-1?(f=r(f,6),h[t]=f):(f=r(f,11),h[t]=f);return h.join("")}});s.addMode(d);var rt=p.extend({init:function(n){var t=this,i=n.style;t.options=n;t.size=n.size-2*i.padding;c||f.namespaces.sqrv||(f.namespaces.add("sqrv","urn:schemas-microsoft-com:vml","#default#VML"),f.createStyleSheet().cssText="sqrv\\:fill, sqrv\\:path, sqrv\\:shape, sqrv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},all:function(r){var e,s,k=this,u=k.size,tt=k.options,o=tt.style,f=u/r.length,h="",v=[],d=function(t){return n("<div/>").html(t).text()},y="",p=u>200?12:10,g=d(u>100?"&#68;&#101;&#109;&#111;&#32;&#86;&#101;&#114;&#115;&#105;&#111;&#110;":"&#68;&#101;&#109;&#111;"),nt=d("&#104;&#116;&#116;&#112;&#58;&#47;&#47;&#119;&#119;&#119;&#46;&#115;&#104;&#105;&#101;&#108;&#100;&#117;&#105;&#46;&#99;&#111;&#109;");for(t.guid(),o.padding&&(h+="margin:"+o.padding+"px;"),e=0;e<r.length;e++)for(s=0;s<r[e].length;s++)r[e][s]&&v.push({x:s*f,y:e*f});if(y+=c?'<text x="'+u+'" y="'+u+'" fill="#999999" text-anchor="end" font-size="'+p+'" style="cursor:pointer; z-index:0;" onClick="javascript: location.href = \''+nt+"'; margin:0; padding:0;\">"+g+"<\/text>":'<div style="position:absolute; display:block; width:'+u+"px; text-align:right; color:#999999; cursor:pointer; z-index:0; top:"+(u-p-2)+"px; left:0px; font-size:"+p+'px;"><a href="'+nt+'" style="color:#999999; text-decoration:none;">'+g+"<\/a><\/div>",c)return'<svg xmlns="'+w+'" version="1.1" width="'+u+'" height="'+u+'" shape-rendering="crispEdges"'+(h?' style="'+h+'" ':"")+">"+y+'<path d="'+l(v,function(n){return"M"+n.x+" "+n.y+" L"+(n.x+f)+" "+n.y+" L"+(n.x+f)+" "+(n.y+f)+" L"+n.x+" "+(n.y+f)+" z"}).join(" ")+'" fill="'+o.color+'" stroke="'+o.color+'" stroke-width="0" /><\/svg>';var b=1e4/u,a=i(f*b),it=l(v,function(n){var t=i(n.x*b),r=i(n.y*b);return"m"+t+","+r+" l"+(t+a)+","+r+","+(t+a)+","+(r+a)+","+t+","+(r+a)}).join(" ")+" e";return'<sqrv:shape style="z-index:200; position:absolute; width:'+u+"px; height:"+u+"px; display:block; "+h+'" coordsize="10000,10000" path="'+it+'" filled="t" fillcolor="'+o.color+'" stroked="f" strokecolor="'+o.color+'" strokeweight="0">'+y+"<\/sqrv:shape>"}}),g=h.extend({init:function(){h.fn.init.apply(this,arguments);var c,u=this,t=u.options,r=t.style,f=t.value,l=(t.mode+"").toLowerCase(),i=t.errorLevel,e=t.dieOnError,o=s.byMode(l),v=new rt(t);return n(u.element).css({background:r.background,borderColor:r.borderColor,borderStyle:r.borderStyle,borderWidth:r.borderWidth,width:t.size,height:t.size}),o?o.validate(f)?"L"!=i&&"M"!=i&&"Q"!=i&&"H"!=i?void a("Invalid errorLevel: "+i,e):(c=o.encode(f,i),void n(u.element).html(v.all(c))):void a("Invalid qrcode value: "+f,e):void a("Invalid qrcode mode: "+l,e)},destroy:function(){this.element.empty();h.fn.destroy.call(this)}});g.defaults={value:"",mode:"byte",errorLevel:"L",size:300,style:{background:null,borderColor:null,borderStyle:null,borderWidth:0,color:"#000000",padding:5}};t.ui.plugin("QRcode",g)}(jQuery,shield,this);!function(n,t,i,r){var vi,lt,yi,at,pi,vt,wi,yt,h=t.ui.Widget,rt=(t.Class,t.DataSource),bi=t.ui.Position,g=t.Constants.KeyCode,nt=t.strid,hr=document,ki=Math.abs,pt=Math.min,di=Math.max,f=n.proxy,cr=n.each,gi=n.map,nr=t.to,wt=nr.int,c=t.format,bt=t.error,p=t.is,u=p.defined,tr=p.string,kt=p.object,lr=p.func,ir=p["null"],ar=p.number,vr=t.is.boolean,l="id",b="role",dt="true",gt="false",ni="aria-valuenow",ti="aria-controls",ii="aria-expanded",rr="aria-disabled",ur="aria-describedby",fr="aria-selected",ri="single",yr="keydown",tt="mouseenter",ut="mouseleave",it="click",ui="focus",fi="blur",ei="change",ft="title",w="center",er="middle",e="left",o="right",k="up",d="down",a="top",v="bottom",s="horizontal",oi="vertical",pr="collapse",wr="expand",et="resize",ot="tabindex",y="disabled",st="suiaccitemindex",si="suiaccitemdata",or="suiaccitemloaded",hi="suiaccelparent",ci="suiaccelprev",ht={top:v,bottom:a,left:o,right:e,center:w},ct="sui-tooltip-title",sr="sui-tooltip-sto",li="sui-tooltip-hto",ai="sui-tooltip-target-hover";vi={cls:r,enabled:!0,visible:r,width:r,height:r,delay:100,filter:r,content:function(t){return n(t).data(ct)},position:a,trigger:tt,autoHide:!0,callout:!0,events:{}};lt=h.extend({init:function(){h.fn.init.apply(this,arguments);var o,p,k,s,c,t=this,i=t.options,y=i.content,r=i.position,d=i.cls,g=i.filter,l=i.trigger,rt=i.autoHide,ft=i.visible,et=i.width,ot=i.height,st=i.callout,ct=n(t.element),lt=nt();return!kt(y)||y.remote&&y.remote.url?(t._eventNS=".shieldTooltip"+t.getInstanceId(),t._currentTarget=null,t._tooltip=o=n('<div id="'+lt+'"/>').appendTo(hr.body),o.addClass("sui-tooltip"+(d?" "+d:"")),c={position:"absolute"},u(et)&&(c.width=et),u(ot)&&(c.height=ot),o.css(c),t._content=n('<div class="sui-tooltip-content"><\/div>').appendTo(o),rt||o.addClass("sui-tooltip-with-button").append('<div class="sui-tooltip-button">&times;<\/div>').click(f(t._hide,t,!0)),kt(r)?t._pos=r:(k=ht[r]?ht[r]:v,s=ht[r]?r:a,st&&r!=w&&(s+=s==e||s==a?"-5":"+5"),t._pos={source:k,target:s,overflow:"flipfit"}),st&&(t._pos.callback=f(t._posSet,t)),t._targets=p=g?ct.find(g):ct,t._showEvent=l,t._hideEvent=null,rt&&(l==tt||l==it?t._hideEvent=ut:l==ui&&(t._hideEvent=fi)),p.each(function(){var i=n(this);i.on(tt+t._eventNS,f(t._targetMouseEnter,t,i)).on(ut+t._eventNS,f(t._targetMouseLeave,t,i)).on(t._showEvent+t._eventNS,f(t._onShow,t,i,!0));t._hideEvent&&i.on(t._hideEvent+t._eventNS,f(t._onHide,t,i,!0));i.attr(ur,lt)}),t._destroyed=!1,o.attr(b,"tooltip"),t.enabled(!!i.enabled),void(u(ft)&&t.visible(ft))):void bt("shieldTooltip: Invalid content options",i.dieOnError)},_targetMouseEnter:function(n){n.addClass(ai);n.attr(ft)&&n.data(ct,n.attr(ft)).removeAttr(ft)},_targetMouseLeave:function(n){n.removeClass(ai);n.data(ct)&&n.attr(ft,n.data(ct))},_onShow:function(t,i){var r=this,u;r._enabled&&(u=(r._tooltip,setTimeout(f(r._show,r,t,i),r.options.delay)),t.one(ut,function(){var i=n(this),t=i.data(sr);t&&clearTimeout(t)}).data(sr,u))},_onHide:function(t,i){var r=this,u=r._tooltip,e=setTimeout(f(r._hide,r,i),50);u.one(tt,function(){var t=n(this),i=t.data(li);i&&(clearTimeout(i),t.data(li,null))}).one(ut,function(){setTimeout(function(){t.hasClass(ai)||r._hide(r,i)},50)}).data(li,e)},_show:function(n,t){var u,f,e,i=this,o=i.options,r=o.content,s=o.height,h=i._tooltip,c=i._content;i._destroyed||i._currentTarget!=n&&(t&&(e=i.trigger("show",{target:n}),e.isDefaultPrevented())||(tr(r)?u=r:kt(r)?r.remote.iframe?u='<iframe class="sui-tooltip-iframe" src="'+r.remote.url+'" style="border:none; border-width:0px; width:100%; height:'+(s?s+"px":"100%")+';"><\/iframe>':(f=!0,u=" "):lr(r)&&(u=r(n)),u&&(h.show(),i._currentTarget=n,f?c.load(r.remote.url):c.html(u),i._visible=!0,bi.Set(h,n,i._pos))))},_hide:function(t){var r,i=this;i._currentTarget&&(t&&(r=i.trigger("hide"),r.isDefaultPrevented())||(n(i._tooltip).hide().find(".sui-tooltip-callout-container").remove(),i._currentTarget=null,i._visible=!1))},_posSet:function(r){var it,f,h,k,c,d,g,u,rt=this,ft=rt.options,ut=rt._tooltip,y=r.horizontal,b=r.vertical,s=(r.important,r.element),l=r.target,nt=s.width,tt=s.height,p=6;if(ft.callout){if(y==w&&b==er)return;if(y==w||b==er)f=y==w?b:y,k=ht[f],h={source:k,target:f+(k==v||k==o?"+1":"-1")};else if(c=t.ui.Util.GetWithinInfo(i),y==e&&s.left-c.scrollLeft>3&&(f=e,h={source:o,target:e+"+1"}),y==o&&c.scrollLeft+c.width-s.left-s.width>3&&(f=o,h={source:e,target:o+"-1"}),f&&(d=s.top+tt/2,g=l.top+l.height-(l.top+l.height-c.scrollTop)/2,u=d-g,ki(u)>tt/2-p&&(u=u>0?tt/2-p:p-tt/2),0!==u&&(h.target+=" "+w+(u>0?"-"+u:"+"+u))),f||(b==a&&s.top-c.scrollTop>3&&(f=a,h={source:v,target:a+"+1"}),b==v&&c.scrollTop+c.height-s.top-s.height>3&&(f=v,h={source:a,target:v+"-1"}),f&&(d=s.left+nt/2,g=l.left+l.width-(l.left+l.width-c.scrollLeft)/2,u=d-g,ki(u)>nt/2-p&&(u=u>0?nt/2-p:p-nt/2),0!==u&&(h.target=w+(u>0?"-"+u:"+"+u)+" "+h.target))),!f)return;it=n('<div class="sui-tooltip-callout-container"><div class="sui-tooltip-callout sui-tooltip-callout-'+f+'"><\/div>').appendTo(ut);bi.Set(it,ut,h)}},visible:function(){var t,n=this,i=[].slice.call(arguments);if(!n._destroyed)return i.length>0?(t=!!i[0],t?n._show(i[1]):n._hide(),n._visible=t,void 0):n._visible},enabled:function(){var n,t=this,i=[].slice.call(arguments);return i.length>0?(n=!!i[0],n||t.visible(!1),t._enabled=n,void 0):t._enabled},destroy:function(){var t=this,i=t._targets;t._destroyed=!0;i&&(i.each(function(){var i=n(this);i.off(t._eventNS)}),t._targets=null);n(t._tooltip).remove();h.fn.destroy.call(t)}});lt.defaults=vi;t.ui.plugin("Tooltip",lt);yi={cls:r,barSize:5,orientation:s,panes:r,events:{}};at=h.extend({init:function(){h.fn.init.apply(this,arguments);var e,t=this,o=t.options,c=o.cls,u=(o.orientation==s,n(t.element));u.addClass("sui-splitter-container"+(c?" "+c:""));"absolute"!==u.css("position")&&"relative"!==u.css("position")&&u.css({position:"relative"});u.css("width")===r&&u.css({width:"100%"});t._height=u.css("height")?u.css("height"):u.parent().innerHeight();u.css({height:t._height});t._children=e=u.children();t._offset=0;t._barSize=o.barSize;t._bars=[];t._dragBars=[];t._navigators=[];e.each(function(i){t._addPane(e,n(this),i)});n(i).on(et+".shieldSplitter"+t.getInstanceId(),f(t._adjust,t));t._adjust();t._adjustDraggables();t._manageCollapsedPanes()},_adjust:function(){var t=this,i=t.element,r=t._children.last(),u=t.options.orientation==s,f=(u?i.innerWidth():i.innerHeight())-t._offset+"px";i.children(".sui-splitter-pane-horizontal, .sui-splitter-dragbar-horizontal, .sui-splitter-bar-horizontal").each(function(){n(this).outerHeight(n(this).parent().innerHeight())});u?r.outerWidth(f):r.outerHeight(f)},_adjustHeights:function(t,i){var r=this,u=r.options.orientation==s;u?(t.children(".sui-splitter-collapsible-vertical-up, .sui-splitter-collapsible-vertical-down").each(function(){var t=n(this);t.css({top:t.prev().innerWidth()/2})}),i.children(".sui-splitter-collapsible-vertical-up, .sui-splitter-collapsible-vertical-down").each(function(){var t=n(this);t.css({top:t.prev().innerWidth()/2})})):(t.children(".sui-splitter-pane-horizontal, .sui-splitter-dragbar, .sui-splitter-bar").each(function(){n(this).outerHeight(n(this).parent().innerHeight())}),i.children(".sui-splitter-pane-horizontal, .sui-splitter-dragbar, .sui-splitter-bar").each(function(){n(this).outerHeight(n(this).parent().innerHeight())}),t.children(".sui-splitter-collapsible-horizontal-left, .sui-splitter-collapsible-horizontal-right").each(function(){var t=n(this);t.css({top:t.prev().innerHeight()/2})}),i.children(".sui-splitter-collapsible-horizontal-left, .sui-splitter-collapsible-horizontal-right").each(function(){var t=n(this);t.css({top:t.prev().innerHeight()/2})}))},_adjustDraggables:function(){for(var f,a,h,i,l,c,e,b,v,y,p,w,u=this,o=u.options.orientation==s,t=0;t<u._dragBars.length;t++)u._dragBars[t]&&(a=u._dragBars[t],h=n(u._children[t]),i=n(u._children[t+1]),l=a.initialOptions,c=o?h.position().left:h.position().top,v=u._getPaneMin(t),v!==r&&(c+=v),y=u._getPaneMax(t+1),y!==r&&(f=o?i.position().left:i.position().top,b=o?i.innerWidth():i.innerHeight(),c=di(c,f-(y-b))),e=o?i.position().left+i.innerWidth():i.position().top+i.innerHeight(),p=u._getPaneMax(t),p!==r&&(f=o?h.position().left:h.position().top,e=pt(e,f+p)),w=u._getPaneMin(t+1),w!==r&&(f=o?i.position().left:i.position().top,e=pt(e,f+w)),l.min=c,l.max=e,a.refresh(l))},_createCollapseNavigator:function(t,i){var a,c,y,l,p,u=this,b=n(u.element),w=u.options,f=w.orientation,h=w.panes,v=f==s;l=h&&i<h.length&&h[i].collapsible;p=h&&i<h.length-1&&h[i+1].collapsible;(l||p)&&(a=v?l?e:o:l?k:d,c=n('<div class="sui-splitter-collapsible sui-splitter-collapsible-'+f+"-"+a+'"/>'),c.insertAfter(t),y={left:v?t.position().left+1:t.position().left+b.innerWidth()/2,top:v?t.position().top+t.innerHeight()/2:t.position().top+1},c.css(y),c.on(it,function(){var y=n(u._children[i]),v=n(u._children[i+1]),l=u._dragBars[i]?n(u._dragBars[i].element):r,c=u._navigators[i],a=c.navigator,p=c.direction,h=c.collapsed,s=c.delta;switch(l&&h&&l.show(),p){case e:h?y.show():(s=0===i?y.outerWidth():y.innerWidth(),y.hide());v.css({left:v.position().left+(h?s:-s)});t.css({left:t.position().left+(h?s:-s)});l&&l.css({left:l.position().left+(h?s:-s)});a.css({left:a.position().left+(h?s:-s)});v.outerWidth(v.outerWidth()+(h?-s:s));a.removeClass("sui-splitter-collapsible-"+f+"-"+(h?o:e));a.addClass("sui-splitter-collapsible-"+f+"-"+(h?e:o));c.collapsed=!h;c.delta=c.collapsed?s:0;break;case o:h?v.show():(s=v.innerWidth(),v.hide());t.css({left:t.position().left+(h?-s:s)});l&&l.css({left:l.position().left+(h?-s:s)});a.css({left:a.position().left+(h?-s:s)});y.outerWidth(y.outerWidth()+(h?-s:s));a.removeClass("sui-splitter-collapsible-"+f+"-"+(h?e:o));a.addClass("sui-splitter-collapsible-"+f+"-"+(h?o:e));c.collapsed=!h;c.delta=c.collapsed?s:0;break;case k:h?y.show():(s=0===i?y.outerHeight():y.innerHeight(),y.hide());v.css({top:v.position().top+(h?s:-s)});t.css({top:t.position().top+(h?s:-s)});l&&l.css({top:l.position().top+(h?s:-s)});a.css({top:a.position().top+(h?s:-s)});v.outerHeight(v.outerHeight()+(h?-s:s));a.removeClass("sui-splitter-collapsible-"+f+"-"+(h?d:k));a.addClass("sui-splitter-collapsible-"+f+"-"+(h?k:d));c.collapsed=!h;c.delta=c.collapsed?s:0;break;case d:h?v.show():(s=v.innerHeight(),v.hide());t.css({top:t.position().top+(h?-s:s)});l&&l.css({top:l.position().top+(h?-s:s)});a.css({top:a.position().top+(h?-s:s)});y.outerHeight(y.outerHeight()+(h?-s:s));a.removeClass("sui-splitter-collapsible-"+f+"-"+(h?k:d));a.addClass("sui-splitter-collapsible-"+f+"-"+(h?d:k));c.collapsed=!h;c.delta=c.collapsed?s:0}l&&c.collapsed&&l.hide();c.collapsed?u.trigger(pr,{paneIndex:i}):u.trigger(wr,{paneIndex:i});u._adjustHeights(y,v)}),u._navigators[i]={navigator:c,delta:0,direction:a,collapsed:!1,index:l?i:i+1})},_manageCollapsedPanes:function(){var i,r,f,n,t=this,u=t.options.panes;if(t._navigators)for(n=0;n<t._navigators.length;n++)i=t._navigators[n],r=i.index,f=i.navigator,u&&r<u.length&&u[r].collapsed&&f.trigger(it)},_getPaneSize:function(t){var f,u,i=this,e=i.options,r=e.panes,h=e.orientation==s,o=n(i.element);return r&&t<r.length&&(r[t].size||r[t].min)&&(u=r[t].size||r[t].min),u?i._getSize(u,"Invalid pane size")+"px":(f=h?o.innerWidth():o.innerHeight(),(f-(i._children.length-1)*i._barSize)/i._children.length)},_getPaneMin:function(n){var i,u=this,t=u.options.panes;return t&&n<t.length&&t[n].min&&(i=t[n].min),i?u._getSize(i,"Invalid min pane size!"):r},_getPaneMax:function(n){var i,u=this,t=u.options.panes;return t&&n<t.length&&t[n].max&&(i=t[n].max),i?u._getSize(i,"Invalid max pane size!"):r},_getSize:function(t,i){var f,u,r=this,o=r.options,h=o.orientation==s,e=n(r.element);if(f=h?e.innerWidth():e.innerHeight(),tr(t)&&"%"==t.charAt(t.length-1)){if(u=parseInt(t.substring(0,t.length-1),10),u>=100)throw i;t=(f-(r._children.length-1)*r._barSize)*u/100}else t=parseInt(t,10);return t},_addPane:function(i,u,f){var y,k,d,p,h,c,w,g,tt,e=this,it=e.options,o=it.orientation,a=o==s,v=it.panes,rt=v&&f<v.length&&v[f].resizable===!1,ut=v&&f<v.length&&v[f].scrollable===!0;if(n(e.element),u.attr(l)||u.attr(l,nt()),u.addClass("sui-splitter-pane sui-splitter-pane-"+o),ut&&u.css({overflow:"auto"}),y=e._getPaneSize(f),k=e._getPaneMin(f),k!==r&&y<k)throw"Size less that min pane size!";if(d=e._getPaneMax(f),d!==r&&y>d)throw"Size bigger that max pane size!";p={left:(a?e._offset:0)+"px",top:(a?0:e._offset)+"px"};a?(p.width=y,p.height=e._height):p.height=y;u.css(p);f!=i.length-1&&(e._offset+=a?u.outerWidth():u.outerHeight(),h=n("<div>&nbsp;<\/div>").addClass("sui-unselectable sui-splitter-bar sui-splitter-bar-"+o),c={left:o==s?e._offset:0,top:o==oi?e._offset:0},a?(c.width=e._barSize,c.height=e._height):c.height=e._barSize,h.css(c),h.insertAfter(u),rt||(w=n("<div>&nbsp;<\/div>").addClass("sui-unselectable sui-splitter-dragbar sui-splitter-dragbar-"+o).css(c).insertAfter(h),w.attr(b,"separator").attr(ti,u.attr(l)).attr(ni,wt(o==s?u.width():u.height())),g={iframeFix:!0,direction:a?s:oi,stack:!1,events:{start:function(){var t=u,r=n(i[f+1]);t.addClass("sui-unselectable");r.addClass("sui-unselectable")},stop:function(t){var h,c=u,l=n(i[f+1]),v=e._bars[f],y=e._navigators[f],a=y?y.navigator:r;c.removeClass("sui-unselectable");l.removeClass("sui-unselectable");o==s?(h=t.left-v.position().left,c.width(c.width()+h),l.css({left:t.left+v.outerWidth()}),l.width(l.width()-h),w.attr(ni,wt(c.width())),a&&a.css({left:a.position().left+h})):(h=t.top-v.position().top,c.height(c.height()+h),l.css({top:t.top+v.outerHeight()}),l.height(l.height()-h),w.attr(ni,wt(c.height())),a&&a.css({top:a.position().top+h}));v.css({left:t.left,top:t.top});e._adjustHeights(c,l);e._adjustDraggables();e.trigger(et,{paneIndex:f})}}},tt=new t.ui.Draggable(w,g),e._dragBars[f]=tt),e._bars.push(h),e._createCollapseNavigator(h,f),e._offset+=e._barSize)},destroy:function(){var r,t=this,e=t.element,u,f;for(e.removeClass("sui-splitter-container"),n(i).off(et+".shieldSplitter"+t.getInstanceId()),r=0;r<t._children.length;r++)u=t._navigators[r],u&&(f=u.navigator,f.off(it));t._children=t._bars=t._dragBars=t._navigators=null;t._offset=t._height=t._barSize=0;h.fn.destroy.call(t)}});at.defaults=yi;t.ui.plugin("Splitter",at);pi={cls:r,enabled:!0,animation:{enabled:!0,duration:200},mode:ri,expanded:r,dataSource:r,titleTemplate:"{title}",contentTemplate:"{content}",width:r,height:r,maxHeight:r,events:{}};vt=h.extend({init:function(){h.fn.init.apply(this,arguments);var r,o,c,s,t=this,i=t.options,l=i.cls,v=i.dieOnError,a=i.dataSource,e=(i.expanded,n(t.element));if(t._original=r=n(t.element),t._tagname=c=r.prop("tagName").toLowerCase(),r.wrap("<span/>"),r.hide(),t.element=e=n('<ul class="sui-accordion'+(l?" "+l:"")+'"/>').on(ui,function(){t.trigger(ui)}).on(fi,function(){t.trigger(fi)}),r.after(e),o=r.attr(ot),e.attr(ot,u(o)?o:"0"),u(i.width)&&e.css("width",i.width),u(i.height)&&e.css("height",i.height),u(i.maxHeight)&&e.css("max-height",i.maxHeight),a)t.dataSource=rt.create(a);else{if("ul"!==c)return t.destroy(),void bt("shieldAccordion: No dataSource or underlying UL element found.",v);s=function(t){var i=[];return n(t).children("li").each(function(){var t={title:n(this).children("h1, h2, h3, h4, h5, h6").first().html(),content:n(this).children("div, p").first()};n(this).children("ul").length>0&&(t.items=s(n(this).children("ul")[0]));i.push(t)}),i};t.dataSource=rt.create({data:r,schema:{parse:s}});t.options.contentTemplate=function(n,i,r){t._moveElement(n.content,r)};t._fromUL=!0}t.dataSource.on(ei+".shieldAccordion"+t.getInstanceId(),f(t._dsChange,t));t.dataSource.read()},refresh:function(n){this.refreshWithElement(this._original,n)},_dsChange:function(){var n=this,t=n.options;n._render();n._dsLoadedOnce||(n._dsLoadedOnce=!0,u(t.expanded)?n.expanded(t.expanded):n.dataSource.view&&n.dataSource.view.length>0&&n.expanded(0),n.enabled(t.enabled))},_moveElement:function(t,i){n(t).data(hi,n(t).parent()).data(ci,n(t).prev()).addClass("sui-accordion-elm").appendTo(i)},_restoreElement:function(t){var i=n(t).data(ci),r=n(t).data(hi);n(i).length>0?n(t).insertAfter(i):n(t).prependTo(r);n(t).removeData(hi).removeData(ci).removeClass("sui-accordion-elm")},_restoreAll:function(){var t=this;n(t.element).find(".sui-accordion-elm").each(function(){t._restoreElement(n(this))})},_render:function(){var i=this,t=i.options,r=i.dataSource.view,f=n(i.element),e=r.length;f.empty();r&&cr(r,function(r,o){var s,h,a,w,y=nt(),v=n('<li class="sui-accordion-item '+(r+1>=e?"sui-accordion-item-last ":"")+'sui-accordion-item-collapsed"/>').data(st,r).data(si,o).appendTo(f);h=n('<div class="sui-accordion-item-title"/>').click(function(){i._enabled&&i._itemClick(n(v))}).appendTo(v);s=c.call(i,t.titleTemplate,o,r,h);u(s)&&!ir(s)&&h.html(s);a=n('<div class="sui-accordion-item-body"/>').appendTo(v).hide();h.attr(b,"button").attr(ti,y).attr(ii,gt);a.attr(l,y);w=n('<div class="sui-accordion-item-body-content"/>').appendTo(a);p.array(o.items)&&o.items.length>0&&n("<div/>").appendTo(a).shieldAccordion({cls:"sui-accordion-item-body-items "+(t.cls?" "+t.cls:""),enabled:t.enabled,animation:t.animation,mode:t.mode,dataSource:{data:o.items},titleTemplate:t.titleTemplate,contentTemplate:t.contentTemplate,events:t.events})})},_itemClick:function(n){var t=this,r=t.options,i=n.hasClass("sui-accordion-item-collapsed");r.mode==ri?i&&(t._collapse(n.siblings(".sui-accordion-item").not(".sui-accordion-item-collapsed").first(),!1,!0),t._expand(n,!1,!1)):i?t._expand(n,!1,!1):t._collapse(n,!1,!1)},_expand:function(t,i,r){var f,o,s,l,h=this,e=h.options,p=e.animation.enabled&&!i,w=e.animation.duration,a=n(t).children(".sui-accordion-item-body").first(),v=t.data(st),y=t.data(si);!r&&(l=h.trigger("expand",{item:y,index:v,element:t}),l.isDefaultPrevented())||(1!==t.data(or)&&(t.data(or,1),s=t.children(".sui-accordion-item-body").first().children(".sui-accordion-item-body-content").first(),f=c.call(h,e.contentTemplate,y,v,s),u(f)&&!ir(f)&&s.html(f)),t.removeClass("sui-accordion-item-collapsed").addClass("sui-accordion-item-expanded"),o=n(t).children(".sui-accordion-item-title").first(),o.attr(ii,dt),e.mode==ri&&o.attr(rr,dt),p?a.slideDown(w):a.show())},_collapse:function(t,i,r){var u,f=this,e=f.options,s=e.animation.enabled&&!i,h=e.animation.duration,o=n(t).children(".sui-accordion-item-body").first(),c=t.data(st),l=t.data(si);!r&&(u=f.trigger("collapse",{item:l,index:c,element:t}),u.isDefaultPrevented())||(t.removeClass("sui-accordion-item-expanded").addClass("sui-accordion-item-collapsed"),n(t).children(".sui-accordion-item-title").first().attr(ii,gt).removeAttr(rr),s?o.slideUp(h):o.hide())},expanded:function(){var e,o,r,f,i=this,s=n(i.element),t=(i._original,[].slice.call(arguments));return t.length>0?(e=nr.array(t[0]),o=!u(t[1])||!!t[1],r=!u(t[2])||!!t[2],f=s.children(),gi(e,function(t){t>=0&&(o?i._expand(n(f[t]),r,!0):i._collapse(n(f[t]),r,!0))}),void 0):gi(s.children(".sui-accordion-item").not(".sui-accordion-item-collapsed"),function(n){return n.data(st)})},enabled:function(){var i,t=this,r=n(t.element),u=t._original,f=[].slice.call(arguments);return f.length>0?(i=!!f[0],i?(r.removeAttr(y).removeClass("sui-accordion-disabled"),u.removeAttr(y)):(r.attr(y,y).addClass("sui-accordion-disabled"),u.attr(y,y)),t._enabled=i,void 0):t._enabled},destroy:function(){var t=this;t.dataSource&&t.dataSource.off(".shieldAccordion"+t.getInstanceId());t._restoreAll();n(t.element).remove();t._original&&t._original.unwrap().show();t._original=t._dsLoadedOnce=t._fromUL=t._currItemEl=r;h.fn.destroy.call(t)}});vt.defaults=pi;t.ui.plugin("Accordion",vt);wi={cls:r,active:r,collapsible:!1,animation:{enabled:!0,activateDuration:160,deactivateDuration:60},titleTemplate:"{title}",titleClsTemplate:"{titleCls}",itemClsTemplate:"{itemCls}",hrefTemplate:"{href}",contentTemplate:"{content}",disabledTemplate:"{disabled}",iconUrlTemplate:"{iconUrl}",iconClsTemplate:"{iconCls}",position:a,dataSource:r,readDataSource:!0,trigger:it,events:{}};yt=h.extend({init:function(){h.fn.init.apply(this,arguments);var l,t=this,r=n(t.element),s=n(r).children("ul, ol").first(),c=t.options,a=c.position,w=c.dieOnError,v=c.dataSource,p=c.cls;if(l=t._eventNS=".shieldTabs"+t.getInstanceId(),s.length<=0?(s=null,t._noTabList=!0):t._noTabList=!1,t._tabList=s,r.addClass("sui-tabs sui-tabs-"+a+(p?" "+p:"")),r.on(yr+l,f(t._keydown,t)),v)t.dataSource=rt.create(v);else{if(!s)return t.destroy(),void bt("shieldTabs: No dataSource or tabs UL element found.",w);t.dataSource=rt.create({data:s,schema:{parse:function(t){var i=[];return n(t).children("li").each(function(){var t=n(this),r={title:t.html(),titleCls:t.attr("data-title-class"),itemCls:t.attr("data-item-class"),href:t.attr("data-href"),disabled:t.attr("data-disabled")?!!t.attr("data-disabled"):u(t.attr(y))&&null!==t.attr(y),iconUrl:t.attr("data-icon-url"),iconCls:t.attr("data-icon-cls")};i.push(r)}),i}}})}n(i).on(et+l,f(t._adjustTabListHeight,t));n(r).children("div").hide();t.dataSource.on(ei+l,f(t._dsChange,t));r.attr(b,"tablist");a!=e&&a!=o||r.attr("aria-orientation",oi);v&&!c.readDataSource||t.dataSource.read()},_dsChange:function(){this._render()},_getItemIcon:function(t){var i,f=this.options,u=c(f.iconUrlTemplate,t);return u&&"undefined"!==u?n('<span class="sui-tabs-tab-icon"/>').append('<img src="'+u+'"/>'):(i=c(f.iconClsTemplate,t),i&&"undefined"!==i?n('<span class="sui-tabs-tab-icon"/>').addClass(i):r)},_render:function(){var p,t,w,a,y,i=this,o=n(i.element),s=i.options,h=s.active,e=i._tabList,g=i.dataSource.view||[],tt=g.length,d=[];if(i._initialized&&(n(e).remove(),n(o).children("div").remove(),i._tabList=e=i._divs=p=r),!e)for(i._tabList=e=n("<ul/>").prependTo(o),t=0;t<tt;t++)y=g[t],e.append(n("<li/>").append(i._getItemIcon(y),'<span class="sui-tabs-tab-text">'+c(s.titleTemplate,y)+"<\/span>"));if(s.position==v&&e.appendTo(o),e.addClass("sui-tabs-tablist"+(s.collapsible?" sui-tabs-tablist-collapsible":"")),e.children("li").each(function(){n(this).attr(l)||n(this).attr(l,nt());n(this).attr(b,"tab")}),i._initialized||u(o.attr(ot))||o.attr(ot,"0"),i._tabListHeight=e.outerHeight(),n(o).children("div").length<=0)for(t=0;t<tt;t++)n(o).append('<div class="sui-tabs-cust"/>');for(i._divs=p=n(o).children("div"),n(p).addClass("sui-tabs-item"),n(p).hide(),t=0;t<tt;t++){y=g[t];w=e.children("li:eq("+t+")");a=n(p[t]);var it=c(s.titleClsTemplate,y),rt=c(s.itemClsTemplate,y),k=c(s.disabledTemplate,y);it&&"undefined"!==it&&w.addClass(it);rt&&"undefined"!==rt&&a.addClass(rt);(vr(k)&&k||"true"===k||"1"===k||1===k)&&d.push(t);w.on(s.trigger+i._eventNS,f(i._select,i,t,w,a));a.attr(b,"tabpanel").attr(ur,w.attr(l));a.attr(l)||a.attr(l,nt());w.attr(ti,a.attr(l))}if(i._initialized=!0,h!==!1&&(h=ar(h)?h:0,h=di(0,pt(h,p.length-1)),i._selectedIndex=h,i._activate(h,!0,!1)),d.length>0)for(t=0;t<d.length;t++)i.enabled(d[t],!1)},_select:function(t,i,r){var f,e,o,u=this,s=u.options,h=s.collapsible,c=u.dataSource.view||[];u.enabled(t)&&(t!==u._selectedIndex||h)&&(i=i||n(u._tabList).children("li:eq("+t+")"),r=r||n(u._divs[t]),f=n(i).hasClass("sui-tabs-tab-active"),e=!(f&&h&&s.trigger!==tt),o=u.trigger("select",{tab:i,content:r,active:f,activate:e,index:t,item:c[t]}),o.isDefaultPrevented()||(u._selectedIndex=t,u._activate(t,e,!0,i,r)))},_activate:function(t,i,f,e,o){var h,k,l,a,v,y,s=this,p=s.options,w=p.animation,b=w.enabled,d=s.dataSource.view||[];s.enabled(t)&&(i||t===s._activeIndex)&&(e=e||n(s._tabList).children("li:eq("+t+")"),o=o||n(s._divs[t]),h=d[t],n(s._divs).stop(!0,!0),n(s._tabList).children("li").removeClass("sui-tabs-tab-active").attr(fr,gt),v=function(){y=function(){f&&(k=s.trigger("activate",{tab:e,content:o,active:i,index:t,item:h}));s._adjustTabListHeight()};i?(s._activeIndex=t,n(e).addClass("sui-tabs-tab-active").attr(fr,dt),l=c(p.hrefTemplate,h),l&&"undefined"!==l?n(o).load(l,r,function(n,r,u){s.trigger("load",{responseText:n,textStatus:r,jqXHR:u,tab:e,content:o,active:i,index:t,item:h});s._adjustTabListHeight()}):(a=c(p.contentTemplate,h),a&&"undefined"!==a&&n(o).html(a)),n(o).fadeIn(b?w.activateDuration:0,y)):(s._activeIndex=r,y())},u(s._activeIndex)?n(s._divs).each(function(t){t!==s._activeIndex?n(this).hide():n(this).fadeOut(b?w.deactivateDuration:0,v)}):v())},_adjustTabListHeight:function(){var i,r,u,t=this,f=t.options.position;(f==e||f==o&&t._divs&&t._divs[t._activeIndex])&&(i=n(t._tabList),r=n(t._divs[t._activeIndex]).innerHeight(),i.css("min-height",r),u=n(i.children("li").last()),t._tabListHeight>=r?u.addClass("sui-tabs-tab-last-bottom"):u.removeClass("sui-tabs-tab-last-bottom"))},_keydown:function(t){var r,i=this;if(n(i.element)[0]===n(t.target)[0]){switch(t.keyCode){case g.UP:case g.LEFT:i._selectPrevNext(t,!0);r=!0;break;case g.DOWN:case g.RIGHT:i._selectPrevNext(t,!1);r=!0;break;case g.SPACE:i.options.collapsible&&i._toggleCurrent(t);r=!0}r&&t.preventDefault()}},_toggleCurrent:function(){var n=this,t=n._selectedIndex;u(t)&&n._activate(t,t!==n._activeIndex,!0)},_selectPrevNext:function(n,t){var i=this,f=i._selectedIndex,r=u(f)?t?i._getPrevSelectableIndex():i._getNextSelectableIndex():i._getFirstSelectableIndex();u(r)&&r!==f&&i._select(r)},_getFirstSelectableIndex:function(){var t,i=this;return n(i._tabList).children("li").each(function(n){if(i.enabled(n))return t=n,!1}),t},_getNextSelectableIndex:function(){var t,i=this,u=i._selectedIndex,e=n(i._tabList).children("li"),f=e.length;if(u<f-1)for(t=u+1;t<f;t++)if(i.enabled(t))return t;if(u>0)for(t=0;t<u;t++)if(i.enabled(t))return t;return r},_getPrevSelectableIndex:function(){var t,i=this,u=i._selectedIndex,e=n(i._tabList).children("li"),f=e.length;if(u>0)for(t=u-1;t>=0;t--)if(i.enabled(t))return t;if(u<f-1)for(t=f-1;t>u;t--)if(i.enabled(t))return t;return r},enabled:function(){var t,r=this,i=[].slice.call(arguments),u=i[0];if(t=n(r._tabList).children("li:eq("+u+")"),t.length>0){if(!(i.length>1))return!n(t).hasClass("sui-tabs-tab-disabled");i[1]?n(t).removeClass("sui-tabs-tab-disabled"):n(t).addClass("sui-tabs-tab-disabled")}},enabledIndices:function(){var i=this,t=[];return n(i._tabList).children("li").each(function(i){n(this).hasClass("sui-tabs-tab-disabled")||t.push(i)}),t},active:function(){var t=this,n=[].slice.call(arguments);return n.length>0?void t._activate(n[0],n[1],!1):t._activeIndex},content:function(t){return n(this._divs)[t]},destroy:function(){var t=this,u=n(t.element),o=t.options,s=o.cls,f=t._tabList,e=t._eventNS;t.dataSource&&t.dataSource.off(ei+e);n(i).off(e);n(u).removeClass("sui-tabs sui-tabs-"+o.position+(s?" "+s:""));n(u).children("div").removeClass("sui-tabs-item");n(u).children(".sui-tabs-cust").remove();t._divs=null;n(f).children("li").removeClass("sui-unselectable").off(e);n(f).removeClass("sui-tabs-tablist");t._noTabList&&n(f).remove();t._tabList=t._noTabList=t._activeIndex=t._selectedIndex=t._initialized=t._tabListHeight=r;h.fn.destroy.call(t)}});yt.defaults=wi;t.ui.plugin("Tabs",yt)}(jQuery,shield,this);!function(n,t,i){var o,u,f=t.ui.Widget,e=document,r=Math.ceil,h=navigator.userAgent,c=i.opera,l=/msie/i.test(h)&&!c,s=l&&7===e.documentMode;n.extend;o={show:!1,showImage:!0,text:null,template:null,useSmallImage:!1};u=f.extend({init:function(){var n=this;f.fn.init.apply(n,arguments);n.refresh();n.options.show?n.show():n.hide()},destroy:function(){var t=this;n(t.mainElement).remove();t.options.showImage&&(n(t.loadingImage).remove(),t.loadingImage=null);t.loadingText&&(n(t.loadingText).remove(),t.loadingText=null);n(t.backgroundElement).remove();t.mainElement=t.backgroundElement=null;f.fn.destroy.call(t)},_render:function(){var u,t=this,f=t.options,i=f.template,c,l,o,h;(t.mainElement=u=n("<div/>").appendTo(e.body),u.addClass("sui-loading-panel"),s&&u.addClass("sui-loading-panel-ie7"),i)?(i=n(i.replace(/^\s+/,"").replace(/\s+$/,"")),i.appendTo(e.body),c=r((t.element.height()-i.height())/2),l=r((t.element.width()-i.width())/2),i.css({"z-index":"inherit",position:"relative",dispaly:"block",top:c+"px",left:l+"px"}).appendTo(u),t.template=i):(f.showImage&&(o=n("<span/>").appendTo(u),t.loadingImage=o,f.useSmallImage?o.addClass("sui-loading-image-small"):o.addClass("sui-loading-image")),f.text&&t._generateTextElement());h=n("<span/>").appendTo(u);t.backgroundElement=h;h.addClass("sui-loading-back");t._setPosition()},_generateTextElement:function(){var t=this,i=n("<span/>").appendTo(t.mainElement);i.get(0).innerHTML=t.options.text;i.addClass("sui-loading-text");t.loadingText=i},refresh:function(){var n=this,t=(n.options,!n.mainElement||"none"==n.mainElement.css("display"));n.destroy();n._render();t?n.hide():n.show()},_setPosition:function(){var n=this,f=(n.options,n.element),u=f.offset(),i=t.ui.Util.GetMaxZIndex("div")+1;n.mainElement.css({left:r(u.left)+"px",top:r(u.top)+"px","z-index":i});s&&(n.loadingText&&n.loadingText.css({"z-index":i+1}),n.loadingImage&&n.loadingImage.css({"z-index":i+1}),n.template&&n.template.css("z-index",i+1))},_setElementsPosition:function(){var n=this,f=n.element.height(),t=n.loadingImage,i=n.loadingText,e=t?t.height():0,o=i?i.height():0,u=r((f-e-o)/2);t&&n.loadingImage.css("top",u+"px");i&&n.loadingText.css("top",u+"px")},show:function(){var n=this,i=n.options,t=n.element;n.mainElement.width(t.get(0).offsetWidth);n.mainElement.height(t.get(0).offsetHeight);n._setPosition();n.mainElement.css("display","");i.template||n._setElementsPosition()},hide:function(){this.mainElement.css("display","none")},setText:function(n){this.options.text=n;this.refresh()}});u.defaults=o;t.ui.plugin("LoadingPanel",u)}(jQuery,shield,this);!function(n,t,i,r){var s=t.ui.Widget,d=(t.Class,t.Constants),e=document,v=d.SVG_NS,y=!!e.createElementNS&&!!e.createElementNS(v,"svg").createSVGRect,g=(n.map,n.each,n.proxy),h=t.to.int,nt=(t.is.func,t.error,Math.min),tt=Math.max,c="disabled",u="px",p="float",o="left",l="right",a="horizontal",w="vertical",f="circular",b=function(n,t,i,r){var u=(r-90)*Math.PI/180;return{x:n+i*Math.cos(u),y:t+i*Math.sin(u)}},it=function(n,t,i,r,u){var f=b(n,t,i,u),e=b(n,t,i,r),o=u-r<=180?"0":"1";return["M",f.x,f.y,"A",i,i,0,o,0,e.x,e.y].join(" ")},rt={cls:r,enabled:!0,min:0,max:100,value:0,layout:a,layoutOptions:{circular:{width:30,color:"#197BB5",colorDisabled:"#C4C4C4",borderColor:"#C4C4C4",borderWidth:1,backgroundColor:"#FFFFFF"}},reversed:!1,text:{enabled:!1,template:"{0}"},events:{}},k=s.extend({init:function(){s.fn.init.apply(this,arguments);var r,t=this,u=n(t.element),h=t.options,c=h.layout,v=h.cls;t._eventNS=".shieldProgressbar"+t.getInstanceId();u.addClass("sui-progressbar");c===w?u.addClass("sui-progressbar-vertical"):c===f&&u.addClass("sui-progressbar-circular");c!==f&&(t.inner=n("<div/>").addClass("sui-progressbar-value").appendTo(u));v&&u.addClass(v);c===a?(r=t.inner.css(p)||o,r=h.reversed?r===o?l:o:r===l?l:o,t.inner.css(p,r)):c==f&&(y||e.namespaces.scvprogressbar||e.namespaces.add("scvprogressbar","urn:schemas-microsoft-com:vml","#default#VML"));n(i).on("resize"+t._eventNS,g(t._winResize,t));t._value=h.value;t._render();t.enabled(h.enabled)},_winResize:function(){this._render()},_render:function(){var ft,ct,lt,r=this,l=r.options,nt=l.layout,at=l.reversed,et=l.min,ot=l.max,tt=r._value,vt=l.text,d=n(r.element),p=d.width(),e=d.height(),yt=r.inner,pt=ot-et,wt=h(100*(tt-et)/pt);if(nt===w)ft=h(wt*e/100),yt.css({width:"100%",height:ft+u,"margin-top":(at?"0":e-ft)+u});else if(nt===a)yt.css({width:wt+"%",height:e+u});else{if(nt!==f)return;var i="",b=l.layoutOptions[nt],rt=b.width,st=b.borderWidth,ut=r._enabled?b.color:b.colorDisabled,bt=b.borderColor,kt=b.backgroundColor,o=p/2,s=e/2,g=(p>e?s:o)-rt/2-1,c=2*g,dt=h(360*(tt-et)/pt),ht=at?360-dt:0,gt=ht+dt,k=rt-2*st;y?(i='<svg xmlns="'+v+'" version="1.1" width="'+p+'" height="'+e+'">',st>0&&(i+='<circle cx="'+o+'" cy="'+s+'" r="'+g+'" stroke="'+bt+'" stroke-width="'+rt+'" fill="none" />'),tt>=ot?i+='<circle cx="'+o+'" cy="'+s+'" r="'+g+'" stroke="'+ut+'" stroke-width="'+k+'" fill="none" />':(i+='<circle cx="'+o+'" cy="'+s+'" r="'+g+'" stroke="'+kt+'" stroke-width="'+k+'" fill="none" />',i+='<path d="'+it(o,s,g,ht,gt)+'" stroke="'+ut+'" stroke-width="'+k+'" fill="none" />'),i+="<\/svg>"):(i+='<scvprogressbar:group style="width:'+p+"px; height:"+e+'px;" coordsize="'+p+","+e+'">',st>0&&(i+='<scvprogressbar:oval style="width:'+c+"px; height:"+c+"px; position:relative; top:"+s+"px; left:"+o+'px;" strokeweight="'+rt+'px" strokecolor="'+bt+'" fill="false"><scvprogressbar:fill opacity="0%" color="transparent" /><\/scvprogressbar:oval>'),tt>=ot?i+='<scvprogressbar:oval style="width:'+c+"px; height:"+c+"px; position:relative; top:"+s+"px; left:"+o+'px;" strokeweight="'+k+'px" strokecolor="'+ut+'" fill="false"><scvprogressbar:fill opacity="0%" color="transparent" /><\/scvprogressbar:oval>':(i+='<scvprogressbar:oval style="width:'+c+"px; height:"+c+"px; position:relative; top:"+s+"px; left:"+o+'px;" strokeweight="'+k+'px" strokecolor="'+kt+'" fill="false"><scvprogressbar:fill opacity="0%" color="transparent" /><\/scvprogressbar:oval>',i+='<scvprogressbar:arc style="width:'+c+"px; height:"+c+"px; position:relative; top:"+s+"px; left:"+o+'px;" fill="false" strokeweight="'+k+'px" strokecolor="'+ut+'" startangle="'+ht+'" endangle="'+gt+'"><scvprogressbar:fill opacity="0%" color="transparent" /><\/scvprogressbar:arc>'),i+="<\/scvprogressbar:group>");d.html(i)}vt.enabled&&(d.find(".sui-progressbar-text").remove(),r.text=n('<div class="sui-progressbar-text" />').appendTo(d).html(t.format.call(r,vt.template,r._value)),ct=r.text.width(),lt=r.text.height(),r.text.css({top:(e-lt)/2+u,left:(p-ct)/2+u}))},value:function(){var t,n=this,i=n.options,r=[].slice.call(arguments),u;if(!(r.length>0))return n._value;n._enabled&&(t=tt(nt(r[0],i.max),i.min),u=n.trigger("change",{value:t}),u.isDefaultPrevented()||(n._value=t,n._render(),t>=i.max&&n.trigger("complete")))},enabled:function(){var i,t=this,r=n(t.element),u=[].slice.call(arguments);return u.length>0?(i=!!u[0],i?r.removeAttr(c).removeClass("sui-progressbar-disabled"):r.attr(c,c).addClass("sui-progressbar-disabled"),t._enabled=i,t.options.layout==f&&t._render(),void 0):t._enabled},destroy:function(){var t=this,r=t.options.cls;n(i).off(t._eventNS);n(t.element).removeClass("sui-progressbar sui-progressbar-disabled sui-progressbar-vertical sui-progressbar-circular"+(r?" "+r:"")).empty();s.fn.destroy.call(t)}});k.defaults=rt;t.ui.plugin("ProgressBar",k)}(jQuery,shield,this);!function(n,t,i,r){var tt,b,st,it,y,k,h=t.ui.Widget,ht=(t.Class,t.DataSource),ct=t.ui.Position,c=t.Constants.KeyCode,ni=t.strid,d=document,f=n.proxy,ti=n.each,lt=n.grep,at=n.extend,ii=t.error,ri=t.format,u=t.is.defined,rt=t.is.boolean,ui=t.is.integer,fi=t.is.func,vt="id",ut="role",ft="true",yt="false",g="aria-expanded",et="aria-activedescendant",e="horizontal",o="vertical",ei="click",ot="focus",pt="blur",wt="change",oi="keydown",bt="tabindex",kt="disabled",dt="sui-menu-item-level",l="sui-menu-item-expanded",nt="sui-menu-item-disabled",a="sui-menu-item-selected",gt="sui-menu-item-index",p="sui-menu-item-hover",s="sui-menu-item-data-item",w="sui-menu-item-parent",v="sui-menu-item-cc",si="sui-menu-item-cc-parent";tt={cls:r,width:r,height:r,dataSource:r,readDataSource:!0,orientation:e,delay:100,animation:{enabled:!0,openDelay:100,closeDelay:50},contentTemplate:"{content}",overflow:"flipfit",events:{}};b=h.extend({init:function(){h.fn.init.apply(this,arguments);var o,c,a,l,s,i=this,e=n(i.element),r=i.options,b=r.dieOnError,v=r.dataSource,y=r.cls,p=r.renderToINTERNAL,w=r.wrapOriginalINTERNAL,k=!u(w)||w;if(i._original=o=n(i.element),i._tagname=a=o.prop("tagName").toLowerCase(),i._isContext=r.isContextINTERNAL,s=i._eventNS=".shieldMenu"+i.getInstanceId(),k?(i.wrapper=o.wrap("<div/>").parent(),i._isWrapped=!0):i._isWrapped=!1,o.hide(),i.element=e=n('<ul class="sui-menu sui-menu-top sui-menu-'+r.orientation+(y?" "+y:"")+'"/>').on(ot+s,f(i._focus,i)).on(pt+s,f(i._blur,i)).on(oi+s,f(i._keydown,i)),n(p).length>0?n(p).append(e):o.after(e),u(r.width)&&e.css("width",r.width),u(r.minWidth)&&e.css("minWidth",r.minWidth),u(r.height)&&e.css("height",r.height),c=o.attr(bt),e.attr(bt,u(c)?c:"0"),i._isRtl=t.support.isRtl(e),v)i.dataSource=ht.create(v);else{if("ul"!==a)return i.destroy(),void ii("shieldMenu: No dataSource or underlying UL element found.",b);l=function(t){var i=[];return n(t).children("li").each(function(){var t=n(this),r=t.children("ul").length>0,f={cls:t.attr("data-class"),content:r?t.children().not("ul").first().html():t.html(),href:t.attr("data-href")?t.attr("data-href"):t.children().not("ul").first().attr("href"),disabled:t.attr("data-disabled")?t.attr("data-disabled"):u(t.attr(kt))&&null!==t.attr(kt),separator:"separator"===t.attr("data-role"),iconUrl:t.attr("data-icon-url"),iconCls:t.attr("data-icon-cls")};r&&(f.items=l(t.children("ul")[0]));i.push(f)}),i};i.dataSource=ht.create({data:o,schema:{parse:l}})}i.dataSource.on(wt+s,f(i._dsChange,i));e.attr(ut,i._isContext?"menu":"menubar").attr("aria-orientation",r.orientation);r.readDataSource&&i.dataSource.read()},refresh:function(n){this.refreshWithElement(this._original,n)},_isFocused:function(){return n(this.element).hasClass("sui-menu-focus")},_focus:function(){var t=this;t._blurTimeout&&(clearTimeout(t._blurTimeout),t._blurTimeout=null);t._isFocused()||(n(t.element).addClass("sui-menu-focus"),n(t.element).focus(),t.trigger(ot))},_blur:function(){var t=this;t._isFocused()&&(t._blurTimeout&&clearTimeout(t._blurTimeout),t._blurTimeout=setTimeout(function(){n(t.element).removeClass("sui-menu-focus");t._collapseAll();t._deselectAll();t.trigger(pt)},100))},_dsChange:function(){var n=this;n._renderItems(n.dataSource.view,n.element,0,null)},_getItemIcon:function(t){var i=n('<span class="sui-menu-item-icon"/>');return t.iconUrl?i.append('<img src="'+t.iconUrl+'"/>'):t.iconCls&&i.addClass(t.iconCls),i},_renderItems:function(i,r,u,h){for(var c,k,et,tt,y,a,b,st,it,g,ht,l=this,rt=l.options,ct=(i||[]).length,at=lt(i||[],function(n){return n.iconUrl||n.iconCls}).length>0,p=0;p<ct;p++)c=i[p],k=!!c.disabled,tt=c.href,y=c.separator,it=!y&&c.items&&c.items.length>0,st=c.iconUrl||c.iconCls,et=y?"&nbsp;":ri.call(l,rt.contentTemplate,c),b=n('<a class="sui-menu-item-link" '+(tt?'href="'+tt+'"':"")+' tabindex="-1"/>').append('<span class="sui-menu-item-text'+(it?" sui-menu-item-text-hc":"")+'">'+et+"<\/span>"),a=n('<li class="sui-menu-item sui-unselectable'+(k?" sui-menu-item-disabled":"")+(y?" sui-menu-item-separator":"")+(c.cls?" "+c.cls:"")+'"/>').on("selectstart",function(){return!1}).appendTo(r).data(s,c).data(w,h).data(dt,u).data(nt,k).data(gt,p).attr(ut,y?"separator":"menuitem").attr(vt,ni()).append(b),y?a.attr("aria-orientation",u>0||rt.orientation===o?e:o):k&&a.attr("aria-disabled",ft),b.click(f(l._itemClicked,l,a)).on(ot,f(l.focus,l)),!y&&at&&(u>0||st||rt.orientation===o)&&b.prepend(l._getItemIcon(c)),it&&(b.append('<span class="sui-menu-item-children-caret"/>'),g=n('<div class="sui-menu-submenu"/>').hide().data(si,a).appendTo(a),g.css("z-index",t.ui.Util.GetMaxZIndex(".sui-menu, .sui-menu-submenu",d.body)+1),ht=n('<ul class="sui-menu sui-menu-vertical"/>').attr(ut,"menu").appendTo(g),l._renderItems(c.items,ht,u+1,a),a.data(v,g).attr("aria-haspopup","true").hover(f(l._itemMouseEnter,l,a,!0),f(l._itemMouseLeave,l,a,!0)))},_itemMouseEnter:function(n,t){var i=this;n.addClass(p);setTimeout(function(){n.hasClass(p)&&i._itemExpand(n,t)},i.options.delay)},_itemMouseLeave:function(n,t){var i=this;n.removeClass(p);i._itemCollapse(n,!0,t)},_itemExpand:function(n,t,i){var a,r=this,f=r.options,o=f.animation,y=n.data(dt),u=n.data(v),c=0===y&&f.orientation===e,p=n.data(s),h=n.data(w);r._isExpandable(n)&&r._canHaveFocus(n)&&u&&(u.stop(!0,!0),h&&!r._isExpanded(h)&&r._itemExpand(h,!1,!0,!0),t&&(a=r.trigger("expand",{element:n,item:p})),c&&u.css("min-width",n.outerWidth()),u.show(),ct.Set(u,n,{source:"left top",target:c?"left bottom":"right top",overflow:f.overflow}),!i&&o&&o.enabled?u.hide().slideDown(o.openDelay,function(){n.data(l,!0).attr(g,ft)}):n.data(l,!0).attr(g,ft))},_itemCollapse:function(t,i,r,f){var a,e=this,c=e.options.animation,h=t.data(v),y=t.data(s),o=t.data(w);h&&(h.stop(!0,!0),r&&(a=e.trigger("collapse",{element:t,item:y})),i=!u(i)||!!i,n(h).find("ul").first().children().each(function(){var t=n(this);e._isExpanded(t)&&e._itemCollapse(t,i,!1,!0)}),!f&&c&&c.enabled?h.slideUp(c.closeDelay,function(){t.data(l,!1).attr(g,yt);i&&o&&!o.hasClass(p)&&e._itemCollapse(o,!0,!1,!0)}):(h.hide(),t.data(l,!1).attr(g,yt),i&&i&&o&&!o.hasClass(p)&&e._itemCollapse(o,!0,!1,!0)))},_collapseAll:function(){var t=this;n(t.element).children("li").each(function(){var i=n(this);t._isExpanded(i)&&t._itemCollapse(i,!1,!1,!0)})},_isExpandable:function(n){return!!n.data(v)},_isExpanded:function(n){return n.data(l)===!0},_hasExpanded:function(t){var i=this,r=t.data(v);return t.data(l)===!0&&lt(n(r).find("ul").first().children(),function(t){return i._isExpanded(n(t))||i._hasExpanded(n(t))}).length>0},_canHaveFocus:function(n){return!n.data(nt)&&!n.data(s).separator},_keydown:function(n){var i,t=this,r=!0;switch(n.keyCode){case c.UP:t._move("up",n);break;case c.DOWN:t._move("down",n);break;case c.LEFT:t._move("left",n);break;case c.RIGHT:t._move("right",n);break;case c.SPACE:case c.ENTER:i=t._getSelected();u(i)&&(t._isExpanded(i)||t._itemExpand(i,!0),t._itemClicked(i));break;default:r=!1}r&&n.preventDefault()},_getFirstSelectableItem:function(t){var i,r=this;return n(t).children("li").each(function(){var t=n(this);if(r._canHaveFocus(t))return i=t,!1}),i},_getNextSelectableItem:function(t){var r,i,e=this,s=t.parent(),u=t.index(),f=s.children("li"),o=f.length;if(u<o-1)for(i=u+1;i<o;i++)if(r=n(f[i]),e._canHaveFocus(r))return r;if(u>0)for(i=0;i<u;i++)if(r=n(f[i]),e._canHaveFocus(r))return r;return t},_getPrevSelectableItem:function(t){var r,i,e=this,s=t.parent(),u=t.index(),f=s.children("li"),o=f.length;if(u>0)for(i=u-1;i>=0;i--)if(r=n(f[i]),e._canHaveFocus(r))return r;if(u<o-1)for(i=o-1;i>u;i--)if(r=n(f[i]),e._canHaveFocus(r))return r;return t},_move:function(n){var l,h,c,t,f=this,i=f._getSelected();if(f._isRtl,u(i))if(l=i.parent().hasClass("sui-menu-vertical")?o:e,h=i.data(w),c=h?h.parent().hasClass("sui-menu-vertical")?o:e:r,l===e){if("up"===n)return void f._itemCollapse(i,!1,!0);if("down"===n){if(!f._isExpandable(i))return;f._itemExpand(i,!0);t=f._getFirstSelectableItem(i.find(".sui-menu-submenu > .sui-menu").first())}else if("left"===n){if(t=f._getPrevSelectableItem(i),t===i)return}else{if("right"!==n)return;if(t=f._getNextSelectableItem(i),t===i)return}}else if("up"===n){if(0===i.index()){if(h&&c===e)t=h,f._itemCollapse(t,!1,!0);else if(t=f._getPrevSelectableItem(i),t===i)return}else if(t=f._getPrevSelectableItem(i),t===i)return}else if("down"===n){if(t=f._getNextSelectableItem(i),t===i)return}else if("left"===n){if(!h||c!==o)return;t=h;f._itemCollapse(t,!1,!0)}else{if("right"!==n)return;if(!f._isExpandable(i))return;f._itemExpand(i,!0);t=f._getFirstSelectableItem(i.find(".sui-menu-submenu > .sui-menu").first())}else t=f._getFirstSelectableItem(f.element);u(t)&&(f._setSelected(t,!0),f.trigger("select",{element:t,item:t.data(s)}))},_deselectAll:function(){var i=this,t=i.element;n(t).find("."+a).each(function(){n(this).removeClass(a)});t.removeAttr(et)},_setSelected:function(t,i){var r=this,u=r.element;r._canHaveFocus(t)&&(i?(r._deselectAll(),n(t).addClass(a),u.attr(et,t.attr(vt))):(n(t).removeClass(a),u.removeAttr(et)))},_getSelected:function(){var i=this,t=n(i.element).find("."+a).first();return n(t).length>0?t:r},_isSelected:function(t){return n(t).hasClass(a)},_itemClicked:function(n,t){var u,r,i=this,f=n.data(s);t&&t.isPropagationStopped()||(i._focus(),i._canHaveFocus(n)&&(r={item:f},i._isContext&&(r.element=k),u=i.trigger(ei,r),t&&(t.stopPropagation(),u.isDefaultPrevented()&&t.preventDefault())))},_getItemByIndex:function(){var i,t,e=this,f=[].slice.call(arguments),u=r;if(f.length>0)for(t=0;t<f.length;t++)if((i=f[t],!ui(i))||(u=0===t?n(e.element).children("li:eq("+i+")"):n(n(u).data(v)).children("ul").first().children("li:eq("+i+")"),n(u).length<=0))return r;return u},_getItemIndex:function(n){var t=[];do t.unshift(n.data(gt)),n=n.data(w);while(n);return t},enabled:function(){var t,e=this,i=[].slice.call(arguments),f=rt(i[0])?i.shift():r;if(t=e._getItemByIndex.apply(this,i),u(t)){if(!u(f))return!t.data(nt);t.data(nt,!f);n(t)[f?"removeClass":"addClass"]("sui-menu-item-disabled")}},expanded:function(){var t,n=this,i=[].slice.call(arguments),f=rt(i[0])?i.shift():r;if(t=n._getItemByIndex.apply(this,i),u(t)){if(!u(f))return n._isExpanded(t);f?(n._collapseAll(),n._itemExpand(t,!1)):n._itemCollapse(t,!1,!1)}u(f)&&f===!1&&0===i.length&&n._collapseAll()},selected:function(){var n,t=this,i=[].slice.call(arguments),f=rt(i[0])?i.shift():r;if(n=t._getItemByIndex.apply(this,i),u(n)){if(!u(f))return t._isSelected(n);t._setSelected(n,f)}u(f)&&f===!1&&0===i.length&&t._deselectAll()},selectedIndex:function(){var n=this,t=n._getSelected();if(u(t))return n._getItemIndex(t)},selectedData:function(){var i=this,t=i._getSelected();if(u(t))return n(t).data(s)},selectedItem:function(){return this._getSelected()},destroy:function(){var t=this,i=t._eventNS;t.dataSource&&t.dataSource.off(wt+i);t._blurTimeout&&(clearTimeout(t._blurTimeout),t._blurTimeout=null);n(t.element).off(i).remove();t._isWrapped&&t._original.unwrap();t._original.show();t._original=null;h.fn.destroy.call(t)}});b.defaults=tt;t.ui.plugin("Menu",b);st=at({},tt,{orientation:o,target:r,filter:r,focusOnOpen:!0,minWidth:r});it=h.extend({init:function(){h.fn.init.apply(this,arguments);var u,e,i=this,s=n(i.element),r=i.options,c=r.events,o={};u=i._eventNS=".shieldContextMenu"+i.getInstanceId();i.menuElement=e=n('<div class="sui-context-menu"/>').hide().appendTo(d.body);r.minWidth&&i.menuElement.css("min-width",r.minWidth);ti(["focus","blur","expand","collapse","click","select"],function(n,t){var r=c[t];fi(r)&&(o[t]=f(r,i))});i._menu=new b(s,at({},r,{renderToINTERNAL:e,wrapOriginalINTERNAL:!1,isContextINTERNAL:!0,events:o}));i._mouseTracker=new t.MouseTracker;n(r.target).on("contextmenu"+u,r.filter,function(t){return t.preventDefault(),i._open(i._mouseTracker.getPosition(t),n(t.currentTarget),!0,!1),!1});n(d).on("mousedown"+u,function(t){n(t.target).closest(".sui-context-menu").length<=0&&i._closeOpen(!0)})},_open:function(n,i,r){var s,u=this,f=u.menuElement,e=u.options,o=e.animation,h=e.focusOnOpen;u._closeOpen(!1);r&&(s=u.trigger("open",{element:i}),s.isDefaultPrevented())||(f.stop(!0,!0),f.show(),ct.Set(f,new t.Event({pageX:n.x,pageY:n.y}),{source:"left top",target:"left top",overflow:e.overflow}),o&&o.enabled?f.hide().slideDown(o.openDelay,function(){y=u;k=i;u._visible=!0;h&&u.focus()}):(y=u,k=i,u._visible=!0,h&&u.focus()))},_close:function(n){var u,t=this,i=t.menuElement,r=t.options.animation;n&&(u=t.trigger("close"),u.isDefaultPrevented())||(y=k=null,i.stop(!0,!0),r&&r.enabled?i.slideUp(r.closeDelay,function(){t._visible=!1}):(i.hide(),t._visible=!1))},_closeOpen:function(){y&&y.closeINTERNAL(!0)},closeINTERNAL:function(n){this._close(n)},focus:function(){n(this.menuElement).find(".sui-menu").first().focus()},visible:function(){var i,r,n=this,t=[].slice.call(arguments);return t.length>0?(i=!!t[0],r=t[1]?t[1]:n._mouseTracker.getPosition(),i?n._open(r,t[2],!1,!1):n._close(!1),n._visible=i,void 0):n._visible},enabled:function(){return this._menu.enabled.apply(this._menu,arguments)},expanded:function(){return this._menu.expanded.apply(this._menu,arguments)},selected:function(){return this._menu.selected.apply(this._menu,arguments)},selectedIndex:function(){return this._menu.selectedIndex.apply(this._menu,arguments)},selectedData:function(){return this._menu.selectedData.apply(this._menu,arguments)},selectedItem:function(){return this._menu.selectedItem.apply(this._menu,arguments)},destroy:function(){var t=this,i=t._eventNS;n(d).off(i);n(t.options.target).off(i);t._mouseTracker&&(t._mouseTracker.destroy(),t._mouseTracker=null);t._close();t._menu&&(t._menu.destroy(),t._menu=null);n(t.menuElement).remove();h.fn.destroy.call(t)}});it.defaults=st;t.ui.plugin("ContextMenu",it)}(jQuery,shield,this);!function(n,t,i){var r,u,f=t.ui.Widget,o=(n.extend,t.is),e=o.undefined,s="change";r={min:0,max:5,step:1,symbolWidth:16,symbolHeight:16,enabled:!0,markPreset:!1,value:0,events:{}};u=f.extend({init:function(n,t){var i=this;f.fn.init.apply(i,arguments);i._enabled=i.options.enabled;i._renderRating(n,t,!1)},_setSelection:function(n){var t=this;if(t._enabled)return t._value=n,t._markPreset&&(t._markPreset=!1),t._range.find(".sui-rating-hover").hide(),t._range.find(".sui-rating-selected").width(n*t._symbolWidth-t._min*t._symbolWidth).show(),t.trigger(s),!0},_calcRawScore:function(t,i){var u=this,f=i.changedTouches?i.changedTouches[0].pageX:i.pageX,r=f-n(t).offset().left;return u._ltr||(r=u._range.width()-r),r>u._range.width()&&(r=u._range.width()),r<0&&(r=0),Math.ceil(r/u._symbolWidth*(1/u._step))},_setHover:function(n){var i,r,t=this;t._enabled&&(i=n*t._symbolWidth*t._step,r=t._range.find(".sui-rating-hover"),r.width()!=i&&(t._range.find(".sui-rating-selected").hide(),r.width(i).show()))},_touchHandler:function(n){var f=n.originalEvent.changedTouches,t=f[0],r="",u;switch(n.type){case"touchmove":r="mousemove";break;case"touchend":r="mouseup";break;default:return}u=document.createEvent("MouseEvent");u.initMouseEvent(r,!0,!0,i,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null);t.target.dispatchEvent(u);n.preventDefault()},_renderRating:function(n,t,i){var u=this,s=1,f,h,c,o,l;(u._item=u.element,u._item.hasClass("sui-rating")||u._item.addClass("sui-rating"),u._ltr=!u.element.parent().hasClass("sui-rtl"),i)&&(f=null,e(u._value)?(f=isNaN(t.value)?r.value:t.value,u._value=f):f=u._value,u._enabled&&(u._wired=!1));u._initialized||(u._min=isNaN(t.min)?r.min:t.min,u._max=isNaN(t.max)?r.max:t.max,u._step=isNaN(t.step)?r.step:t.step,u._symbolWidth=isNaN(t.symbolWidth)?r.symbolWidth:t.symbolWidth,u._symbolHeight=isNaN(t.symbolHeight)?r.symbolHeight:t.symbolHeight,u._value=isNaN(t.value)?r.value:t.value,u._markPreset=isNaN(t.markPreset)?r.markPreset:t.markPreset,n="DIV"==u._item[0].nodeName?"div":"span",s++,h='<{{element}} id="shieldRating-range-{{index}}" class="sui-rating-range" tabindex="0"><{{element}} class="sui-rating-selected" style="height:'+u._symbolHeight+'px"><\/{{element}}><{{element}} class="sui-rating-hover" style="height:'+u._symbolHeight+'px"><\/{{element}}><\/{{element}}>',c=h.replace(/{{index}}/gi,s).replace(/{{element}}/gi,n),this.element.append(c),u._initialized=!0);u._item.find(".sui-rating-selected, .sui-rating-hover").height(u._symbolHeight);u._range=u._item.find(".sui-rating-range");u._range.width(u._symbolWidth*(u._max-u._min)).height(u._symbolHeight);o="sui-rating-preset"+(u._ltr?"":"-rtl");(u._markPreset?u._item.find(".sui-rating-selected").addClass(o):u._item.find(".sui-rating-selected").removeClass(o),null!=u._value)&&(l=(u._value-u._min)*u._symbolWidth,u._item.find(".sui-rating-selected").width(l));u._wired||(u._enabled&&(i||(u._range.on("touchmove touchend",u._touchHandler),u._range.mousemove(function(n){var t=u._calcRawScore(this,n);u._setHover(t)}),u._range.mouseleave(function(){u._range.find(".sui-rating-hover").hide().width(0);u._item.trigger("hover",[null]).trigger("over",[null]);u._range.find(".sui-rating-selected").show()}),u._range.mouseup(function(n){var t=u._calcRawScore(this,n),i=t*u._step+u._min;u._setSelection(i);u._range.blur()}),u._range.keyup(function(n){38!=n.which&&n.which!=(u._ltr?39:37)||u._setSelection(Math.min(u._value+u._step,u._max));40!=n.which&&n.which!=(u._ltr?37:39)||u._setSelection(Math.max(u._value-u._step,u._min))}))),u._wired=!0)},value:function(){var n=this,i=n.options,r=[].slice.call(arguments),t;if(!(r.length>0))return e(n._value)?e(i.value)?n._value:i.value:n._value;t=r[0];t<n._min||t>n._max||(n.options.value=t,n._value=t,n._renderRating(n,i,!0))},enabled:function(){var n=this,r=n.options,t=n.element,i=[].slice.call(arguments);return i.length>0?(n._enabled=i[0],n._renderRating(n,r,!0),n._enabled?t.removeClass("sui-rating-disabled"):t.addClass("sui-rating-disabled"),void 0):n._enabled},destroy:function(){var t=this;n(t.element).removeClass("sui-rating-hover sui-rating-selected sui-rating-disabled sui-rating-preset-rtl sui-rating-preset sui-rating").empty();t._range.off("touchmove touchend",t._touchHandler);t._markPreset=t._enabled=t._min=t._max=t._value=t._ltr=t._item=t._symbolWidth=t._symbolHeight=t._step=t._wired=t._initialized=t._range=null;f.fn.destroy.call(t)}});u.defaults=r;t.ui.plugin("Rating",u)}(jQuery,shield,this);!function(n,t,i){var u=t.ui.Widget,p=(t.Class,t.DataSource),w=document,h=t.is,c=(t.get,t.format),r=t.to.int,l=(Math.abs,n.each,n.proxy),b=(n.extend,n.map,i.opera),k=navigator.userAgent,f=/msie/i.test(k)&&!b,e=f&&7===w.documentMode,a="width",d="sui-selected",o="sui-disabled",v="click",y="px",s=u.extend({init:function(){u.fn.init.apply(this,arguments);var i,n=this,t=n.options;n.currentPage=t.currentPage;n._createWrappers();n._createPagerElements();f&&n.element.on("selectstart",n._selectStart=function(){return!1});n.element.on(v,"a",n._click=l(n._clickHandler,n));t.dataSource?(i=n.dataSource=p.create(t.dataSource),i.on("change.shieldPager"+n.getInstanceId(),l(n._dataChange,n)),n._updateDataSource()):n.refresh(!0)},destroy:function(){var n=this;n.dataSource&&n.dataSource.off("change.shieldPager"+n.getInstanceId());n.pagination=null;n.infoBox=null;n.element.off("selectstart",n._selectStart);n._selectStart=null;n.element.off(v,"a",n._click);n._click=null;n.startLinkIndex=null;n.endLinkIndex=null;n.element.remove();u.fn.destroy.call(n)},_clickHandler:function(t){var u=n(t.currentTarget),i=this,f;i.options;(t.preventDefault(),u.parent().hasClass(o))||(f=r(u.attr("data-page")),i.currentPage=f,i.refresh())},_createWrappers:function(){var r=this,u=r.element,t,i;u.addClass("sui-pager sui-pager-core");t=n("<ul/>").appendTo(u);e?t.addClass("sui-pagination sui-pagination-ie7"):t.addClass("sui-pagination");i=n("<div/>").appendTo(u);f&&!e?i.addClass("sui-pager-info-box-ie"):i.addClass("sui-pager-info-box");r.pagination=t;r.infoBox=i},_updateInfoBox:function(){var i=this,t=i.options,e=t.messages,r=t.pageSize*(i.currentPage-1)+1,u=r-1+t.pageSize,o=Math.ceil(t.totalItems/t.pageSize),f;u>t.totalItems&&(u=t.totalItems);0===t.totalItems&&(r=0);f=c.call(i,e.infoBarTemplate,r,u,t.totalItems,i.currentPage,o);n(i.infoBox).empty().html(f)},_createPagerElements:function(){var s=this,f=s.options,t=f.messages,h=s.currentPage,b=s.pagination,l=Math.ceil(f.totalItems/f.pageSize),ot=Math.min(f.pageLinksCount,l),i="",v="",k="",g="",nt="",ft=r((h-1)/f.pageLinksCount),tt=ft*f.pageLinksCount+1,it,u,et,p,w,rt,ut;for(1==h&&(k=" "+o),h!=l&&f.totalItems||(g=" "+o),f.imageLinks&&(t.previousText="&nbsp;",t.nextText="&nbsp;",t.firstText="&nbsp;",t.lastText="&nbsp;",v="sui-navigation-links "),it=Math.min(tt+ot,l+1),s.startLinkIndex=tt,s.endLinkIndex=it-1,ft>0&&(i+="<li class='sui-pager-element'><a data-page='"+(s.startLinkIndex-1)+"'>...<\/a><\/li>"),u=tt;u<it;u++)et=c.call(s,t.pageLabelTemplate,u),u==h&&(nt=" "+d),i+="<li class='sui-pager-element'><a data-page='"+u+"' class='sui-pager-number"+nt+"'>"+et+"<\/a><\/li>",nt="";if(s.endLinkIndex<l&&(i+="<li class='sui-pager-element'><a data-page='"+(s.endLinkIndex+1)+"'>...<\/a><\/li>"),f.directionLinks&&(i="<li class='sui-pager-element"+k+"'><a title='"+t.previousTooltip+"' data-page='"+(h-1)+"' class='"+v+"sui-prev'>"+t.previousText+"<\/a><\/li>"+i,i=i+"<li class='sui-pager-element"+g+"'><a title='"+t.nextTooltip+"' data-page='"+(h+1)+"' class='"+v+"sui-next'>"+t.nextText+"<\/a><\/li>"),f.boundaryLinks&&(i="<li class='sui-pager-element"+k+"'><a title='"+t.firstTooltip+"' data-page='1' class='"+v+"'>"+t.firstText+"<\/a><\/li>"+i,i=i+"<li class='sui-pager-element"+g+"'><a title='"+t.lastTooltip+"' data-page='"+l+"' class='"+v+"'>"+t.lastText+"<\/a><\/li>"),b.html(i),p=b.find("a"),(p.length>0&&(n(p[0]).addClass("sui-first"),n(p[p.length-1]).addClass("sui-last")),e)&&(w=b.find("li"),w.length>0)){for(rt=0,u=0;u<w.length;u++)ut=w[u].clientWidth,rt+=ut,n(w[u]).css(a,ut+y);b.css(a,rt+y)}},_dataChange:function(){var n=this,i=n.options,t=n.dataSource,r=t.take,u=Math.ceil(t.skip/r)+1;n.currentPage=u;i.pageSize=r;i.totalItems=t.total;n.refresh(!0)},refresh:function(n){var t=this;t.pagination.empty();t._createPagerElements();t._updateInfoBox();n||(t._updateDataSource(),t.trigger("change",{currentPage:t.currentPage,pageSize:t.options.pageSize}))},_updateDataSource:function(){var t=this,n=t.dataSource,i=t.options;n&&(n.skip=(t.currentPage-1)*i.pageSize,n.take=i.pageSize,n.read())},page:function(n){var t=this,i;if(!n)return t.currentPage;i=r(n);t._isValidPage(i)&&(t.currentPage=i,t.refresh())},first:function(){this.currentPage=1;this.refresh()},last:function(){var n=this,t=n.options,i=Math.ceil(t.totalItems/t.pageSize);n.currentPage=i;n.refresh()},hasNext:function(){var n=this,t=n.options,i=Math.ceil(t.totalItems/t.pageSize);return n.currentPage<i},hasPrev:function(){return this.currentPage>1},next:function(){var n=this,t=n.options,i=Math.ceil(t.totalItems/t.pageSize);n.currentPage!=i&&(n.currentPage=n.currentPage+1,n.refresh())},prev:function(){var n=this;n.options;1!=n.currentPage&&(n.currentPage=n.currentPage-1,n.refresh())},pageSize:function(n){var t=this,u=t.options,i;if(!n)return u.pageSize;i=r(n);t._isValidPageSize(i)&&(t.currentPage=1,u.pageSize=i,t.refresh())},_isValidPage:function(n){var i=this.options,r=Math.ceil(i.totalItems/i.pageSize);return h.integer(n)?!(n>r||n<1)||(t.error("Invalid page number. The page number must be greater than 0 and less than "+r+".",i.dieOnError),!1):(t.error("Invalid page number. The page number must integer.",i.dieOnError),!1)},_isValidPageSize:function(n){var i=this.options;return h.integer(n)?!(n<1)||(t.error("Invalid page number. The page number must be greater than 0 (zero).",i.dieOnError),!1):(t.error("Invalid page size number. The page size number must be integer.",i.dieOnError),!1)}});s.defaults={currentPage:1,totalItems:null,pageSize:10,pageLinksCount:5,directionLinks:!0,boundaryLinks:!0,imageLinks:!1,messages:{pageLabelTemplate:"{0}",infoBarTemplate:"{0} - {1} of {2} items",previousText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",firstTooltip:"Go to the first page",previousTooltip:"Go to the previous page",nextTooltip:"Go to the next page",lastTooltip:"Go to the last page"}};t.ui.plugin("Pager",s);t.ui.Pager=s}(jQuery,shield,this);!function(n,t,i,r){var hr,vt,cr,kt,lr,li,ar,ai,vr,vi,yi,yt,yr,pi,wi,k,pr,bi,wr,ki,br,di,kr,gi,s=t.ui.Widget,dr=(t.Class,t.DataSource),gr=t.ui.Position,o=t.Constants.KeyCode,rt=t.error,nr=t.is.func,nu=t.is.array,e=t.is.defined,tu=(t.is.number,t.to.array),du=t.to.int,tr=t.to.number,pt=t.support.browser,ut=t.format,ht=t.strid,wt=document,gu=Math.min,nf=Math.max,tf=Math.pow,ir=n.extend,rf=(n.map,n.each),u=n.proxy,dt=n.inArray,c="id",v="role",y="true",d="false",uf="listbox",gt="textbox",ff="button",ef="switch",h="aria",ct=h+"-selected",iu=h+"-autocomplete",ni=h+"-activedescendant",rr=h+"-multiline",ru=h+"-valuenow",of=h+"-valuemin",sf=h+"-valuemax",hf=h+"-valuetext",uu=h+"-disabled",ur=h+"-haspopup",et=h+"-checked",fu=h+"-label",eu=h+"-labelledby",fr=h+"-controls",ou=h+"-expanded",su="alt",hu="title",f="disabled",p="checked",ti="selected",cu="itemclick",a="tabindex",lu="mousedown",au="mouseup",vu="mouseout",w="click",it="keydown",cf="keypress",lf="keyup",af="cut",vf="paste",er="dragstart",yu="dragenter",pu="dragover",wu="drop",l="change",g="focus",nt="blur",ii="resize",ot="select",yf="input",ft="value",ri="placeholder",ui="selectstart",fi="unselectable",ei="on",bu="width",oi="height",si="suilbitemdata",lt="suilbitemindex",at="suilbitemvalue",hi="suilbitemtext",tt="uts",b="uti",or="utta",pf="uto",st=function(t){var i=n(t).prop("tagName").toLowerCase();return i==ot?tt:i==yf?b:"textarea"==i?or:pf},sr=function(t){return n("<div/>").text(t).html()},bt=function(t){var r,i=n(t);i.focus();i.get(0).setSelectionRange?(r=2*i.val().length,i.get(0).setSelectionRange(r,r)):i.val(i.val())},ku=function(n){n+="";var t=n.lastIndexOf(".");return t>-1?n.length-t-1:0},ci=function(n,t){var i,r;if(n&&!nr(n))if(nu(n))for(i=0;i<n.length;i++)ci(n[i],t);else if(n.or||n.and)for(r in n)n.hasOwnProperty(r)&&ci(n[r],t);else n.value=t};hr={enabled:!0,cls:r,dataSource:r,readDataSource:!0,valueTemplate:r,textTemplate:r,multiple:r,selected:r,values:r,width:r,height:r,maxHeight:r,events:{}};vt=s.extend({init:function(){s.fn.init.apply(this,arguments);var f,c,r,o,t=this,i=t.options,w=i.dieOnError,k=i.dataSource,p=i.selected,h=i.values,d=i.renderToINTERNAL,ut=i.wrapOriginalINTERNAL,ft=i.tabindexINTERNAL,et=i.filterINTERNAL,ct=e(et)?{filter:et}:{},lt=!e(ut)||ut;if(t._original=f=n(t.element),t._utype=o=st(f),o==b&&i.multiple)return t.destroy(),void rt("shieldListBox: Cannot initialize a multi-selection ListBox from an input element.",w);if(t._eventNS=".shieldListBox"+t.getInstanceId(),e(h)||e(p)||o!=tt&&o!=b||(h=f.val()),lt?(t.wrapper=f.wrap("<span/>").parent(),t._isWrapped=!0):t._isWrapped=!1,f.hide(),t.element=r=n('<ul id="'+ht()+'"/>').on(g+t._eventNS,u(t._focus,t)).on(nt+t._eventNS,u(t._blur,t)),e(i.width)&&r.css(bu,i.width),e(i.height)&&r.css(oi,i.height),e(i.maxHeight)&&r.css("max-height",i.maxHeight),n(d).length>0?n(d).append(r):f.after(r),k)t.dataSource=dr.create(k,ct),i.valueTemplate||(i.valueTemplate="{0}"),i.textTemplate||(i.textTemplate="{0}");else{if(o!=tt)return t.destroy(),void rt("shieldListBox: No dataSource or underlying SELECT element found.",w);t.dataSource=dr.create(ir({},{data:f,schema:{type:ot}},ct));i.valueTemplate||(i.valueTemplate="{value}");i.textTemplate||(i.textTemplate="{text}");e(i.multiple)||(i.multiple=f.not("[multiple]").length<=0)}r.addClass("sui-listbox");i.cls&&r.addClass(i.cls);c=e(ft)?ft:f.attr(a);r.attr(a,e(c)?c:"0");r.on(it+t._eventNS,u(t._keydown,t));t.dataSource.on(l+t._eventNS,u(t._dsChange,t));e(h)?t._initValues=h:e(p)&&(t._initSelected=p);r.attr(v,uf);i.multiple&&r.attr("aria-multiselectable",y);i.readDataSource&&t.dataSource.read();t.enabled(i.enabled)},refresh:function(n){this.refreshWithElement(this._original,n)},_focus:function(){var n=this;n._oldSelection=n.selected();n.trigger(g)},_blur:function(){var t=this,r=t._oldSelection,i=t.selected();0===n(r).not(i).length&&0===n(i).not(r).length||t.trigger(l);t._oldSelection=i;t.trigger(nt)},_dsChange:function(){var n=this;n._render();n._dsLoadedOnce||(n._dsLoadedOnce=!0,e(n._initValues)?n.values(n._initValues):e(n._initSelected)&&n.selected(n._initSelected))},_render:function(){var t=this,u=t.options,o=t.dataSource.view,f=n(t.element),i=t._utype,e=t._original,s=f.attr(c)+"_opt";i==b?t._original.val():r;f.empty();i==tt?e.empty():i==b&&e.removeAttr(ft);o&&rf(o,function(r,o){var c=ut.call(t,u.valueTemplate,o),h=ut.call(t,u.textTemplate,o),l=n('<li id="'+s+r+'" role="option">'+h+"<\/li>").addClass("sui-listbox-item sui-unselectable").click(function(i){t._enabled&&(t._setActive(n(this)),t._toggleActive(i));t.trigger(cu,{index:r,item:o})}).on(ui,function(){return!1}).data(si,o).data(lt,r).data(at,c).data(hi,h);u.multiple&&l.attr(ct,d);f.append(l);i==tt&&e.append(n("<option/>").attr(ft,c).text(h))})},_keydown:function(n){var t=this,i=!0;switch(n.keyCode){case o.UP:t._move("up",n);break;case o.DOWN:t._move("down",n);break;case o.HOME:t._move("first",n);i=!1;break;case o.END:t._move("last",n);i=!1;break;case o.SPACE:case o.ENTER:t._toggleActive(n);break;default:i=!1}i&&n.preventDefault()},_move:function(t){var u=this,f=n(u.element),r=f.find(".sui-listbox-item-active").first(),i=f.find(":first");u._enabled&&("up"==t?r.prev().length>0?i=r.prev():r.length>0&&(i=r):"down"==t?r.next().length>0?i=r.next():r.length>0&&(i=r):"first"==t?i=f.find(".sui-listbox-item").first():"last"==t&&(i=f.find(".sui-listbox-item").last()),i.length<=0||(u.options.multiple?(u._setActive(i),u._ensureInScrollableArea(i)):u._select(i)))},_ensureInScrollableArea:function(t){var o=this,i=n(o.element),u=i.height(),f=i.scrollTop(),s=t.outerHeight(),r=t.position().top,e=r+s;r<0?i.scrollTop(f+r):e>u&&i.scrollTop(f+(e-u))},ensureActiveViewableINTERNAL:function(){var n=this,t=n._getActive();t.length>0&&n._ensureInScrollableArea(t)},_getActive:function(){return n(this.element).find(".sui-listbox-item-active").first()},_setActive:function(t){t.addClass("sui-listbox-item-active").siblings().removeClass("sui-listbox-item-active");n(this.element).attr(ni,t.attr(c))},_setSelected:function(n){n.addClass("sui-listbox-item-selected").attr(ct,y)},_unsetSelected:function(n){n.removeClass("sui-listbox-item-selected");this.options.multiple?n.attr(ct,d):n.removeAttr(ct)},_toggleActive:function(n){this._toggle(n,this._getActive())},_toggle:function(n,t){var i=this;i._enabled&&(!t||t.length<=0||(i.options.multiple&&t.hasClass("sui-listbox-item-selected")?i._deselect(t):i._select(t)))},_select:function(n,t){var i=this,r=i._original,u=i._utype,f=i.options.multiple;f||i.clearSelection();i._setActive(n);i._ensureInScrollableArea(n);i._setSelected(n);u==tt?r.find("option:eq("+n.data(lt)+")").attr(ti,ti):u==b&&r.attr(ft,n.data(at));t||i.trigger(ot,{index:n.data(lt),item:n.data(si),value:n.data(at),text:n.data(hi),selected:!0})},_deselect:function(n,t){var i=this,r=i._original,u=i._utype;i._setActive(n);i._unsetSelected(n);u==tt?r.find("option:eq("+n.data(lt)+")").removeAttr(ti):u==b&&r.removeAttr(ft);t||i.trigger(ot,{index:n.data(lt),item:n.data(si),value:n.data(at),text:n.data(hi),selected:!1})},enabled:function(){var i,t=this,r=n(t.element),u=t._original,e=[].slice.call(arguments);return e.length>0?(i=!!e[0],i?(r.removeAttr(f).removeClass("sui-listbox-disabled"),u.removeAttr(f)):(r.attr(f,f).addClass("sui-listbox-disabled"),u.attr(f,f)),t._enabled=i,void 0):t._enabled},selected:function(){var u,f,i=this,o=n(i.element),t=[].slice.call(arguments),r;if(!(t.length>0))return r=[],o.find(".sui-listbox-item-selected").each(function(){r.push(n(this).data(lt))}),r;u=tu(t[0]);f=!e(t[1])||!!t[1];o.find(".sui-listbox-item").each(function(t){dt(t,u)>-1&&(f?i._select(n(this),!0):i._deselect(n(this),!0))})},selectedItems:function(){var t=[];return n(this.element).find(".sui-listbox-item-selected").each(function(){t.push(n(this).data(si))}),t},values:function(){var r,t=this,u=n(t.element),f=[].slice.call(arguments),i;if(!(f.length>0))return i=[],u.find(".sui-listbox-item-selected").each(function(){i.push(n(this).data(at))}),i;r=tu(f[0]);u.find(".sui-listbox-item").each(function(){if(dt(n(this).data(at),r)>-1)return t._select(n(this),!0),!!t.options.multiple})},texts:function(){var t=[];return n(this.element).find(".sui-listbox-item-selected").each(function(){t.push(n(this).data(hi))}),t},clearSelection:function(){var t=this,i=t._original,u=t.options.multiple,r=t._utype;r==tt?i.find("option").removeAttr(ti):r==b&&i.removeAttr(ft);n(t.element).find(".sui-listbox-item-selected").each(function(){n(this).removeClass("sui-listbox-item-selected sui-listbox-item-active");u?n(this).attr(ct,d):n(this).removeAttr(ct)})},destroy:function(){var t=this,i=t._eventNS;t._dsLoadedOnce=!1;n(t.element).off(i).remove();t.dataSource&&t.dataSource.off(l+i);t._isWrapped&&t._original.unwrap();t._original.show();s.fn.destroy.call(t)}});vt.defaults=hr;t.ui.plugin("ListBox",vt);lr={enabled:!0,cls:r,autoComplete:r,value:r,events:{}};li=s.extend({init:function(){s.fn.init.apply(this,arguments);var t=this,r=t.options,f=r.autoComplete,o=r.cls,h=r.value,i=n(t.element);t._eventNS=".shieldTextBox"+t.getInstanceId();i.addClass("sui-input");f&&(t.autoComplete=new kt(i,f));o&&i.addClass(o);i.on(g+t._eventNS,u(t._focus,t)).on(nt+t._eventNS,u(t._blur,t));i.attr(v,gt);st(i)==or&&i.attr(rr,y);t.enabled(r.enabled);e(h)&&t.value(h)},focus:function(){n(this.element).focus();bt(n(this.element))},_focus:function(){var n=this;n.oldValue=n._value();n.interval=setInterval(u(n._detectChanges,n),1);n.trigger(g)},_blur:function(){clearInterval(this.interval);this.trigger(nt)},_detectChanges:function(){var t,n=this;n._enabled&&n.oldValue!==n._value()&&(t=n.trigger(l,{value:n._value(),old:n.oldValue}),t.isDefaultPrevented()?n._value(n.oldValue):n.oldValue=n._value())},_value:function(){return this.element.val.apply(this.element,arguments)},value:function(){return this._value.apply(this,arguments)},enabled:function(){var t,i=this,r=n(i.element),u=[].slice.call(arguments);return u.length>0?(t=!!u[0],t?r.removeAttr(f).removeClass("sui-input-disabled"):r.attr(f,f).addClass("sui-input-disabled"),i._enabled=t,void 0):i._enabled},destroy:function(){var n=this,t=n.autoComplete,i=n.options.cls;clearInterval(n.interval);n.element.off(n._eventNS).removeClass("sui-input"+(i?" "+i:""));t&&t.destroy();s.fn.destroy.call(n)}});li.defaults=lr;t.ui.plugin("TextBox",li);cr={dataSource:r,valueTemplate:"{0}",textTemplate:"{0}",open:!1,delay:200,minLength:2,dropDownWidth:r,appendListBoxTo:"body",animation:{enabled:!0,openDelay:200,closeDelay:100},events:{}};kt=s.extend({init:function(){s.fn.init.apply(this,arguments);var t=this,r=n(t.element),f=t.options,e=f.dataSource,o=f.dieOnError,h=f.appendListBoxTo;return t.pending=0,t.oldValue=r.val(),e?(e.filter||(e.filter={and:[{path:"",filter:"contains",value:""}]}),t._eventNS=".shieldAutoComplete"+t.getInstanceId(),r.addClass("sui-input"),t.listElement=n("<span/>").appendTo(n(h)),t.listBox=new vt(t.listElement,{cls:"sui-autocomplete",dataSource:e,readDataSource:!1,textTemplate:f.textTemplate,multiple:!1,width:f.dropDownWidth||r.innerWidth(),events:{select:function(n){t._value(ut.call(t,f.valueTemplate,n.item));t.trigger(ot,{item:n.item})},itemclick:function(n){r.focus();t._inputBlur(n,0)},blur:function(n){t._inputBlur(n,0)}}}),t.listBox.element.hide(),t.dataSource=t.listBox.dataSource,r.on(it+t._eventNS,u(t._inputKeydown,t)).on(nt+t._eventNS,u(t._inputBlur,t,100)),r.attr(iu,"list").attr(fr,t.listBox.element.attr(c)).attr(ur,t.listBox.element.attr(v)),r.attr(v,gt),st(r)==or&&r.attr(rr,y),t.listBox.dataSource.on(l+t._eventNS,u(t._dsChange,t)),n(i).on(ii+t._eventNS,u(t._position,t)),t._open=!1,void(f.open&&t._searchTimeout())):(t.destroy(),void rt("shieldAutoComplete: No dataSource set",o))},_checkValueUpdated:function(){var n=this,i=n.element,t=i.val();n.oldValue!==t&&(n.trigger(l,{value:n._value()}),n.oldValue=t)},_restoreOldValue:function(){this._value(this.oldValue)},_inputKeydown:function(n){var t=this;switch(n.keyCode){case o.TAB:break;case o.UP:case o.DOWN:t._inputUpDown(n);break;case o.ENTER:n.preventDefault();t.cancelSearch=!0;t._hideItemList();t._checkValueUpdated();break;case o.ESC:n.preventDefault();t.cancelSearch=!0;t._hideItemList();t._restoreOldValue();break;default:t._searchTimeout(n)}},_inputUpDown:function(t){var i=this;i._open?i._hasData()&&n(i.listBox.element).trigger(t):i._hasData()&&i._showItemList()},_inputBlur:function(t,i){var r=this;setTimeout(function(){n(r.listBox.element).is(":focus")||(r._hideItemList(),r._checkValueUpdated())},i)},_searchTimeout:function(){var n=this;clearTimeout(n.searchTimeout);n.searchTimeout=setTimeout(function(){n.term!==n._value()&&(n.trigger("search",{value:n._value()}),n._search())},n.options.delay)},_search:function(){var t=this;return t.term=t._value(),t.term.length<t.options.minLength?void t._hideItemList():(t.cancelSearch=!1,t.pending++,n(t.element).addClass("sui-autocomplete-loading"),ci(t.listBox.dataSource.filter,t.term),void t.listBox.dataSource.read())},_dsChange:function(){var t=this;t.pending--;t.pending||n(t.element).removeClass("sui-autocomplete-loading");!t.cancelSearch&&t._hasData()?t._showItemList():t._hideItemList()},_hasData:function(){var n=this.listBox.dataSource.view;return n&&n.length>0},_position:function(){var t=this,i=n(t.element),r=n(t.listBox.element);r.width(t.options.dropDownWidth||i.innerWidth());gr.Set(r,i,{source:"left top",target:"left bottom",overflow:"none"})},_showItemList:function(){var t=this,i=t.listBox,r=n(i.element),f=t.options.animation;r.css({top:0,left:0});r.show();t._position();!t._open&&f&&f.enabled?r.hide().slideDown(f.openDelay,u(i.ensureActiveViewableINTERNAL,i)):i.ensureActiveViewableINTERNAL();t._open=!0},_hideItemList:function(){var t=this,r=n(t.listBox.element),i=t.options.animation;i&&i.enabled?r.slideUp(i.closeDelay):r.hide();t._open=!1},_value:function(){return this.element.val.apply(this.element,arguments)},hide:function(){n(this.listBox.element).hide()},show:function(){n(this.listBox.element).show()},isVisible:function(){return n(this.listBox.element).is(":visible")},destroy:function(){var t=this;t.dataSource=null;t.listBox&&(t.listBox.dataSource.off(l+t._eventNS),t.listBox.destroy(),t.listBox=null);t.element.off(t._eventNS).removeClass("sui-input");n(i).off(ii+t._eventNS);t.listElement&&t.listElement.remove();s.fn.destroy.call(t)}});kt.defaults=cr;t.ui.plugin("AutoComplete",kt);ar={enabled:!0,cls:"",min:0,max:100,value:r,step:r,editable:!0,spinners:!0,valueTemplate:r,textTemplate:r,labels:{increase:"Increase value",decrease:"Decrease value"},events:{}};ai=s.extend({init:function(){s.fn.init.apply(this,arguments);var h,l,c,r,w,k,y,p,t=this,i=t.options,d=i.cls,o=i.value,f=i.step,ht=i.editable,tt=i.spinners,ut=i.labels,ft=ut.increase,et=ut.decrease,ot=i.dieOnError;return t._original=h=n(t.element),st(h)!=b?void rt("shieldNumericTextBox: Underlying element is not INPUT",ot):(e(f)?i.step=f=tr(f):(y=ku(e(o)?o:t._value()),i.step=y>0?f=1/tf(10,y):f=1),f?(t._eventNS=".shieldNumericTextBox"+t.getInstanceId(),t.element=c=h.wrap("<span/>").parent(),h.hide(),e(o)||(o=t._value()),ht?(r=n('<input type="text" class="sui-input" />'),l=h.attr(ri),e(l)&&r.attr(ri,l)):r=n('<span class="sui-input">&nbsp;<\/span>').attr(a,"0"),t.textElement=r,r.appendTo(c),r.on(g+t._eventNS,u(t._focus,t)).on(nt+t._eventNS,u(t._blur,t)),tt&&(t._onSpinUpMDProxy=u(t._spinUpMD,t),t._onSpinDownMDProxy=u(t._spinDownMD,t),t._onSpinnerMUProxy=u(t._spinnerMU,t),t.spinUp=w=n('<span class="sui-spinner sui-spinner-up sui-unselectable"/>').html('<span class="sui-caret-up sui-unselectable" unselectable="on"/>').attr(fi,ei).attr(su,ft).attr(hu,ft).on(lu+t._eventNS,t._onSpinUpMDProxy).on(au+t._eventNS,t._onSpinnerMUProxy).on(vu+t._eventNS,t._onSpinnerMUProxy).on(ui+t._eventNS,function(){return!1}),t.spinDown=k=n('<span class="sui-spinner sui-spinner-down sui-unselectable"/>').html('<span class="sui-caret-down sui-unselectable" unselectable="on"/>').attr(fi,ei).attr(su,et).attr(hu,et).on(lu+t._eventNS,t._onSpinDownMDProxy).on(au+t._eventNS,t._onSpinnerMUProxy).on(vu+t._eventNS,t._onSpinnerMUProxy).on(ui+t._eventNS,function(){return!1}),c.append(n('<span class="sui-spinners"/>').append(w,k))),r.on(it+t._eventNS,u(t._keydown,t)),c.addClass("sui-numeric-textbox"+(tt?"":" sui-numeric-textbox-nosp")+(d?" "+d:"")),p=ku(f),e(i.textTemplate)||(i.textTemplate="{0:n"+p+"}"),e(i.valueTemplate)||(i.valueTemplate="{0:n"+p+"}"),c.attr(v,"spinbutton").attr(of,i.min).attr(sf,i.max),t.enabled(i.enabled),e(o)&&t.value(o),void(t._destroyed=!1)):void rt("shieldNumericTextBox: Invalid step",ot))},refresh:function(n){this.refreshWithElement(this._original,n)},_focus:function(){var t=this;t._hasFocus||(t._hasFocus=!0,n(t.element).addClass("sui-numeric-textbox-focus"),t.value(t.value()),t.trigger(g))},_blur:function(){var t=this,r=n(t.element),u=n(t.textElement),i,f;t.options.editable&&(f=t.value(),t._updateIfDirty(),i=t.value(),i!==f&&t.trigger(l,{value:i}));setTimeout(function(){if(!(r.is(":focus")||u.is(":focus")||t._destroyed)){if(t._hasFocus=!1,r.removeClass("sui-numeric-textbox-focus"),t.options.editable){var n,i=t.value();t.value(u.val());n=t.value();n!==i&&t.trigger(l,{value:n})}else t.value(t.value());t.trigger(nt)}},100)},_keydown:function(n){var i=this,t=n.keyCode,r=i._enabled;switch(t){case o.TAB:case o.LEFT:case o.RIGHT:break;case o.END:i._updateValue("max",!1);n.preventDefault();break;case o.HOME:i._updateValue("min",!1);n.preventDefault();break;case o.ESC:r&&i.value(i.value());n.preventDefault();break;case o.UP:i._updateValue("inc",!1);n.preventDefault();break;case o.DOWN:i._updateValue("dec",!1);n.preventDefault();break;default:i.options.editable&&r&&(t>=48&&t<=57||t>=96&&t<=105||190==t||110==t||173==t||109==t||189==t||t==o.DEL||t==o.BACK||t==o.ENTER||n.ctrlKey&&(118==t||86==t))?i._dirty=!0:n.preventDefault()}},_spinUpMD:function(n){var t=this;n.preventDefault();t._updateValue("inc",!1);t._spinUpCancel=!1;setTimeout(function(){t._spinUpInt||t._spinUpCancel||(t._spinUpInt=setInterval(u(t._updateValue,t,"inc",!1),20))},100)},_spinDownMD:function(n){var t=this;n.preventDefault();t._updateValue("dec",!1);t._spinDownCancel=!1;setTimeout(function(){t._spinDownInt||t._spinDownCancel||(t._spinDownInt=setInterval(u(t._updateValue,t,"dec",!1),20))},100)},_spinnerMU:function(){var n=this;n._spinUpCancel=n._spinDownCancel=!0;clearInterval(n._spinUpInt);clearInterval(n._spinDownInt);n._spinUpInt=n._spinDownInt=null},_updateIfDirty:function(){var t=this,i=n(t.textElement);t._dirty&&(t.value(i.val()),t._dirty=!1)},_updateValue:function(t,i,r){var f,u=this,s=u.options,h=s.min,c=s.max,a=s.step,v=n(u.textElement),o=!1;u._enabled&&(u._updateIfDirty(),f=u.value(),e(f)||(f=0),i=!e(i)||!!i,r=!e(r)||!!r,"inc"==t?f<c&&(u.value(f+a),o=!0):"dec"==t?f>h&&(u.value(f-a),o=!0):"min"==t?(u.value(h),o=!0):"max"==t&&(u.value(c),o=!0),r&&(v.focus(),s.editable&&bt(v)),o&&!i&&u.trigger(l,{value:u.value()}))},increment:function(){this._updateValue("inc",!0,!1)},decrement:function(){this._updateValue("dec",!0,!1)},value:function(){var t,r,i=this,u=i.options,f=[].slice.call(arguments),o=i.element,s=n(i.textElement);return f.length>0?(e(f[0])&&null!==f[0]&&""!==f[0]?(t=nf(gu(f[0],u.max),u.min),t=ut.call(i,u.valueTemplate,t),t=tr(t),r=ut.call(i,u.textTemplate,t)+""):(t=null,r=""),u.editable?i._hasFocus&&i._enabled?s.val(t):s.val(r):s.html(r),i._value(t),null!==t?o.attr(ru,t):o.removeAttr(ru),o.attr(hf,sr(r)),void 0):tr(i._value())},_value:function(){return this._original.attr.apply(this._original,[ft].concat([].slice.call(arguments)))},enabled:function(){var t,i=this,r=n(i.element),u=[].slice.call(arguments);return u.length>0?(t=!!u[0],t?r.removeAttr(f).removeClass("sui-numeric-textbox-disabled"):r.attr(f,f).addClass("sui-numeric-textbox-disabled"),i._enabled=t,void 0):i._enabled},focus:function(){n(this.textElement).focus();bt(n(this.textElement))},destroy:function(){var t=this;t._destroyed=!0;t.options.spinners&&(n(t.spinUp).off(t._eventNS).remove(),n(t.spinDown).off(t._eventNS).remove(),t.spinUp=t.spinDown=null);n(t.textElement).off(t._eventNS).remove();t.textElement=null;t._original.unwrap().show();t._original=null;s.fn.destroy.call(t)}});ai.defaults=ar;t.ui.plugin("NumericTextBox",ai);vr={enabled:!0,mask:"00-00-0000",promptChar:"_",value:"",rules:{0:function(n){return/^[0-9]$/.test(n)},9:function(n){return/^[0-9 ]$/.test(n)},"#":function(n){return/^[0-9 \+\-]$/.test(n)},L:function(n){return/^[a-zA-Z]$/.test(n)},"?":function(n){return/^[a-zA-Z ]$/.test(n)},"&":function(n){return/^[\S]$/.test(n)},C:function(n){return/^[.]$/.test(n)},A:function(n){return/^[0-9a-zA-Z]$/.test(n)},a:function(n){return/^[0-9a-zA-Z ]$/.test(n)}},cultureSpecific:[".",",","$"],separators:["/","-"," ","(",")"],cls:r,events:{}};vi=s.extend({init:function(){s.fn.init.apply(this,arguments);var t=this,i=t.options,f=i.dieOnError,o=i.value,r=n(t.element);return st(r)!=b?void rt("shieldMaskedTextBox: Underlying element is not INPUT",f):t._verifyMask()?(t._eventNS=".shieldMaskedTextBox"+t.getInstanceId(),r.addClass("sui-input"),i.cls&&r.addClass(i.cls),e(o)&&t.value(o),r.on(g+t._eventNS,u(t._focus,t)).on(nt+t._eventNS,u(t._blur,t)).on(it+t._eventNS,u(t._keydown,t)).on(cf+t._eventNS,u(t._keypress,t)).on(af+t._eventNS,u(t._cut,t)).on(vf+t._eventNS,u(t._paste,t)).on(er+t._eventNS,u(t._dragstart,t)).on(yu+t._eventNS,u(t._dragenter,t)).on(pu+t._eventNS,u(t._dragover,t)).on(wu+t._eventNS,u(t._drop,t)),r.attr(v,gt),void t.enabled(i.enabled)):void rt("shieldMaskedTextBox: Invalid mask",f)},_getMask:function(){for(var n,i=this,r=i.options.mask,u="",t=0;t<r.length;t++)n=r.charAt(t),u+=i._isCultureSpecific(n)?i._getCultureSpecific(n):n;return u},_isCultureSpecific:function(n){return dt(n,this.options.cultureSpecific)!==-1},_getCultureSpecific:function(n){var i=t.getCurrencyInfo();return"$"==n?i.symbol:i[n]},_skipSymbol:function(n){var t=this,i=t.options.separators;return dt(n,i)!==-1||t._isCultureSpecific(n)},_insertAt:function(n,t,i){return n.substr(0,i)+t+n.substr(i)},_removeAt:function(n,t){return n.substr(0,t)+n.substr(t+1)},_caret:function(t,i){var u,f=this,r=n(f.element);if(0!==r.length&&!r.is(":hidden"))return"number"==typeof t?(i="number"==typeof i?i:t,r.each(function(){r.setSelectionRange?r.setSelectionRange(t,i):r.createTextRange&&(u=r.createTextRange(),u.collapse(!0),u.moveEnd("character",i),u.moveStart("character",t),u.select())})):(r[0].setSelectionRange?(t=r[0].selectionStart,i=r[0].selectionEnd):wt.selection&&wt.selection.createRange&&(u=wt.selection.createRange(),t=0-u.duplicate().moveStart("character",-1e5),i=t+u.text.length),{begin:t,end:i})},_caretTo:function(t){var f=this,u=n(f.element),i;u.prop("selectionStart")!==r?(u.prop("selectionStart",t),u.prop("selectionEnd",t)):wt.selection&&(u.focus(),i=wt.selection.createRange(),i.moveStart("character",-f.value().length),i.moveEnd("character",-f.value().length),i.moveStart("character",t),i.select())},_isValid:function(n,t){var i,r=this,u=r._getMask(),f=r.options.rules;return!(t>=u.length)&&(i=u.charAt(t),nr(f[i])&&f[i].call(r,n))},_removeRegion:function(n){var e,u,t=this,h=t.options,f=t._getMask(),i=t._value(),o=t._caret(),s=h.promptChar,r=o.begin;if(r==o.end)n?(e=f.charAt(--r),t._skipSymbol(e)||(r>=0?(i=t._removeAt(i,r),i=t._insertAt(i,s,r),t._value(i)):r=0)):r<i.length&&(e=f.charAt(r),t._skipSymbol(e)?r++:(i=t._shiftLeft(i,r),t._value(i)));else{for(u=r;u<o.end;u++)t._skipSymbol(f.charAt(u))||(i=t._removeAt(i,u),i=t._insertAt(i,s,u));for(;t._skipSymbol(f.charAt(r));)++r;for(u=r;u<o.end;u++)t._skipSymbol(f.charAt(u))||(i=t._shiftLeft(i,r));t._value(i)}t._caretTo(r)},_shiftLeft:function(n,t){for(var f,e,u,i=this,s=i.options,h=i._getMask(),o=s.promptChar,r=t;r<n.length-1;){for(u=r+1;i._skipSymbol(h.charAt(u));)u++;if(u>n.length-1)break;f=n.charAt(u);n=i._removeAt(n,r);e=i._isValid(f,r);n=i._insertAt(n,e?f:o,r);r=u}return n=i._removeAt(n,r),n=i._insertAt(n,o,r)},_shiftRightKey:function(n,t){var f,e,h,r=this,l=r.options,c=r._getMask(),a=n.charAt(t),o=l.promptChar,u,s,i;if(a!=o&&t<n.length-1){for(u=t+1,s=n.charAt(u);s!=o&&u<=n.length;)s=n.charAt(++u);if(s==o)for(i=u;i>t;){if(!r._skipSymbol(c.charAt(i))){for(e=i-1,f=n.charAt(e);r._skipSymbol(c.charAt(e));)f=n.charAt(--e);n=r._removeAt(n,i);h=r._isValid(f,i);n=r._insertAt(n,h?f:o,i)}i--}}return n},_shiftRightPaste:function(n,t){for(var e,i,o,r=this,s=r.options,h=r._getMask(),c=s.promptChar,f=t,u=n.charAt(f);f<n.length-1;){for(i=f+1;r._skipSymbol(h.charAt(i));)i++;if(i>n.length-1)break;e=n.charAt(i);n=r._removeAt(n,i);o=r._isValid(u,i);n=r._insertAt(n,o?u:c,i);u=e;f=i}return n},_commit:function(n){for(var r,t=this,f=t._getMask(),u=t._caret(),i=u.begin;t._skipSymbol(f.charAt(i));)++i;if(t._isValid(n,i)){for(u.end>u.begin&&t._removeRegion(!1),r=t._value(),r=t._shiftRightKey(r,i),r=t._removeAt(r,i),r=t._insertAt(r,n,i),t._value(r),i++;t._skipSymbol(f.charAt(i));)i++;t._caretTo(i)}},_verifyValue:function(n){var r=this,i=r._getMask(),t;if(n.length!=i.length)return!1;for(t=0;t<i.length;t++)if(r._skipSymbol(i.charAt(t))){if(i.charAt(t)!==n.charAt(t))return!1}else if(!r._isValid(n.charAt(t),t))return!1;return!0},_verifyMask:function(){for(var r,t=this,i=t._getMask(),u=t.options.rules,n=0;n<i.length;n++)if(!t._skipSymbol(i.charAt(n))&&(r=i.charAt(n),!nr(u[r])))return!1;return!0},_applyMask:function(){for(var n=this,u=n.options,i=n._getMask(),f=u.promptChar,r="",t=0;t<i.length;t++)r+=n._skipSymbol(i.charAt(t))?i.charAt(t):f;n._value(r)},_isEmptyMask:function(){for(var n=this,r=n._value(),u=n.options,i=n._getMask(),f=u.promptChar,t=0;t<i.length;t++)if(!n._skipSymbol(i.charAt(t))&&r.charAt(t)!==f)return!1;return!0},_clearMaskOnBlur:function(){this._isEmptyMask()&&this._value("")},_focus:function(){var i,t=this;n(t.element).addClass("sui-input-focus");i=t._value();i&&""!==i||t._applyMask();t.trigger(g)},_blur:function(){this._clearMaskOnBlur();this.trigger(nt)},_preventDrag:function(n){if(n.type==er||n.type==yu||n.type==pu||n.type==wu){var t=n.originalEvent.dataTransfer;return n.type==er?t.effectAllowed="none":t.dropEffect="none",n.stopPropagation&&(n.preventDefault(),n.stopPropagation()),!1}},_triggerChange:function(n){var i,t=this;n!==t._value()&&(i=t.trigger(l,{value:t._value(),old:n}),i.isDefaultPrevented()&&t._value(t.oldValue));clearInterval(t.changeInterval);t.changeInterval=r},_dragstart:function(n){return this._preventDrag(n)},_dragenter:function(n){return this._preventDrag(n)},_dragover:function(n){return this._preventDrag(n)},_drop:function(n){return this._preventDrag(n)},_keydown:function(n){var t=this,i=n.keyCode,e=t._enabled,f=t._value();switch(e||n.preventDefault(),i){case o.BACK:case o.DEL:t._removeRegion(i==o.BACK);t.changeInterval===r&&(t.changeInterval=setInterval(u(t._triggerChange,t,f),20));n.preventDefault();break;default:if(n.ctrlKey)switch(i){case 118:case 86:case 122:case 90:case 121:case 89:118==i||86==i?t._paste(n):122!=i&&90!=i||(t._undo(),t.changeInterval===r&&(t.changeInterval=setInterval(u(t._triggerChange,t,f),20)));n.preventDefault()}}},_keypress:function(n){var i,t=this,e=n.keyCode,s=n.which,f=(t._enabled,t._value());if(!n.ctrlKey){switch(e){case o.HOME:case o.END:case o.LEFT:case o.RIGHT:case o.TAB:if(!pt.ie)return;break;default:i=String.fromCharCode(s);t._commit(i)}n.preventDefault();t.changeInterval===r&&f!=t._value()&&(t.changeInterval=setInterval(u(t._triggerChange,t,f),20))}},_cut:function(){var n=this,t=n._caret();n.cutInterval===r&&(n.cutInterval=setInterval(u(n._aftercut,n,t),20))},_aftercut:function(n){for(var t=this,e=t._getMask(),i=t.value(),s=i,h=t.options.promptChar,u=n.begin,o,f=u;f<n.end;f++)i=t._insertAt(i,t._skipSymbol(e.charAt(f))?e.charAt(f):h,f);for(t._value(i),t._caretTo(u);t._skipSymbol(e.charAt(u));)++u;for(o=u;o<n.end;o++)t._skipSymbol(e.charAt(o))||(i=t._shiftLeft(i,u));t._value(i);t._caretTo(u);clearInterval(t.cutInterval);t.cutInterval=r;t._triggerChange(s)},_paste:function(n){var o,c,h,s,t=this,l=t._getMask(),f=t._value(),p=f,a=t._caret(),e=a.begin,v=t.options.promptChar,y=n.originalEvent||n;if(e==f.length||(y.clipboardData?o=y.clipboardData.getData("text/plain"):i.clipboardData&&(o=i.clipboardData.getData("Text")),null==o))return void n.preventDefault();if(e==a.end){for(;t._skipSymbol(l.charAt(e));)e++;for(s=o.length-1;s>=0;s--)f=t._shiftRightPaste(f,e),f=t._removeAt(f,e),c=t._isValid(o.charAt(s),e),f=t._insertAt(f,c?o.charAt(s):v,e);e+=o.length}else{for(h=e;h<a.end;h++)t._skipSymbol(l.charAt(h))||(f=t._removeAt(f,h),f=t._insertAt(f,v,h));for(s=0;s<o.length;s++){for(;t._skipSymbol(l.charAt(e));)e++;f=t._removeAt(f,e);c=t._isValid(o.charAt(s),e);f=t._insertAt(f,c?o.charAt(s):v,e);e++}}t._value(f);t._caretTo(e);n.preventDefault();t.changeInterval===r&&(t.changeInterval=setInterval(u(t._triggerChange,t,p),20))},_undo:function(){var n=this;n._applyMask()},_value:function(){return this.element.val.apply(this.element,arguments)},value:function(){if(arguments.length>0){var n=[].slice.call(arguments);if(!this._verifyValue(n[0]))return!1}return this._value.apply(this,arguments)},enabled:function(){var t,i=this,r=n(i.element),u=[].slice.call(arguments);return u.length>0?(t=!!u[0],t?r.removeAttr(f).removeClass("sui-input-disabled"):r.attr(f,f).addClass("sui-input-disabled"),i._enabled=t,void 0):i._enabled},destroy:function(){var n=this,t=n.options.cls;n.element.off(n._eventNS).removeClass("sui-input"+(t?" "+t:""));s.fn.destroy.call(n)}});vi.defaults=vr;t.ui.plugin("MaskedTextBox",vi);yi={editable:!0,enabled:!0,open:!1,cls:r,dataSource:r,autoComplete:{enabled:!1,delay:200,minLength:0,filter:r},valueTemplate:r,textTemplate:r,inputTemplate:r,selected:r,value:r,width:r,height:r,dropDownWidth:r,dropDownHeight:200,appendListBoxTo:"body",animation:{enabled:!0,openDelay:200,closeDelay:100},events:{}};yt=s.extend({init:function(){s.fn.init.apply(this,arguments);var h,p,ut,f,o,et,ht,t=this,r=t.options,y=r.editable,ct=r.dieOnError,b=r.dataSource,ft=r.autoComplete,k=r.selected,lt=r.value,at=r.appendListBoxTo;return t._original=h=n(t.element),t._utype=st(h),b||t._utype==tt?(t._eventNS=".shieldComboBox"+t.getInstanceId(),t.pending=0,t.element=f=h.wrap("<span/>").parent(),h.hide(),t._onDDHandler=u(t._onDD,t),y?(o=n('<input type="text" class="sui-input"/>').focus(function(){n(this).parent().addClass("sui-combobox-focus")}).blur(function(){n(this).parent().removeClass("sui-combobox-focus");t._blur()}).attr(v,gt).attr(rr,d),ut=h.attr(ri),e(ut)&&o.attr(ri,ut)):o=n('<span class="sui-input sui-unselectable">&nbsp;<\/span>').attr(fi,ei).on(w+t._eventNS,t._onDDHandler).on(ui+t._eventNS,function(){return!1}),t.textElement=o,o.appendTo(f),t.ddElement=et=n('<span class="sui-caret-container sui-unselectable"/>').html('<span class="sui-caret sui-unselectable" unselectable="on"/>').attr(fi,ei).on(w+t._eventNS,t._onDDHandler).appendTo(f),f.addClass(y?"sui-combobox":"sui-dropdown"),r.cls&&f.addClass(r.cls),p=h.attr(a),y?o.attr(a,e(p)?p:"0"):f.attr(a,e(p)?p:"0"),e(r.width)&&f.css(bu,r.width),e(r.height)&&(f.css(oi,r.height),o.css(oi,r.height),et.css(oi,r.height)),f.on(it+t._eventNS,u(t._keydown,t)).on(lf+t._eventNS,u(t._keyup,t)),t._focusHandler=u(t._focus,t),y?o.on(g+t._eventNS,t._focusHandler):f.on(g+t._eventNS,t._focusHandler),f.on(nt+t._eventNS,u(t._blur,t)),t.listElement=n("<span/>").appendTo(n(at)),ft&&(ht=e(ft.filter)?ft.filter:b&&b.filter?b.filter:t._utype==tt?{and:[{path:"text",filter:"contains",value:""}]}:{and:[{path:"",filter:"contains",value:""}]}),t.listBox=new vt(h,{cls:"sui-autocomplete",dataSource:b,readDataSource:!1,valueTemplate:r.valueTemplate,textTemplate:r.textTemplate,multiple:!1,selected:e(k)&&nu(k)?k[0]:k,values:lt,width:r.dropDownWidth||f.innerWidth(),maxHeight:r.dropDownHeight,renderToINTERNAL:t.listElement,wrapOriginalINTERNAL:!1,tabindexINTERNAL:pt.ie&&pt.version<=8?0:-1,filterINTERNAL:ht,events:{select:function(n){t._onLBSelChanged();t.trigger(ot,{index:n.index,item:n.item,text:n.text,value:n.value})},itemclick:function(n){y?o.focus():f.focus();t._hideDD();t.trigger(cu,{index:n.index,item:n.item,text:n.text,value:n.value})},blur:function(){setTimeout(u(t._blur,t),20)}}}),t.listBox.element.hide(),t.dataSource=t.listBox.dataSource,t.listBox.dataSource.on(l+t._eventNS,u(t._dsChange,t)),r.textTemplate=t.listBox.options.textTemplate,r.valueTemplate=t.listBox.options.valueTemplate,f.attr(v,"combobox"),y&&(o.attr(iu,"list"),o.attr(fr,t.listBox.element.attr(c)),o.attr(ur,t.listBox.element.attr(v))),t.listBox.dataSource.read(),n(i).on(ii+t._eventNS,u(t._position,t)),t.enabled(r.enabled),t._open=!1,r.enabled&&r.open&&t._showDD(!0),void(t._destroyed=!1)):(t.destroy(),void rt((y?"shieldComboBox":"shieldDropDown")+": No dataSource or underlying SELECT element found.",ct))},refresh:function(n){this.refreshWithElement(this._original,n)},focus:function(){var t=this;t.options.editable?(n(t.textElement).focus(),bt(n(t.textElement))):n(t.element).focus()},_focus:function(){var n=this;n._hasFocus||(n._hasFocus=!0,n._oldValue=n.value(),n.trigger(g))},_blur:function(){var t=this;setTimeout(function(){t._destroyed||null==t.listBox||n(t.listBox.element).is(":focus")||n(t.element).is(":focus")||n(t.textElement).is(":focus")||(t._hideDD(),t._oldValue!==t.value()&&t.trigger(l),t.trigger(nt),t._hasFocus=!1)},100)},_keydown:function(n){var t=this;switch(n.keyCode){case o.TAB:break;case o.UP:case o.DOWN:t._keydownUpDown(n);n.preventDefault();break;case o.ESC:case o.ENTER:n.preventDefault();t.cancelSearch=!0;t._hideDD();break;default:t._keydownDefault(n)}},_keyup:function(t){var i=this,r=t.keyCode;i.options.editable&&i._utype==b&&r!=o.UP&&r!=o.DOWN&&r!=o.ENTER&&r!=o.TAB&&n(i._original).attr(ft,n(i.textElement).val())},_keydownUpDown:function(t){this._enabled&&n(this.listBox.element).trigger(t)},_keydownDefault:function(n){var t=this;t.listBox.clearSelection();t._searchTimeout(n)},_searchTimeout:function(){var t=this,i=t.options.autoComplete;i&&i.enabled&&(clearTimeout(t.searchTimeout),t.searchTimeout=setTimeout(function(){t.term!==n(t.textElement).val()&&t._search()},i.delay))},_search:function(){var t=this;return t.listBox.dataSource,t.term=n(t.textElement).val(),t.term.length<t.options.autoComplete.minLength?void t._hideDD():(t.cancelSearch=!1,t.pending++,n(t.textElement).addClass("sui-autocomplete-loading"),ci(t.listBox.dataSource.filter,t.term),void t.listBox.dataSource.read())},_dsChange:function(){var t=this,r=t._original,u=t._utype,i=t.textElement.val();return t._dsLoaded?(t.pending--,t.pending||n(t.textElement).removeClass("sui-autocomplete-loading"),!t.cancelSearch&&t._hasData()?t._showDD(!0):t._hideDD(),u==tt?r.val(i):u==b&&r.attr(ft,i),void t.trigger(ot,{index:-1,item:i})):(t._dsLoaded=!0,!t.options.editable&&t.listBox.selected().length<=0&&t.listBox.selected(0),void t._onLBSelChanged())},_hasData:function(){var n=this.listBox.dataSource.view;return n&&n.length>0},_onLBSelChanged:function(){var s,u,r,n=this,t=n.options,f=t.editable,o=n.listBox,i=o.selectedItems();i&&i.length>0?(s=ut.call(n,t.valueTemplate,i[0]),u=ut.call(n,t.textTemplate,i[0]),r=e(t.inputTemplate)?ut.call(n,t.inputTemplate,i[0]):u,f?(n.textElement.val(r),n.textElement.attr(ni,o.element.attr(ni))):n.textElement.html(r)):f?(n.textElement.val(""),n.textElement.removeAttr(ni)):n.textElement.html("&nbsp;")},_onDD:function(){var n=this,t=n.textElement;n.options.editable?(t.focus(),bt(t)):n.element.focus();n._open?n._hideDD():n._hasData()&&n._showDD(!1)},_position:function(){var t=this,i=n(t.element),r=n(t.listBox.element);r.width(t.options.dropDownWidth||i.innerWidth());gr.Set(r,i,{source:"left top",target:"left bottom",overflow:"none"})},_showDD:function(t){var i=this,r=i.listBox,f=n(r.element),e=i.options.animation;i._enabled&&(f.css({top:0,left:0}),f.show(),i._position(),!t&&e&&e.enabled?f.hide().slideDown(e.openDelay,u(r.ensureActiveViewableINTERNAL,r)):r.ensureActiveViewableINTERNAL(),i._open=!0,n(i.element).attr(ou,y))},_hideDD:function(){var t=this,r=n(t.listBox.element),i=t.options.animation;i&&i.enabled?r.slideUp(i.closeDelay):r.hide();t._open=!1;n(t.element).attr(ou,d)},enabled:function(){var i,t=this,r=t.options.editable,u=n(t.element),e=t.textElement,o=t.ddElement,s=t._original,h=[].slice.call(arguments);return h.length>0?(i=!!h[0],i?(u.removeAttr(f).removeClass(r?"sui-combobox-disabled":"sui-dropdown-disabled"),e.removeAttr(f),o.removeAttr(f),s.removeAttr(f)):(t._open&&t._hideDD(),u.attr(f,f).addClass(r?"sui-combobox-disabled":"sui-dropdown-disabled"),e.attr(f,f),o.attr(f,f),s.attr(f,f)),t._enabled=i,void 0):t._enabled},selected:function(){var n,i=this,t=i.listBox,r=[].slice.call(arguments);return r.length>0?(n=r[0],t.clearSelection(),e(n)&&(n=du(n),n>-1?t.selected(n):i.options.editable||t.selected(0)),i._onLBSelChanged(),void 0):(n=t.selected(),n&&n.length>0?n[0]:-1)},selectedItem:function(){var t=this,n=t.listBox.selectedItems();return n&&n.length>0?n[0]:null},value:function(){var t,i=this,r=i.listBox,u=[].slice.call(arguments);return u.length>0?(r.clearSelection(),r.values(u[0]),i._onLBSelChanged(),void 0):(t=r.values(),t&&t.length>0?t[0]:i.options.editable?n(i.textElement).val():null)},text:function(){var t=this,i=t.listBox.texts();return i&&i.length>0?i[0]:t.options.editable?n(t.textElement).val():null},destroy:function(){var t=this,f=n(t.element),r=n(t.textElement),u=n(t.ddElement);t._destroyed||(t._destroyed=!0,t._dsLoaded=!1,r.off(t._eventNS),u.off(t._eventNS),t._onDDHandler=null,n(i).off(ii+t._eventNS),f.off(t._eventNS),t.dataSource=null,t.listBox&&(t.listBox.dataSource.off(l+t._eventNS),t.listBox.destroy(),t.listBox=null),n(t.listElement).remove(),r.remove(),u.remove(),t._original.unwrap().show(),t._original=null,s.fn.destroy.call(t))}});yt.defaults=yi;t.ui.plugin("ComboBox",yt);yr=ir({},yi,{editable:!1,autoComplete:r});pi=yt.extend({init:function(n,t){t&&(t.editable=!1,t.autoComplete=r);yt.prototype.init.call(this,n,t)}});pi.defaults=yr;t.ui.plugin("DropDown",pi);wi={enabled:!0,cls:r,toggle:!1,checked:!1,events:{}};k=s.extend({init:function(){s.fn.init.apply(this,arguments);var t=this,i=n(t.element),r=t.options,f=r.cls;t._eventNS=".shieldButton"+t.getInstanceId();i.addClass("sui-button");f&&i.addClass(f);i.on(w+t._eventNS,u(t._click,t));i.attr(v,ff);t.enabled(r.enabled);r.toggle&&(t._checked=!!r.checked,t._checked?i.addClass("sui-button-checked"):i.removeClass("sui-button-checked"),i.attr(h+"-pressed",t._checked?y:d))},_click:function(t){var i=this,r=n(i.element);i._enabled&&(i.options.toggle&&(i._checked=!i._checked,i._checked?r.addClass("sui-button-checked"):r.removeClass("sui-button-checked"),r.attr(h+"-pressed",i._checked?y:d)),i.trigger(w,t))},checked:function(){var t=this,i=n(t.element),r=[].slice.call(arguments);return r.length>0?void(t.options.toggle&&(t._checked=!!r[0],t._checked?i.addClass("sui-button-checked"):i.removeClass("sui-button-checked"),i.attr(h+"-pressed",t._checked?y:d))):t._checked},enabled:function(){var t,i=this,r=n(i.element),u=[].slice.call(arguments);return u.length>0?(t=!!u[0],t?r.removeAttr(f).removeClass("sui-button-disabled").removeAttr(uu):r.attr(f,f).addClass("sui-button-disabled").attr(uu,y),i._enabled=t,void 0):i._enabled},destroy:function(){var n=this,t=n.options.cls;n.element.off(w+n._eventNS).removeClass("sui-button sui-button-checked sui-button-disabled"+(t?" "+t:""));s.fn.destroy.call(n)}});k.defaults=wi;t.ui.plugin("Button",k);pr=ir({},wi,{menu:r,dataSource:r,events:{}});bi=k.extend({init:function(){if(k.fn.init.apply(this,arguments),t.ui.ContextMenu){var i=this,r=n(i.element),f=i.options,o=f.menu,s=f.cls;i._handle=n('<button type="button"><span class="sui-caret-down"/><\/button>');r.after(i._handle);i._handleButton=new k(i._handle,{cls:"sui-button-split-handle"+(s?" "+s:""),events:{click:function(){if(i.menu.visible())i.menu.visible(!1);else{var t=n(r).offset();i.menu.visible(!0,{x:t.left,y:t.top+n(r).outerHeight()})}}}});e(o)?i._menuElement=n(o):(i._menuElement=n("<ul/>"),i._customMenuElement=!0,i._handle.after(i._menuElement));i._menuElement.attr(c)||i._menuElement.attr(c,ht());i.menu=new t.ui.ContextMenu(i._menuElement,{cls:"sui-button-split-menu",dataSource:f.dataSource,minWidth:r.outerWidth()+i._handle.outerWidth()-2,events:{click:u(i.trigger,i,"menuClick")}});n(i._handle).attr(ur,y).attr(fr,i._menuElement.attr(c))}},enabled:function(){var n=this;return arguments&&arguments.length>0?(k.fn.enabled.apply(n,arguments),n._handleButton&&n._handleButton.enabled.apply(n._handleButton,arguments),n.menu&&!arguments[0]&&n.menu.visible(!1),void 0):k.fn.enabled.apply(n,arguments)},visible:function(){var n=this;return arguments&&arguments.length>0?(k.fn.visible.apply(n,arguments),n._handleButton&&n._handleButton.visible.apply(n._handleButton,arguments),n.menu&&!arguments[0]&&n.menu.visible(!1),void 0):k.fn.visible.apply(n,arguments)},destroy:function(){var t=this;t.menu&&(t.menu.destroy(),t.menu=r);t._menuElement&&(t._customMenuElement&&(n(t._menuElement).remove(),t._customMenuElement=r),t._menuElement=r);t._handleButton&&(t._handleButton.destroy(),t._handleButton=r);t._handle&&(n(t._handle).remove(),t._handle=r);k.fn.destroy.call(t)}});bi.defaults=pr;t.ui.plugin("SplitButton",bi);wr={enabled:!0,enableThreeStates:!1,enableLabelClick:!0,checked:!1,label:"",events:{}};ki=s.extend({init:function(){var r,i,b,f,h,t=this,o,l,y;s.fn.init.apply(this,arguments);t._eventNS=".shieldCheckBox"+t.getInstanceId();r=t.options;o=n(t.element).addClass("sui-checkbox-input");h=o.attr(c);h||o.attr(c,h=ht());b=o.attr(a);f=t.wrapper=o.wrap('<span class="sui-checkbox"/>').parent().attr(a,e(b)?b:0);l=n('<span class="sui-checkbox-element sui-checkbox-unchecked"/>');(l.appendTo(f),t.checkBoxElement=l,n('<span class="sui-checkmark"/>').appendTo(l),r.label?(i=n('<label class="sui-checkbox-label"/>'),i.appendTo(f),i.attr("for",h),i.get(0).innerHTML=r.label,r.enableLabelClick&&i.addClass("sui-checkbox-label-hover")):(i=o.parent().parent(),i&&!i.is("label")&&(i=n('label[for="'+h+'"]')),i&&r.enableLabelClick&&i.addClass("sui-checkbox-label-hover")),f.attr(v,"checkbox"),i)&&(y=i.attr(c),y||i.attr(c,y=ht()),f.attr(eu,y));o.attr(p)&&(r.checked=!0);t.enabled(r.enabled);t.checked(r.checked);f.on(w+t._eventNS,u(t._click,t)).on(it+t._eventNS,u(t._keydown,t));i&&r.enableLabelClick&&i.on(w+t._eventNS,u(t._click,t)).on(it+t._eventNS,u(t._keydown,t));f.onselectstart=function(){return!1};f.onmousedown=function(){return!1}},_click:function(t){var i=this;n(i.element);i._enabled&&(i._checked?i._checked=i.options.enableThreeStates?null:!1:i._checked===!1?i._checked=!0:null===i._checked&&(i._checked=!1),i.checked(i._checked),i.trigger(w,t),t.preventDefault(),t.stopPropagation())},_keydown:function(n){n.keyCode==o.SPACE&&this._click(n)},hide:function(){n(this.wrapper).hide()},show:function(){n(this.wrapper).show()},isVisible:function(){return n(this.wrapper).is(":visible")},checked:function(){var u,r=this,e=[].slice.call(arguments),i=n(r.element),t=r.wrapper,f=t.find(".sui-checkmark");return e.length>0?(r._checked=u=e[0],void(u?(t.find(".sui-checkbox-element").removeClass("sui-checkbox-unchecked sui-checkbox-indeterminate").addClass("sui-checkbox-checked"),t.attr(et,y),i.attr(p,p),i.data("1"),pt.ie&&pt.version<=8&&f.css("filter","progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', M11=0.7071067811865476, M12=0.7071067811865475, M21=-0.7071067811865475, M22=0.7071067811865476)")):u===!1?(t.find(".sui-checkbox-element").removeClass("sui-checkbox-checked sui-checkbox-indeterminate").addClass("sui-checkbox-unchecked"),t.attr(et,d),i.removeAttr(p),i.data("0"),f.css("filter","")):null===u&&r.options.enableThreeStates&&(t.find(".sui-checkbox-element").removeClass("sui-checkbox-checked sui-checkbox-unchecked").addClass("sui-checkbox-indeterminate"),t.attr(et,"mixed"),i.removeAttr(p),i.data("2"),f.css("filter","")))):r._checked},enabled:function(){var t=this,r=[].slice.call(arguments),u=n(t.element),i;if(!(r.length>0))return t._enabled;i=!!r[0];i?(t.wrapper.removeAttr(f).removeClass("sui-checkbox-disabled"),u.removeAttr(f)):(t.wrapper.attr(f,f).addClass("sui-checkbox-disabled"),u.attr(f,f));t._enabled=i},destroy:function(){var n=this;n.element.removeClass("sui-checkbox-input").removeAttr(a);n.checkBoxElement&&n.checkBoxElement.off(n._eventNS);n.wrapper&&(n.wrapper.find(".sui-checkbox-label").off(n._eventNS).end().removeAttr(f).removeClass("sui-checkbox-disabled").replaceWith(n.element),n.wrapper=null);s.fn.destroy.call(n)}});ki.defaults=wr;t.ui.plugin("CheckBox",ki);br={enabled:!0,enableLabelClick:!0,checked:!1,label:"",events:{}};di=s.extend({init:function(){var l,y;s.fn.init.apply(this,arguments);var i,b,r,h,t=this,o=n(t.element),f=t.options;t._eventNS=".shieldRadioButton"+t.getInstanceId();o.addClass("sui-radiobutton-input");h=o.attr(c);h||o.attr(c,h=ht());b=o.attr(a);r=t.wrapper=o.wrap('<span class="sui-radiobutton"/>').parent();r.attr(a,e(b)?b:0);l=n('<span class="sui-radiobutton-element"/>');(l.appendTo(r),t.radioButtonElement=l,n('<span class="sui-checkmark"/>').appendTo(l),f.label?(i=n('<label class="sui-radiobutton-label"/>'),i.appendTo(r),i.attr("for",h),i.get(0).innerHTML=f.label,f.enableLabelClick&&i.addClass("sui-radiobutton-label-hover")):(i=o.parent().parent(),i&&!i.is("label")&&(i=n('label[for="'+h+'"]')),i&&f.enableLabelClick&&i.addClass("sui-radiobutton-label-hover")),r.attr(v,"radio"),i)&&(y=i.attr(c),y||i.attr(c,y=ht()),r.attr(eu,y));o.attr(p)&&(f.checked=!0);t.enabled(f.enabled);f.checked?t.checked(f.checked):t._checked=!1;r.on(w+t._eventNS,u(t._click,t)).on(it+t._eventNS,u(t._keydown,t));i&&f.enableLabelClick&&i.on(w+t._eventNS,u(t._click,t)).on(it+t._eventNS,u(t._keydown,t));r.onselectstart=function(){return!1};r.onmousedown=function(){return!1}},_click:function(n){var t=this;t._enabled&&(t.checked(!0),t.trigger(w,n),n.preventDefault(),n.stopPropagation())},_keydown:function(n){n.keyCode==o.SPACE&&this._click(n)},hide:function(){n(this.wrapper).hide()},show:function(){n(this.wrapper).show()},isVisible:function(){return n(this.wrapper).is(":visible")},checked:function(){var n=this,t=[].slice.call(arguments);return t.length>0?(n._uncheckAllFromSameGroup(),void n._checkInternal(t[0])):n._checked},_checkInternal:function(t){var r=this,u=n(r.element),i=r.wrapper;r._checked=t;t?(i.find(".sui-radiobutton-element").removeClass("sui-radiobutton-unchecked sui-radiobutton-indeterminate").addClass("sui-radiobutton-checked"),i.attr(et,y),u.attr(p,p)):(i.find(".sui-radiobutton-element").removeClass("sui-radiobutton-checked"),i.attr(et,d),u.removeAttr(p))},_uncheckAllFromSameGroup:function(){var i=this,t=n(i.element);n('input[type="radio"][name="'+t.attr("name")+'"]').not(t).each(function(){var t=n(this).swidget();t&&(t._checkInternal(!1),t.trigger(l))})},enabled:function(){var t=this,r=[].slice.call(arguments),u=n(t.element),i;if(!(r.length>0))return t._enabled;i=!!r[0];i?(t.wrapper.removeAttr(f).removeClass("sui-radiobutton-disabled"),u.removeAttr(f)):(t.wrapper.attr(f,f).addClass("sui-radiobutton-disabled"),u.attr(f,f));t._enabled=i},destroy:function(){var n=this;n.element.removeClass("sui-radiobutton-input").removeAttr(a);n.radioButtonElement&&(n.radioButtonElement.off(n._eventNS),n.radioButtonElement=null);n.wrapper&&(n.label&&(n.label.off(n._eventNS),n.label=null),n.wrapper.removeAttr(f).removeClass("sui-radiobutton-disabled"),n.wrapper.replaceWith(n.element),n.wrapper=null);s.fn.destroy.call(n)}});di.defaults=br;t.ui.plugin("RadioButton",di);kr={cls:r,enabled:!0,checked:r,onText:r,offText:r,events:{}};gi=s.extend({init:function(){s.fn.init.apply(this,arguments);var i,h,r,c,l,t=this,f=t.options,k=f.dieOnError,y=f.cls,o=f.checked;return t._original=i=n(t.element),st(i)!==b||"checkbox"!==i.attr("type")?void rt("shieldSwitch: Underlying element must ne an input of type checkbox.",k):(t._eventNS=".shieldSwitch"+t.getInstanceId(),t.element=r=i.wrap('<div class="sui-switch sui-unselectable'+(y?" "+y:"")+'" />').parent(),l=n('<div class="sui-switch-inner sui-unselectable" />').appendTo(r),t._text=n('<span class="sui-switch-text sui-unselectable" />').appendTo(l),t._handle=c=n('<div class="sui-switch-handle sui-unselectable" />').appendTo(r),c.height(r.height()),i.hide(),h=i.attr(a),r.attr(a,e(h)?h:"0"),r.on(w+t._eventNS,u(t._click,t)).on(it+t._eventNS,u(t._keydown,t)),o=e(o)?!!o:!!i.attr(p),r.attr(v,ef),t.checked(o,!1),void t.enabled(f.enabled))},refresh:function(n){this.refreshWithElement(this._original,n)},_keydown:function(n){var t=this;n.keyCode===o.SPACE&&(t._click(n),n.preventDefault())},_click:function(n){var t=this;t._enabled&&(t.checked(!t._checked),t.trigger(w,n),n.preventDefault(),n.stopPropagation())},checked:function(){var u,c,t=this,l=t.options,f=l.onText,o=l.offText,i=n(t.element),s=n(t._handle),a=n(t._text),v=t._original,r=[].slice.call(arguments),h=100;return r.length>0?(u=!!r[0],c=!e(r[1])||!!r[1],c||(h=0),u?(v.attr(p,p),s.animate({left:i.width()-s.width()-2},h,function(){i.addClass("sui-switch-checked").attr(et,y);e(f)&&(a.html(f),i.attr(fu,sr(f)))})):(v.removeAttr(p),s.animate({left:-2},h,function(){i.removeClass("sui-switch-checked").attr(et,d);e(o)&&(a.html(o),i.attr(fu,sr(o)))})),t._checked=u,void 0):t._checked},enabled:function(){var i,t=this,r=n(t.element),u=t._original,e=[].slice.call(arguments);return e.length>0?(i=!!e[0],i?(r.removeAttr(f).removeClass("sui-switch-disabled"),u.removeAttr(f)):(r.attr(f,f).addClass("sui-switch-disabled"),u.attr(f,f)),t._enabled=i,void 0):t._enabled},destroy:function(){var t=this;n(t.element).off(t._eventNS);n(t._inner).remove();n(t._handle).remove();t._original.unwrap().show();t._original=t._inner=t._handle=null;s.fn.destroy.call(t)}});gi.defaults=kr;t.ui.plugin("Switch",gi)}(jQuery,shield,this);!function(n,t,i,r){var ht,ut,k,c,ft,ct,et,lt,ot,at,b=t.ui.Widget,gt=t.Class,y=t.format,ni=t.parseDate,l=document,p=t.is.func,it=t.is,u=n.proxy,ti=navigator.userAgent,ii=i.opera,vt=/msie/i.test(ti)&&!ii,ri=vt&&8===l.documentMode,d=n.extend,yt=it.undefined,pt=it.string,a="month",h="year",v="decade",w="century",f="click",g="mousedown",ui="keypress",nt="focus",wt="selectstart",fi="select",e="change",st="viewChange",rt="depthChange",ei="open",bt="close",kt="blur",o="display",s="none",tt,dt;ht={enabled:!0,readOnly:!1,hover:!0,footer:{enabled:!0,footerTemlpate:"Today"},min:new Date(1900,0,1),max:new Date(2099,11,31),value:r,focused:new Date,labels:{previous:"Previous",next:"Next"},view:{depth:a,start:a},dayTemplate:"{day}",otherMonthDayTemplate:"{day}",outOfRangeDayTemplate:"&nbsp;",dateTooltipTemplate:"{date:MM/dd/yyyy}",events:{}};tt=function(n){var t=!1,r="Webkit Moz ms O".split(" "),u=l.createElement("div"),f=null,i;if(n=n.toLowerCase(),u.style[n]&&(t=!0),t===!1)for(f=n.charAt(0).toUpperCase()+n.substr(1),i=0;i<r.length;i++)if(void 0!==u.style[r[i]+f]){t=!0;break}return t};dt=gt.extend({init:function(i){var e=this,u=i.listbox,h=i.min,c=i.max,a=i.interval,r=i.parent,v=i.textTemplate,f;t.ui.ListBox&&(it.object(u)&&u instanceof t.ui.ListBox?r.listBox=u:(r._listBoxWrapper=n("<div style='display: none;' />").appendTo(l.body),f=e._populateDataSource(h,c,a),r.listBox=new t.ui.ListBox(r._listBoxWrapper,d({},u,{dataSource:{data:f},multiple:!1,textTemplate:v,width:r._wrapper.innerWidth(),maxHeight:200})),r._wrapper.parent().hasClass("sui-rtl")?r.listBox.element.parent().addClass("sui-rtl"):r.listBox.element.parent().css(o,s)),r._shouldShowPopup=!0)},_populateDataSource:function(n,t,i){var r,u,f=[];for(t<=n?t=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,t.getHours(),t.getMinutes(),t.getSeconds()):(t=new Date(n.getFullYear(),n.getMonth(),n.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()),t.getTime()==n.getTime()&&(t=new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,t.getHours(),t.getMinutes(),t.getSeconds()))),r=n.getTime(),u=t.getTime();r<u;)f.push(new Date(r)),r+=6e4*i;return f},destroy:function(){var n=this;n.listBox;n.listBox&&(n.listBox.destroy(),n.listBox=null)}});ut=b.extend({init:function(){b.fn.init.apply(this,arguments);var t=this,r=n(t.element),i=t.options,o=i.cls,e=i.value;r.addClass("sui-calendar"+(o?" "+o:""));t._focusedDate=i.focused;t._view=i.view.start;t._enabled=i.enabled;e&&(pt(e)&&(e=new Date(e)),t._focusedDate=t._selectedDate=new Date(e.getFullYear(),e.getMonth(),e.getDate()));t._initializeHeader();t._render();i.footer.enabled&&t._initializeFooter();!i.readOnly&&i.enabled?(r.find(".sui-prev").on(f,t._movePrev=u(t._movePrevHandler,t)),r.find(".sui-next").on(f,t._moveNext=u(t._moveNextHandler,t)),r.find(".sui-text").on(f,t._changeViewDepth=u(t._changeViewDepthHandler,t)),r.find(".sui-footer").on(f,t._selectToday=u(t._selectTodayHandler,t))):i.readOnly?r.addClass("sui-read-only"):r.addClass("sui-calendar-disabled");vt&&r.on(wt,t._selectStart=function(){return!1})},_calendarSelectionHandler:function(t){var r,o,i=this,f=n(t.target).closest("td"),u=i._focusedDate,l,s,c;if(i.options.view.depth,f.length&&!f.hasClass("sui-out-of-range")&&!f.hasClass("sui-no-hover")&&i._enabled)switch(i._calendarTable.find(".sui-focused").removeClass("sui-focused"),i._view){case a:r=new Date(f.attr("data-value"));l=i._shouldChangeView(r);s=!1;r.getTime()>i._focusedDate&&(s=!0);i._focusedDate=r;i._selectedDate=r;l&&(i._animationBegins(s),i._renderView(),i._animationEnds(s),i.trigger(st));i._selectDateCell(r);i.trigger(e);break;case h:c=parseInt(f.attr("data-value"),10);r=new Date(u.getFullYear(),c,u.getDate());r.getDate()!=u.getDate()&&(r=new Date(u.getFullYear(),c+1,0));i._focusedDate=r;i.options.view.depth==h?(i._selectedDate=r,i._selectDateCell(r),i.trigger(e)):(i._view=a,i._viewDepthAnimationBegins(),i._renderView(),i._viewDepthAnimationEnds(),i.trigger(rt));break;case v:o=parseInt(f.attr("data-value"),10);r=new Date(o,u.getMonth(),u.getDate());r.getDate()!=u.getDate()&&(r=new Date(o,u.getMonth()+1,0));i._focusedDate=r;i.options.view.depth==v?(i._selectedDate=r,i._selectDateCell(r),i.trigger(e)):(i._view=h,i._viewDepthAnimationBegins(),i._renderView(),i._viewDepthAnimationEnds(),i.trigger(rt));break;case w:o=parseInt(f.attr("data-value"),10);r=new Date(o,u.getMonth(),u.getDate());r.getDate()!=u.getDate()&&(r=new Date(o,u.getMonth()+1,0));i._focusedDate=r;i.options.view.depth==w?(i._selectedDate=r,i._selectDateCell(r),i.trigger(e)):(i._view=v,i._viewDepthAnimationBegins(),i._renderView(),i._viewDepthAnimationEnds(),i.trigger(rt))}},_shouldChangeView:function(n){var t,f,e=this,o=e._focusedDate,u=!1,i=o.getFullYear(),r=n.getFullYear();switch(e._view){case a:r==i&&n.getMonth()==o.getMonth()||(u=!0);break;case h:r!=i&&(u=!0);break;case v:t=i-i%10;f=t+10;(r<t||r>f)&&(u=!0);break;case w:t=i-i%100;f=t+100;(r<t||r>f)&&(u=!0)}return u},_selectTodayHandler:function(){var n=this,t=new Date,u=n._shouldChangeView(t),i=!1,r;n._enabled&&(r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r.getTime()>n._focusedDate&&(i=!0),n._selectedDate=n._focusedDate=r,n._view!=n.options.view.depth?(n._view=n.options.view.depth,n._viewDepthAnimationBegins(),n._renderView(),n._viewDepthAnimationEnds(),n.trigger(rt)):u?(n._animationBegins(i),n._renderView(),n._animationEnds(i),n.trigger(st)):n._selectDateCell(n._focusedDate),n.trigger(e))},_selectDateCell:function(t){var i=this,r=null;switch(i._view){case a:r=i._calendarTable.find(".sui-date:not('.sui-other-month')").filter(function(){var r=n(this).attr("data-value"),i=new Date(r);return i.getDate()==t.getDate()&&i.getMonth()==t.getMonth()&&i.getFullYear()==t.getFullYear()});break;case h:r=i._calendarTable.find(".sui-month").filter(function(){return n(this).attr("data-value")==t.getMonth()});break;case v:r=i._calendarTable.find(".sui-year").filter(function(){return n(this).attr("data-value")==t.getFullYear()});break;case w:r=i._calendarTable.find(".sui-years").filter(function(){var i=parseInt(n(this).attr("data-value"),10);return t.getFullYear()>=i&&t.getFullYear()<i+10})}i._calendarTable.find(".sui-selected").removeClass("sui-selected");r.addClass("sui-selected")},_viewDepthAnimationBegins:function(){var n=this,t,i;if(!tt("transition"))return void n._calendarTable.empty();n._enabled=!1;t=n._calendarTable;i=!1;t.bind("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){i=n._removeOldTable(t,n)});setTimeout(function(){i||n._removeOldTable(t,n)},1e3);t.addClass("sui-fade-in");n._renderTable()},_removeOldTable:function(n,t){return n.unbind("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),n.remove(),t._enabled=!0,!0},_viewDepthAnimationEnds:function(){tt("transition")&&this._calendarTable.addClass("sui-scaling")},_changeViewDepthHandler:function(){var n=this,t=[a,h,v,w],i=jQuery.inArray(n._view,t);i<3&&n._enabled&&(n._view=t[i+1],n._viewDepthAnimationBegins(),n._renderView(),n._viewDepthAnimationEnds())},_movePrevMonth:function(){var t=this,n=t._focusedDate,i=(t._view,new Date(n.getFullYear(),n.getMonth()-1,n.getDate()));i.getDate()!=n.getDate()&&(i=new Date(n.getFullYear(),n.getMonth(),0));t._focusedDate=i},_moveNextMonth:function(){var t=this,n=t._focusedDate,i=(t._view,new Date(n.getFullYear(),n.getMonth()+1,n.getDate()));i.getDate()!=n.getDate()&&(i=new Date(n.getFullYear(),n.getMonth()+2,0));t._focusedDate=i},_movePrevYears:function(n){var i=this,t=i._focusedDate,r=(i._view,new Date(t.getFullYear()-n,t.getMonth(),t.getDate()));r.getMonth()!=t.getMonth()&&(r=new Date(t.getFullYear()-n,t.getMonth()+1,0));i._focusedDate=r;i._calendarTable.empty()},_moveNextYears:function(n){var i=this,t=i._focusedDate,r=(i._view,new Date(t.getFullYear()+n,t.getMonth(),t.getDate()));r.getMonth()!=t.getMonth()&&(r=new Date(t.getFullYear()+n,t.getMonth()+1,0));i._focusedDate=r;i._calendarTable.empty()},_animationBegins:function(t){var i=this,u="-",r;if(!tt("transition"))return void i._calendarTable.empty();i._calendarTable.removeClass("sui-scaling");i._tableWrapper=n("<div>").insertAfter(i.element.find(".sui-header"));i._tableWrapper.width(2*i.element.width());i.element.find(".sui-calendar-view").appendTo(i._tableWrapper);i.element.parent().hasClass("sui-rtl")&&(t=!t,u="+");i._renderTable(t);t||(i._tableWrapper.css("position","relative"),i._tableWrapper.css("left",u+i.element.width()+"px"));i._tableWrapper.addClass("sui-calendar-animation");i._enabled=!1;r=!1;i._tableWrapper.bind("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){r=i._removeTempTables(i)});setTimeout(function(){r||i._removeTempTables(i)},1e3)},_removeTempTables:function(n){return n._tempTable.remove(),n._calendarTable.insertAfter(n.element.find(".sui-header")),n._tableWrapper.unbind("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),n._tableWrapper.remove(),n._tableWrapper=null,n._enabled=!0,!0},_animationEnds:function(n){var i=this,t;tt("transition")&&(t=i.element.width(),n&&(t*=-1),i._tableWrapper.css("transform","translateX("+t+"px)"))},_moveView:function(n){var t=this;switch(t._animationBegins(n),t._view){case a:n?t._moveNextMonth():t._movePrevMonth();t._createMonthView();break;case h:n?t._moveNextYears(1):t._movePrevYears(1);t._createYearsView();break;case v:n?t._moveNextYears(10):t._movePrevYears(10);t._createDecadeView();break;case w:n?t._moveNextYears(100):t._movePrevYears(100);t._createcenturyView()}t._animationEnds(n);t.trigger(st)},_disablePrev:function(n){var t=this,i=t.element.find(".sui-prev");n?(t.preventPrevNavigation=!0,i.addClass("sui-calendar-disabled")):(t.preventPrevNavigation=!1,i.removeClass("sui-calendar-disabled"))},_disableNext:function(n){var t=this,i=t.element.find(".sui-next");n?(t.preventNextNavigation=!0,i.addClass("sui-calendar-disabled")):(t.preventNextNavigation=!1,i.removeClass("sui-calendar-disabled"))},_movePrevHandler:function(){var n=this;!n.preventPrevNavigation&&n._enabled&&n._moveView(!1)},_moveNextHandler:function(){var n=this;!n.preventNextNavigation&&n._enabled&&n._moveView(!0)},_initializeHeader:function(){var i=this,t=i.options.labels;this._header=n('<div class="sui-header"><span unselectable="on"  title="'+t.previous+'" class="sui-prev"><span unselectable="on" class="sui-left-arrow"><\/span><\/span><span class="sui-text"><\/span><span unselectable="on" title="'+t.next+'" class="sui-next"><span unselectable="on" class="sui-right-arrow"><\/span><\/span><\/div>').appendTo(this.element)},_renderTable:function(t){var i=this,r=i.options,e="sui-calendar-view";r.hover&&r.enabled&&(e+=" sui-hoverable");i._calendarTable?(i.element.find(".sui-calendar-view").off(f,i._calendarSelection),i._calendarSelection=null,t?(i._tempTable=i.element.find(".sui-calendar-view"),i._calendarTable=n("<table />").width(i.element.width()).addClass(e).insertAfter(i._tempTable)):(i._tempTable=i.element.find(".sui-calendar-view"),i._calendarTable=n("<table />").width(i.element.width()).addClass(e).insertBefore(i._tempTable))):i._calendarTable=n("<table />").width(i.element.width()).addClass(e).insertAfter(i.element.find(".sui-header"));!r.readOnly&&r.enabled&&i.element.find(".sui-calendar-view").on(f,i._calendarSelection=u(i._calendarSelectionHandler,i))},_render:function(){this._renderTable();this._renderView()},_renderView:function(){var n=this;switch(n._view){case a:n._createMonthView();break;case h:n._createYearsView();break;case v:n._createDecadeView();break;case w:n._createcenturyView();break;default:n._createMonthView()}},_initializeFooter:function(){var i=this,r=i.options,t=r.footer.footerTemlpate,u=p(t)?t:function(n){return y(t,n)};n('<div class="sui-footer"><span class="sui-footer-text">'+u.call(i,new Date)+"<\/span><\/div>").appendTo(this.element)},_createMonthView:function(){for(var i=this,s=i.options,k=i._focusedDate,ht=i._calendarTable,d=t.getCalendarInfo(),g=d.days,c=d.firstDay,ti=d.months,nt=g.namesShort,l=[],ii=g.namesAbbr,ri=g.names,ct=s.min,lt=s.max,tt=s.dayTemplate,it=s.otherMonthDayTemplate,rt=s.dateTooltipTemplate,ut=s.outOfRangeDayTemplate,ui=p(tt)?tt:function(n){return y(tt,n)},fi=p(it)?it:function(n){return y(it,n)},ei=p(rt)?rt:function(n){return y(rt,n)},oi=p(ut)?ut:function(n){return y(ut,n)},si=n("<thead />").appendTo(ht),hi=n("<tr />").addClass("sui-week-header").appendTo(si),at="",u=0,w,f,gt,ni,u=c;u<nt.length;u++)l.push(nt[u]);for(w=0;w<c;w++)l.push(nt[w]);for(f=0;f<l.length;f++)l[f],at+="<th scope='col' abbr='"+ii[f]+"' title='"+ri[f]+"'>"+l[f]+"<\/th>";hi.html(at);var ci=n('<tbody class="sui-days"/>').appendTo(ht),e=k.getFullYear(),o=k.getMonth(),b=new Date(e,o,1).getDay()-c,li=new Date(e,o+1,0).getDay()-c,vt=new Date(e,o+1,0).getDate(),yt=7;i._header.find(".sui-text").text(ti.names[o]+" "+e);b<=0&&(b=7-(0===b?0:c),yt=0);var ft=-1*b+1,a=6-li+vt+yt,et=0,pt=null,ot="";for(a-ft>42&&(a-=7),a-ft<35&&(a+=7),u=ft;u<=a;u++){var r=new Date(e,o,u,0,0,0,0),wt="sui-date",st=r.getTime()<ct.getTime()||r.getTime()>lt.getTime()?" sui-out-of-range":"",h=u<1||u>vt?" sui-other-month":"",bt=6==r.getDay()||0===r.getDay()?" sui-weekend":"",kt=st||k.getDate()!=u||h?"":" sui-focused",dt=i._selectedDate&&r.getTime()==i._selectedDate.getTime()&&!h?" sui-selected":"",v=null;st?(v=oi.call(i,{date:r,day:r.getDate()}),h="",bt="",kt="",dt="",wt=""):h?(v=fi.call(i,{date:r,day:r.getDate()}),""===v&&(h+=" sui-no-hover")):v=ui.call(i,{date:r,day:r.getDate()});ot+="<td title='"+ei.call(i,{date:r,day:r.getDate()})+"' data-value='"+r.getFullYear()+"/"+(r.getMonth()+1)+"/"+r.getDate()+"' class='"+wt+h+bt+kt+dt+st+"'>"+v+"<\/td>";et++;7==et&&(pt=n('<tr role="row" />').appendTo(ci),pt.html(ot),et=0,ot="")}gt=new Date(e,o,1,0,0,0,0);ni=new Date(e,o+1,0);gt.getTime()<=ct.getTime()?i._disablePrev(!0):i.element.find(".sui-prev").hasClass("sui-calendar-disabled")&&i._disablePrev(!1);ni.getTime()>=lt.getTime()?i._disableNext(!0):i.element.find(".sui-next").hasClass("sui-calendar-disabled")&&i._disableNext(!1)},_createYearsView:function(){var i=this,e=i.options,nt=i._calendarTable,u=i._focusedDate,tt=t.getCalendarInfo(),p=tt.months,it=p.names,w=p.namesAbbr,rt=n('<tbody class="sui-months"/>').appendTo(nt),b=null,o="",s=e.min,c=e.max,l="",a=0,r,f,v;for(i._header.find(".sui-text").text(u.getFullYear()),r=0;r<w.length;r++){f=new Date(u.getFullYear(),r,u.getDate(),0,0,0,0);v=u.getMonth()==r?" sui-focused":"";e.view.depth==h&&(l=i._selectedDate&&f.getTime()==i._selectedDate.getTime()?" sui-selected":"");var y="",k=it[r],d=w[r],g="sui-month";(f.getFullYear()<=s.getFullYear()&&f.getMonth()<s.getMonth()||f.getFullYear()>=c.getFullYear()&&f.getMonth()>c.getMonth())&&(y=" sui-out-of-range");y&&(v="",l="",k=d="&nbsp;",g="");o+="<td data-value='"+r+"' class='"+g+v+l+y+"' title='"+k+"'>"+d+"<\/td>";a++;4==a&&(b=n("<tr />").appendTo(rt),b.html(o),a=0,o="")}u.getFullYear()<=s.getFullYear()?i._disablePrev(!0):i.element.find(".sui-prev").hasClass("sui-calendar-disabled")&&i._disablePrev(!1);u.getFullYear()>=c.getFullYear()?i._disableNext(!0):i.element.find(".sui-next").hasClass("sui-calendar-disabled")&&i._disableNext(!1)},_createDecadeView:function(){var t=this,o=t.options,tt=t._calendarTable,s=t._focusedDate,r=s.getFullYear(),p=r%10,it=n('<tbody class="sui-decade"/>').appendTo(tt),w=null,h="",c=0,b=o.min,k=o.max,u=r-p-1,l="",f=r+(10-p),i;for(t._header.find(".sui-text").text(u+1+"-"+(f-1)),i=u;i<=f;i++){var a=new Date(i,s.getMonth(),s.getDate(),0,0,0,0),d=i==u||i==f?" sui-other-year":"",g=r==i?" sui-focused":"",y="",e=i,nt="sui-year";(a.getFullYear()<b.getFullYear()||a.getFullYear()>k.getFullYear())&&(y=" sui-out-of-range");o.view.depth==v&&(l=t._selectedDate&&a.getTime()==t._selectedDate.getTime()?" sui-selected":"");y&&(d="",g="",l="",nt="",e="&nbsp;");h+="<td data-value='"+e+"' class='"+nt+d+g+l+y+"' title='"+e+"'>"+e+"<\/td>";c++;4==c&&(w=n("<tr />").appendTo(it),w.html(h),c=0,h="")}u<b.getFullYear()?t._disablePrev(!0):t.element.find(".sui-prev").hasClass("sui-calendar-disabled")&&t._disablePrev(!1);f>k.getFullYear()?t._disableNext(!0):t.element.find(".sui-next").hasClass("sui-calendar-disabled")&&t._disableNext(!1)},_createcenturyView:function(){var tt,t=this,s=t.options,it=t._calendarTable,r=t._focusedDate,f=r.getFullYear(),rt=f%100,ut=n('<tbody class="sui-decade"/>').appendTo(it),p=null,h="",c="",l=s.min,b=s.max,a=0,u=f-rt-10,e=u+99+10+2,i;for(t._header.find(".sui-text").text(u+10+"-"+(e-2)),i=u;i<e;i+=10){var k=i==u||i==e-1?" sui-other-years":"",o=new Date(i,r.getMonth(),r.getDate(),0,0,0,0),ft=new Date(i+10,r.getMonth(),r.getDate(),0,0,0,0),v="",d=f>=i&&f<i+10?" sui-focused":"",g="sui-years",y=i+" - "+(i+9),nt=i;(o.getFullYear()<l.getFullYear()&&ft.getFullYear()<=l.getFullYear()||o.getFullYear()>b.getFullYear())&&(v=" sui-out-of-range");s.view.depth==w&&(c=t._selectedDate&&t._selectedDate.getFullYear()>=o.getFullYear()&&t._selectedDate.getFullYear()<o.getFullYear()+10?" sui-selected":"");v&&(k="",d="",c="",g="",tt=nt=y="&nbsp;");h+="<td data-value='"+nt+"' class='"+g+k+d+c+v+"' title='"+y+"'>"+y+"<\/td>";a++;4==a&&(p=n("<tr />").appendTo(ut),p.html(h),a=0,h="")}u<l.getFullYear()?t._disablePrev(!0):t.element.find(".sui-prev").hasClass("sui-calendar-disabled")&&t._disablePrev(!1);e>b.getFullYear()?t._disableNext(!0):t.element.find(".sui-next").hasClass("sui-calendar-disabled")&&t._disableNext(!1)},value:function(){var t=this,i=t.options,u=i.min,f=i.max,r=[].slice.call(arguments),n;if(!(r.length>0))return t._selectedDate;if(n=r[0],null==n||""===n||yt(n))t._selectedDate=null,t._focusedDate=i.focused;else{if(n.getTime()<u.getTime()||n.getTime()>f.getTime())return;t._focusedDate=t._selectedDate=new Date(n.getFullYear(),n.getMonth(),n.getDate())}t._calendarTable.empty();t._renderView()},enabled:function(){var n=this,r=n.options,i=[].slice.call(arguments),t;if(!(i.length>0))return n._enabled;t=i[0];t?(r.hover&&n._calendarTable.addClass("sui-hoverable"),n.element.removeClass("sui-calendar-disabled")):(n._calendarTable.removeClass("sui-hoverable"),n.element.addClass("sui-calendar-disabled"));n._enabled=t},previous:function(){var n=this;n.preventPrevNavigation||n._moveView(!1)},next:function(){var n=this;n.preventNextNavigation||n._moveView(!0)},view:function(){var n=this,i=[].slice.call(arguments),t;if(!(i.length>0))return n._view;t=i[0];t!=n._view&&(n._view=t,n._calendarTable.empty(),n._renderView())},focused:function(){var n=this,t=[].slice.call(arguments);if(!(t.length>0))return n._focusedDate;n._focusedDate=t[0];t.length>1&&n._view!=t[1]&&(n._view=t[1]);n._calendarTable.empty();n._renderView()},visible:function(){var n=this,t=(n.options,[].slice.call(arguments)),i;if(!(t.length>0))return!n.element.hasClass("sui-hidden")&&"none"!=n.element.css("display");i=t[0];i?n.element.removeClass("sui-hidden"):n.element.addClass("sui-hidden")},destroy:function(){var t=this,r=t.options.cls,i=n(t.element);i.removeClass("sui-calendar sui-read-only sui-calendar-disabled"+(r?" "+r:""));t._focusedDate=null;t._header=null;t._calendarTable=null;t._view=null;t._enabled=null;t._selectedDate=null;t._tempTable=null;t._tableWrapper=null;i.find(".sui-prev").off(f,t._movePrev);t._movePrev=null;i.find(".sui-next").off(f,t._moveNext);t._moveNext=null;i.find(".sui-text").off(f,t._changeViewDepth);t._changeViewDepth=null;i.find(".sui-footer").off(f,t._selectToday);t._selectToday=null;i.find(".sui-calendar-view").off(f,t._calendarSelection);t._calendarSelection=null;i.off(wt,t._selectStart);t._selectStart=null;i.empty();b.fn.destroy.call(t)}});ut.defaults=ht;t.ui.plugin("Calendar",ut);k={calendar:null,format:"{0:MM/dd/yyyy}",textTemplate:"{0:MM/dd/yyyy}",value:null,parseFormats:["MM/dd/yyyy"],openOnFocus:!1,showButton:!0,editable:!0,enabled:!0,messages:{calendarIconTooltip:"",buttonText:"select"},min:new Date(1900,0,1),max:new Date(2099,11,31),events:{}};c=b.extend({init:function(t){var e,c,l;b.fn.init.apply(this,arguments);var i=this,r=i.options,f=r.value,h=r.showButton?"":" sui-no-button";ri&&(h+=" sui-ie8");e=n(r.isMonthYearPicker?"<span class='sui-monthyearpicker"+h+"' />":r.isTimePicker?"<span class='sui-timepicker"+h+"' />":r.isDateTimePicker?"<span class='sui-datetimepicker"+h+"' />":"<span class='sui-datepicker"+h+"' />");(i._selectedDate=null,n(t).after(e),i._wrapper=e,i._visibleInput=n("<input class='sui-picker-input' type='text' />").appendTo(e),r.showButton)&&(c=r.messages.calendarIconTooltip,r.isTimePicker&&(c=r.messages.timeIconTooltip),i._iconWrapper=n("<span class='sui-icon-wrapper' unselectable='on' title='"+c+"' />").appendTo(e),n('<span class="sui-sprite sui-calendar-icon" unselectable="on">'+r.messages.buttonText+"<\/span>").appendTo(i._iconWrapper),r.isDateTimePicker&&(i._timeIconWrapper=n("<span class='sui-time-icon-wrapper' unselectable='on' title='"+r.messages.timeIconTooltip+"' />").appendTo(e),n('<span class="sui-sprite sui-time-icon" unselectable="on">'+r.messages.buttonText+"<\/span>").appendTo(i._timeIconWrapper)));(n(t).css(o,s).appendTo(e),i._enabled=r.enabled,r.enabled||(e.addClass("sui-disabled"),i._visibleInput.on(nt,i._visibleInputFocused=u(i._visibleInputFocusedHandler,i))),i._attachEvents(),f)||(l=i._value(),l&&(f=l));f&&(pt(f)&&(f=new Date(f)),i._selectedDate=r.isMonthYearPicker?new Date(f.getFullYear(),f.getMonth(),1):f,i._changeInputsValues(f))},_changeInputsValues:function(n){var t=this,i=t.options,r=i.format,u=i.textTemplate,e=p(r)?r:function(n){return y(r,n.date)},f;t._value(e.call(t,{date:n}));f=p(u)?u:function(n){return y(u,n.date)};t._visibleInput.get(0).value=f.call(t,{date:n});t._selectedDate=i.isMonthYearPicker?new Date(n.getFullYear(),n.getMonth(),1):n},_attachEvents:function(){var t=this,i=t.options;i.showButton&&(i.isTimePicker?t._iconWrapper.on(f,t._toggleListBoxVisibility=u(t._toggleListBoxVisibilityHandler,t)):i.isDateTimePicker?(t._timeIconWrapper.on(f,t._toggleListBoxVisibility=u(t._toggleListBoxVisibilityHandler,t)),t._iconWrapper.on(f,t._toggleCalendarVisibility=u(t._toggleCalendarVisibilityHandler,t))):t._iconWrapper.on(f,t._toggleCalendarVisibility=u(t._toggleCalendarVisibilityHandler,t)));t._visibleInput.on(ui,t._visibleInputKeyPress=u(t._visibleInputKeyPressHandler,t));n(l).on(g+".shieldDatePicker"+t.getInstanceId(),u(t._hidePopupHandler,t));t._visibleInput.on(nt,t._visibleInputFocused=u(t._visibleInputFocusedHandler,t));t._visibleInput.on(kt,t._visibleInputBlured=u(t._visibleInputBluredHandler,t));t._visibleInput.on(e,t._visibleInputChanged=u(t._visibleInputChangedHandler,t))},_visibleInputChangedHandler:function(){var n=this,t=n.options,r=t.format,i=t.min,f=t.max,u;n._enabled&&(n._selectedDate=ni(n._visibleInput.get(0).value,t.parseFormats),n._selectedDate&&(n._selectedDate.getTime()>f||n._selectedDate.getTime()<i)&&(n._selectedDate=t.isTimePicker?new Date(i.getFullYear(),i.getMonth(),i.getDate(),n._selectedDate.getHours(),n._selectedDate.getMinutes(),n._selectedDate.getSeconds()):null),null!=n._selectedDate&&(n._selectedDate&&n.calendar&&n.calendar.value(n._selectedDate),n._selectedDate&&n.listBox&&n._selectValueInListBox(n._selectedDate)),u=p(r)?r:function(n){return y(r,n.date)},n.element.get(0).value=u.call(n,{date:n._selectedDate}),n.trigger(e))},_visibleInputFocusedHandler:function(n){var t=this,i=t.options;return t._enabled?(i.isMonthYearPicker?t._wrapper.addClass("sui-monthyearpicker-focus"):i.isTimePicker?t._wrapper.addClass("sui-timepicker-focus"):i.isDateTimePicker?t._wrapper.addClass("sui-datetimepicker-focus"):t._wrapper.addClass("sui-datepicker-focus"),void(i.openOnFocus&&(!t._shouldShowPopup&&t.calendar||(t._toggleCalendarVisibilityHandler(),t._shouldShowPopup=!1)))):void n.target.blur()},_visibleInputBluredHandler:function(){var i=this,t=i.options,n=i._wrapper;t.isMonthYearPicker?n.removeClass("sui-monthyearpicker-focus"):t.isTimePicker?n.removeClass("sui-timepicker-focus"):t.isDateTimePicker?n.removeClass("sui-datetimepicker-focus"):n.removeClass("sui-datepicker-focus")},_visibleInputKeyPressHandler:function(n){var t=this,r=t.options,i;if(t._enabled){if(r.editable===!1)return n.preventDefault(),void n.stopPropagation();i=n.keyCode||n.charCode;13!=i&&9!=i&&27!=i||(t._shouldShowPopup=!0,t.calendar&&t.calendar.element.css(o)!=s&&(t.calendar.element.css(o,s),t.trigger(bt)))}},_hidePopupHandler:function(t){var r,i=this;if(i.listBox){if(i._visibleInput.get(0)==t.target||i._iconWrapper&&i._iconWrapper.get(0)==t.target||i._iconWrapper&&i._iconWrapper.children(0).get(0)==t.target||i._timeIconWrapper&&i._timeIconWrapper.get(0)==t.target||i._timeIconWrapper&&i._timeIconWrapper.children(0).get(0)==t.target)return;i._popupIsOver?(r=i.listBox.element.parent().height(),i.listBox.element.parent().animate({height:0,top:i._visibleInput.offset().top},150,function(){n(this).css(o,s);n(this).css("height",r)})):i.listBox.element.parent().slideUp(150,function(){});i._shouldShowPopup=!0}if(i.calendar){if(i._visibleInput.get(0)==t.target||i._iconWrapper&&i._iconWrapper.get(0)==t.target||i._iconWrapper&&i._iconWrapper.children(0).get(0)==t.target)return;i._popupIsOver?(r=i.calendar.element.height(),i.calendar.element.animate({height:0,top:i._visibleInput.offset().top},150,function(){n(this).css(o,s);n(this).css("height",r)})):i.calendar.element.slideUp(150,function(){});i._shouldShowPopup=!0}},_toggleListBoxVisibilityHandler:function(){var n=this,t=n.options,i=t.listBox;n._enabled&&(n.listBox||(new dt({listbox:i,parent:n,min:t.min,max:t.max,interval:t.interval,textTemplate:t.isDateTimePicker?t.timeFormat:t.textTemplate}),n.listBox.on(fi,n._listBoxChange=u(n._listBoxChangeHandler,n)),n.listBox.element.on(g,n._popupMouseDown=u(n._popupMouseDownHandler,n)),n._selectedDate&&n._selectValueInListBox(n._selectedDate)),t.isDateTimePicker&&(n.calendar&&n.calendar.element.css(o)!=s&&(n.calendar.element.slideUp(150,function(){}),n._shouldShowPopup=!0),n._toggleTimePopup=!0),n._shouldShowPopup?n._showPopup():n._hidePopup(),n._shouldShowPopup=n._shouldShowPopup?!1:!0)},_listBoxChangeHandler:function(i){var r=this,u,f;r.options.isDateTimePicker?(u=r._selectedDate,f=i.item,u?r._selectedDate=new Date(u.getFullYear(),u.getMonth(),u.getDate(),f.getHours(),f.getMinutes(),f.getSeconds()):(u=new Date,r._selectedDate=new Date(u.getFullYear(),u.getMonth(),u.getDate(),f.getHours(),f.getMinutes(),f.getSeconds()))):r._selectedDate=i.item;var s=r.options,c=s.isDateTimePicker?t.format(s.timeFormat,r._selectedDate):t.format(s.textTemplate,r._selectedDate),h=r.listBox.element.find(".sui-listbox-item"),o=0;for(o;o<h.length;o++)if(h[o].innerHTML==c){r._selectedElement=n(h[o]);break}r._changeInputsValues(r._selectedDate);r._hidePopup();r._shouldShowPopup=!0;r.trigger(e)},_toggleCalendarVisibilityHandler:function(){var i=this,r=i.options,f=r.calendar;i._enabled&&(i.calendar||(t.ui.Calendar&&(it.object(f)&&f instanceof t.ui.Calendar?i.calendar=f:(i._wrapper.parent().hasClass("sui-rtl")?(i._calendarWrapper=n("<div style='display: none;' />").appendTo(l.body),i._calendarWrapper.wrap("<span class='sui-rtl'><\/span>")):i._calendarWrapper=n("<div style='display: none;' />").appendTo(l.body),i.calendar=new t.ui.Calendar(i._calendarWrapper,d({},f,{min:r.min,max:r.max}))),i._shouldShowPopup=!0),i.calendar.on(e,i._calendarChange=u(i._calendarChangeHandler,i)),i.calendar.element.on(g,i._popupMouseDown=u(i._popupMouseDownHandler,i)),i._selectedDate&&i.calendar.value(i._selectedDate)),r.isDateTimePicker&&(i.listBox&&i.listBox.element.parent().css(o)!=s&&(i.listBox.element.parent().slideUp(150,function(){}),i._shouldShowPopup=!0),i._toggleTimePopup=!1),i._shouldShowPopup?i._showPopup():i._hidePopup(),i._shouldShowPopup=i._shouldShowPopup?!1:!0)},_calendarChangeHandler:function(){var t,n=this,i=n.options;i.isMonthYearPicker?(t=n.calendar.value(),n._selectedDate=new Date(t.getFullYear(),t.getMonth(),1)):i.isDateTimePicker?(t=n.calendar.value(),n._selectedDate=n._selectedDate?new Date(t.getFullYear(),t.getMonth(),t.getDate(),n._selectedDate.getHours(),n._selectedDate.getMinutes(),n._selectedDate.getSeconds()):n.calendar.value()):n._selectedDate=n.calendar.value();n._changeInputsValues(n._selectedDate);n._hidePopup();n._shouldShowPopup=!0;n.trigger(e)},_calculateLeftOffsetWhenRtl:function(){var t,n=this,r=n.options,i=(n._wrapper.offset(),0);return r.isTimePicker||r.isDateTimePicker&&n._toggleTimePopup?(t=n._visibleInput.offset().left-(n.listBox.element.parent().width()-n._visibleInput.width()),t>0&&(i=t)):(t=n._visibleInput.offset().left-(n.calendar.element.width()-n._visibleInput.width()),t>0&&(i=t)),i},_showPopup:function(){var u,t=this,o=t.options,f=t._wrapper.offset(),h=f.top-n(l).scrollTop(),s=t._wrapper.height(),c=n(i).height(),r=f.top+s,e=f.left;t._wrapper.parent().hasClass("sui-rtl")&&(e=t._calculateLeftOffsetWhenRtl());u=o.isTimePicker||o.isDateTimePicker&&t._toggleTimePopup?t.listBox.element.parent().height():t.calendar.element.height();c<u+h+s?r=f.top-u-1:r++;(r<0||n(l).scrollTop()>r)&&(r=f.top+s+1);t._popupIsOver=t._visibleInput.offset().top>r?!0:!1;o.isTimePicker||o.isDateTimePicker&&t._toggleTimePopup?t._popupIsOver?(t.listBox.element.parent().css({position:"absolute",zIndex:10002,top:r+u,left:e,height:0,display:""}),t.listBox.element.parent().animate({height:u,top:r+2},150)):(t.listBox.element.parent().css({position:"absolute",top:r,left:e,zIndex:10002}),t.listBox.element.parent().slideDown(150,function(){if(t._selectedElement){var n=Math.abs(t._selectedElement.get(0).offsetTop),i=t._selectedElement.parent().scrollTop();n>t._selectedElement.parent().get(0).scrollTopMax&&(n=t._selectedElement.parent().get(0).scrollTopMax);i+t.listBox.element.height()>n&&i<n||t.listBox.element.scrollTop(n)}})):t._popupIsOver?(t.calendar.element.css({position:"absolute",zIndex:10002,top:r+u,left:e,height:0,display:""}),t.calendar.element.animate({height:u,top:r},150)):(t.calendar.element.css({position:"absolute",zIndex:10002,top:r,left:e}),t.calendar.element.slideDown(150,function(){}));t.trigger(ei)},_hidePopup:function(){var i,t=this,r=t.options;r.isTimePicker||r.isDateTimePicker&&t._toggleTimePopup?t.listBox&&t.listBox.element.parent().css(o)!=s&&(t._popupIsOver?(i=t.listBox.element.parent().height(),t.listBox.element.parent().animate({height:0,top:t._visibleInput.offset().top},150,function(){n(this).css(o,s);n(this).css("height",i)})):t.listBox.element.parent().slideUp(150,function(){})):t.calendar&&t.calendar.element.css(o)!=s&&(t._popupIsOver?(i=t.calendar.element.height(),t.calendar.element.animate({height:0,top:t._visibleInput.offset().top},150,function(){n(this).css(o,s);n(this).css("height",i)})):t.calendar.element.slideUp(150,function(){}));t.trigger(bt)},_popupMouseDownHandler:function(n){n.preventDefault();n.stopPropagation()},_selectValueInListBox:function(i){var u=this;if(u.listBox){for(var f=u.options,o=f.isDateTimePicker?t.format(f.timeFormat,i):t.format(f.textTemplate,i),e=u.listBox.element.find(".sui-listbox-item"),r=0;r<e.length;r++)if(e[r].innerHTML==o){u._selectedElement=n(e[r]);break}u.listBox.selected(r,!0)}},enabled:function(){var n=this,i=(n.options,[].slice.call(arguments)),t;if(!(i.length>0))return n._enabled;t=i[0];n._enabled=t;t?(n._visibleInputFocused&&(n._visibleInput.off(nt,n._visibleInputFocused),n._visibleInputFocused=null),n._wrapper.removeClass("sui-disabled")):(n._wrapper.addClass("sui-disabled"),n._visibleInput.on(nt,n._visibleInputFocused=u(n._visibleInputFocusedHandler,n)))},visible:function(){var n=this,t=(n.options,[].slice.call(arguments)),i;if(!(t.length>0))return!n._wrapper.hasClass("sui-hidden")&&"none"!=n._wrapper.css("display");i=t[0];i?n._wrapper.removeClass("sui-hidden"):n._wrapper.addClass("sui-hidden")},focus:function(){n(this._visibleInput).focus()},_value:function(){return this.element.attr.apply(this.element,["value"].concat([].slice.call(arguments)))},value:function(){var n=this,i=n.options,u=i.min,f=i.max,r=[].slice.call(arguments),t;return(r.length>0)?(t=r[0],null==t||""===t||yt(t)?(n._visibleInput.get(0).value="",n._selectedDate=null,n.calendar&&n.calendar.value(null),void((i.isTimePicker||i.isDateTimePicker)&&n.listBox&&n.listBox.clearSelection())):void(!i.isTimePicker&&(t.getTime()<u.getTime()||t.getTime()>f.getTime())||(n._changeInputsValues(t),n.calendar&&n.calendar.value(t),n._selectedDate=t,(i.isTimePicker||i.isDateTimePicker)&&n._selectValueInListBox(t)))):n._selectedDate},close:function(){var n=this,t=[].slice.call(arguments);n.options.isDateTimePicker?t.length>0&&("calendar"==t[0]&&(n._shouldShowPopup=!1,n._toggleCalendarVisibilityHandler()),"timeview"==t[0]&&(n._shouldShowPopup=!1,n._toggleListBoxVisibilityHandler())):(n._shouldShowPopup=!1,n._toggleCalendarVisibilityHandler())},open:function(){var n=this,t=[].slice.call(arguments);n.options.isDateTimePicker?t.length>0&&("calendar"==t[0]&&(n._shouldShowPopup=!0,n._toggleCalendarVisibilityHandler()),"timeview"==t[0]&&(n._shouldShowPopup=!0,n._toggleListBoxVisibilityHandler())):(n._shouldShowPopup=!0,n._toggleCalendarVisibilityHandler())},destroy:function(){var t=this;t.options.isTimePicker?(t._iconWrapper.off(f,t._toggleListBoxVisibility),t._toggleListBoxVisibility=null):t.options.isDateTimePicker?(t._iconWrapper.off(f,t._toggleListBoxVisibility),t._toggleListBoxVisibility=null,t._timeIconWrapper=null,t._iconWrapper.off(f,t._toggleCalendarVisibility),t._toggleCalendarVisibility=null):(t._iconWrapper.off(f,t._toggleCalendarVisibility),t._toggleCalendarVisibility=null);t._iconWrapper=null;t._popupIsOver=null;n(l).off(g+".shieldDatePicker"+t.getInstanceId());n(t.element).css(o,"").insertAfter(t._wrapper);t._wrapper.remove();t._wrapper=null;t._destroyCalendar();t._destroyListBox();t._shouldShowPopup=null;t._visibleInput.off(nt,t._visibleInputFocused);t._visibleInput.off(e,t._visibleInputChanged);t._visibleInput.off(kt,t._visibleInputBlured);t._visibleInputFocused=null;t._visibleInputChanged=null;t._visibleInputBlured=null;t._visibleInput=null;t._selectedDate=null;t._enabled=null;b.fn.destroy.call(t)},_destroyCalendar:function(){var n=this;n.calendar&&(n.calendar.off(e,n._calendarChange),n._calendarChange=null,n.calendar.element.off(g,n._popupMouseDown),n._popupMouseDown=null,n.calendar.destroy(),n.calendar=null,n._calendarWrapper&&n._calendarWrapper.remove())},_destroyListBox:function(){var n=this;n.listBox&&(n._selectedElement=null,n.listBox.off(e,n._listBoxChange),n._listBoxChange=null,n.listBox.destroy(),n.listBox=null,n._listBoxWrapper&&(n._listBoxWrapper.remove(),n._listBoxWrapper=null))}});c.defaults=k;t.ui.plugin("DatePicker",c);ct=d({},k,{isMonthYearPicker:!0,calendar:{view:{depth:h,start:h}},format:"{0:MMMM yyyy}",textTemplate:"{0:MMMM yyyy}",parseFormats:["MMMM yyyy"]});ft=c.extend({init:function(n,t){t&&(t.isMonthYearPicker=!0);c.prototype.init.call(this,n,t)}});ft.defaults=ct;t.ui.plugin("MonthYearPicker",ft);lt=d({},k,{isTimePicker:!0,listBox:null,format:"{0:h:mm tt}",textTemplate:"{0:h:mm tt}",parseFormats:["h:mm tt"],interval:30,min:new Date(1900,0,1,0,0,0),max:new Date(1900,0,1,0,0,0),messages:{timeIconTooltip:"",buttonText:"select"}});et=c.extend({init:function(n,t){t&&(t.isTimePicker=!0);c.prototype.init.call(this,n,t)}});et.defaults=lt;t.ui.plugin("TimePicker",et);at=d({},k,{isDateTimePicker:!0,listBox:null,format:"{0:MM/dd/yyyy h:mm tt}",textTemplate:"{0:MM/dd/yyyy h:mm tt}",parseFormats:["MM/dd/yyyy h:mm tt"],interval:30,min:new Date(1900,0,1,0,0,0),max:new Date(2099,11,31,0,0,0),messages:{calendarIconTooltip:"",timeIconTooltip:"",buttonText:"select"},timeFormat:"{0:h:mm tt}"});ot=c.extend({init:function(n,t){t&&(t.isDateTimePicker=!0);c.prototype.init.call(this,n,t)}});ot.defaults=at;t.ui.plugin("DateTimePicker",ot)}(jQuery,shield,this);!function(n,t,i,r){var w,a,v,y=t.ui.Widget,b=t.Class,u=document,l=t.is,tt=(t.get,t.format,t.to.int),f=(Math.abs,n.each,n.proxy),s=(n.extend,n.map,l.undefined),it=i.opera,rt=navigator.userAgent,ut=/msie/i.test(rt)&&!it,k=(ut&&7===u.documentMode,"keydown"),d="click",p="mousedown",g="change",e="select",nt="cancel",h="display",c="none",ft=function(n){return l.string(n)?n.replace(/^\s+/,"").replace(/\s+$/,""):n},o;w={cls:r,palette:"basic",basicPalette:{columns:10,tileSize:{width:16,height:16},tileBorderWidth:0,palette:["#FFFFFF","#FFCCCC","#FFCC99","#FFFF99","#FFFFCC","#99FF99","#99FFFF","#CCFFFF","#CCCCFF","#FFCCFF","#CCCCCC","#FF6666","#FF9966","#FFFF66","#FFFF33","#66FF99","#33FFFF","#66FFFF","#9999FF","#FF99FF","#BBBBBB","#FF0000","#FF9900","#FFCC66","#FFFF00","#33FF33","#66CCCC","#33CCFF","#6666CC","#CC66CC","#999999","#CC0000","#FF6600","#FFCC33","#FFCC00","#33CC00","#00CCCC","#3366FF","#6633FF","#CC33CC","#666666","#990000","#CC6600","#CC9933","#999900","#009900","#339999","#3333FF","#6600CC","#993399","#333333","#660000","#993300","#996633","#666600","#006600","#336666","#000099","#333399","#663366","#000000","#330000","#663300","#663333","#333300","#003300","#003333","#000066","#330099","#330033"]},advancedPalette:{type:"hex",buttons:!0,messages:{apply:"Apply",cancel:"Cancel"}},displayInline:!1,showLetter:!1,value:r,valueTemplate:function(n){return n?n.hex?n.hex():n.toRGB().hex():null}};a=y.extend({init:function(t,i){var v;y.fn.init.apply(this,arguments);var s,r=this,e=r.options,a=e.cls,w=l.defined(e.value)?e.value:r._value();(arguments.length>1&&(i=arguments[1],i.basicPalette&&i.basicPalette.palette&&(e.basicPalette.palette=i.basicPalette.palette)),r.element.css(h,c),r._enabled=!0,r.currentColor=new o({color:w}),e.displayInline)?(r._buildPalette(),a&&r._picker.addClass(a)):((r._picker=s=n('<span class="sui-color-picker-dropdown" tabindex="0"><span class="sui-color-cell sui-unselectable" unselectable="on">&nbsp;<\/span><span class="sui-caret-container sui-unselectable" unselectable="on"><span class="sui-caret" unselectable="on"><\/span><\/span><\/span>').insertAfter(r.element),a&&r._picker.addClass(a),e.showLetter)?(v=s.find(".sui-color-cell"),n('<span class="sui-tool-letter">A<span class="sui-selected-color"><\/span><\/span>').appendTo(v),s.find(".sui-selected-color").css("background-color",r.currentColor.color.cssa())):s.find(".sui-color-cell").css("background-color",r.currentColor.color.cssa()),s.on(d,r._pickerClicked=f(r._pickerClickedHandler,r)),n(u).on(p+".shieldColorPicker"+r.getInstanceId(),f(r._hidePopup,r)));r._oldColor=r.currentColor.color.cssa?r.currentColor.color.cssa():r.currentColor.color.toRGB().cssa();r._changed()},hidePalette:function(){this._hidePopup({})},hide:function(){var t=this;t.options.displayInline?n(t.wrapperDiv).hide():(n(t._picker).hide(),t._hidePopup({}))},show:function(){var t=this;t.options.displayInline?n(t.wrapperDiv).hide():n(t._picker).show()},isVisible:function(){var t=this;return t.options.displayInline?n(t.wrapperDiv).is(":visible"):n(t._picker).is(":visible")},_changed:function(){var n=this;n._value(t.format.call(n,n.options.valueTemplate,n.currentColor.color))},_value:function(){return this.element.attr.apply(this.element,["value"].concat([].slice.call(arguments)))},_buildPalette:function(){var n=this;"basic"==n.options.palette?n._buildBasicPalette():(n._buildAdvancedPalette(),n._changeAdvancedPaletteColor())},_changeAdvancedPaletteColor:function(){var n=this,t=n.currentColor.color.toHSV();n.wrapperDiv&&(n._hue=t.hue,n._isHsl?(t=n.currentColor.color.toHSL(),n._XY(n,{pointer:n.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:t.hue,y:1-t.saturation}),n._Z(n,1-t.lightness,n.wrapperDiv.find(".sui-color-scale .pointer").get(0))):(n._XY(n,{pointer:n.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:t.saturation,y:1-t.value}),n._Z(n,t.hue,n.wrapperDiv.find(".sui-color-scale .pointer").get(0))))},_pickerClickedHandler:function(){var n=this;n.wrapperDiv||n._buildPalette();n._showPopup()},_showPopup:function(){var t=this,f=t._picker.offset(),l=f.top-n(u).scrollTop(),o=t._picker.height(),a=n(i).height();if("advanced"===t.options.palette&&(t._oldColor=t.currentColor.color.cssa?t.currentColor.color.cssa():t.currentColor.color.toRGB().cssa()),!t.wrapperDiv||t.wrapperDiv.css(h)==c){t._popupIsOver=!1;var r=f.top+o+1,s=f.left,e=t.wrapperDiv.height();a<e+l+o?r=f.top-e-1:r++;(r<0||n(u).scrollTop()>r)&&(r=f.top+o+1);t._popupIsOver=f.top>r?!0:!1;t.wrapperDiv||this._buildPalette();t._popupIsOver?(t.wrapperDiv.css({position:"absolute",zIndex:10002,top:r+e,left:s,height:0,display:""}),t.wrapperDiv.animate({height:e,top:r},150)):(t.wrapperDiv.css({position:"absolute",zIndex:10002,top:r-1,left:s}),t.wrapperDiv.slideDown(150,function(){}))}},_hidePopup:function(t){var f,i=this,r=i.options,e=n(t.target),u,s;"basic"!=r.palette&&(e.hasClass("sui-colorpicker")||e.parents(".sui-colorpicker").length>0)||!i.wrapperDiv||i.wrapperDiv.css(h)==c||("basic"===r.palette&&(u=i._picker.find(".sui-tool-letter > .sui-selected-color"),0===u.length&&(u=i._picker.find(".sui-color-cell")),u.css("background-color",i.currentColor.color.css())),i._popupIsOver?(f=i.wrapperDiv.height(),i.wrapperDiv.animate({height:0,top:i._picker.offset().top},150,function(){n(this).css(h,c).css("height",f)})):i.wrapperDiv.slideUp(150,function(){}),s=i.currentColor.color.cssa?i.currentColor.color.cssa():i.currentColor.color.toRGB().cssa(),"basic"!=r.palette&&(r.advancedPalette.buttons?s!==i._oldColor?(i.currentColor=new o({color:i._oldColor}),setTimeout(function(){i._update();i.trigger(nt)},200)):i._changed():(i._changeSelectedColorCell(),i._changed(),i.trigger(g))))},_buildBasicPalette:function(){for(var i=this,l=i.options,t=l.basicPalette,o=t.palette,s=t.tileSize,a=0,v=n("<div class='sui-colorpicker sui-colorpicker-basic-palette'/>"),e=l.displayInline?v.insertAfter(i.element):v.appendTo(u.body).css(h,c),r=0;r<o.length;r++)n("<div class='sui-palette-tile'/>").css({backgroundColor:o[r],width:s.width,height:s.height,borderWidth:t.tileBorderWidth,margin:"0 "+t.tileBorderWidth+"px "+t.tileBorderWidth+"px 0"}).on(p,i._tileClicked=f(i._tileClickedHandler,i)).appendTo(e).addClass(i.currentColor.color.hex().toUpperCase()==o[r].toUpperCase()?"sui-palette-tile-selected":"");a=t.columns*tt(s.width)+t.columns*t.tileBorderWidth;e.css("width",a+"px");i.wrapperDiv=e},_tileClickedHandler:function(t){var i=this,r;i._enabled&&(i.wrapperDiv.find(".sui-palette-tile-selected").removeClass("sui-palette-tile-selected"),n(t.target).addClass("sui-palette-tile-selected"),r=n(t.target).css("background-color"),i.currentColor=new o({color:r}),i.trigger(e),i._changed())},_buildAdvancedPalette:function(){var s,l,r,i=this,o=i.options,a,y,p,e,w;r=o.displayInline?n("<div/>").insertAfter(i.element).addClass("sui-colorpicker"):n("<div/>").appendTo(u.body).addClass("sui-colorpicker").css(h,c);i.wrapperDiv=r;l=n("<div class='sui-hex-wrapper'/>").appendTo(r);i.colorDiv=n("<div class='sui-color-div'/>").appendTo(l);i.colorInput="hsl"==o.advancedPalette.type?n("<input class='sui-alpha-input'/>").appendTo(l):n("<input class='sui-hex-input'/>").appendTo(l);i.colorInput.on(k,i._colorInputKeyDown=f(i._colorInputKeyDownHandler,i));a="<div class='sui-color-palette'><div class='pointer'><div class='shape shape1'><\/div><div class='shape shape2'><\/div><\/div><div class='bg bg1'><\/div><div class='bg bg2'><\/div><\/div><div class='sui-color-scale'><div class='pointer'><div class='shape'><\/div><\/div><div class='bg'><\/div><\/div>";n(a).appendTo(r);y=new v({twod:r.find(".sui-color-palette").get(0),pointer:r.find(".sui-color-palette .pointer").get(0),oned:r.find(".sui-color-scale").get(0),isXYslider:!0,cbs:{begin:i._changeXY,change:i._changeXY,end:i._done}},i);i.xy=y;p=new v({twod:r.find(".sui-color-palette").get(0),pointer:r.find(".sui-color-scale .pointer").get(0),oned:r.find(".sui-color-scale").get(0),isXYslider:!1,cbs:{begin:i._changeZ,change:i._changeZ,end:i._done}},i);(i.z=p,"rgb"==o.advancedPalette.type)&&(s="<div class='extras'/>",e=n(s).appendTo(r),n("<span class='sui-r-text'>R:<\/span>").appendTo(e),i.rInput=n("<input class='sui-r-input'/>").appendTo(e),i._rInputKeyDown=f(i._rInputKeyDownHandler,i),n("<span class='sui-g-text'>G:<\/span>").appendTo(e),i.gInput=n("<input class='sui-g-input'/>").appendTo(e),i._gInputKeyDown=f(i._gInputKeyDownHandler,i),n("<span class='sui-b-text'>B:<\/span>").appendTo(e),i.bInput=n("<input class='sui-b-input'/>").appendTo(e),i._bInputKeyDown=f(i._bInputKeyDownHandler,i),t.ui.NumericTextBox&&(i.rInput=new t.ui.NumericTextBox(i.rInput,{min:0,max:255,step:.01,spinners:!1,cls:"rgbInputs",events:{change:i._rInputKeyDown}}),i.gInput=new t.ui.NumericTextBox(i.gInput,{min:0,max:255,step:.01,spinners:!1,cls:"rgbInputs",events:{change:i._gInputKeyDown}}),i.bInput=new t.ui.NumericTextBox(i.bInput,{min:0,max:255,step:.01,spinners:!1,cls:"rgbInputs",events:{change:i._bInputKeyDown}})));"hsl"==o.advancedPalette.type&&(i._isHsl=!0,s="<div class='sui-transparent-slider'><div class='sui-color-scale alpha'><div class='pointer' style='top: 0%;'><div class='shape'><\/div><\/div><div class='bg'><\/div><\/div><\/div>",r.addClass("sui-hsl"),n(s).appendTo(r),w=new v({twod:r.find(".alpha").get(0),pointer:r.find(".alpha .pointer").get(0),oned:r.find(".alpha").get(0),isXYslider:!1,cbs:{begin:i._changeA,change:i._changeA,end:i._done}},i),i.a=w);o.advancedPalette.buttons&&i._buildButtons()},_buildButtons:function(){var i=this,r=this.options.advancedPalette.messages,u=n("<div class='sui-buttons-wrapper'/>").appendTo(this.wrapperDiv),e,o,s,h;t.ui.Button&&(e=n("<button type='button'>"+r.apply+"<\/button>").appendTo(u),o=new t.ui.Button(e,{cls:"sui-apply",events:{click:f(i._applyHandler,this)}}),i._applyButton=o,s=n("<button type='button'>"+r.cancel+"<\/button>").appendTo(u),h=new t.ui.Button(s,{cls:"sui-cancel",events:{click:f(i._cancelHandler,this)}}),i._cancelButton=h)},_applyHandler:function(n){var t=this;t._oldColor=t.currentColor.color.cssa?t.currentColor.color.cssa():t.currentColor.color.toRGB().cssa();t._changeSelectedColorCell();t.options.displayInline||t._hidePopup(n);t._changed();t.trigger(g)},_changeSelectedColorCell:function(){var t,n=this,i=n.options,r=n._picker;t=n.currentColor.color.cssa?n.currentColor.color.cssa():n.currentColor.color.toRGB().cssa();i.displayInline||(i.showLetter?r.find(".sui-selected-color").css("background-color",t):r.find(".sui-color-cell").css("background-color",t))},_cancelHandler:function(n){var t=this;t.options.displayInline?(t.currentColor=new o({color:t._oldColor}),setTimeout(function(){t._update();t.trigger(nt)},200)):t._hidePopup(n)},_update:function(){var t,n=this,i=n._shouldUpdateMainInput,r=n._shouldUpdateRgbInputs;n._isHsl?(t=n.currentColor.color.toHSL(),n._XY(n,{pointer:n.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:t.hue,y:1-t.saturation}),n._shouldUpdateMainInput=i,n._Z(n,1-t.lightness,n.wrapperDiv.find(".sui-color-scale .pointer").get(0)),n.Y(n.wrapperDiv.find(".alpha .pointer").get(0),(1-t.alpha).toFixed(2))):(t=n.currentColor.color.toHSV(),n._XY(n,{pointer:n.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:t.saturation,y:1-t.value}),n._shouldUpdateMainInput=i,n._shouldUpdateRgbInputs=r,n._Z(n,t.hue,n.wrapperDiv.find(".sui-color-scale .pointer").get(0)))},_rInputKeyDownHandler:function(n){var t=this;setTimeout(function(){var i=n.value;t.currentColor.color.red=parseFloat(i)/255;t._shouldUpdateRgbInputs=!1;t._update();t.trigger(e)},1)},_gInputKeyDownHandler:function(n){var t=this;setTimeout(function(){var i=n.value;t.currentColor.color.green=parseFloat(i)/255;t._shouldUpdateRgbInputs=!1;t._update();t.trigger(e)},1)},_bInputKeyDownHandler:function(n){var t=this;setTimeout(function(){var i=n.value;t.currentColor.color.blue=parseFloat(i)/255;t._shouldUpdateRgbInputs=!1;t._update();t.trigger(e)},1)},_colorInputKeyDownHandler:function(n){var t=this;n.ctrlKey||setTimeout(function(){var i=n.currentTarget,r=i.value,u=t.currentColor;t.currentColor=new o({color:r});l.object(t.currentColor.color)?(t._shouldUpdateRgbInputs=!0,t._shouldUpdateMainInput=!1,t._update()):t.currentColor=u;t.trigger(e)},1)},_changeA:function(n,t){n.colorPicker._enabled&&(n.colorPicker.colorInput.val("rgba(0,0,0,1)"),n.colorPicker._A(n.colorPicker,n.colorPicker.clamp(t.y,0,1),n.colorPicker.a.pointer))},_changeZ:function(n,t){n.colorPicker._enabled&&(n.colorPicker._isHsl?n.colorPicker.colorInput.val("rgba(0,0,0,1)"):n.colorPicker.colorInput.val("#000000"),n.colorPicker._Z(n.colorPicker,n.colorPicker.clamp(t.y,0,1),n.colorPicker.z.pointer),n.colorPicker.trigger(e))},_changeXY:function(n,t){n.colorPicker._enabled&&(n.colorPicker._isHsl?n.colorPicker.colorInput.val("rgba(0,0,0,1)"):n.colorPicker.colorInput.val("#000000"),n.colorPicker._XY(n.colorPicker,{x:n.colorPicker.clamp(t.x,0,1),y:n.colorPicker.clamp(t.y,0,1),pointer:t.pointer},n.colorPicker.xy),n.colorPicker.X(t.pointer,t.x),n.colorPicker.Y(t.pointer,t.y),n.colorPicker.trigger(e))},_XY:function(n,t){var i,u=this,e,r,f;n._enabled&&((n.X(t.pointer,t.x),n.Y(t.pointer,t.y),u._isHsl)?(i=n.currentColor.color.toHSL?n.currentColor.color.toHSL():n.currentColor.color,i.hue=t.x,i.saturation=1-t.y,e=i.lightness,i.lightness=.5,u.wrapperDiv.find(".sui-color-scale").css("background-color",i.toRGB().cssa()),i.lightness=e):(i=n.currentColor.color.toHSV(),t.x>1&&(t.x=1),t.x<0&&(t.x=0),t.y<0&&(t.y=0),t.y>1&&(t.y=1),i.saturation=t.x,i.value=1-t.y,0===i.hue&&(i.hue=u._hue)),r=i.toRGB(),f=n.colorInput.val(),f!=r.hex()&&(u._shouldUpdateMainInput?(f.length>4||0===f.length)&&(u._isHsl?n.colorInput.val(r.cssa()):n.colorInput.val(r.hex())):u._shouldUpdateMainInput=!0),n.rInput&&(u._shouldUpdateRgbInputs?(n.rInput.value((255*r.red).toFixed(2)),n.gInput.value((255*r.green).toFixed(2)),n.bInput.value((255*r.blue).toFixed(2))):u._shouldUpdateRgbInputs=!0),n.colorDiv.get(0).style.background=r.cssa(),n.currentColor.color=r)},_Z:function(n,t,i){var r,f=this,e=n.colorInput.val(),u;f._isHsl?(r=n.currentColor.color.toHSL?n.currentColor.color.toHSL():n.currentColor.color,n.Y(i,t),r.lightness=1-t,n.colorDiv.get(0).style.background=r.toRGB().cssa(),n.currentColor.color=r,e!=r.toRGB().hex()&&(f._shouldUpdateMainInput?(e.length>4||0===e.length)&&(f._isHsl?n.colorInput.val(r.toRGB().cssa()):n.colorInput.val(r.toRGB().hex())):f._shouldUpdateMainInput=!0)):(r=n.currentColor.color.toHSV(),n.Y(i,t),n._rgbBg(n,n.wrapperDiv.find(".sui-color-palette").get(0),t),f._hue=r.hue=t,u=r.toRGB(),e!=u.hex()&&(e.length>4||0===e.length)&&(f._isHsl?n.colorInput.val(u.cssa()):n.colorInput.val(u.hex())),n.rInput&&(f._shouldUpdateRgbInputs?(n.rInput.value((255*u.red).toFixed(2)),n.gInput.value((255*u.green).toFixed(2)),n.bInput.value((255*u.blue).toFixed(2))):f._shouldUpdateRgbInputs=!0),n.colorDiv.get(0).style.background=u.cssa(),n.currentColor.color=u)},_A:function(n,t,i){var r,u=this,f=n.colorInput.val();r=n.currentColor.color.toHSL?n.currentColor.color.toHSL():n.currentColor.color;n.Y(i,t);r.alpha=(1-t).toFixed(2);n.colorDiv.get(0).style.background=r.toRGB().cssa();n.currentColor.color=r;f!=r.toRGB().hex()&&(u._shouldUpdateMainInput?(f.length>4||0===f.length)&&(n.colorInput.val(r.toRGB().cssa()),u.trigger(e)):u._shouldUpdateMainInput=!0)},_rgbBg:function(n,t,i){var r=new o({}).HSV(i,1,1).toRGB().cssa();n.BG(t,r)},clamp:function(n,t,i){return Math.min(Math.max(n,t),i)},X:function(n,t){n.style.left=this.clamp(100*t,0,100)+"%"},Y:function(n,t){n.style.top=this.clamp(100*t,0,100)+"%"},BG:function(n,t){n.style.background=t},_done:function(){},enabled:function(){var t,n=this,i=(n.options,[].slice.call(arguments));return i.length>0?(t=i[0],t?(n._picker&&n._picker.removeClass("sui-colorpicker-disabled"),n.wrapperDiv&&n.wrapperDiv.removeClass("sui-colorpicker-disabled")):(n._picker&&n._picker.addClass("sui-colorpicker-disabled"),n.wrapperDiv&&n.wrapperDiv.addClass("sui-colorpicker-disabled")),n._applyButton&&n._applyButton.enabled(t),n._cancelButton&&n._cancelButton.enabled(t),t?(n.colorInput&&n.colorInput.removeAttr("readonly"),n.rInput&&(n.rInput.enable(!0),n.gInput.enable(!0),n.bInput.enable(!0))):(n.colorInput&&n.colorInput.attr("readonly","readonly"),n.rInput&&(n.rInput.enable(!1),n.gInput.enable(!1),n.bInput.enable(!1))),n._enabled=t,void 0):n._enabled},value:function(){var i,t=this,f=t.options,e=[].slice.call(arguments),s,r,u;if(!(e.length>0))return i=t.currentColor.color,i.css||(i=i.toRGB()),i;if(i=e[0],t.currentColor=new o({color:i}),"basic"==f.palette){if(s=t.currentColor.color.css(),t.wrapperDiv)for(r=t.wrapperDiv.find(".sui-palette-tile"),u=0;u<r.length;u++)r[u].style.backgroundColor.replace(/\s+/g,"")===s.replace(/\s+/g,"")&&(r.removeClass("sui-palette-tile-selected"),n(r[u]).addClass("sui-palette-tile-selected"))}else t._changeAdvancedPaletteColor();f.displayInline||(f.showLetter?(t._picker.find(".sui-color-cell"),t._picker.find(".sui-selected-color").css("background-color",t.currentColor.color.cssa())):t._picker.find(".sui-color-cell").css("background-color",t.currentColor.color.cssa()));t._changed()},destroy:function(){var t=this;t.element.show();t.wrapperDiv.remove();t.colorInput&&t.colorInput.off(k,t._colorInputKeyDown);t.rInput&&(t.rInput.destroy(),t.gInput.destroy(),t.bInput.destroy());t.options.displayInline&&"basic"==t.options.palette&&(t.wrapperDiv.find(".sui-palette-tile").off(d,t._tileClicked),t.wrapperDiv.remove());t._applyButton&&t._applyButton.destroy();t._cancelButton&&t._cancelButton.destroy();n(u).off(p+".shieldColorPicker"+t.getInstanceId());t._tileClicked=t._rInputKeyDown=t._gInputKeyDown=t._bInputKeyDown=t._hidePopupDelegate=t._picker=t._applyButton=t._cancelButton=t._isHsl=t.currentColor=t.wrapperDiv=t.colorInput=t.colorDiv=t.rInput=t.gInput=t._enabled=t._popupIsOver=t.bInput=null;y.fn.destroy.call(t)}});v=b.extend({init:function(n,t){var i=this,o=n.isXYslider,u=n.cbs,f=n.twod,r=n.pointer,e=n.oned;return i.colorPicker=t,o?(i.drag(f,i.attachPointer(i,u,r)),{background:f,pointer:r}):(i.drag(e,i.attachPointer(i,u,r)),{background:e,pointer:r})},drag:function(n,t){return n?void(this.isTouch()?this.dragTemplate(n,t,"touchstart","touchmove","touchend"):this.dragTemplate(n,t,"mousedown","mousemove","mouseup")):void console.warn("drag is missing elem!")},attachPointer:function(n,t,i){function f(n){return function(t,r){r.pointer=i;n(t,r)}}var u={};for(var r in t)t.hasOwnProperty(r)&&(u[r]=f(t[r]));return u},isTouch:function(){return"undefined"!=typeof i.ontouchstart},dragTemplate:function(n,t,i,r,f){var e=this,o=!1;t=e.getCbs(t);var s=t.begin,h=t.change,c=t.end;e.on(n,i,function(t){function i(){o=!1;e.off(u,r,l);e.off(u,f,i);e.callCb(c,n,t)}o=!0;var l=e.partial(e,e.callCb,h,n);e.on(u,r,l);e.on(u,f,i);e.callCb(s,n,t)})},on:function(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent&&n.attachEvent("on"+t,i)},off:function(n,t,i){n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent&&n.detachEvent("on"+t,i)},getCbs:function(n){if(n)return{begin:n.begin||function(){},change:n.change||function(){},end:n.end||function(){}};var t,i;return{begin:function(n){t={x:n.elem.offsetLeft,y:n.elem.offsetTop};i=n.cursor},change:function(n){n.elem.style.left=t.x+n.cursor.x-i.x+"px";n.elem.style.top=t.y+n.cursor.y-i.y+"px"},end:function(){}}},callCb:function(t,i,r){var f=this;r.preventDefault();var e=n(i).offset(),h=i.clientWidth,c=i.clientHeight,u={x:f.cursorX(i,r),y:f.cursorY(i,r)},o=(u.x-e.left)/h,s=(u.y-e.top)/c;t(this,{x:isNaN(o)?0:o,y:isNaN(s)?0:s,cursor:u,elem:i,e:r})},partial:function(n,t){var i=Array.prototype.slice,r=i.apply(arguments,[2]),u=this;return function(){return t.apply(u,r.concat(i.apply(arguments)))}},cursorX:function(n,t){var r=this,f;return r.isFixed(n)?(f=parseInt(r.getStyle(u.body,"marginLeft"),10)-r.calc(n,"scrollLeft")+i.pageXOffset+n.style.marginLeft,t.clientX-f):t.pageX?t.pageX:t.clientX?t.clientX+u.body.scrollLeft:void 0},cursorY:function(n,t){var r=this,f;return r.isFixed(n)?(f=parseInt(r.getStyle(u.body,"marginTop"),10)-r.calc(n,"scrollTop")+i.pageYOffset+n.style.marginTop,t.clientY-f):t.pageY?t.pageY:t.clientY?t.clientY+u.body.scrollTop:void 0},calc:function(n,t){for(var i=0;"HTML"!=n.nodeName;)i+=n[t],n=n.parentNode;return i},isFixed:function(n){for(;"HTML"!=n.nodeName&&"fixed"!=this.usedStyle(n,"position");)n=n.parentNode;return"HTML"!=n.nodeName},getStyle:function(n,t){return n.currentStyle?n.currentStyle[t]:u.defaultView&&u.defaultView.getComputedStyle?u.defaultView.getComputedStyle(n,"")[t]:n.style[t]},usedStyle:function(n,t){var r;return r=i.getComputedStyle?i.getComputedStyle(n,null):n.currentStyle,r[t]}});o=b.extend({init:function(n){var t=this,i=n.color,r,u;s(i)||null===i||""===ft(i)?t.color=t.getColor("#000"):l.integer(i)?(r=i+0,u=[(16711680&r)>>16,(65280&r)>>8,255&r],t.color=t.getColor("rgb("+u[2]+","+u[1]+","+u[0]+")")):t.color=t.getColor(i)},getColor:function(n){var f,t,i,e=this,r=/\s*(\.\d+|\d+(?:\.\d+)?)(%)?\s*/,h=new RegExp("^(rgb|hsl|hsv)a?\\("+r.source+","+r.source+","+r.source+"(?:,"+/\s*(\.\d+|\d+(?:\.\d+)?)\s*/.source+")?\\)$","i");if(f=n.toLowerCase(),"transparent"===f&&(n="rgba(0,0,0,0)"),t=n.match(h)){var o=t[1].toUpperCase(),c=s(t[8])?t[8]:parseFloat(t[8]),u="H"===o[0],l=t[3]?100:u?360:255,a=t[5]||u?100:255,v=t[7]||u?100:255;return e[o](parseFloat(t[2])/l,parseFloat(t[4])/a,parseFloat(t[6])/v,c)}return n.length<6&&(n=n.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3")),i=n.match(/^#?([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i),i?e.RGB(parseInt(i[1],16)/255,parseInt(i[2],16)/255,parseInt(i[3],16)/255):n},RGB:function(n,t,i,r){var u=this;return{red:n,green:t,blue:i,alpha:s(r)?1:r,hex:function(){var n=(65536*Math.round(255*this.red)+256*Math.round(255*this.green)+Math.round(255*this.blue)).toString(16);return"#"+"00000".substr(0,6-n.length)+n},hexa:function(){var n=Math.round(255*this.alpha).toString(16);return"#"+"00".substr(0,2-n.length)+n+this.hex().substr(1,6)},css:function(){return"rgb("+Math.round(255*this.red)+","+Math.round(255*this.green)+","+Math.round(255*this.blue)+")"},cssa:function(){return"rgba("+Math.round(255*this.red)+","+Math.round(255*this.green)+","+Math.round(255*this.blue)+","+this.alpha+")"},toHSV:function(){var i,f=this.red,n=this.green,t=this.blue,e=Math.max(f,n,t),s=Math.min(f,n,t),o=e-s,h=0===e?0:o/e,c=e;if(0===o)i=0;else switch(e){case f:i=(n-t)/o/6+(n<t?1:0);break;case n:i=(t-f)/o/6+1/3;break;case t:i=(f-n)/o/6+2/3}return u.HSV(i,h,c,r)},toHSL:function(){var n=this.toHSV();return u.HSV(n.hue,n.saturation,n.value,n.alpha).toHSL()},toCMYK:function(){var e=this.red,o=this.green,s=this.blue,t=1-e,i=1-o,f=1-s,n=1;return e||o||s?(n=Math.min(t,Math.min(i,f)),t=(t-n)/(1-n),i=(i-n)/(1-n),f=(f-n)/(1-n)):n=1,u.CMYK(t,i,f,n,r)}}},HSV:function(n,t,i,r){var u=this;return{hue:n,saturation:t,value:i,alpha:s(r)?1:r,toRGB:function(){var t,i,f,c=this.hue,o=this.saturation,n=this.value,l=Math.min(5,Math.floor(6*c)),a=6*c-l,e=n*(1-o),s=n*(1-a*o),h=n*(1-(1-a)*o);switch(l){case 0:t=n;i=h;f=e;break;case 1:t=s;i=n;f=e;break;case 2:t=e;i=n;f=h;break;case 3:t=e;i=s;f=n;break;case 4:t=h;i=e;f=n;break;case 5:t=n;i=e;f=s}return u.RGB(t,i,f,r)},toHSL:function(){var t,n=(2-this.saturation)*this.value,r=this.saturation*this.value,i=n<=1?n:2-n;return t=i<1e-9?0:r/i,u.HSL(this.hue,t,n/2,this.alpha)}}},HSL:function(n,t,i,r){var u=this;return{hue:n,saturation:t,lightness:i,alpha:s(r)?1:r,toHSV:function(){var i,n=2*this.lightness,t=this.saturation*(n<=1?n:2-n);return i=n+t<1e-9?0:2*t/(n+t),u.HSV(this.hue,i,(n+t)/2,this.alpha)},toRGB:function(){return this.toHSV().toRGB()}}},CMYK:function(n,t,i,r,u){var f=this;return{cyan:n,magenta:t,yellow:i,black:r,alpha:s(u)?1:u,toRGB:function(){return f.RGB(1-this.cyan*(1-this.black)-this.black,1-this.magenta*(1-this.black)-this.black,1-this.yellow*(1-this.black)-this.black,this.alpha)}}},destroy:function(){this.color=null}});a.defaults=w;t.ui.plugin("ColorPicker",a);t.ui.ColorPicker=a}(jQuery,shield,this);!function(n,t,i,r){function di(n){var t,i=" ";if(n){if(yt(n))return n;for(t in n)n.hasOwnProperty(t)&&(i+=t+'="'+n[t]+'"')}return i}function dt(t,i){var r=n(t).attr(i);return e(r)&&r!==!1}function gi(){for(var t,r,u,f=[].slice.call(arguments),e=f.shift(),i=0;i<f.length&&(t=n(e.target).closest(".sui-cell",f[i]),!t.length);i++);return t.length?(r=t[0].parentNode,u=t[0],null==r||null==u?null:{row:r,cell:u}):null}function nr(t){return t&&(n(t.row).hasClass(c)||n(t.cell).hasClass(c))}function tr(t,i){return n(t.target).closest(".sui-cell",i).length>0}function ir(t){var i=n(t).find('.sui-checkbox:not(.sui-checkbox-disabled), .sui-radiobutton:not(.sui-radiobutton-disabled), .sui-input:not(.sui-input-disabled), .sui-combobox:not(.sui-combobox-disabled), .sui-dropdown:not(.sui-dropdown-disabled), .sui-listbox:not(.sui-listbox-disabled), .sui-switch:not(.sui-switch-disabled), a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex]:not([tabindex="-1"]), *[contenteditable]').filter(":visible").first();n(i).length>0&&n(i).focus()}var rr,hi=t.ui.Widget,b=t.Class,gt=t.DataSource,v=t.format,a=t.support,lt=t.exp,g=t.get,ut=t.iid,y=(t.strid,t.Constants.KeyCode),nt=t.is,ft=nt.func,yt=nt.string,ni=nt.object,ur=nt.boolean,e=nt.defined,ru=nt.number,h=nt.undefined,ti=nt["null"],tt=t.to.int,f=document,et=Math.abs,k=Math.min,w=Math.max,ci=n.each,u=n.proxy,s=n.extend,pt=n.map,li=n.grep,ii=n.inArray,ai=navigator.userAgent,uu=i.opera,wt=/msie/i.test(ai)&&!uu,ot=wt&&7===f.documentMode,fu=wt&&8===f.documentMode,eu=(wt&&10===f.documentMode,8===f.documentMode,/AppleWebKit/.test(ai)),ri=(/Firefox/.test(ai),"role"),fr="aria-sort",vi="aria-readonly",ou="ascending",su="descending",st="tabindex",yi="true",bt="height",hu="sui-selectable",c="sui-selected",er="change",cu="focus",lu="start",or="scroll",o="command",au="selectionChanging",sr="selectionChanged",vu="selectstart",at="dataBound",hr="virtualRowsLoaded",pi="keydown",it="mousedown",ht="mousemove",kt="mouseup",yu="resize",p="click",pu="dblclick",cr="sort",lr="detailCreated",ar="columnReorder",vr="columnResize",yr="groupsReorder",pr="group",ui="ungroup",fi="editorCreating",wi="filterWidgetCreating",wu="getCustomFilterValue",bu="clearFilter",ku="expandButtonCreate",ei="cancel",oi="edit",wr="insert",si="save",br="delete",bi="error",kr="collapse",dr="expand",du="editWindowOpen",gu="insertWindowOpen",ct="display",rt="none",vt="@@custom",l="row",gr="sui-viewindex",d="sui-fieldname";rr={columns:[],rowHover:!0,scrolling:!1,paging:!1,columnReorder:!1,showHeader:!0,grouping:{showGroupHeader:!1,allowDragToGroup:!1,message:"Drag a column header here to group by a column"}};var nf=b.extend({init:function(t,i){var r,s,u,e,f,o=this;for(o._grid=i,f=0;f<t.length;f++)r=t[f],s=r.position?r.position:"top",u=n('<div class="sui-toolbar"/>'),"top"===s?(e=i.element.find(".sui-toolbar"),e.length>0?n(e[0]).after(u):i.element.prepend(u)):(u.addClass("sui-toolbar-bottom"),u.appendTo(i.element)),r.template?o._initializeTemplate(r,u):r.buttons.length>0&&o._buildButtons(u,r)},_buildButtons:function(n,t){for(var u=this,r=t.buttons,i=0;i<r.length;i++)u._buildButton(r[i],n)},_buildButton:function(i,r){var s,h,f=this,o=i.commandName,e=i.click;t.ui.Button&&(s=n('<button type="button">'+i.caption+"<\/button>").appendTo(r),"insert"==o?e=f._insertButtonClicked:"save"==o?e=f._saveButtonClicked:"cancel"==o?e=f._cancelButtonClicked:"excel"==o?e=f._excelButtonClicked:"pdf"==o?e=f._pdfButtonClicked:"csv"==o&&(e=f._csvButtonClicked),h=new t.ui.Button(s,{cls:i.cls,events:{click:u(e,f._grid)}}))},_excelButtonClicked:function(){this._doExcelExport()},_pdfButtonClicked:function(){this._doPdfExport()},_csvButtonClicked:function(){this._doCsvExport()},_insertButtonClicked:function(n,t){var f,h,e,c,s,i=this,l=i.options,v=l.editing.insertNewRowAt,r=i.dataSource,a=!1;if(t||(c=i.trigger(o,{commandName:wr,cancel:!1}),!c.cancel)){if(r.sort&&r.sort.length>0)return r.sort=[],i._sortingInProgress=!0,i.pager&&(r.skip=0,r.take=i.pager.pageSize(),i.pager.refresh(!0)),void r.read().always(u(i._toolbar._insertButtonClicked,i,n,!0));i._editingInProcess=!0;"pagebottom"===v?(e=w(0,i.contentTable.find(">tbody > tr").length-1),(!l.paging||i.pager&&!i.pager.hasNext())&&(e+=1,a=!0)):e=0;f=a?r.add({}):r.insertView(e,{});for(s in f.fields)f.fields.hasOwnProperty(s)&&(f.data[s]=null);i._editing._insertedItems.push(f);h=i.contentTable.find(">tbody > tr").eq(e);"popup"!=i.options.editing.mode?i._editing._putRowInEditMode(h,0):i._initializePopupForm(0,!0);i.trigger(wr)}},_saveButtonClicked:function(){var t,i,n=this,r=n.contentTable.find(">tbody > tr > .sui-editable-cell");return r.length>0&&(t=r.get(0).parentNode.rowIndex,n._updateItem(t,null),n._errorDuringEdit)?void(n._errorDuringEdit=!1):(i=n.trigger(o,{commandName:si,cancel:!1}),void(i.cancel||(n.dataSource.save(),n.trigger(si))))},_cancelButtonClicked:function(){var n=this,t=n.trigger(o,{commandName:ei,cancel:!1});t.cancel||(n.dataSource.cancel(),n.trigger(ei))},_initializeTemplate:function(n,t){var u=this,r=n.template,i;ft(r)?(i=r.call(u._grid,t),e(i)&&!ti(i)&&""!==i&&t.html(i)):t.html(r)},destroy:function(){}}),tf=b.extend({init:function(n,t){var i=this;i._grid=t;i.options=n;i._eventNS=".shieldGridEditing"+ut();i._editors={};i._insertedItems=[];n.enabled&&i._initEditing();i._grid.dataSource.on(bi+i._eventNS,u(i._dsError,i))},_dsError:function(n){var t=this,i=t._editors[n.path];t._grid.trigger(bi,{type:n.type,path:n.path,value:n.value,editor:i,reason:n.reason});t._errorDuringEdit=!0},_initEditing:function(){var t=this,e=t.options,i=e.event,r=t._eventNS;h(i)||(i===p?t._grid.element.on(p+r,".sui-cell",u(t._editingTriggered,t)):"doubleclick"===i&&t._grid.element.on(pu+r,".sui-cell",u(t._editingTriggered,t)),n(f).on(p+r,u(t._documentClicked,t)))},_editingTriggered:function(i){var a,v,s=this,r=s._grid,e=i.target,f=n(e).parent(),u=f.get(0).rowIndex,k=r._getRowIndex(f),y=s.options,d=y.mode,c=y.type,p=r.dataSource,g=y.batch,nt=r.trigger(o,{commandName:oi,cancel:!1,row:f,cell:e,index:k}),w=!1,b;if(!nt.cancel){if(g){if(a=r.contentTable.find(">tbody > tr > .sui-editable-cell"),a.length>0){if(u=a.get(0).parentNode.rowIndex,"TR"!==f.get(0).nodeName.toUpperCase()||f.get(0).rowIndex==u&&c==l)return;if(b=r._updateItem(u,e),s._errorDuringEdit)return s._errorDuringEdit=!1,void(b=null);v=f.get(0).rowIndex;r._putRowInViewMode(u,null);!r._populateInsertedItem&&b&&b.length>0&&r._renderUpdateMarkers(b,u);r._populateInsertedItem=!1;v===u&&(e=r.contentTable.find(">tbody > tr").eq(u).get(0).cells[e.cellIndex]);u=v}h(c)||"cell"===c?(s._putCellInEditMode(e),w=!0):c===l?(s._putRowInEditMode(f,e.cellIndex),w=!0):t.error("Invalid editing.type declaration. The editing.type must be 'row' or 'cell'.",y.dieOnError)}else if(p.tracker&&p.tracker.changes&&p.tracker.changes.added&&p.tracker.changes.added.length>0)"TR"!==f.get(0).nodeName.toUpperCase()||f.get(0).rowIndex==u&&c==l||p.cancel();else if(h(d)||"inline"===d){if(a=r.contentTable.find(">tbody > tr > .sui-editable-cell"),a.length>0){if(u=a.get(0).parentNode.rowIndex,"TR"!==f.get(0).nodeName.toUpperCase()||f.get(0).rowIndex==u&&c==l)return;if(r._updateItem(u,e),s._errorDuringEdit)return void(s._errorDuringEdit=!1);v=f.get(0).rowIndex;r._closeAllEditedRows();v===u&&(e=r.contentTable.find(">tbody > tr").eq(u).get(0).cells[e.cellIndex]);u=v}h(c)||"cell"==c?(s._putCellInEditMode(e),w=!0):c==l?(s._putRowInEditMode(f,e.cellIndex),w=!0):t.error("Invalid editing.type declaration. The editing.type must be 'row' or 'cell'.",y.dieOnError)}w&&(i.preventDefault(),i.stopPropagation(),r.trigger(oi,{row:f,cell:e,index:k}))}},_documentClicked:function(t){var e,u,i=this,o=i.options,s=o.batch,h=(o.type,o.event),r=n(t.target),f;if(i._grid._editingInProcess||i._grid._preventClosingEditors)return void(i._grid._editingInProcess=!1);if((!r.hasClass("sui-cell")&&!r.parents().hasClass("sui-cell")&&!r.parents().hasClass("sui-calendar")&&!r.parents().hasClass("sui-listbox")||"doubleclick"===h&&t.type===p&&r.closest(".sui-editable-cell").length<=0)&&(e=i._grid.contentTable.find(">tbody > tr > .sui-editable-cell"),e.length>0)){if(u=e.get(0).parentNode.rowIndex,f=i._grid._updateItem(u,null),i._errorDuringEdit)return void(i._errorDuringEdit=!1);i._grid._putRowInViewMode(u,null);s&&!i._grid._populateInsertedItem&&f&&f.length>0&&i._grid._renderUpdateMarkers(f,u);i._grid._populateInsertedItem=!1}},_getColumnIndex:function(t){return t.cellIndex-n(t.parentNode).find(".sui-indent-cell, .sui-expand-cell, .sui-expand-cell-disabled, .sui-collapse-cell").length},_putCellInEditMode:function(t){var o,i=this,c=i._getColumnIndex(t),s=i._grid,h=s.dataSource,l=s._getRowIndex(n(t).parent()),r=s.columns[c],u=!1,a,f;if(r&&r.field&&r.editable!==!1)if(o=h.editView(l).data,arguments.length>1?arguments[1]==c&&(u=!0):u=!0,r.editor)i._instantiateCustomEditor(r,t,o,l,u);else{a=e(h.schema.options.fields)?h.schema.options.fields[r.field].type:String;f=g(o,r.field);switch(a){case Number:i._instantiateNumeric(t,f,u);break;case Date:i._instantiateDatePicker(t,f,u);break;case String:i._instantiateTextBox(t,f,u);break;case Boolean:i._instantiateCheckBox(t,f,u)}}},_prepareCell:function(t){n(t).empty().addClass("sui-editable-cell")},_instantiateCustomEditor:function(t,i,r,u,f,e){var h,s,c,o=this;e?s=e:(h=o._getColumnIndex(i),s=o._grid.columns[h].field,o._prepareCell(i));c=t.editor.call(o._grid,i,r,u,f);n(i).html(c);o._editors[s]="custom"},_instantiateNumeric:function(i,r,u,f){var h,c,l,e,o=this,a,v;f?e=f:(l=o._getColumnIndex(i),e=o._grid.columns[l].field,o._prepareCell(i));c=n('<input name="'+e+'"/>');c.appendTo(i);a=o._grid.trigger(fi,{field:e,options:{}});v=s({},a.options,{value:r});t.ui.NumericTextBox&&(h=new t.ui.NumericTextBox(c,v),u&&h.focus(),o._editors[e]=h)},_instantiateDatePicker:function(i,r,u,f){var h,c,l,e,o=this,a,v;f?e=f:(l=o._getColumnIndex(i),e=o._grid.columns[l].field,o._prepareCell(i));c=n('<input name="'+e+'"/>');c.appendTo(i);a=o._grid.trigger(fi,{field:e,options:{}});v=s({},a.options,{value:r});t.ui.DatePicker&&(h=new t.ui.DatePicker(c,v),u&&h.focus(),o._editors[e]=h)},_instantiateTextBox:function(i,r,u,f){var h,c,l,e,o=this,a,v;f?e=f:(l=o._getColumnIndex(i),e=o._grid.columns[l].field,o._prepareCell(i));c=n('<input type="text" name="'+e+'"/>');c.appendTo(i);a=o._grid.trigger(fi,{field:e,options:{}});v=s({},a.options,{value:r,cls:"sui-input-textbox"});t.ui.TextBox&&(h=new t.ui.TextBox(c,v),u&&h.focus(),o._editors[e]=h)},_instantiateCheckBox:function(i,r,u,f){var h,c,l,e,o=this,a,v;f?e=f:(l=o._getColumnIndex(i),e=o._grid.columns[l].field,o._prepareCell(i));c=n('<input type="checkbox" name="'+e+'"/>');c.appendTo(i);a=o._grid.trigger(fi,{field:e,options:{}});v=s({},a.options,{value:r});t.ui.CheckBox&&(h=new t.ui.CheckBox(c,v),u&&h.focus(),h.checked(r),o._editors[e]=h)},_putRowInEditMode:function(t,i){for(var u,f=this,e=t.find(".sui-cell"),r=0;r<e.length;r++)f._putCellInEditMode(e[r],i-t.find(".sui-indent-cell, .sui-expand-cell, .sui-expand-cell-disabled, .sui-collapse-cell").length);u=t.find(".sui-edit");u.length>0&&f._grid._changeEditColumnButtons(t.get(0).rowIndex,n(t.children(".sui-button-cell")[0]))},_destroyRow:function(n){for(var u,i=this,f=i._grid,e=f.contentTable.find(">tbody > tr").eq(n),r=f.columns,t=0;t<r.length;t++)u=i._editors[r[t].field],u&&(ft(u.destroy)&&i._editors[r[t].field].destroy(),delete i._editors[r[t].field]);e.remove()},destroy:function(){var i,u,t=this,r=t._eventNS;if(t._grid.dataSource.off(bi+r),t._grid.element.off(r,".sui-cell"),n(f).off(p+r),t._editors)for(i=0;i<t._editors.length;i++)u=t._editors[i].editor.element(),t._editors[i].editor.destroy(),u.remove();t._errorDuringEdit=t.options=null}}),rf=b.extend({init:function(n){var t=this;yt(n)?(t.field=n,t.title=t.field,t.groupTitle=t.title,t.groupHeaderTitle=t.title,t.resizable=!0,t.sortable=!0,t.filterable=!0,t.editable=!0,t.visible=!0,t.locked=!1):ni(n)&&(t.field=n.field,t.title=n.title,t.groupTitle=e(n.groupTitle)?n.groupTitle:t.title,t.groupHeaderTitle=e(n.groupHeaderTitle)?n.groupHeaderTitle:t.title,t.format=n.format,t.width=n.width,t.minWidth=n.minWidth,t.maxWidth=n.maxWidth,t.resizable=!e(n.resizable)||!!n.resizable,t.attributes=n.attributes,t.headerAttributes=n.headerAttributes,t.headerTemplate=n.headerTemplate,t.columnTemplate=n.columnTemplate,t.footerTemplate=n.footerTemplate,t.groupFooterTemplate=n.groupFooterTemplate,t.buttons=n.buttons,t.editor=n.editor,t.customFilter=n.customFilter,t.sortable=!e(n.sortable)||!!n.sortable,t.filterable=!e(n.filterable)||!!n.filterable,t.editable=!e(n.editable)||!!n.editable,t.visible=!e(n.visible)||!!n.visible,t.locked=!!t.visible&&!!n.locked)},destroy:function(){var n=this;n.buttons&&(n.buttons.length=0);n.field=n.title=n.editor=n.editable=n.format=n.width=n.minWidth=n.maxWidth=n.resizable=n.attributes=n.headerAttributes=n.headerTemplate=n.buttons=n.customFilter=n.footerTemplate=n.groupFooterTemplate=n.sortable=n.filterable=n.visible=n.locked=n.columnTemplate=null}}),nu=b.extend({options:{ns:".shieldGridColumnResizing",width:12,offset:6,min:12},init:function(n){var t=this;t.grid=n;t.options=s(!0,{},nu.fn.options);t._eventNS=t.options.ns+ut();n.headerTable.on(ht+t._eventNS,".sui-headercell",u(t._showHandle,t))},_showHandle:function(t){if(!this.resizing){var r=this,o=r.options,f=(r.grid,r.handle),e=t.pageX,i=r.params=r._params(n(t.currentTarget)),s=e>=i.offset.left&&e<=i.offset.left+o.offset&&i.headerIndex>0;i.isRtl&&(s=e>=i.offset.left+i.width-o.offset&&e<=i.offset.left+i.width&&i.headerIndex>0);s&&(i=r.params=r._params(i.header.prev()));i.column&&i.column.resizable&&!i.column.locked&&(e>=i.threshold&&e<=i.edge+o.offset?(f||(f=r.handle=n('<div class="sui-resizable-handle"/>').on(it+r._eventNS,u(r._down,r)).appendTo(i.header.parents(".sui-headercontent"))),f.css({top:i.position.top,left:f.parent()[0].scrollLeft+i.handleLeft,width:o.width,height:i.height}).show()):f&&f.hide())}},_params:function(n){var f=this,t=f.options,e=n.offset(),o=n.position(),r=a.isRtl(f.grid.element),u=n.outerWidth(),s=e.left+(r?t.width:u),c=n.index(),i=f.grid._getColumnByField(n.attr("data-field")),h=i?i.minWidth>=0?+i.minWidth:t.min:null,l=i&&i.maxWidth>=h?+i.maxWidth:null;return{header:n,headerIndex:c,column:i,min:h,max:l,offset:e,isRtl:r,width:u,current:u,height:n.outerHeight(),edge:s,threshold:s-t.width+(r?-1:1)*t.offset,position:o,handleLeft:o.left+(r?t.width:u)-t.width+(r?-1:1)*t.offset}},_down:function(i){var o,r=this,s=r.grid,e=r.params;if(!(i.button>1)&&e)return o="> colgroup col:nth-child("+(e.headerIndex+1)+")",e.origin=i.pageX,e.cols=n().add(s.headerTable.find(o)).add(s.contentTable.find(o)),r.resizing=!0,r._cancelled=null,r.handle.hide(),n(f).on(ht+r._eventNS,u(r._move,r)).on(kt+r._eventNS,u(r._up,r)),t.selection(!1),!1},_move:function(n){var f,i,u,r=this,t=r.params;if(r.resizing)return f=(t.isRtl?-1:1)*(n.pageX-t.origin),i=w(t.width+f,t.min),t.max&&(i=k(i,t.max)),u=r.grid.trigger(o,{commandName:vr,cancel:!1,field:t.column.field,width:i}),u&&u.cancel?void(r._cancelled=!0):void(i!==t.current&&(t.cols.width(t.current=i),r.grid._fixHeaderPadding(),r.grid._adjustHeightsLocked(!0)))},_up:function(){var i=this,r=i.grid,e=i.params,o=e.current,u=e.column||{},s=(r.options.columns||[])[n(r.columns).index(u)]||{};i.resizing=!1;i.params=null;u.width=s.width=o+"px";n(f).off(i._eventNS);t.selection(!0);i._cancelled!==!0&&r.trigger(vr,{field:u.field,width:o});i._cancelled=null},destroy:function(){var n=this;n.grid.headerTable.off(n._eventNS);n._cancelled=null;n.handle&&(n.handle.off(n._eventNS).remove(),n.handle=null)}}),uf=b.extend({init:function(n){var t=this;t.grid=n;t._filters={};t._eventNS=".shieldGridFiltering"+ut();t._createFilterRow()},_createFilterRow:function(){var o,v,e,h,s,t,r=this,c=r.grid,w=c.headerTable,y=w.find(">thead"),b=y.find(".sui-indent-cell").length,l=c.dataSource.schema,i=c.columns,a;for(r._tr=o=n('<tr class="sui-filter-row"/>'),t=0;t<b;t++)n('<th class="sui-indent-cell"/>').appendTo(o);for(l&&l.options.fields&&(s=l.options.fields),t=0;t<i.length;t++)v=s&&s[i[t].field]?s[i[t].field].type:null,e=i[t].field?i[t].field.replace(/[\"\']/g,"@"):"",h=n('<th class="sui-filter-cell" data-field="'+e+'" role="gridcell" tabindex="-1"/>').appendTo(o),i[t].filterable!==!1&&e.length>0&&(r._initializeEditor(h,v,i[t].field,i[t]),r._appendFilterButton(h));for(o.appendTo(y),n(f).on(p+r._eventNS,u(r._documentClicked,r)),t=0;t<i.length;t++)(e=i[t].field?i[t].field.replace(/[\"\']/g,"@"):"",i[t].filterable!==!1&&e.length>0)&&(a=r._getFilter(i[t].field),a&&(r._setEditorValue(i[t].field,i[t],a.value),r._addRemoveFilterButton(i[t].field)))},_documentClicked:function(t){var r,f,u=this,i;if(u.listBox&&!n(t.target).hasClass("sui-filter-button")&&!n(t.target).hasClass("sui-filter-button-content")){if(i=u.listBox.element.parent(),i.css(ct)==rt)return;u._filterByField=null;r=i.height();f=i.offset().top;u._slideUp?i.animate({height:0,top:f+r},150,function(){i.css({display:rt,height:r})}):i.animate({height:0},150,function(){i.css({display:rt,height:r})})}},_appendFilterButton:function(i){if(t.ui.Button){var r=n('<button type="button"><span class="sui-sprite sui-filter-button-content"/><\/button>').appendTo(i);new t.ui.Button(r,{cls:"sui-filter-button",events:{click:u(this._filterButtonClicked,this)}})}},_filterButtonClicked:function(i){var l,e,v,r=this,y=r.grid,a=y.dataSource.schema,o=y.options.filtering,p=o.stringFunc?o.stringFunc:[{func:"eq",name:"Equal to"},{func:"neq",name:"Not equal to"},{func:"con",name:"Contains"},{func:"notcon",name:"Not contains"},{func:"starts",name:"Starts with"},{func:"ends",name:"Ends with"},{func:"gt",name:"Greater than"},{func:"lt",name:"Less than"},{func:"gte",name:"Greater than or equal"},{func:"lte",name:"Less than or equal"},{func:"isnull",name:"Is null"},{func:"notnull",name:"Is not null"}],w=o.nonStingFunc?o.nonStingFunc:[{func:"eq",name:"Equal to"},{func:"neq",name:"Not equal to"},{func:"gt",name:"Greater than"},{func:"lt",name:"Less than"},{func:"gte",name:"Greater than or equal"},{func:"lte",name:"Less than or equal"},{func:"isnull",name:"Is null"},{func:"notnull",name:"Is not null"}],h=i.target.element.parent().attr("data-field").replace(/[@]/g,"'"),c;(r._filterByField=h,a&&a.options.fields)?(c=a.options.fields,l=c&&c[h]&&c[h].type===String?p:w):l=p;t.ui.ListBox&&(r.listBox||(r._menuWrapper=n('<div style="display:none;"/>').appendTo(f.body),r.listBox=new t.ui.ListBox(r._menuWrapper,s({},{},{dataSource:{data:l},textTemplate:"{name}",valueTemplate:"{func}",multiple:!1,width:150,maxHeight:300,events:{select:u(r._selectFilterFunction,r)}})),r.grid.element.parent().hasClass("sui-rtl")?r.listBox.element.parent().addClass("sui-rtl"):r.listBox.element.parent().css(ct,rt)),e=r.listBox.element.parent().height(),r._positionListBox(i),r._slideUp?(v=i.target.element.offset().top-e,r.listBox.element.parent().css({top:i.target.element.offset().top}),r.listBox.element.parent().animate({height:e,top:v-r.listBox.element.parent().innerHeight()},150)):r.listBox.element.parent().animate({height:e},150));r._selectFilterMenuValue(h)},_getFilter:function(n){var i,u,t,f=this,r=f.grid.dataSource.filter;if(r&&r.and&&r.and.length>0)for(i=r.and,t=0;t<i.length;t++)i[t].path===n&&(u=i[t]);return u},_selectFilterMenuValue:function(n){var t=this,i=t._getFilter(n),u=i?i.filter:r;u?t.listBox.values(u):t.listBox.clearSelection()},_selectFilterFunction:function(n){var r,o,t=this,s=!0,i=t._filters[t._filterByField]==vt?vt:t._filters[t._filterByField].value(),f=n.item.func,e={path:t._filterByField,filter:f,value:i},u;if(i==vt&&(o=t.grid.trigger(wu,{field:t._filterByField,value:null}),i=o.value,e={path:t._filterByField,filter:f,value:i}),""!==i&&null!==i||"notnull"==f||"isnull"==f){if(t.grid.dataSource.filter&&t.grid.dataSource.filter.and){for(r=t.grid.dataSource.filter.and,u=0;u<r.length;u++)r[u].path===t._filterByField&&(r[u]=e,s=!1);s&&r.push(e)}else t.grid.dataSource.filter={and:[e]};t.grid.dataSource.read();t._addRemoveFilterButton(t._filterByField)}},_addRemoveFilterButton:function(i){var e,r,o,h=this,f,s;if(t.ui.Button){for(e=n(h._tr).children("th"),f=0;f<e.length;f++)if(r=n(e[f]),r.attr("data-field")&&r.attr("data-field").replace(/[@]/g,"'")==i){o=e[f];break}r&&0===r.find(".sui-clear-filter-button").length&&(s=n('<button type="button"><span class="sui-sprite sui-clear-filter-button-content"><\/span><\/button>').appendTo(o),new t.ui.Button(s,{cls:"sui-clear-filter-button",events:{click:u(this._clearFilterButtonClicked,this)}}))}},_clearFilterButtonClicked:function(n){for(var f,i=this,r=n.target.element.parent().attr("data-field").replace(/[@]/g,"'"),u=i.grid.dataSource.filter.and,t=0;t<u.length;t++)u[t].path==r&&u.splice(t,1);f=n.target.element;n.target.destroy();f.remove();i._filters[r]!=vt?i._filters[r].value(null):i.grid.trigger(bu,{field:r,value:null});i.grid.dataSource.read()},_positionListBox:function(n){var t=this,f=n.target.element,e=f.offset(),r=e.top,u=e.left,s=t.listBox.element.parent().innerWidth(),h=t.listBox.element.parent().innerHeight(),o=(f.innerWidth(),f.innerHeight());u<0&&(u=1);u+s>i.innerWidth&&(u=i.innerWidth-s-20);t._slideUp=!1;r+h>i.innerHeight&&(r-=h,o=0,t._slideUp=!0);r<0&&(r=e.top,o=f.innerHeight(),t._slideUp=!1);t.listBox.element.parent().css({position:"absolute",zIndex:10002,top:r+o,left:u,height:0,display:""})},_setEditorValue:function(n,t,i){var r,u=this;t.customFilter||(r=u._filters[n],r&&r.value(i))},_initializeEditor:function(n,t,i,r){var u=this;if(r.customFilter)u._filters[i]=vt,r.customFilter.call(u.grid,n);else switch(t){case Number:u._instantiateNumeric(n,i);break;case Date:u._instantiateDatePicker(n,i);break;case String:u._instantiateTextBox(n,i);break;default:u._instantiateTextBox(n,i)}},_instantiateNumeric:function(i,r){var u,f=this,e=n("<input/>").appendTo(i),o=f.grid.trigger(wi,{field:r,options:{}}),h=s({},o.options);t.ui.NumericTextBox&&(u=new t.ui.NumericTextBox(e,h),f._filters[r]=u)},_instantiateDatePicker:function(i,r){var u,f=this,e=n("<input/>").appendTo(i),o=f.grid.trigger(wi,{field:r,options:{}}),h=s({},o.options);t.ui.DatePicker&&(u=new t.ui.DatePicker(e,h),f._filters[r]=u)},_instantiateTextBox:function(i,r){var u,f=this,e=n('<input type="text"/>').appendTo(i),o=f.grid.trigger(wi,{field:r,options:{}}),h=s({},o.options);t.ui.TextBox&&(u=new t.ui.TextBox(e,h),f._filters[r]=u)},destroy:function(){var i,t=this;for(i in t._filters)t._filters.hasOwnProperty(i)&&(t._filters[i]!=vt&&t._filters[i].destroy(),t._filters[i]=null);t.listBox&&(t.listBox.destroy(),t.listBox=null);n(t._menuWrapper).remove();n(t._tr).remove();n(f).off(p+t._eventNS);t._filterByField=t._filters=t._slideUp=t._menuWrapper=t._tr=null}}),ff=b.extend({init:function(n,t){var i=this;i.grid=t;i.sortExpressions=[];i._eventNS=".shieldGridSorting"+ut();ur(n)?(i.allowUnsort=!0,i.multiple=!1,i.firstAscending=!0,i.ascText="&#9650;",i.descText="&#9660;"):ni(n)&&(i.allowUnsort=!!h(n.allowUnsort)||n.allowUnsort,i.multiple=n.multiple,i.firstAscending=!!h(n.firstAscending)||n.firstAscending,i.ascText=h(n.ascText)?"&#9650;":n.ascText,i.descText=h(n.descText)?"&#9660;":n.descText);i._initialize()},destroy:function(){var t=this,i=t.grid.headerTable;t.allowUnsort=t.multiple=t.sortExpressions=null;t.length=0;i.find(".sui-headercell .sui-link").each(function(){n(this).parent().html(n(this).html())});i.off(t._eventNS);i.find('.sui-headercell span[class^="sui-"]').remove()},_initialize:function(){var f,t,o,i=this,r=i.grid,s=r.dataSource.sort,e=r.columns,c={},w=r.headerTable.find(".sui-headercell");if(w.each(function(){var i,t=n(this),u=t.attr("data-field"),f=r._getColumnByField(u);c[u]=t;f&&f.sortable!==!1&&(i=t.html(),t.empty(),t.removeAttr(fr),n('<a href="#" class="sui-link sui-unselectable" unselectable="on" tabindex="-1"/>').appendTo(t).html(i))}),r.headerTable.on(p+i._eventNS,".sui-link",u(i._clickHandler,i)),s)for(f=0;f<s.length;f++)for(o=s[f],t=0;t<e.length;t++)if(e[t].sortable!==!1&&o.path==e[t].field){var l=n(c[e[t].field]),a=l.find(".sui-link"),h=ou,v="sui-asc",y=i.ascText;o.desc&&(h=su,y=i.descText,v="sui-desc");n(l).attr(fr,h);a.addClass(v);n('<span class="sui-'+h+'">'+y+"<\/span>").appendTo(a)}},_clickHandler:function(t){var i=this,u=n(t.target).closest(".sui-link"),f=i.grid,r=f._getColumnByField(u.parent().attr("data-field"));return u.hasClass("sui-desc")?i.allowUnsort&&i.firstAscending?i._sortInternal(r,!0,!0):i._sortInternal(r,!1,!1):u.hasClass("sui-asc")?i.allowUnsort&&!i.firstAscending?i._sortInternal(r,!1,!0):i._sortInternal(r,!0,!1):i.firstAscending?i._sortInternal(r,!1,!1):i._sortInternal(r,!0,!1),!1},_sortInternal:function(n,t,i){var e=this,u=e.grid,s=u.dataSource,r=s.sort,c=u.trigger(o,{commandName:cr,cancel:!1,column:n,desc:t,unsort:i}),f,h;c.cancel||(r?(!e.multiple&&r?r.length=0:(f=li(r,function(r){return r.path===n.field&&r.desc===(i?t:!t)}),f.length>0&&(h=ii(f[0],r),r.splice(h,1))),i||r.push({path:n.field,desc:t})):i||(r=s.sort=[{path:n.field,desc:t}]),u._refreshOnSort(),u.trigger(cr,{column:n,desc:t,unsort:i}))},_sort:function(n,t,i){var u,f,h=this,e=h.grid,c=e.dataSource,r=c.sort,o,s;(r&&(u=li(r,function(i){return i.path===n&&i.desc===t})),!u||u.length<=0)?(!h.multiple&&r&&(r.length=0),r)?(o=!1,s=li(r,function(i){return i.path===n&&i.desc!=t}),s&&s.length>0&&(f=ii(s[0],r),r.splice(f,1),o=!0),i||(r.push({path:n,desc:t}),o=!0),o&&e._refreshOnSort()):i||(c.sort=[{path:n,desc:t}],e._refreshOnSort()):i&&(f=ii(u[0],r),r.splice(f,1),e._refreshOnSort())}}),ef=b.extend({init:function(t,i){var o,r=this;o=r._eventNS=".shieldGridSelection"+ut();ur(t)?(r.type=l,r.multiple=!1,r.toggle=!1,r.spreadsheet=!0,r.drawArea=!1,r.disableTextSelection=!1,r._selectOnMouseDown=!1):ni(t)&&(r.type=t.type?t.type:l,r.multiple=!!t.multiple,r.toggle=!!e(t.toggle)&&t.toggle,r.spreadsheet=!e(t.spreadsheet)||t.spreadsheet,r.drawArea=e(t.drawArea)?t.drawArea:t.multiple,r.disableTextSelection=!!e(t.disableTextSelection)&&t.disableTextSelection,r._selectOnMouseDown=!r.drawArea&&t.selectEvent==it);r.grid=i;r.lastSelected=null;n(i.headerTable).add(i.frozenHeaderTable).addClass("sui-non-selectable");n(i.contentTable).add(i.frozenContentTable).addClass(hu);n(i.contentTable).add(i.frozenContentTable).on(it+o,u(r._mouseDownHandler,r)).on(ht+o,u(r._mouseMoveHandler,r));n(f).on(kt+o,u(r._mouseUpHandler,r));wt&&n(i.contentTable).add(i.frozenContentTable).on(vu+o,function(){return!1});r.multiple&&r.drawArea&&(r.area=n(f.createElement("span")).addClass("sui-area sui-area-color"))},destroy:function(){var t=this,i=t._eventNS,r=t.grid;n(r.contentTable).add(r.frozenContentTable).off(i);n(f).off(i);t.area&&t.area.remove();t.type=t.multiple=t.lastSelected=t.toggle=t.spreadsheet=t.area=t.x=t.y=t.elements=null},select:function(t){var u,r,f,i,e=this;if(!t)return e.grid.contentTable.find("."+c);if(u=n(t),r=u.length,r>0)for(i=0;i<r;i++)f=n(u.get(i)),e._selectElement(f),i==r-1&&(e.lastSelected=f)},clear:function(){var n=this;n.type==l?n._clearSelectedRows():n._clearSelectedCells()},_getParentTable:function(n){if(n)return"TABLE"==n[0].nodeName.toUpperCase()?n[0]:n.parent()?this._getParentTable(n.parent()):void 0},_mouseDownHandler:function(i){var r=this,o=r.grid,s=i.pageX,h=i.pageY,e=n(i.target),c=r._getParentTable(e);r.x=s;r.y=h;"TD"==e[0].nodeName.toUpperCase()&&c!=n(o.contentTable)[0]&&c!=n(o.frozenContentTable)[0]||!(e.hasClass("sui-cell")||e.hasClass("sui-row")||e.hasClass("sui-alt-row")||tr(i,o.contentTable)||tr(i,o.frozenContentTable))||e.hasClass("sui-detail-cell")||e.hasClass("sui-detail-row")||e.hasClass("sui-collapse-cell")||e.hasClass("sui-expand-cell")||e.hasClass("sui-expand-cell-disabled")||e.hasClass("sui-indent-cell")||(r.multiple&&r.drawArea&&r.area.appendTo(f.body).css({left:s+1,top:h+1,width:0,height:0}),n(f).on(ht+r._eventNS,u(r._mouseMoveHandler,r)),(r.drawArea||r.disableTextSelection)&&t.selection(!1),r.elements=gi(i,o.contentTable,o.frozenContentTable),r.elements&&r._selectOnMouseDown&&!nr(r.elements)&&r._performAndProcessSelection(i))},_mouseMoveHandler:function(n){var t=this,i=n.pageX,r=n.pageY,u=t.x,f=t.y,e={left:u>i?i:u,top:f>r?r:f,width:et(i-t.x),height:et(r-t.y)};t.multiple&&t.drawArea&&t.area.css(e)},_mouseUpHandler:function(i){var r=this,u=r.area;n(f).off(ht+r._eventNS);(r.drawArea||r.disableTextSelection)&&t.selection(!0);!r.elements||r._selectOnMouseDown&&!nr(r.elements)||r._performAndProcessSelection(i);u&&u.remove()},_performAndProcessSelection:function(t){var i,f,h,u,r=this,e=r.grid,v=r.area,y=r.elements,p=t.ctrlKey,s=[],c=[],a=[];if(h=e.trigger(o,{commandName:au,cancel:!1}),h.cancel)return void(r.elements=null);for(r.elementsToBeSelected=[],r.type==l?r._performRowSelection(v,p,y,t):r._performCellSelection(v,p,y,t),u=0;u<r.elementsToBeSelected.length;u++)i=r.elementsToBeSelected[u],!(i.hasClass("sui-cell")||i.hasClass("sui-row")||i.hasClass("sui-alt-row"))||i.hasClass("sui-detail-cell")||i.hasClass("sui-detail-row")||i.hasClass("sui-collapse-cell")||i.hasClass("sui-expand-cell")||i.hasClass("sui-expand-cell-disabled")||i.hasClass("sui-indent-cell")||(s.push(i),f=e._getRowIndex(r.type==l?i:n(i).parent()),c.push(f),a.push(f>=0?e.dataSource.getDataIndex(f):f));if(h=e.trigger(o,{commandName:sr,cancel:!1,toBeSelected:s,viewIndices:c,indices:a}),!h.cancel){for(u=0;u<s.length;u++)r._selectElement(s[u]);e.trigger(sr,{selected:s,viewIndices:c,indices:a});r.elements=null}},_performRowSelection:function(t,i,r,u){var f=this,o,e;n(u.target).hasClass("sui-expand-cell")||n(u.target).hasClass("sui-expand-cell-disabled")||n(u.target).hasClass("sui-collapse-cell")||n(u.target)&&n(u.target).parent()&&(n(u.target).parent().hasClass("sui-expand-cell")||n(u.target).parent().hasClass("sui-expand-cell-disabled")||n(u.target).parent().hasClass("sui-collapse-cell"))||(!f.drawArea||u.type===pi||t&&0===t.height()&&0===t.width()?f.multiple?f._processMultiRowSelection(u,r):f._processSingleRowSelection(u,r):f.multiple?(o=f.grid.contentTable.find(">tbody > tr"),e=null,ci(o,function(t,i){var r=n(i),f=r.offset().top;f<u.pageY&&(e=i.rowIndex)}),i||f._clearSelectedRows(),f._selectRowRange(r.row.rowIndex,e,i)):f._processSingleRowSelection(u,r))},_performCellSelection:function(t,i,r,u){var f=this,e,s,o,h;if(!(n(u.target).hasClass("sui-expand-cell")||n(u.target).hasClass("sui-expand-cell-disabled")||n(u.target).hasClass("sui-collapse-cell")||n(u.target)&&n(u.target).parent()&&(n(u.target).parent().hasClass("sui-expand-cell")||n(u.target).parent().hasClass("sui-expand-cell-disabled")||n(u.target).parent().hasClass("sui-collapse-cell"))))if(!f.drawArea||u.type===pi||t&&0===t.height()&&0===t.width())f.multiple?f._processMultiCellSelection(u,r):f._processSingleCellSelection(u,r);else if(f.multiple)for(s=f.grid.contentTable.find(">tbody > tr > td"),o=[],ci(s,function(t,i){var r=n(i),v=r.get(0).clientWidth,y=r.get(0).clientHeight,e=r.offset().top,s=r.offset().left,p=e+y,b=s+v,l=k(u.pageX,f.x),d=w(u.pageX,f.x),a=k(u.pageY,f.y),g=w(u.pageY,f.y),h=!1,c=!1;e<a?p>a&&(h=!0):e<g&&(h=!0);s<l?b>l&&(c=!0):s<d&&(c=!0);h&&c&&o.push(i)}),i||f._clearSelectedCells(),e=0;e<o.length;e++)h=n(o[e]),h.hasClass(c)?f._deselectElement(n(o[e])):f.elementsToBeSelected.push(n(o[e]));else f._processSingleCellSelection(u,r)},_selectRowRange:function(t,i,r){for(var f,e=this,o=k(t,i),s=w(t,i),h=e.grid.contentTable.find(">tbody > tr"),u=o;u<=s;u++)f=n(h[u]),r&&f.hasClass(c)?e._deselectElement(f):e.elementsToBeSelected.push(f)},_clearSelectedRows:function(){var t=this,i=t.grid;n(i.frozenContentTable).find("> tbody > tr."+c).each(function(){t._deselectElement(n(this))});n(i.contentTable).find("> tbody > tr."+c).each(function(){t._deselectElement(n(this))})},_clearSelectedCells:function(){var t=this,i=t.grid;n(i.frozenContentTable).find(">tbody > tr > td."+c).each(function(){t._deselectElement(n(this))});n(i.contentTable).find(">tbody > tr > td."+c).each(function(){t._deselectElement(n(this))})},_processSingleRowSelection:function(t,i){var r=this,f=r.toggle,e=r.multiple,u=n(i.row),o=u.hasClass(c);e||r._clearSelectedRows();f?o?r._deselectElement(u):r.elementsToBeSelected.push(u):(r._clearSelectedRows(),r.elementsToBeSelected.push(u));r.lastSelected=u},_processMultiRowSelection:function(t,i){var r=this,o=r.grid,a=t.ctrlKey,v=t.shiftKey,u=n(i.row),f,l;if(a)u.hasClass(c)?(r._deselectElement(u),r.lastSelected=u):(r.elementsToBeSelected.push(u),r.lastSelected=u);else if(v)if(o.contentTable.find(">tbody > tr."+c),r.lastSelected){var y=r.lastSelected,e=y.get(0).rowIndex,s=o.contentTable.find(">tbody > tr"),h=u.get(0).rowIndex,p=k(h,e),b=w(h,e);for(r._clearSelectedRows(),f=p;f<=b;f++)f!==e&&(l=n(s[f]),r.elementsToBeSelected.push(l));r.elementsToBeSelected.push(n(s[e]))}else r.elementsToBeSelected.push(u),r.lastSelected=u;else r._processSingleRowSelection(t,i)},_processSingleCellSelection:function(t,i){var r=this,f=r.toggle,e=r.multiple,u=n(i.cell),o=u.hasClass(c);r.lastSelected;e||r._clearSelectedCells();f?o?r._deselectElement(u):r.elementsToBeSelected.push(u):(r._clearSelectedCells(),r.elementsToBeSelected.push(u));r.lastSelected=u},_processMultiCellSelection:function(t,i){var r=this,b=r.grid,et=t.ctrlKey,ot=t.shiftKey,u=n(i.cell),y,p,it,rt,o,ut,ft;if(et)u.hasClass(c)?(r._deselectElement(u),r.lastSelected=u):(r.elementsToBeSelected.push(u),r.lastSelected=u);else if(ot)if(r.lastSelected){var f,s=r.lastSelected,d=b.contentTable.get(0),g=d.rows[0].cells.length,h=s.parent().get(0).rowIndex,e=h*g+s.get(0).cellIndex,nt=b.contentTable.find(">tbody > tr > td"),l=u.parent().get(0).rowIndex,tt=l*g+u.get(0).cellIndex,a=k(tt,e),v=w(tt,e);if(r._clearSelectedCells(),r.spreadsheet)for(y=s[0].cellIndex,p=u[0].cellIndex,a=k(y,p),v=w(y,p),it=k(h,l),rt=w(h,l),f=it;f<=rt;f++)for(ut=d.rows[f],o=a;o<=v;o++)r.elementsToBeSelected.push(n(ut.cells[o]));else for(f=a;f<=v;f++)f!==e&&(ft=n(nt[f]),r.elementsToBeSelected.push(ft));r.elementsToBeSelected.push(n(nt[e]))}else r.elementsToBeSelected.push(u),r.lastSelected=u;else r._processSingleCellSelection(t,i)},_selectElement:function(t){n(t).add(this.type==l?this.grid._getOtherRow(t):null).addClass(c)},_deselectElement:function(t){n(t).add(this.type==l?this.grid._getOtherRow(t):null).removeClass(c)}}),tu=b.extend({options:{ns:".shieldGridGroupReorder",returnDuration:50,returnEasing:"ease-out",dragTreshold:20,draggedTemplate:"<div style='border-color:transparent;' class='sui-grid sui-grid-core'><div class='sui-group-panel-indicator'><span class='sui-group-title'>{0}<\/span><span class='sui-group-close-button'><\/span><\/div><\/div>"},init:function(n){var t=this;t.grid=n;t.options=s(!0,{},tu.fn.options);t._eventNS=t.options.ns+ut();t._events(!0)},_events:function(n){var t=this,i=t.grid.element;n?(t._downProxy=u(t._down,t),i.on(it+t._eventNS,".sui-group-panel-indicator",t._downProxy)):(i.off(it+t._eventNS,".sui-group-panel-indicator",t._downProxy),t._downProxy=null)},_down:function(i){var r=this,e=n(i.target).closest(".sui-group-panel-indicator"),s=e.offset(),o=r.grid.element,h=o.offset(),c=i.pageX,l=i.pageY;if(r.dataField=e.attr("data-field"),!(i.button>1))return r._moveProxy=u(r._move,r),r._upProxy=u(r._up,r),n(f).on(ht+r._eventNS,r._moveProxy).on(kt+r._eventNS,r._upProxy),r.start={left:c-s.left,top:l-s.top,x:c,y:l,target:e,index:e.parent().find(".sui-group-panel-indicator").index(e),positions:r._positions(e),gridPosition:{left:h.left,top:h.top,width:o.outerWidth(),height:o.outerHeight()},isRtl:a.isRtl(o)},t.selection(!1),!1},_move:function(t){var r=this,o=r.options,s=r.dragged,i=r.start,u=t.pageX,e=t.pageY,h=o.dragTreshold;s?(s.css({left:u-i.left,top:e-i.top}),r.hovered=r._index(u,e),r._indicator()):(et(i.x-u)>h||et(i.y-e)>h)&&(r.dragged=n(v(o.draggedTemplate,i.target.html())).css({position:"absolute",left:u-i.left,top:e-i.top,zIndex:999}).find("table").css("width","auto").end().find("th").attr("style",i.target[0].style.cssText).css({width:i.target.width(),height:i.target.height()}).end().appendTo(f.body))},_positions:function(n){var t,r,u=n.parent().children(".sui-group-panel-indicator"),i=0,f=[];for(i;i<u.length;i++)t=u.eq(i),r=t.offset(),f.push({left:r.left,top:r.top,width:t.outerWidth(),height:t.outerHeight()});return f},_index:function(n,t){for(var i,e,o,f=this.start,r=f.gridPosition,u=0;u<f.positions.length;u++)if(i=f.positions[u],e=i.left<=n&&n<=i.left+i.width&&i.top<=t&&t<=i.top+i.height,o=r.left<=n&&n<=r.left+r.width&&r.top<=t&&t<=r.top+r.height,e&&o)return u;return-1},_indicator:function(){var o,u=this,t=u.start,i=u.hovered,e=t.positions[i],r=u.reorderIndicator,h=t.gridPosition.left,c=t.gridPosition.left+t.gridPosition.width,s=t.target.parent().children(".sui-group-panel-indicator"),l=t.isRtl?t.index<i:t.index>i;s.removeClass("sui-reorder-target");r&&r.hide();null!=i&&i>-1&&(s.eq(i).addClass("sui-reorder-target"),r||(r=u.reorderIndicator=n("<div class='sui-grid-reorder-indicator'><span class='sui-grid-indicator-top' /><span class='sui-grid-indicator-bottom' /><\/div>").appendTo(f.body)),i!==t.index&&(o=e.left+(l?0:e.width),r.css({left:k(w(h,o),c),top:e.top,height:e.height}).show()))},_up:function(){var r,i=this,y=i.options,e=i.grid,c=i.dragged,p=i.start,s=i.hovered,l=i.dataField,u,h,v;if(i._detachDocumentEvents(),c)if(null!=s&&s>-1){if(c.remove(),r=e.trigger(o,{commandName:yr,cancel:!1,index:p.index,newIndex:s}),!r.cancel)for(u=e.dataSource.group,h=0;h<u.length;h++)if(u[h].field==l){v=u[h];u[h]=u[s];u[s]=v;break}}else setTimeout(function(){c.remove()},a.transitions?y.returnDuration:0),i.grid.dataSource.group&&(r=e.trigger(o,{commandName:ui,cancel:!1,field:l}),r.cancel||(i.grid.ungroup(l),e.trigger(ui,r)));i.dragged=i.dataField=i.hovered=s=null;i._indicator();i.reorderIndicator&&(i.reorderIndicator.remove(),i.reorderIndicator=null);i.start=null;n(f).off(i._eventNS);t.selection(!0);r&&!r.cancel&&(delete r.cancel,delete r.commandName,e.dataSource.read(),e.trigger(yr,r))},_detachDocumentEvents:function(){var t=this;t._moveProxy=t._upProxy=null;n(f).off(t._eventNS)},destroy:function(){var n=this;n.dataField=null;n._detachDocumentEvents();n._events(!1)}}),of=b.extend({options:{ns:".shieldGridColumnGroupReorder",returnDuration:150,returnEasing:"ease-out",dragTreshold:20,draggedTemplate:"<div class='sui-grid sui-grid-core'><div class='sui-gridheader'><table class='sui-table'><thead><tr class='sui-columnheader'><th class='sui-headercell'>{0}<\/th><\/tr><\/thead><\/table><\/div><\/div>"},init:function(n){var t=this;t.grid=n;t.options=s(!0,{},ki.fn.options);t._eventNS=t.options.ns+ut();t._events(!0);n.headerTable.addClass("sui-reorderable")},_events:function(n){var t=this,i=t.grid.element;n?(t._downProxy=u(t._down,t),i.on(it+t._eventNS,".sui-headercell",t._downProxy)):(i.off(it+t._eventNS,".sui-headercell",t._downProxy),t._downProxy=null)},_down:function(i){var r=this,e=n(i.target).closest(".sui-headercell"),c=e.offset(),o=r.grid.element,l=o.offset(),v=i.pageX,y=i.pageY,p,s,h;if(!(i.button>1)){if(p=e.attr("data-field"),s=r.grid.dataSource.group,s)for(h=0;h<s.length;h++)if(p===s[h].field)return;return n(f).on(ht+r._eventNS,u(r._move,r)).on(kt+r._eventNS,u(r._up,r)),r.start={left:v-c.left,top:y-c.top,x:v,y:y,target:e,index:1e3,positions:r._positions(e),gridPosition:{left:l.left,top:l.top,width:o.outerWidth(),height:o.outerHeight()},isRtl:a.isRtl(o)},t.selection(!1),!1}},_move:function(t){var r=this,o=r.options,s=r.dragged,i=r.start,u=t.pageX,e=t.pageY,h=o.dragTreshold;s?(s.css({left:u-i.left,top:e-i.top}),r.hovered=r._index(u,e),r._indicator()):(et(i.x-u)>h||et(i.y-e)>h)&&(r.dragged=n(v(o.draggedTemplate,i.target.html())).css({position:"absolute",left:u-i.left,top:e-i.top,zIndex:999}).find("table").css("width","auto").end().find("th").attr("style",i.target[0].style.cssText).css({width:i.target.width(),height:i.target.height()}).end().appendTo(f.body))},_positions:function(){var n,t,r=this.grid.element.find(".sui-group-panel-indicator"),i=0,u=[];for(i;i<r.length;i++)n=r.eq(i),t=n.offset(),u.push({left:t.left,top:t.top,width:n.outerWidth(),height:n.outerHeight()}),i==r.length-1&&u.push({left:t.left,top:t.top,width:n.outerWidth(),height:n.outerHeight()});return u},_index:function(n,t){var r,f,s,o,h,e=this.start,u=e.gridPosition,i=this.grid.element.find(".sui-group-panel");if(e.positions.length>0){for(f=0;f<e.positions.length;f++)if(r=e.positions[f],s=r.left<=n&&n<=r.left+r.width&&r.top<=t&&t<=r.top+r.height,h=u.left<=n&&n<=u.left+u.width&&u.top<=t&&t<=u.top+u.height,o=i.offset().left<=n&&n<=i.offset().left+i.width()&&i.offset().top<=t&&t<=i.offset().top+i.height(),s&&h)return f}else o=i.offset().left<=n&&n<=i.offset().left+i.width()&&i.offset().top<=t&&t<=i.offset().top+i.height();return o?(this.isOnGroupPanel=!0,this.grid.element.find(".sui-group-panel-indicator").length):-1},_indicator:function(){var o,u=this,t=u.start,i=u.hovered,e=t.positions[i],r=u.reorderIndicator,h=t.gridPosition.left,l=t.gridPosition.left+t.gridPosition.width,c=t.target.parent().children(".sui-group-panel-indicator"),s=t.isRtl?t.index<i:t.index>i;c.removeClass("sui-reorder-target");r&&r.hide();null!=i&&i>-1&&(c.eq(i).addClass("sui-reorder-target"),r||(r=u.reorderIndicator=n("<div class='sui-grid-reorder-indicator'><span class='sui-grid-indicator-top' /><span class='sui-grid-indicator-bottom' /><\/div>").appendTo(f.body)),this.isOnGroupPanel&&(s=!1),e?(o=e.left+(s?0:e.width),this.isOnGroupPanel=null,r.css({left:k(w(h,o),l),top:e.top,height:e.height}).show()):(o=h+(s?t.gridPosition.width:0),this.isOnGroupPanel=null,r.css({left:o,top:t.gridPosition.top,height:u.grid.element.find(".sui-group-panel-empty").outerHeight()}).show()))},_up:function(){var r,i=this,c=i.options,s=i.grid,h=i.dragged,u=i.start,e=i.hovered,l;h&&((h.css({left:u.x-u.left,top:u.y-u.top,transition:v("left {0} {1}ms, top {0} {1}ms",c.returnEasing,c.returnDuration)}),null!=e&&e>-1)?(h.remove(),l=u.target.attr("data-field"),r=s.trigger(o,{commandName:pr,cancel:!1,field:l,index:e}),r.cancel||s.group(l,e,"asc")):setTimeout(function(){h.remove()},a.transitions?c.returnDuration:0));i.dragged=i.hovered=e=null;i._indicator();i.reorderIndicator&&(i.reorderIndicator.remove(),i.reorderIndicator=null);i.start=null;n(f).off(i._eventNS);t.selection(!0);r&&!r.cancel&&(delete r.cancel,delete r.commandName,s.dataSource.read(),s.trigger(pr,r))},destroy:function(){this._events(!1);this.grid.headerTable.removeClass("sui-reorderable")}}),ki=b.extend({options:{ns:".shieldGridColumnReorder",returnDuration:150,returnEasing:"ease-out",dragTreshold:20,draggedTemplate:"<div class='sui-grid sui-grid-core'><div class='sui-gridheader'><table class='sui-table'><thead><tr class='sui-columnheader'><th class='sui-headercell'>{0}<\/th><\/tr><\/thead><\/table><\/div><\/div>"},init:function(n){var t=this;t.grid=n;t.options=s(!0,{},ki.fn.options);t._eventNS=t.options.ns+ut();t._events(!0);n.headerTable.addClass("sui-reorderable")},_events:function(n){var t=this,i=t.grid.element;n?(t._downProxy=u(t._down,t),i.on(it+t._eventNS,".sui-headercell",t._downProxy)):(i.off(it+t._eventNS,".sui-headercell",t._downProxy),t._downProxy=null)},_down:function(i){var r=this,e=n(i.target).closest(".sui-headercell"),s=e.offset(),o=r.grid.element,h=o.offset(),c=i.pageX,l=i.pageY;if(!(i.button>1))return n(f).on(ht+r._eventNS,u(r._move,r)).on(kt+r._eventNS,u(r._up,r)),r.start={left:c-s.left,top:l-s.top,x:c,y:l,target:e,index:e.parent().find(".sui-headercell").index(e),positions:r._positions(e),gridPosition:{left:h.left,top:h.top,width:o.outerWidth(),height:o.outerHeight()},isRtl:a.isRtl(o)},t.selection(!1),!1},_move:function(t){var r=this,o=r.options,s=r.dragged,i=r.start,u=t.pageX,e=t.pageY,h=o.dragTreshold;s?(s.css({left:u-i.left,top:e-i.top}),r.hovered=r._index(u,e),r._indicator()):(et(i.x-u)>h||et(i.y-e)>h)&&(r.dragged=n(v(o.draggedTemplate,i.target.html())).css({position:"absolute",left:u-i.left,top:e-i.top,zIndex:999}).find("table").css("width","auto").end().find("th").attr("style",i.target[0].style.cssText).css({width:i.target.width(),height:i.target.height()}).end().appendTo(f.body))},_positions:function(n){var t,r,u=n.parent().children(".sui-headercell"),i=0,f=[];for(i;i<u.length;i++)t=u.eq(i),r=t.offset(),f.push({left:r.left,top:r.top,width:t.outerWidth(),height:t.outerHeight()});return f},_index:function(n,t){for(var i,e,o,f=this.start,r=f.gridPosition,u=0;u<f.positions.length;u++)if(i=f.positions[u],e=i.left<=n&&n<=i.left+i.width&&i.top<=t&&t<=i.top+i.height,o=r.left<=n&&n<=r.left+r.width&&r.top<=t&&t<=r.top+r.height,e&&o)return u;return-1},_indicator:function(){var o,u=this,t=u.start,i=u.hovered,e=t.positions[i],r=u.reorderIndicator,h=t.gridPosition.left,c=t.gridPosition.left+t.gridPosition.width,s=t.target.parent().children(".sui-headercell"),l=t.isRtl?t.index<i:t.index>i;s.removeClass("sui-reorder-target");r&&r.hide();null!=i&&i>-1&&(s.eq(i).addClass("sui-reorder-target"),r||(r=u.reorderIndicator=n("<div class='sui-grid-reorder-indicator'><span class='sui-grid-indicator-top' /><span class='sui-grid-indicator-bottom' /><\/div>").appendTo(f.body)),i!==t.index&&(o=e.left+(l?0:e.width),r.css({left:k(w(h,o),c),top:e.top,height:e.height}).show()))},_up:function(){var r,i=this,h=i.options,c=i.grid,s=i.dragged,u=i.start,e=i.hovered;s&&(s.css({left:u.x-u.left,top:u.y-u.top,transition:v("left {0} {1}ms, top {0} {1}ms",h.returnEasing,h.returnDuration)}),null!=e&&e>-1?(s.remove(),r=c.trigger(o,{commandName:ar,cancel:!1,index:u.index,newIndex:e}),r.cancel||c.reorderColumn(u.index,e)):setTimeout(function(){s.remove()},a.transitions?h.returnDuration:0));i.dragged=i.hovered=e=null;i._indicator();i.reorderIndicator&&(i.reorderIndicator.remove(),i.reorderIndicator=null);i.start=null;n(f).off(i._eventNS);t.selection(!0);r&&!r.cancel&&(delete r.cancel,delete r.commandName,c.trigger(ar,r))},destroy:function(){this._events(!1);this.grid.headerTable.removeClass("sui-reorderable")}}),iu=hi.extend({init:function(){hi.fn.init.apply(this,arguments);var n=this;n._eventNS=".shieldGrid"+n.getInstanceId();n.refresh();n._dM()},destroy:function(){this._destroyInternal();hi.fn.destroy.call(this)},_destroyInternal:function(){var r,f,e,t=this,o=t.options,u=t._eventNS;if(t.contentWrapper){if(t._markedCells){for(f in t._markedCells)t._markedCells.hasOwnProperty(f)&&(t._markedCells[f].length=0);t._markedCells=null}if(n(i).off(u),t._destroyFrozenContainers(),t.sorting&&(t.sorting.destroy(),t.sorting=null),t.virtualizedContainer&&(t.virtualizedContainer.destroy(),t.virtualizedContainer=null),t.columns)for(r=0;r<t.columns.length;r++)t.columns[r].destroy();if(t.contentWrapper&&t.contentWrapper.off(or),t.scrollableWrapper=null,t._selectable&&(t._selectable.destroy(),t._selectable=null),o.scrolling?(t.contentWrapper.parent().remove(),t.headerWrapper.parent().remove()):(t.contentWrapper.remove(),t.headerWrapper.remove()),t._hasDetailTemplate()&&t.contentTable.off(u),t.popupWindow&&t.popupWindow.destroy(),t._footer&&(n(t._footer).remove(),t._footer=null),t.columns=t._gridColumns=t._windowEditingIndex=t.contentWrapper=t.headerWrapper=t.contentTable=t.hederTable=null,t._buttons){for(r=0;r<t._buttons.length;r++)e=t._buttons[r].button.element,t._buttons[r].button.destroy(),e.remove();t._buttons.length=0}t.pager&&(t.pager.destroy(),t.pager=null,t.pagerWrapper&&(t.pagerWrapper.parent().remove(),t.pagerWrapper=null));t.loadingPanel&&(t.loadingPanel=null,clearTimeout(t.loadingPanelTimeout),t.loadingPanelTimeout=null);t._columnResizing&&(t._columnResizing.destroy(),t._columnResizing=null);t._toolbar&&(t._toolbar.destroy(),t._toolbar=null);t._editing&&(t._editing.destroy(),t._editing=null);t._columnReorder&&(t._columnReorder.destroy(),t._columnReorder=null);t._sortingInProgress=t._loadingVirtualRows=t._scrollLeft=t._scrollTop=t._populateInsertedItem=t._preventClosingEditors=t._editingInProcess=null;t._filter&&(t._filter.destroy(),t._filter=null);t._groupReorder&&(t._groupReorder.destroy(),t._groupReorder=null);t._columnGroupReorder&&(t._columnGroupReorder.destroy(),t._columnGroupReorder=null);t.dataSource.off(u);t.element.off(u).removeClass("sui-grid sui-grid-core").css(bt,"").empty()}},_dM:function(){var t=function(t){return n("<div/>").html(t).text()},i=f.createTextNode(t("&#68;&#101;&#109;&#111;&#32;&#86;&#101;&#114;&#115;&#105;&#111;&#110;"));n(i).insertAfter(n(this.element))},_resizeHandler:function(){var n=this;n._adjustWidthsLocked();n._adjustHeightsLocked()},_hasDetailTemplate:function(){var n=this.options;return n.detailTemplate||n.events&&n.events.detailCreated},_hasVirtualScrolling:function(){var n=this.options;return n.scrolling&&n.scrolling.virtual&&!n.paging&&!this._hasDetailTemplate()},_canExpandCollapse:function(){return this.options.detailExpandCollapse!==!1},_resolveColumns:function(n){var i,r=this;if(r.columns=[],nt.array(n))for(i=0;i<n.length;i++)r.columns.push(new rf(n[i]));else t.error("Invalid columns declaration. The columns have to be array.",r.options.dieOnError);for(r._gridColumns={},i=0;i<r.columns.length;i++)r._gridColumns[r.columns[i].field]={index:i}},_createWrappers:function(){var i,r,t=this,u=t.element;t._wrapper();i=n("<div/>").prependTo(u);i.addClass("sui-gridcontent");r=n("<div/>").prependTo(u);r.addClass("sui-gridheader");t.options.showHeader||(r.css(ct,rt),i.addClass("sui-no-header"));t.headerWrapper=r;t.contentWrapper=i},_wrapper:function(){var t=this.options.height,n=this.element;n.is("div")||(n=n.wrap("<div/>").parent());n.addClass("sui-grid sui-grid-core");n&&n.css(bt,t)},_createGroupPanel:function(){var u,o,f,i,t=this,e=t.options.grouping,s=!1,r=t.dataSource;if(f=t.element.find(".sui-group-panel"),f.length>0&&f.remove(),e.showGroupHeader)if(r.group&&0!==r.group.length){for(u=n('<div class="sui-group-panel"/>'),n(t.element).prepend(u),i=0;i<r.group.length;i++)o=r.group[i],t._createGroupHeaderIndicator(o,u),s=!0;s&&e.allowDragToGroup&&(t._groupReorder&&t._groupReorder.destroy(),t._groupReorder=new tu(t),t._columnGroupReorder&&t._columnGroupReorder.destroy(),t._columnGroupReorder=new of(t))}else n(t.element).prepend(n('<div class="sui-group-panel sui-group-panel-empty">'+e.message+"<\/div>"))},_createGroupHeaderIndicator:function(t,i){var e,f,r=this,o=r._getColumnByField(t.field),s=o?o.groupTitle:t.field;f=n('<div class="sui-group-panel-indicator" data-field="'+t.field+'"/>').appendTo(i);e="desc"==t.order?n('<span class="sui-descending">&#9660;<\/span>').appendTo(f):n('<span class="sui-ascending">&#9650;<\/span>').appendTo(f);e.on(p,u(r._sortButtonClickedHandler,r));n('<span class="sui-group-title">'+s+"<\/span>").appendTo(f);r.options.grouping.allowDragToGroup&&n('<span class="sui-group-close-button">&#10006;<\/span>').on(p,u(r._closeButtonClickedHandler,r)).appendTo(f)},_sortButtonClickedHandler:function(t){for(var u=this,f=n(t.currentTarget),e=f.parent().attr("data-field"),r=u.dataSource.group,i=0;i<r.length;i++)r[i].field==e&&(r[i].order=f.hasClass("sui-descending")?"asc":"desc",u.dataSource.read())},_closeButtonClickedHandler:function(t){var r,i=this,f=n(t.currentTarget),u=f.parent().attr("data-field");i.dataSource.group&&(r=i.trigger(o,{commandName:ui,cancel:!1,field:u}),r.cancel||(i.ungroup(u),i.trigger(ui,r)))},_createHeaderTable:function(){var i=this,r=i.headerWrapper,t=i.element;t.is("table")||(t=r.children("table"),t.length||(t=n("<table/>").appendTo(r)));ot&&t.attr("cellspacing",0);t.addClass("sui-table");i.headerTable=t;i._createTbody(t,!0);i._createThead(t);i._createFakeRow(t,i.columns.length)},_createContentTable:function(){var t=this,f=t.options,r=t.contentWrapper,i=t.element;i.is("table")||(i=r.children("table"),i.length||(i=n("<table/>").appendTo(r)));ot&&i.attr("cellspacing",0);i.addClass("sui-table");f.rowHover&&i.addClass("sui-hover");t._hasDetailTemplate()&&(t._canExpandCollapse()&&i.addClass("sui-expandable"),i.on(p+t._eventNS,"> tbody > tr > .sui-expand-cell, > tbody > tr > .sui-collapse-cell",u(t._expandCollapseDetailTemplate,t)));t.contentTable=i;t._createTbody(t.contentTable,!1)},_createTbody:function(t,i){var r=t.find("> tbody");r.length||(r=n("<tbody/>").appendTo(t));i&&r.addClass("sui-hide");t.tbody=r},_createThead:function(t){var r,h,i,u,c,a,o=this,f=(o.options,o.columns),v="",e=t.find(">thead"),s;for(e.length||(e=n("<thead/>").insertBefore(t.tbody)),i=t.find("tr:has(th):first"),i.length||(i=e.children().first(),i.length||(i=n("<tr/>").appendTo(e))),i.attr(ri,l),i.empty(),r=0,h=f.length;r<h;r++)u=f[r],c=u.headerTemplate||u.title||u.field||u,a=!!f[r].sortable,v+="<th "+di(u.headerAttributes)+' data-field="'+f[r].field+'" role="columnheader"'+(a?' tabindex="-1"':"")+">"+c+"<\/th>";(i.html(v),i.addClass("sui-columnheader"),i.find("th").addClass("sui-headercell"),f.length&&o._hasDetailTemplate()&&o._canExpandCollapse())&&(s=n('<th class="sui-indent-cell"/>'),ot&&s.html("&nbsp;"),s.prependTo(i));t.thead=e},_createFakeRow:function(t,i){var r,u,f=t.find(">tbody");if(f.length){for(r=n("<tr/>"),u=0;u<i;u++)n("<td/>").appendTo(r);r.appendTo(f)}},_createColgroup:function(t){var r,o,i,f=this,s=f.options,e=f.columns,u=t.find(">colgroup");for(u.length||(u=n("<colgroup/>").prependTo(t)),u.html(""),s.columns.length&&f._hasDetailTemplate()&&f._canExpandCollapse()&&n('<col class="sui-indent-col"/>').appendTo(u),r=0,o=e.length;r<o;r++)i=e[r].width,n(i&&0!==parseInt(i,10)?v('<col style="width:{0}"/>',yt(i)?i:i+"px"):"<col/>").data(d,e[r].field).appendTo(u)},scrollTop:function(t){var i=this,f=i.options,o=f.scrolling,r=i._hasVirtualScrolling(),u=i.contentWrapper;if(o)if(e(t))r?i.virtualizedContainer&&i.virtualizedContainer.scrollTop(t):n(u).scrollTop(t);else{if(!r)return n(u).scrollTop();if(i.virtualizedContainer)return i.virtualizedContainer.scrollTop()}},_scrolling:function(){var nt,f,tt,t=this,h=t.options,o=n(t.element),rt=(a.isRtl(o),t.dataSource),c=t._hasVirtualScrolling(),s=t.headerWrapper,i=t.contentWrapper,l=s.outerHeight(),it=!(c||"auto"!==h.height&&e(h.height)),v=!c&&e(h.maxHeight)?parseInt(h.maxHeight,10):r,y=0,p=0,w=0,b,k,d,g;if(s.parent().hasClass("sui-gridheader sui-scrolldiv")?l=s.parent().outerHeight():(s.addClass("sui-headercontent").removeClass("sui-gridheader"),s.wrap('<div class="sui-gridheader sui-scrolldiv"/>'),i.addClass("sui-content").removeClass("sui-gridcontent"),i.wrap('<div class="sui-gridcontent sui-scroller"/>'),ot&&(t.headerTable.addClass("sui-table-ie7").removeClass("sui-table"),t.contentTable.addClass("sui-table-ie7").removeClass("sui-table")),tt=t.scrollableWrapper=c?i.parent():i,tt.on(or,u(t._onscroll,t))),t.pagerWrapper&&(y=t.pagerWrapper.outerHeight()),t._toolbar){for(k=o.find(".sui-toolbar"),d=0,b=0;b<k.length;b++)d+=n(k[0]).outerHeight();p+=d+1}g=o.find(".sui-group-panel");g.length>0&&(w+=g.outerHeight());it?f="auto":(nt=o.innerHeight(),f=nt-l-y-p-w);n(i).add(i.parent()).css(bt,f);v&&v<o.innerHeight()&&(f=v-l-y-p-w,n(i).add(i.parent()).css(bt,f));c?(t._ensureVirtualizedContainer(),t.virtualizedContainer.options.total=rt.total,t.virtualizedContainer.render(),t._fixHeaderPadding(t.virtualizedContainer.wrapper.parent())):(t._fixHeaderPadding(i),it||!wt||ot||fu||a.hasScrollbarX(i)||i.css(bt,f+1))},_fixHeaderPadding:function(t){var u=this,f=a.isRtl(u.element),i=u.headerWrapper,r=n(t).get(0);r&&(r.scrollHeight-r.clientHeight>1?(i.parent().css(f?"padding-left":"padding-right",a.scrollbar()-1),i.removeClass("sui-no-y-scroll")):(i.parent().css(f?"padding-left":"padding-right",0),i.addClass("sui-no-y-scroll")))},_ensureVirtualizedContainer:function(){var i,r,n=this;n.virtualizedContainer||(i=n._renderRow(0,n.contentTable.tbody,{}),r=i.outerHeight(),i.remove(),n.virtualizedContainer=new t.ui.VirtualizedContainer(n.scrollableWrapper,{itemHeight:r,total:n.dataSource.total,createContainer:function(t){return t.addClass("sui-content").append(n.contentTable).find("tbody").empty()},getItems:u(n._loadVirtualRows,n),skipRender:!0}),n.contentWrapper=n.virtualizedContainer.element.children().eq(0))},_loadVirtualRows:function(n,t,i){var r=this,u=r.dataSource,o=null!=u.skip?u.skip:0,s=null!=u.take?u.take:u.view.length,e=r.virtualizedContainer.container,f;if(n<t)if(!r._sortingInProgress&&u.remote&&(n<o||t>=o+s))clearTimeout(r._loadWaitTimeout),r._loadWaitTimeout=setTimeout(function(n,t,i){return function(){r._loadWaitTimeout=null;u.skip=n;u.take=t-n;r._loadingVirtualRows=!0;u.one(er+".shieldGrid"+r.getInstanceId(),function(){r._loadWaitTimeout||(r._loadingVirtualRows=!1)});u.read().then(function(){if(!r._loadWaitTimeout){e.empty();for(var f=n;f<t&&f<u.total;f++)r._renderRow(f-n,e,u.view[f-n]);r.loading(!1);i([],!1);r.trigger(hr);r.trigger(at)}})}}(n,t,i),100);else{for(e.empty(),f=n;f<t&&f<u.total;f++)r._renderRow(f,e,u.view[f]);i([],!1);r.trigger(hr);r.trigger(at)}else r._renderNoRecords();r._checkIfVerticalScroll();r._initSelection()},_checkIfVerticalScroll:function(){var n=this,t=n.element.find(".sui-virtualized").get(0),i=n.element.get(0),r=t.scrollHeight>i.scrollHeight;r?(n.headerWrapper.parent().css("padding-right","16px"),n.headerWrapper.removeClass("sui-grid-no-gap")):(n.headerWrapper.parent().css("padding-right","0px"),n.headerWrapper.addClass("sui-grid-no-gap"))},_onscroll:function(){var u,t=this,f=t.scrollableWrapper,i=f.get(0),o=t.headerWrapper,r=f.scrollLeft(),h=o.scrollLeft(),e,s;(a.isRtl(t.element)&&eu&&i.clientHeight<i.scrollHeight&&(r+=i.offsetWidth-i.clientWidth),r!=h&&(o.scrollLeft(r),t._footer&&(u=n(t._footer).find(".sui-footer-content"),u.length>0&&u.scrollLeft(r))),t.frozenHeaderWrapper)&&(e=f.scrollTop(),s=t.frozenContentWrapper.scrollTop(),e!=s&&t.frozenContentWrapper.scrollTop(e))},_sorting:function(){var n=this,t=n.options.sorting;n.element;t&&n.columns.length&&(n.sorting&&n.sorting.destroy(),n.sorting=new ff(t,n))},_renderData:function(){var r,e,t=this,u=t.dataSource.view,i=t.options,f,s,c,l;i.scrolling;!!h(i.altRows)||i.altRows;i.rowTemplate;i.altRowTemplate;t.contentTable;t._loadingVirtualRows||(e=t.trigger(o,{commandName:at,cancel:!1}),e.cancel)||(t._sortingInProgress=!1,t.columns.length||(r=[],u.length&&ci(u[0],function(n){r.push(n)}),i.columns=r,t._resolveColumns(r)),t._filtering(),t._destroyFrozenContainers(),t._createThead(t.headerTable),t._createColgroup(t.headerTable),t._createColgroup(t.contentTable),t.contentTable.tbody.empty(),t._sorting(),t._renderRows(),t._renderFooter(),f=function(t){return n("<div/>").html(t).text()},s=f("&#83;&#104;&#105;&#101;&#108;&#100;&#85;&#73;"),t._refreshColVisibility(),u&&u.length>0&&t._initFrozenCols(),t._initSelection(),t.loading(!1),c=f("&#104;&#116;&#116;&#112;&#58;&#47;&#47;&#119;&#119;&#119;&#46;&#115;&#104;&#105;&#101;&#108;&#100;&#117;&#105;&#46;&#99;&#111;&#109;"),t.trigger(at),l=c,t.dmL||(t.dmL=n('<a href="'+l+'" target="_blank"> by '+s+"<\/a>"),n(t.dmL).css({color:"grey","text-decoration":"none"}).insertAfter(n(this.element))))},_renderRows:function(){var i,r,n=this,u=n.dataSource,t=u.view;if(n._markedCells){for(r in n._markedCells)n._markedCells.hasOwnProperty(r)&&(n._markedCells[r].length=0);n._markedCells=null}return t&&t.length?(n._hasVirtualScrolling()&&!n._sortingInProgress||(i=u.group,i&&i.length>0?(n._renderGroupedData(t,0,0),n._addGroupIndentCells(),n._addGroupDataIndentCells(),n.contentTable.addClass("sui-grouped-table")):n._renderRowsAndDetails(t)),n._createGroupPanel(),void n._initScrolling()):(n._renderNoRecords(),n._createGroupPanel(),n._addGroupIndentCells(),void n._initScrolling())},_addGroupIndentCells:function(){var r,o,u,t,f,i=this,e=i.dataSource.group,s=i.options,h=s.filtering&&s.filtering.enabled;if(e&&e.length>0)for(r=i.headerTable.find(">colgroup").first(),o=i.contentTable.find(">colgroup").first(),u=i.headerTable.thead.find(".sui-columnheader").first(),h&&(t=i.headerTable.find(".sui-filter-row").first()),r.find(".sui-indent-col").remove(),u.find(".sui-columnheader > .sui-indent-cell").remove(),t&&t.length>0&&t.find(".sui-indent-cell").remove(),f=0;f<e.length;f++)n('<col class="sui-indent-col"/>').prependTo(r),n('<th class="sui-indent-cell"/>').prependTo(u),t&&t.length>0&&n('<th class="sui-indent-cell"/>').prependTo(t),n('<col class="sui-indent-col"/>').prependTo(o)},_getVisibleColumnCount:function(){for(var t=this.columns||[],r=t.length,i=0,n=0;n<r;n++)t[n].visible&&i++;return i},_renderNoRecords:function(){var t=this,i=t.options,r=t.contentTable;h(i.noRecordsTemplate)?n('<tr><td class="sui-grid-norecords-cell" colspan="'+t._getVisibleColumnCount()+'" role="gridcell">'+(i.noRecordsText||"No records to display")+"<\/td><\/tr>").appendTo(r.tbody):n('<td class="sui-grid-norecords-cell" colspan="'+t._getVisibleColumnCount()+'" role="gridcell"/>').append(i.noRecordsTemplate).wrap("<tr/>").parent().appendTo(r.tbody)},_initScrolling:function(){var n=this;n.options.scrolling&&!n._sortingInProgress&&n._scrolling()},_initSelection:function(){this._selection()},_addGroupDataIndentCells:function(){for(var t,i,u,e=this,f=e.contentTable.get(0).rows,r=0;r<f.length;r++)if(i=n(f[r]),u=parseInt(i.attr("data-group-level"),10),i.hasClass("sui-group-header")){if(u>1)for(t=0;t<u-1;t++)n('<td class="sui-indent-cell"/>').prependTo(i)}else for(t=0;t<u;t++)n('<td class="sui-indent-cell sui-group-intend-cell"/>').prependTo(i)},_renderGroupedData:function(n,t,i){var f,r,u=this;for(u.options.detailExpandCollapse=!1,f=0;f<n.length;f++)r=n[f],r.hasOwnProperty("field")&&r.hasOwnProperty("items")&&r.hasOwnProperty("value")?(i++,u._renderGroupHeader(r,i),u._renderGroupedData(r.items,t,i),u._renderGroupAggregates(r),i--):(u._renderDataItem(r,t,i),t++)},_renderGroupAggregates:function(t){var r,h,p;if(t.aggregate){for(var c,f,y,l,o=this,s=o.columns,a={},u=t.aggregate,i=0;i<s.length;i++)if(f=s[i].groupFooterTemplate){c=n("<tr class='sui-group-footer' />").appendTo(o.contentTable.tbody);break}if(c){for(i=0;i<s.length;i++)if(l=n("<td class='sui-group-footer-cell' />").appendTo(c),f=s[i].groupFooterTemplate){for(y=s[i].field,r=0;r<u.length;r++)u[r].field==y&&(ft(u[r].aggregate)?a.custom=u[r].value:a[u[r].aggregate]=u[r].value);ft(f)?(h=f.call(o,l,a),e(h)&&!ti(h)&&""!==h&&l.html(h)):l.html(v.call(o,f,a))}for(p=o.dataSource.group.length,i=0;i<p;i++)c.prepend(n("<td class='sui-indent-cell' />"))}}},_renderGroupHeader:function(t,i){var r=this,o=r.contentTable,s=r._getVisibleColumnCount()+r.dataSource.group.length-i+1,h=n('<tr class="sui-group-header" data-group-level="'+i+'"/>').appendTo(o),f=n('<td class="sui-group-header-cell" colspan="'+s+'"/>').appendTo(h),c=n('<span class="sui-collapse">&#9662;<\/span>').appendTo(f),e=r._getColumnByField(t.field),l=e?e.groupHeaderTitle:t.field;n('<span class="sui-group-header-text">'+l+": "+t.value+"<\/span>").appendTo(f);c.on(p,u(r._expandCollapseHandler,r))},_expandCollapseHandler:function(t){var f,i=this,r=n(t.currentTarget),u=r.parent().parent();r.hasClass("sui-collapse")?(f=i.trigger(o,{commandName:kr,cancel:!1,row:u}),f.cancel||(i.collapseGroup(u),r.html("&#9656;"),r.removeClass("sui-collapse").addClass("sui-expand"),i.trigger(kr,{row:u}))):(f=i.trigger(o,{commandName:dr,cancel:!1,row:u}),f.cancel||(i.expandGroup(u),r.html("&#9662;"),r.removeClass("sui-expand").addClass("sui-collapse"),i.trigger(dr,{row:u})))},_renderDataItem:function(n,t,i){var r=this,u=r.contentTable;r._renderRow(t,u,n).attr("data-group-level",i)},_renderRowsAndDetails:function(n){for(var i=this,u=i.contentTable,t=0,r=n.length;t<r;t++)i._renderRow(t,u.tbody,i.dataSource.view[t]),i._hasDetailTemplate()&&!i._canExpandCollapse()&&i._addDetailTemplate(n[t])},_renderRow:function(t,i,r){var w,u,it,b,f=this,ut=e(i),c=f.options,et=!!h(c.altRows)||c.altRows,y=et&&t%2&&c.altRowTemplate?c.altRowTemplate:c.rowTemplate,ot=f.columns;if(y)yt(y)&&(y=y.replace(/^\s+/,"").replace(/\s+$/,"")),u=n(v(y,r)),ut&&i.append(u);else{if(u=n('<tr class="'+(et&&t%2?"sui-alt-row":"sui-row")+'"/>').data(gr,t),arguments.length>3){var ht=arguments[3],lt=i.find("tr"),vt=lt.eq(ht);lt.length==ht?i.append(u):u.insertBefore(vt)}else ut&&i.append(u);for(b=0;b<ot.length;b++){var p,k,a=ot[b],d=a.columnTemplate,at=a.format,nt=a.field,tt=a.buttons,s=n("<td "+di(a.attributes)+' role="gridcell" tabindex="-1"/>').addClass("sui-cell").appendTo(u);if(s.attr(ri,"gridcell").attr(st,"-1"),a.editable||s.attr(vi,yi),tt)for(k=0;k<tt.length;k++)f._buildButton(tt[k],s,t);else d?ft(d)?(p=d.call(f,s,r,t),e(p)&&!ti(p)&&""!==p&&s.html(p)):s.html(v.call(f,d,r)):at?s.html(v.call(f,at,nt?g(r,nt):r)):s.html(""+g(r,nt));a.visible||s.css(ct,rt)}}return f._hasDetailTemplate()&&f._canExpandCollapse()&&(it=f.trigger(o,{commandName:ku,cancel:!1,item:r}),it.cancel?w=n('<td class="sui-cell sui-expand-cell-disabled"/>'):(w=n('<td class="sui-cell sui-expand-cell"/>'),f._setExpandCollapseCellText(w,c.detailExpandText,c.detailCollapseText)),w.prependTo(u)),u.attr(ri,l),u},_renderFooter:function(){var l,o,s,p,r,i,a,t=this,w=t.options,h=t.columns,y={},f=t.dataSource.aggregates,c,u;for(t._footer&&(n(t._footer).remove(),t._footer=null),r=0;r<h.length;r++)if(s=h[r].footerTemplate){if(w.scrolling&&w.scrolling.virtual){var b=n('<div class="sui-footer" style="padding-right:16px;"/>').appendTo(t.element),g=n('<div class="sui-footer-content"/>').appendTo(b),k=n('<table class="sui-table"/>').appendTo(g),d=t.element.find(".sui-headercontent > table > colgroup > col"),nt=n("<colgroup/>").appendTo(k);for(i=0;i<d.length;i++)n(d[i].outerHTML).appendTo(nt);l=n("<tbody/>").appendTo(k);t._footer=b}else l=n("<tfoot/>").appendTo(t.contentTable),t._footer=l;o=n('<tr class="sui-grid-footer"/>').appendTo(l);break}if(o){for(r=0;r<h.length;r++)if(a=n('<td class="sui-footer-cell" role="gridcell" tabindex="-1"/>').appendTo(o),s=h[r].footerTemplate){for(p=h[r].field,i=0;i<f.length;i++)f[i].field==p&&(ft(f[i].aggregate)?y.custom=f[i].value:y[f[i].aggregate]=f[i].value);ft(s)?(c=s.call(t,a,y),e(c)&&!ti(c)&&""!==c&&a.html(c)):a.html(v.call(t,s,y))}u=o.prev();u.length<=0&&(u=t.contentTable.find(">tbody > tr").first());(u.find(".sui-expand-cell").length>0||u.find(".sui-expand-cell-disabled").length>0||u.find(".sui-indent-cell").length>0||u.find(".sui-collapse-cell").length>0)&&o.prepend(n("<td/>"))}},_buildButton:function(i,r,f){var c,e=this,o=i.commandName,s=i.click,a;t.ui.Button&&(a=n('<button type="button">'+i.caption+"<\/button>").appendTo(r),r.addClass("sui-button-cell"),"delete"===o?(s=e._deleteButtonClicked,h(i.cls)?i.cls="sui-delete":i.cls+=" sui-delete"):"edit"===o&&(e._editing&&(e._editing.type=l),e._preventClosingEditors=!0,s=e._editButtonClicked,h(i.cls)?i.cls="sui-edit":i.cls+=" sui-edit"),c=new t.ui.Button(a,{cls:i.cls,events:{click:u(s,e,f,r)}}),"delete"!=o&&"edit"!=o||(e._buttons||(e._buttons=[]),e._buttons.push({index:f,button:c})))},_deleteButtonClicked:function(n){var e,t=this,f=t.dataSource,r=t.options.editing,u=r?r.confirmation:null;if(e=t.trigger(o,{commandName:br,cancel:!1,rowIndex:n}),!e.cancel){if(u&&u["delete"]&&u["delete"].enabled&&!i.confirm(v(u["delete"].template,f.view[n])))return;f.removeAtView(n);r&&!r.batch&&f.save(!1);t.trigger(br,{rowIndex:n})}},_editButtonClicked:function(i,r){var u=this,e=u._editing,f=u.dataSource,s=n(r).parent(),h=u.trigger(o,{commandName:oi,cancel:!1,row:s,cell:r,index:u._getRowIndex(s)});h.cancel||(u._editingInProcess=!0,f.tracker&&f.tracker.changes&&f.tracker.changes.added&&f.tracker.changes.added.length>0?f.cancel():"popup"!=u.options.editing.mode?(u._closeAllEditedRows(),e&&e.options.enabled&&e._putRowInEditMode(s,0),u._changeEditColumnButtons(i,r)):t.ui.Window&&u._initializePopupForm(i),u.trigger(oi,{row:n(r).parent(),cell:r,index:u._getRowIndex(n(r).parent())}))},_initializePopupForm:function(i,r){var w,h,y,a,s,o=this,l=o._editing,p=o.dataSource,c,d,nt;for(w=n('<div class="sui-modal-popup-edit-window"/>').appendTo(f.body),h=n('<div class="sui-edit-form-container"/>'),y=o.options.columns,a=0;a<y.length;a++)if(s=y[a],s.editable!==!1&&s.field){var tt=e(p.schema.options.fields)?p.schema.options.fields[s.field].type:String,b=p.editView(i).data,v=g(b,s.field);if(o._windowEditingIndex=i,n('<div class="sui-edit-form-label"><label for="'+s.field+'">'+(s.caption?s.caption:s.field)+"<\/label><\/div>").appendTo(h),c=n('<div class="sui-edit-field"><\/div>').appendTo(h),s.editor)l._instantiateCustomEditor(s,c,b,0,!1,s.field);else switch(tt){case Number:l._instantiateNumeric(c,v,!1,s.field);break;case Date:l._instantiateDatePicker(c,v,!1,s.field);break;case String:l._instantiateTextBox(c,v,!1,s.field);break;case Boolean:l._instantiateCheckBox(c,v,!1,s.field)}}var k=n('<div class="sui-update-buttons sui-popup-buttons"><\/div>').appendTo(h),it=n("<button type='button'>Save<\/button>").appendTo(k),rt=n("<button type='button'>Cancel<\/button>").appendTo(k);t.ui.Button&&(d=new t.ui.Button(it,{events:{click:u(o._updateButtonClicked,o)}}),nt=new t.ui.Button(rt,{events:{click:u(o._cancelButtonClicked,o)}}),o._buttons=[],o._buttons.push({index:1e4,button:d}),o._buttons.push({index:1e4,button:nt}));h.appendTo(f.body);o.popupWindow=new t.ui.Window(w,{title:r?"Insert":"Edit",draggable:{enabled:!1},events:{close:u(o._cancelButtonClicked,o)},height:n(".sui-edit-form-container").height()+57,modal:!0});o.popupWindow.content(h);o.popupWindow.resize({width:n(".sui-modal-popup-edit-window").width(),height:n(".sui-edit-form-container").height()+66});o.trigger(r?gu:du)},_changeEditColumnButtons:function(n,t){var i=this;i._removeButtons(t,n);i._buildButton({caption:"Update",click:i._updateButtonClicked,cls:"sui-update"},t,n);i._buildButton({caption:"Cancel",click:i._cancelButtonClicked,cls:"sui-cancel"},t,n);t.addClass("sui-update-buttons")},_removeButtons:function(n,t){for(var i=this,r=i._buttons.length;r--;)i._buttons[r].index==t&&(i._buttons[r].button.destroy(),i._buttons.splice(r,1));n.removeClass("sui-update-buttons").empty()},_updateButtonClicked:function(n,t){var i=this;return h(i._windowEditingIndex)||(n=i._windowEditingIndex),i._updateItem(n,t),i._editing._errorDuringEdit?void(i._editing._errorDuringEdit=!1):(i._putRowInViewMode(n,t),void("popup"===i.options.editing.mode&&i._removePopupWindow()))},_updateItem:function(n){var f,u,s,i,l,v,e,t=this,c=t.dataSource,a=(t.pager,[]),y=!0;if(c.group&&c.group.length>0&&"popup"!=t.options.editing.mode)for(l=t.contentTable.find(".sui-row, .sui-alt-row"),v=t.contentTable.find("tr").get(n),e=0;e<l.length;e++)if(l[e]==v){n=e;break}f=c.editView(n);for(i in f.data)f.data.hasOwnProperty(i)&&(null!=f.data[i]&&(y=!1),t._editing._editors[i]&&("custom"==t._editing._editors[i]?(s=t.trigger("getCustomEditorValue",{field:i,value:null}),u=s.value,t._editing._editors[i]=null):u=t._editing._editors[i].value?t._editing._editors[i].value():t._editing._editors[i].checked?t._editing._editors[i].checked():r,f.data[i]!=u&&a.push(i),(h(u)||null==u)&&(u=t._getDefaultValue(i)),f.set(i,u)));return t._editing._errorDuringEdit?void(a.length=0):(t._editing.options.batch||(s=t.trigger(o,{commandName:si,cancel:!1}),s.cancel||(c.save(!1),t.trigger(si))),t._populateInsertedItem=y,a)},_getDefaultValue:function(n){var i,u=this,r=u.dataSource.schema;return r&&r.options.fields?(i=r.options.fields,t.Model.def(g(i,n+".type"),g(i,n+".def"),g(i,n+".nullable"))):""},_closeAllEditedRows:function(){var i,r,t=this,u=t.contentTable.find(".sui-editable-cell");u.length>0&&(i=u.get(0).parentNode.rowIndex,r=t.contentTable.find(".sui-update-buttons").get(0),t._cancelButtonClicked(i,n(r)))},_cancelButtonClicked:function(n,t){var u,r,e,i=this,f=i.dataSource,s=i.trigger(o,{commandName:ei,cancel:!1,rowIndex:n,cell:t});if(!s.cancel){if(f.tracker&&f.tracker.changes&&f.tracker.changes.added&&f.tracker.changes.added.length>0)f.cancel(),"popup"===i.options.editing.mode&&i._removePopupWindow();else if("popup"!=i.options.editing.mode)i._putRowInViewMode(n,t);else{for(u=i.options.columns,r=0;r<u.length;r++)e=i._editing._editors[u[r].field],e&&(ft(e.destroy)&&i._editing._editors[u[r].field].destroy(),delete i._editing._editors[u[r].field]);i._removePopupWindow()}i.trigger(ei)}},_removePopupWindow:function(){var t=this;t._removeButtons(n(".sui-window .sui-update-buttons"),1e4);t.popupWindow.destroy();n(".sui-modal-popup-edit-window").remove()},_getRowIndex:function(t){var i=n(t).data(gr);return e(i)?i:-1},_putRowInViewMode:function(t,i){var w,f,o,u,r=this,s=r.options,b=s.navigation,h=r.dataSource,c=r.contentTable,l=t,a=-1,e,v,y,k,p;if(h.group&&h.group.length>0&&"popup"!=s.editing.mode)for(o=c.find(">tbody > tr.sui-row, >tbody > tr.sui-alt-row"),f=c.find(">tbody > tr").get(t),u=0;u<o.length;u++)if(o[u]==f){l=u;break}for(w=h.view[l],i&&"popup"!=s.editing.mode&&r._removeButtons(i,t),f=c.find(">tbody > tr").get(t),e=parseInt(n(f).attr("data-group-level"),10),b&&(a=n(f).children("td").index(r._activeCell)),r._editing._destroyRow(t),f=r._renderRow(l,r.contentTable.tbody,w,t),b&&a>-1&&(r._activeCell=n(f).children("td").eq(a),n(r._activeCell).focus()),u=0;u<e;u++)n('<td class="sui-indent-cell sui-group-intend-cell"/>').prependTo(f);if((e&&f.attr("data-group-level",e),r._editing.options.batch)&&(v=f.children(".sui-cell"),r._markedCells&&r._markedCells[t]))for(p=r._markedCells[t],u=0;u<p.length;u++)y=p[u],k=n(v[y]).html(),n(v[y]).html('<span class="sui-updated-marker"/>'+k)},_renderUpdateMarkers:function(t,i){for(var u,e,r=this,o=r.columns,s=r.contentTable.find(">tbody > tr").eq(i).children(".sui-cell"),f=0;f<t.length;f++)for(u=0;u<o.length;u++)o[u].field===t[f]&&(e=n(s[u]).html(),n(s[u]).html('<span class="sui-updated-marker"/>'+e),r._markedCells?(r._markedCells[i]||(r._markedCells[i]=[]),r._markedCells[i].push(u)):(r._markedCells={},r._markedCells[i]=[],r._markedCells[i].push(u)))},_selection:function(){var n=this,t=n.options;t.selection&&(n._selectable&&n._selectable.destroy(),n._selectable=new ef(t.selection,n))},_filtering:function(){var n=this,t=n.options;t.filtering&&t.filtering.enabled&&(n._filter&&n._filter.destroy(),n._filter=new uf(n))},_paging:function(i){var u,r=this,f=r.element;t.ui.Pager&&i&&(ni(i)&&i instanceof t.ui.Pager?(r.pager=i,r.pager.dataSource=r.dataSource,r.pager.element.appendTo(f)):(u=n("<div/>").appendTo(f),u.addClass("sui-pager"),r.pagerWrapper=u,r.pager=new t.ui.Pager(u.get(0),s({},i,{dataSource:r.dataSource}))))},_reorder:function(){var n=this,t=n.options;t.columnReorder&&(n._columnReorder=new ki(n))},_expandCollapseDetailTemplate:function(t){var i=this,r=n(t.target).closest(".sui-row",i.contentTable);r.length||(r=n(t.target).closest(".sui-alt-row",i.contentTable));i._toggleDetailTemplate(r)},_toggleDetailTemplate:function(t){var r,i=this,e=i.contentTable.find("tr:first").parent().children().not(".sui-detail-row"),o=ii(t[0],e),s=i.dataSource.view,u=t.next(),f=i.options;u&&u.hasClass("sui-detail-row")?(u.toggle(),r=n(t.get(0).cells[0]),i._toggleClasses(r,"sui-expand-cell","sui-collapse-cell"),i._setExpandCollapseCellText(r,f.detailExpandText,f.detailCollapseText)):i._addDetailTemplate(s[o],t)},_setExpandCollapseCellText:function(n,t,i){h(i)&&(i="-");h(t)&&(t="+");var r=this.options.detailCollapseCssClass,u=this.options.detailExpandCssClass;r=h(r)?"":" class = '"+r+"'";u=h(u)?"":" class = '"+u+"'";n.hasClass("sui-collapse-cell")?n.html("<span"+r+">"+i+"<\/span>"):n.hasClass("sui-expand-cell")&&n.html("<span"+u+">"+t+"<\/span>")},_addDetailTemplate:function(t,i){var s,r=this,f=r.options,e=n("<tr class='sui-detail-row'/>"),u,c,h;r._canExpandCollapse()&&(s=n("<td class='sui-cell sui-indent-cell'/>"),ot&&s.html("&nbsp;"),s.appendTo(e));u=n('<td class="sui-detail-cell" colspan="'+r._getVisibleColumnCount()+'"><\/td>');c=r.trigger(o,{commandName:lr,cancel:!1,detailCell:u,item:t});!c.cancel&&(u.appendTo(e),f.detailTemplate&&u.html(v(f.detailTemplate,t)),i?e.insertAfter(i):e.appendTo(r.contentTable.tbody),r.trigger(lr,{detailCell:u,item:t}),i)&&(h=n(i.get(0).cells[0]),r._toggleClasses(h,"sui-expand-cell","sui-collapse-cell"),r._setExpandCollapseCellText(h,f.detailExpandText,f.detailCollapseText))},_toggleClasses:function(n,t,i){n.hasClass(t)?(n.removeClass(t),n.addClass(i)):(n.removeClass(i),n.addClass(t))},_resizing:function(){var n=this;n.options.resizing&&n.options.scrolling&&(n._columnResizing=new nu(n))},_initToolbar:function(){var n=this,t=n.options;t.toolbar&&(n._toolbar=new nf(t.toolbar,n))},_initEditing:function(){var n=this,t=n.options;t.editing&&(n._buttons=[],n._editing=new tf(t.editing,n))},_refreshOnSort:function(){this._sortingInProgress=!0;this.dataSource.read()},_dsStartHandler:function(){this.loading(!0)},_initNavigation:function(){var t=this,r=t.element,i=t._eventNS+"nav";t.options.navigation&&(r.addClass("sui-grid-nav").off(i).on(cu+i,".sui-headercell[tabindex], .sui-filter-cell[tabindex], .sui-cell[tabindex], .sui-footer-cell[tabindex]",function(){n(t._activeCell).attr(st,"-1");t._activeCell=n(this);n(t._activeCell).attr(st,"0")}),t._initActiveCell(),n(t._activeCell).attr(st,"0"))},_initActiveCell:function(){var t=this;(n(t._activeCell).length<=0||!n(t._activeCell).is(":visible"))&&(t._activeCell=n(t.element).find(".sui-cell[tabindex]").first(),n(t._activeCell).length<=0&&(t._activeCell=n(t.element).find(".sui-headercell[tabindex]").first()))},_cellEditable:function(t){return n(t).attr(vi)!=yi&&!!n(t).hasClass("sui-editable-cell")},_keydown:function(t){var r,i=this,l=i.element,h=t.keyCode,c=i.options,e=c.navigation,v=c.editing,p=c.selection,a=t.ctrlKey,s=(t.shiftKey,i.pager),f=!1,o=i._cellEditable(i._activeCell);if("button"!==n(t.target).prop("tagName").toLowerCase()||h!=y.ENTER&&h!=y.SPACE){switch(h){case y.UP:e&&(o||(r=i._getNextNavCell("up"),r&&(n(r).focus(),f=!0)));break;case y.DOWN:e&&(o||(r=i._getNextNavCell("down"),r&&(n(r).focus(),f=!0)));break;case y.LEFT:e&&(o||(r=i._getNextNavCell("left"),r&&(n(r).focus(),f=!0)));break;case y.RIGHT:e&&(o||(r=i._getNextNavCell("right"),r&&(n(r).focus(),f=!0)));break;case y.HOME:e&&(o||(r=a?n(l).find(".sui-cell[tabindex], .sui-headercell[tabindex], .sui-footer-cell[tabindex]").first():i._getNextNavCell("first"),r&&(n(r).focus(),f=!0)));break;case y.END:e&&(o||(r=a?n(l).find(".sui-cell[tabindex], .sui-headercell[tabindex], .sui-footer-cell[tabindex]").last():i._getNextNavCell("last"),r&&(n(r).focus(),f=!0)));break;case y.ENTER:e&&(n(i._activeCell).hasClass("sui-cell")?v&&(o?i._updateButtonClicked(n(i._activeCell).parent().get(0).rowIndex,n(i._activeCell)):i._editing._editingTriggered(t),f=!0):n(i._activeCell).hasClass("sui-headercell")&&(n(i._activeCell).children(".sui-link").length>0&&(i.one(at,u(i.focus,i)),n(i._activeCell).children(".sui-link").first().click()),f=!0));break;case y.PAGEUP:e&&(s&&s.hasPrev()&&(i.one(at,u(i.focus,i)),i.pager.prev()),f=!0);break;case y.PAGEDOWN:e&&(s&&s.hasNext()&&(i.one(at,u(i.focus,i)),i.pager.next()),f=!0);break;case y.ESC:o&&(i.cancelEditing(),e&&n(i._activeCell).focus(),f=!0);break;case y.SPACE:e&&p&&i._selectable&&!o&&(i._selectable.elements=gi(t,i.contentTable,i.frozenContentTable),i._selectable.elements&&i._selectable._performAndProcessSelection(t),f=!0)}f&&t.preventDefault()}},_getNextNavCell:function(t){var i,r=this,u=(r.element,r._activeCell);return(!u||n(u).length<=0)&&(u=n(r.element).find('.sui-cell[tabindex="0"], .sui-headercell[tabindex="0"]').first()),"left"==t?i=r.__findPrevFocusCell(u):"right"==t?i=r.__findNextFocusCell(u):"up"==t?i=r.__findAboveFocusCell(u):"down"==t?i=r.__findBelowFocusCell(u):"first"==t?i=r.__findFirstFocusCell(u):"last"==t&&(i=r.__findLastFocusCell(u)),i&&n(i).length>0?n(i).get(0):null},__findFirstFocusCell:function(n){for(var i,r=this,t=r.__findPrevFocusCell(n);t&&t.length>0;)i=t,t=r.__findPrevFocusCell(t);return i},__findLastFocusCell:function(n){for(var i,r=this,t=r.__findNextFocusCell(n);t&&t.length>0;)i=t,t=r.__findNextFocusCell(t);return i},__findPrevFocusCell:function(t){for(var i=n(t).prev();i&&i.length>0;){if(dt(i,st))return i;i=n(t).prev()}return r},__findNextFocusCell:function(t){for(var i=n(t).next();i&&i.length>0;){if(dt(i,st))return i;i=n(t).next()}return r},__findAboveFocusCell:function(t){for(var i,u=this,o=n(t).closest("tr"),s=n(t).index(),e=u.headerTable.find(">thead > tr").add(u.contentTable.find(">tbody > tr")).add(u.contentTable.find(">tfoot > tr")),f=n(e).index(o);f>0;){if(i=n(n(e)[f-1]).children().eq(s),dt(i,st))return i;f--}return r},__findBelowFocusCell:function(t){for(var i,u=this,o=n(t).closest("tr"),s=n(t).index(),f=u.headerTable.find(">thead > tr").add(u.contentTable.find(">tbody > tr")).add(u.contentTable.find(">tfoot > tr")),e=n(f).index(o);e<f.length-1;){if(i=n(n(f)[e+1]).children().eq(s),dt(i,st))return i;e++}return r},focus:function(){var t=this;t.options.navigation?(t._initActiveCell(),n(t._activeCell).length>0?n(t._activeCell).focus():ir(t.element)):ir(t.element)},refresh:function(r){var f=this,s=r?r.dataSource:null,e=f._eventNS;r=t.extend([b],f.options,r);s&&(r.dataSource=s);var h,c=f.element,l=r.scrolling,a=f.pager?f.pager.options:r.paging,o=0;l&&f.contentWrapper&&(o=f.contentWrapper.get(0).scrollLeft);f._destroyInternal();h=f.dataSource=gt.create(r.dataSource);c.attr(ri,"grid").on(pi+e,u(f._keydown,f));r.editing||c.attr(vi,yi);h.on(er+e,u(f._renderData,f)).on(lu+e,u(f._dsStartHandler,f));n(i).on(yu+e,u(f._resizeHandler,f));f._resolveColumns(r.columns);f._createWrappers();f._createHeaderTable();f._createContentTable();f._initToolbar();f._initEditing();f._filtering();f._paging(a);f._resizing();f._reorder();f._initNavigation();f.pager||f.dataSource.read();f._sorting();o&&(f.contentWrapper.get(0).scrollLeft=o)},loading:function(n,i){var r=this,u=function(){r.loadingPanel&&r.loadingPanel.show()};t.ui.LoadingPanel&&(n?(r.loadingPanel||(r.loadingPanel=new t.ui.LoadingPanel(r.element.get(0))),i?u():r.loadingPanelTimeout=setTimeout(u,50)):r.loadingPanel&&(clearTimeout(r.loadingPanelTimeout),r.loadingPanelTimeout=null,r.loadingPanel.hide()))},select:function(t){var r=this,i=r._selectable;return t=yt(t)?r.contentTable.find(t):n(t),t.length?(i.multiple||(i.clear(),t=t.first()),void i.select(t)):i.select()},selectedRowIndices:function(){var t=this,i=[],r=[];return t.contentTable.children("tbody").children(".sui-row, .sui-alt-row").each(function(){if(n(this).hasClass(c)){var u=t._getRowIndex(n(this));i.push(u);r.push(u>=0?t.dataSource.getDataIndex(u):u)}}),{view:i,data:r}},clearSelection:function(){this._selectable.clear()},sort:function(n,t,i){this.sorting&&this.sorting._sort(n,t,i)},_getItemRow:function(t){return n(ru(t)?this.contentTable.children("tbody").children(".sui-row, .sui-alt-row").get(t):t)},expandRow:function(n){var t=this,i=t._getItemRow(n),r=i.next();r.hasClass("sui-detail-row")?r.css(ct)==rt&&t._toggleDetailTemplate(i):t._toggleDetailTemplate(i)},collapseRow:function(n){var i=this,t=i._getItemRow(n),r=t.next();r.hasClass("sui-detail-row")?r.css(ct)!=rt&&i._toggleDetailTemplate(t):(i._toggleDetailTemplate(t),t.next().toggle())},reorderColumn:function(t,i,r){var u,o=this,f=o.element,e=o.columns,s=o.options.columns||[],l=o.headerWrapper,h="before",c=l.find(".sui-columnheader").first().find(".sui-indent-cell").length;if(t=+t,i=+i,isNaN(t)||isNaN(i)||t<0||i<0||t>e.length-1||i>e.length-1)throw new Error("Invalid index in column reorder.");t!==i&&(i>t&&(h="after"),u=e[t],!u.visible||!r&&u.locked||(u=e.splice(t,1)[0],e.splice(i,0,u),u=s.splice(t,1)[0],s.splice(i,0,u),t+=c,i+=c,f.find(".sui-gridheader col:nth-child("+(t+1)+")").add(f.find(".sui-gridheader .sui-columnheader th:nth-child("+(t+1)+")")).add(f.find(".sui-gridheader .sui-filter-row th:nth-child("+(t+1)+")")).add(f.find(".sui-gridcontent col:nth-child("+(t+1)+")")).add(f.find(".sui-gridcontent tr:not(.sui-detail-row) td:nth-child("+(t+1)+")")).each(function(){n(this).parent().children().eq(i)[h](this)})))},addRow:function(n){return this.dataSource.add(e(n)?n:{})},insertRow:function(n,t){return this.dataSource.insertView(n,e(t)?t:{})},saveChanges:function(){this.dataSource.save()},revertChanges:function(){this.dataSource.cancel()},dataItem:function(n){return this.dataSource.view[n]},editCell:function(n,t){var i=this,r=i.contentTable.find(">tbody > tr").eq(n).children("td").eq(t).get(0);i._editingInProcess=!0;i._editing._putCellInEditMode(r)},editRow:function(t){var i=this,r=i.contentTable.find(">tbody > tr").eq(t).get(0);i._editingInProcess=!0;i._editing._putRowInEditMode(n(r),0)},editRowPopup:function(n){var i=this;i._editingInProcess=!0;t.ui.Window&&i._initializePopupForm(n)},cancelEditing:function(){var i,r,t=this,u=t.contentTable.find(".sui-editable-cell");u.length>0&&(i=u.get(0).parentNode.rowIndex,r=t.contentTable.find(".sui-update-buttons").get(0),t._putRowInViewMode(i,n(r)));t._editingInProcess=!1},deleteRow:function(n){this.dataSource.removeAtView(n)},filter:function(){var i=this,n=i.dataSource,t=[].slice.call(arguments);return t.length>0?(n.filter=t[0],void n.read()):n.filter},group:function(n,t,i,r){var u=this,f=u.dataSource.group;f?f.splice(t,0,{field:n,order:i,aggregates:r}):(u.dataSource.group=[],u.dataSource.group.push({field:n,order:i,aggregates:r}))},ungroup:function(n){var t,i=this,r=i.dataSource.group,u=!1;for(i.headerTable.thead.find(".sui-columnheader > .sui-indent-cell").remove(),t=0;t<r.length;t++)if(r[t].field==n){r.splice(t,1);0===r.length&&(i.dataSource.group=null);u=!0;break}u&&i.dataSource.read()},collapseGroup:function(n){for(var r,t=!0,i=parseInt(n.attr("data-group-level"),10);t;)(n=n.next().css(ct,rt),n.next().length>0)?(r=parseInt(n.next().attr("data-group-level"),10),r<=i&&n.next().hasClass("sui-group-header")&&(t=!1)):t=!1},expandGroup:function(n){for(var r,t=!0,i=parseInt(n.attr("data-group-level"),10);t;){if(n=n.next().css(ct,""),n.hasClass("sui-group-header")&&n.find(".sui-expand").length>0)return;n.next().length>0?(r=parseInt(n.next().attr("data-group-level"),10),r<=i&&n.next().hasClass("sui-group-header")&&(t=!1)):t=!1}},_getColumnByField:function(n){for(var u=this,i=u.columns||[],t=0;t<i.length;t++)if(i[t].field===n)return i[t];return r},_refreshColVisibility:function(){for(var i=this,t=i.columns,r=t.length,u=!1,n=0;n<r;n++)if(!t[n].visible){u=!0;break}if(u)for(n=0;n<r;n++)t[n].visible?i.showColumn(t[n].field):i.hideColumn(t[n].field)},_getNextVisibleColumnRealIndex:function(n){for(var r=this,i=r.columns,t=n.index+1;t<i.length;t++)if(i[t].visible)return t;return-1},isHidden:function(n){var t=this._getColumnByField(n);return t?!t.visible:r},hideColumn:function(t){var i=this,r=(n(i.element),i._getColumnByField(t));r&&!r.locked&&(n(i.headerTable).find("colgroup").first().find("col").each(function(){if(n(this).data(d)==t)return i._gridColumns[t].headerCol=n(this),n(this).detach(),!1}),n(i.contentTable).find("colgroup").first().find("col").each(function(){if(n(this).data(d)==t)return i._gridColumns[t].contentCol=n(this),n(this).detach(),!1}),i._changeColumnVisibility(t,"hide"),r.visible=!1,i._afterColumnVisibilityChange())},showColumn:function(t){var u,f,e,o,s,i=this,h=(n(i.element),i._getColumnByField(t)),c=n(i.headerTable).find("colgroup"),l=n(i.contentTable).find("colgroup");h&&!h.locked&&(u=i._gridColumns[t],f=u.headerCol,e=u.contentCol,o=i._getNextVisibleColumnRealIndex(u),o===-1?(c.append(f),l.append(e)):(s=i.columns[o].field,c.find("col").each(function(){if(n(this).data(d)==s)return n(f).insertBefore(n(this)),!1}),l.find("col").each(function(){if(n(this).data(d)==s)return n(e).insertBefore(n(this)),!1})),i._changeColumnVisibility(t,"show"),u.headerCol=u.contentCol=r,h.visible=!0,i._afterColumnVisibilityChange())},_changeColumnVisibility:function(t,i){var r,f,e=this,o=n(e.element),s=n(e.headerTable).find(".sui-columnheader").first(),h=n(e.headerTable).find(".sui-filter-row").first(),u=-1;if(s.length&&n(s).children().each(function(i){if(n(this).attr("data-field")==t)return u=i,!1}),!(u<0))for(n(s.find("th")[u])[i](),n(h.find("th")[u])[i](),r=o.find("> .sui-gridcontent > table > tbody > tr"),0===r.length&&(r=o.find("> .sui-gridcontent > .sui-virtualized > table > tbody > tr")),0===r.length&&(r=o.find("> .sui-gridcontent > .sui-content > table > tbody > tr")),f=0;f<r.length;f++)n(r[f].cells[u])[i]()},_afterColumnVisibilityChange:function(){var t=this,i=t._getVisibleColumnCount(),r=t.dataSource,u=r.group?r.group.length:0;n(t.contentTable).find(".sui-grid-norecords-cell, .sui-detail-cell, .sui-group-header-cell").each(function(){n(this).hasClass("sui-group-header-cell")?n(this).attr("colspan",i+u-tt(n(this).parent().attr("data-group-level"))+1):n(this).attr("colspan",i)})},_getVisibleColumnFields:function(){for(var r=this,t=r.columns||[],u=t.length,i=[],n=0;n<u;n++)t[n].visible&&i.push(t[n].field);return i},_initFrozenCols:function(){for(var i=this,t=i.columns,r=t.length,u=!1,n=0;n<r;n++)if(t[n].locked){u=!0;break}if(u)for(i._initFrozenContainers(),n=0;n<r;n++)t[n].locked&&i.lockColumn(t[n].field)},_initFrozenContainers:function(){var t=this,i=t.options,r=i.scrolling;t.frozenHeaderWrapper||(t.frozenHeaderWrapper=n('<div class="sui-header-locked"/>').prependTo(r?t.headerWrapper.parent():t.headerWrapper),t.frozenHeaderTable=n('<table class="sui-table sui-non-selectable"'+(ot?' cellspacing="0"':"")+'><colgroup/><thead><tr class="sui-columnheader"/>'+(i.filtering&&i.filtering.enabled?'<tr class="sui-filter-row"/>':"")+'<\/thead><tbody class="sui-hide"/><\/table>').appendTo(t.frozenHeaderWrapper));t.frozenContentWrapper||(t.frozenContentWrapper=n('<div class="sui-content-locked"/>').prependTo(r?t.contentWrapper.parent():t.contentWrapper),t.frozenContentWrapper.height(t.frozenContentWrapper.parent().find(".sui-content").first().height()),t.frozenContentTable=n('<table class="sui-table'+(i.rowHover?" sui-hover":"")+'"'+(ot?' cellspacing="0"':"")+'><colgroup/><tbody/><tfoot><tr class="sui-grid-footer"/><\/tfoot><\/table>').appendTo(t.frozenContentWrapper),t._hasDetailTemplate()&&(t._canExpandCollapse()&&t.frozenContentTable.addClass("sui-expandable"),t.frozenContentTable.on(p+t._eventNS,"> tbody > tr > .sui-expand-cell, > tbody > tr > .sui-collapse-cell",u(t._expandCollapseDetailTemplate,t))))},_destroyFrozenContainers:function(){var t=this;t.frozenHeaderWrapper&&(n(t.frozenHeaderWrapper).remove(),t.frozenHeaderWrapper=null);t.frozenContentWrapper&&(n(t.frozenContentWrapper).find(".sui-table").off(t._eventNS),n(t.frozenContentWrapper).remove(),t.frozenContentWrapper=null)},isLocked:function(n){var t=this._getColumnByField(n);return t?t.locked:r},lockColumn:function(t){var r,u,i=this,o=n(i.element),c=i.options.filtering,s=i._getColumnByField(t),f=-1,l=i._footer,a,e,v,h;if(s&&s.visible){if((n(i.headerTable).find("colgroup").first().find("col").each(function(){if(n(this).data(d)==t)return n(this).appendTo(n(i.frozenHeaderTable).find("colgroup")),!1}),n(i.contentTable).find("colgroup").first().find("col").each(function(){if(n(this).data(d)==t)return n(this).appendTo(n(i.frozenContentTable).find("colgroup")),!1}),n(i.headerTable).find(".sui-columnheader").children().each(function(r){if(n(this).attr("data-field")==t)return f=r,n(this).appendTo(n(i.frozenHeaderTable).find(".sui-columnheader")),!1}),c&&c.enabled&&f>=0&&n(i.headerTable).find(".sui-filter-row").children().each(function(){if(n(this).attr("data-field")==t)return n(this).appendTo(n(i.frozenHeaderTable).find(".sui-filter-row")),!1}),l&&f>=0)&&(a=n(i.frozenContentTable).find("> tfoot > .sui-grid-footer"),n(l).find(".sui-grid-footer td:eq("+f+")").appendTo(a)),f>=0)for(r=o.find("> .sui-gridcontent > table > tbody > tr"),0===r.length&&(r=o.find("> .sui-gridcontent > .sui-virtualized > table > tbody > tr")),0===r.length&&(r=o.find("> .sui-gridcontent > .sui-content > table > tbody > tr")),e=n(i.frozenContentTable).find("tbody"),v=e.children().length>0,u=0;u<r.length;u++)h=null,h=v?n(e).children()[u]:n(r[u]).clone(!0,!1).empty().appendTo(e),n(r[u].cells[f]).appendTo(h);s.locked=!0;i._adjustWidthsLocked();i._adjustHeightsLocked()}},unlockColumn:function(t){var h,c,f,u,i=this,e=(n(i.element),i.options.filtering),o=i.columns,s=i._footer,l=i._getColumnByField(t),r=-1,a=-1,v,y;if(l&&l.visible){for(n(i.frozenHeaderTable).find("colgroup").first().children().each(function(){if(n(this).data(d)==t)return h=n(this),r=n(this).index(),!1}),n(i.frozenContentTable).find("colgroup").first().children().each(function(){if(n(this).data(d)==t)return c=n(this),a=n(this).index(),!1}),u=0;u<o.length;u++)if(o[u].field===t){u<=o.length-2&&(f=o[u+1].field);break}f?(n(i.headerTable).find("> colgroup col").each(function(t){if(n(this).data(d)===f){if(n(h).insertBefore(n(this)),n(i.frozenHeaderTable).find(".sui-columnheader th:eq("+r+")").insertBefore(n(i.headerTable).find(".sui-columnheader th:eq("+t+")")),e&&e.enabled&&n(i.frozenHeaderTable).find(".sui-filter-row th:eq("+r+")").insertBefore(n(i.headerTable).find(".sui-filter-row th:eq("+t+")")),s){var u=n(i.frozenContentTable).find("> tfoot > .sui-grid-footer");n(u).find("td:eq("+r+")").insertBefore(n(s).find(".sui-grid-footer td:eq("+t+")"))}return!1}}),n(i.contentTable).find("> colgroup col").each(function(t){if(n(this).data(d)===f){n(c).insertBefore(n(this));var r=n(i.contentTable).find(">tbody").first().children();return n(i.frozenContentTable).find(">tbody > tr").each(function(i){n(this).find("td:eq("+a+")").insertBefore(n(r[i]).find("td:eq("+t+")"))}),!1}})):((n(i.headerTable).find("colgroup").append(h),n(i.contentTable).find("colgroup").append(c),n(i.frozenHeaderTable).find(".sui-columnheader th:eq("+r+")").appendTo(n(i.headerTable).find(".sui-columnheader")),e&&e.enabled&&n(i.frozenHeaderTable).find(".sui-filter-row th:eq("+r+")").appendTo(n(i.headerTable).find(".sui-filter-row")),s)&&(v=n(i.frozenContentTable).find("> tfoot > .sui-grid-footer"),n(v).find("td:eq("+r+")").appendTo(n(s).find(".sui-grid-footer"))),y=n(i.contentTable).find(">tbody").first().children(),n(i.frozenContentTable).find(">tbody > tr").each(function(t){n(this).find("td:eq("+a+")").appendTo(n(y[t]))}));l.locked=!1;i._adjustWidthsLocked();i._adjustHeightsLocked()}},_adjustWidthsLocked:function(){var t=this;t.frozenHeaderWrapper&&(n(t.headerWrapper).parent().css(a.isRtl(t.element)?"padding-left":"padding-right",0),n(t.headerWrapper).outerWidth(n(t.headerWrapper).parent().innerWidth()-n(t.frozenHeaderWrapper).outerWidth()-a.scrollbar()),n(t.contentWrapper).outerWidth(n(t.contentWrapper).parent().innerWidth()-n(t.frozenContentWrapper).outerWidth()-1))},_adjustHeightsLocked:function(t){var f,e,u,o,s,h,c,l,a,v,y,p,i,r=this,g=r.options.filtering,nt=r._footer,w,b,k,d;if(r.frozenHeaderWrapper){for(s=n(r.frozenHeaderTable).find("tr").first(),s.height("auto"),h=tt(s.height()),c=n(r.headerTable).find("tr").first(),c.height("auto"),l=tt(c.height()),h>l?(s.height(h),c.height(h)):h<l&&(s.height(l),c.height(l)),g&&g.enabled&&(a=n(r.frozenHeaderTable).find("tr.sui-filter-row").first(),a.height("auto"),v=tt(a.height()),y=n(r.headerTable).find("tr.sui-filter-row").first(),y.height("auto"),p=tt(y.height()),v>p?(a.height(v),y.height(v)):v<p&&(a.height(p),y.height(p))),f=n(r.frozenContentTable).find("tbody").first().children(),u=n(r.contentTable).find("> tbody").children(),i=0;i<u.length;i++)n(f[i]).height("auto"),e=tt(n(f[i]).height()),n(u[i]).height("auto"),o=tt(n(u[i]).height()),e>o?(n(f[i]).height(e),n(u[i]).height(e)):e<o&&(n(f[i]).height(o),n(u[i]).height(o));nt&&(k=n(r.frozenContentTable).find("> tfoot > .sui-grid-footer"),d=n(nt).find(".sui-grid-footer").first(),k.height("auto"),w=tt(k.height()),d.height("auto"),b=tt(d.height()),w>b?(k.height(w),d.height(w)):w<b&&(k.height(b),d.height(b)));t&&r._initScrolling()}},_getOtherRow:function(t){var i,r,u,f=this;if(f.frozenHeaderWrapper){if(i=n(t).index(),r=n(f.frozenContentTable).find("tbody").first().children(),u=n(f.contentTable).find("> tbody").children(),n(t)[0]===n(r)[i])return n(u)[i];if(n(t)[0]===n(u)[i])return n(r)[i]}return null},exportExcel:function(){this._doExcelExport()},exportPdf:function(){this._doPdfExport()},exportCsv:function(){this._doCsvExport()},_doExcelExport:function(){var u,n,f,c,t,l,a,v,i=this,p=i.options,y=[],h=[];lt&&(a=i.trigger(o,{commandName:"exportExcel",cancel:!1,exportOptions:s(!0,{},p.exportOptions)}),a.cancel||(i.loading(!0,!0),setTimeout(function(){u=s(!0,{proxy:r,excel:{fileName:"Untitled",fileFormat:"xlsx",noLegacyFallback:!1,author:r,created:new Date,producer:r,dataSource:r,readDataSource:!1,columnFields:r,header:{enabled:!0,style:{bold:!0},cells:r},worksheet:{name:"Sheet1",columns:r},worksheets:[],worksheetIndex:0}},a.exportOptions);n=u.excel;t=n.columnFields;t||(t=i._getVisibleColumnFields());l=t.length;n.worksheet.columns||(n.worksheet.columns=pt(t,function(){return{autoWidth:!0}}));c=s(!0,{},n.worksheet);n.header&&n.header.enabled&&(n.header.cells?h.push({cells:n.header.cells}):h.push({cells:pt(t,function(t){var r=i._getColumnByField(t);return{type:String,value:e(r)&&r.title?r.title:t,style:n.header.style}})}));f=gt.create(n.dataSource?n.dataSource:i.dataSource);v=function(){for(var b,p,v,k=f.view||[],rt=k.length,d=[],r=0;r<l;r++)d[r]=g(f,"schema.options.fields."+t[r]+".type");for(r=0;r<rt;r++){var a,w,nt=k[r],tt=i.trigger(o,{commandName:"exportExcelRow",cancel:!1,item:nt,index:r,row:{}}),it=[];if(!tt.cancel){for(a=s(!0,{},tt.row),v=0;v<l;v++)w={type:e(a.type)?a.type:d[v],value:e(a.value)?a.value:g(nt,t[v])},a.cells&&a.cells[v]&&s(!0,w,a.cells[v]),it.push(w);h.push({index:a.index,height:a.height,cells:it})}}c.rows=h;y=[].slice.call(n.worksheets);y.splice(n.worksheetIndex,0,c);p={created:n.created,author:n.author,worksheets:y};b="xml"==n.fileFormat?new lt.ExcelXMLSpreadsheet(p):new lt.OOXMLWorkbook(p);b.saveAs({fileName:n.fileName,forceExt:u.forceExt,proxy:u.proxy});i.loading(!1)};n.readDataSource?f.read().always(v):v()},100)))},_doPdfExport:function(){var u,n,c,i,v,l,a,f,h,t=this,y=t.options;lt&&(l=t.trigger(o,{commandName:"exportPdf",cancel:!1,exportOptions:s(!0,{},y.exportOptions)}),l.cancel||(t.loading(!0,!0),setTimeout(function(){u=s(!0,{proxy:r,pdf:{fileName:"Untitled",author:r,created:new Date,size:"a4",orientation:"portrait",fontSize:10,dataSource:r,readDataSource:!1,columnFields:r,header:{enabled:!0,cells:r},margins:{left:72,top:72,bottom:72,right:72}}},l.exportOptions);n=u.pdf;i=n.columnFields;i||(i=t._getVisibleColumnFields());v=i.length;n.header&&(h=!!n.header.enabled,n.header.cells&&(f=[].concat(n.header.cells)));e(h)||(h=!0);e(f)||(f=pt(i,function(n){var i=t._getColumnByField(n);return{field:n,title:i.title||n,width:i.width||r}}));c=gt.create(n.dataSource?n.dataSource:t.dataSource);a=function(){for(var e,l,r,v=c.view||[],p=v.length,y=[],a=n.margins,i=0;i<p;i++)e=v[i],l=t.trigger(o,{commandName:"exportPdfRow",cancel:!1,item:e,index:i,row:{}}),l.cancel||y.push(s(!0,e,l.row));r=new lt.PDFDocument({author:n.author,created:n.created});r.addPage(n.size,n.orientation);r.table(a.left,a.top,y,f,{margins:a,printHeader:h,fontSize:n.fontSize});r.saveAs({fileName:n.fileName,forceExt:u.forceExt,proxy:u.proxy});t.loading(!1)};n.readDataSource?c.read().always(a):a()},100)))},_doCsvExport:function(){var h,n,c,u,v,l,a,i,f,t=this,y=t.options;lt&&(l=t.trigger(o,{commandName:"exportCsv",cancel:!1,exportOptions:s(!0,{},y.exportOptions)}),l.cancel||(t.loading(!0,!0),setTimeout(function(){h=s(!0,{proxy:r,csv:{fileName:"Untitled",delimiter:",",dataSource:r,readDataSource:!1,columnFields:r,header:{enabled:!0,cells:r}}},l.exportOptions);n=h.csv;u=n.columnFields;u||(u=t._getVisibleColumnFields());v=u.length;n.header&&(f=!!n.header.enabled,n.header.cells&&(i=[].concat(n.header.cells)));e(f)||(f=!0);e(i)||(i=pt(u,function(n){var i=t._getColumnByField(n);return{field:n,title:i.title||n}}));c=gt.create(n.dataSource?n.dataSource:t.dataSource);a=function(){var r,e,a,u,l,v,y,p=c.view||[],k=p.length,d=i.length,w=[],b=[];for(f&&(w=pt(i,function(n){return n.title})),r=0;r<k;r++)if(a=p[r],v=t.trigger(o,{commandName:"exportCsvRow",cancel:!1,item:a,index:r,row:u}),!v.cancel){if(l=s(!0,{},v.row),l&&l.cells)u=l.cells;else for(u=[],e=0;e<d;e++)u.push(g(a,i[e].field));b.push(u)}y=new lt.CSVDocument({delimiter:n.delimiter,printHeader:f,header:w,records:b});y.saveAs({fileName:n.fileName,forceExt:h.forceExt,proxy:h.proxy});t.loading(!1)};n.readDataSource?c.read().always(a):a()},100)))}});iu.defaults=rr;t.ui.plugin("Grid",iu)}(jQuery,shield,this);!function(n,t,i,r){var g,y,p=t.ui.Widget,nt=(t.Class,document,Math.abs),h=(Math.min,Math.max,Math.floor),o=n.proxy,e=(n.each,n.map,t.Constants.KeyCode),w=t.format,et=t.error,c=t.is,l=c.defined,ot=(c.string,c.object,c.func,t.to.number),a="aria-describedby",st="value",tt="tabindex",s="disabled",f="horizontal",b="both",k="top",ht="bottom",v="left",ct="up",it="right",lt="down",d="click",at="keydown",vt="slide",rt="change",ut="focus",ft="blur",u="px";g={cls:r,orientation:f,min:0,max:100,value:r,step:1,largeStep:2,enabled:!0,buttons:!1,values:{enabled:!0,template:"{0}"},ticks:{enabled:!1,type:b,step:1},tooltip:{enabled:!1,template:"{0}"},width:r,height:r,events:{}};y=p.extend({init:function(){p.fn.init.apply(this,arguments);var u,f,s,e,t=this,r=t.options,c=r.cls,h=r.value,v=r.dieOnError,a=r.orientation;return t._original=f=n(t.element),"input"!==f.prop("tagName").toLowerCase()?void et("shieldSlider: Underlying element is not INPUT",v):(t.element=u=f.wrap('<div class="sui-slider sui-slider-'+a+(c?" "+c:"")+'" />').parent(),t._eventNS=e=".shieldSlider"+t.getInstanceId(),f.hide(),s=f.attr(tt),u.attr(tt,l(s)?s:"0"),u.on(ut+e,o(t._focus,t)).on(ft+e,o(t._blur,t)).on(at+e,o(t._keyDown,t)),n(i).on("resize"+e,o(t._onWinResize,t)),l(r.width)&&u.css("width",r.width),l(r.height)&&u.css("height",r.height),t._buttonOffset=5,t._buttonScaleOffset=20,t._width=u.innerWidth(),t._height=u.innerHeight(),t._buttons=t._createButtons(),t._scale=t._createScale(),t._ticks=t._createTicks(),t._createBar(),t._showValues(),t._elWidth=u.width(),t._elHeight=u.height(),l(h)||(h=ot(t._value())),u.attr("role","slider").attr("aria-orientation",a).attr("aria-valuemin",r.min).attr("aria-valuemax",r.max),t.value(h),void t.enabled(r.enabled))},refresh:function(n){this.refreshWithElement(this._original,n)},_createButtons:function(){var i,o,r,t=this,s=t.options,h=s.orientation,u=h==f,e=[];if(s.buttons)return i=n('<div class="sui-slider-button sui-unselectable" unselectable="on" />').appendTo(t.element),o=n('<span class="sui-slider-button-arrow-'+(u?v:ct)+' sui-unselectable" unselectable="on" />').appendTo(i),r=i.outerWidth(),i.css({left:u?t._buttonOffset:(t._width-r)/2,top:u?(t._height-r)/2:t._buttonOffset}),i.click(function(){t._hasFocus||t.element.focus();t._stepPrev()}),e.push(i),i=n('<div class="sui-slider-button sui-unselectable" unselectable="on" />').appendTo(t.element),o=n('<span class="sui-slider-button-arrow-'+(u?it:lt)+' sui-unselectable" unselectable="on" />').appendTo(i),i.css({left:u?t._width-(t._buttonOffset+r):(t._width-r)/2,top:u?(t._height-r)/2:t._height-(t._buttonOffset+r)}),i.click(function(){t._hasFocus||t.element.focus();t._stepNext()}),e.push(i),e},_createScale:function(){var t=this,s=t.options,e=s.orientation,u=e==f,r=t._buttons?t._buttons[0].outerWidth():0,i=n('<div class="sui-slider-scale sui-slider-scale-'+e+' sui-unselectable" unselectable="on" />').appendTo(t.element);return i.css({left:u?t._buttonOffset+r+t._buttonScaleOffset:(t._width-i.outerWidth())/2,top:u?(t._height-i.outerHeight())/2:t._buttonOffset+r+t._buttonScaleOffset}),u?i.width(t._width-2*(t._buttonOffset+t._buttonScaleOffset+r)):i.height(t._height-2*(t._buttonOffset+t._buttonScaleOffset+r)),i.on(d,o(t._scaleClick,t)),i},_scaleClick:function(n){var u,e,o,s,i,t=this,v=t.options.orientation,c=v==f,l=n.originalEvent,y=c?l.clientX:l.clientY,a=t.element.offset(),p=h(c?a.left:a.top);if(t._hasFocus||t.element.focus(),t._enabled){for(i=0;i<t._ticks.length;i++)u=t._ticks[i],e=nt(y-(u.tick+p)),(o===r||o>e)&&(o=e,s=u);t._moveBar(s)}},_keyDown:function(n){var t=this,h=t.options.orientation,r=h==f,u=n.originalEvent,i=u.keyCode,c=t._ticks.length-1,l=i===(r?e.LEFT:e.UP),a=i===(r?e.RIGHT:e.DOWN),o=i===(r?e.PAGEDOWN:e.PAGEUP),s=i===(r?e.PAGEUP:e.PAGEDOWN),v=i==e.HOME,y=i==e.END;!u.ctrlKey&&t._enabled&&(l||o?(t._stepPrev(o),n.preventDefault()):a||s?(t._stepNext(s),n.preventDefault()):v?(t._moveBar(t._ticks[0]),n.preventDefault()):y&&(t._moveBar(t._ticks[c]),n.preventDefault()))},_createTicks:function(){var s,y,e,o,p,tt,w,t,n=this,a=n.options,ft=a.orientation,c=ft==f,et=a.max,rt=a.min,d=a.step,g=a.ticks,l=g.type,ot=g.step,st=0,i=h((et-rt)/d),ut=r,nt=0;for(y=[],o=c?n._scale.outerWidth():n._scale.outerHeight(),i<=o?(p=h(o/i),st=o%i,tt=o/i-p):(ut=i/o*d,i=o,p=1,d=1),w=c?n._scale.position().left:n._scale.position().top,t=0;t<=i;t++)e={value:rt+t*(ut||d),tick:w},y.push(e),nt+=tt,nt>=1&&(w++,nt--),w+=p;if(g.enabled)for(t=0;t<=i;t+=ot)e=y[t],l!==k&&l!==v&&l!==b||(s=n._createTick(),s.css({left:c?e.tick+u:n._scale.position().left-s.outerWidth()+u,top:c?n._scale.position().top-s.outerHeight()+u:e.tick+u})),l!==ht&&l!==it&&l!==b||(s=n._createTick(),s.css({left:c?e.tick+u:n._scale.position().left+n._scale.outerWidth()+u,top:c?n._scale.position().top+n._scale.outerHeight()+u:e.tick+u}));return y},_createTick:function(){return n('<div class="sui-slider-tick sui-slider-tick-'+this.options.orientation+' sui-unselectable" unselectable="on" />').insertAfter(this._scale)},_showValues:function(){var i,r,e,t=this,u=t.options,h=u.orientation,o=h==f,c=u.max,l=u.min,s=(u.step,u.values||{});if(s.enabled)for(e=0;e<t._ticks.length;e++)i=t._ticks[e],i.value!==l&&i.value!==c||(r=n('<div class="sui-slider-mark sui-unselectable" unselectable="on">'+w(s.template,i.value)+"<\/div>").insertAfter(t._scale),r.css({left:o?i.tick-2-r.width()/2:t._scale.position().left+t._scale.outerWidth()+t._bar.width()/2,top:o?t._scale.position().top-t._scale.height()-r.height()+2:i.tick-r.height()/2}))},_createBar:function(){var e,l,a,h,c,o,i=this,s=i.options.orientation==f;for(i._bar=e=n('<div class="sui-slider-bar sui-unselectable" id="'+t.strid()+'" unselectable="on" />').appendTo(i.element).mousedown(function(){i._hasFocus||i.element.focus()}),l=(e.innerWidth()-i._scale.outerHeight())/2+1,a=(e.innerWidth()-i._scale.outerWidth())/2+1,e.css({left:s?i._scale.position().left-e.outerWidth()/2+u:i._scale.position().left-a+u,top:s?i._scale.position().top-l+u:i._scale.position().top-e.outerWidth()/2+u}),c=[],o=0;o<i._ticks.length;o++)h=i._ticks[o],c.push({x:s?h.tick-e.outerWidth()/2:r,y:s?r:h.tick-e.outerWidth()/2});i._dragBar=new t.ui.Draggable(e,{allowedPositions:c,events:{drag:function(){i._changeTooltipValue(!0);i.trigger(vt)},stop:function(){i._value(i.value());i._tooltip&&n("#"+i._bar.attr("id")+":hover").length<=0&&i._tooltip.visible(!1);i.trigger(rt,{value:i.value()})}}});i._createTooltip()},_stepNext:function(n){var i,r,e,t=this,u=t.options,o=(u.orientation==f,u.step),s=u.largeStep;t._enabled&&(n=!!n,i=t._getCurrentTickInfoIndex(),r=n?i+h(s/o):i+1,r>=t._ticks.length||(e=t._ticks[r],t._moveBar(e)))},_stepPrev:function(n){var i,r,e,t=this,u=t.options,o=(u.orientation==f,u.step),s=u.largeStep;t._enabled&&(n=!!n,i=t._getCurrentTickInfoIndex(),r=n?i-h(s/o):i-1,r<0||(e=t._ticks[r],t._moveBar(e)))},_moveBar:function(n,t){var i=this,e=i.options.orientation==f,r=i._bar;n&&(r.css({left:e?n.tick-r.outerWidth()/2+u:r.css(v),top:e?r.css(k):n.tick-r.outerWidth()/2+u}),i._changeTooltipValue(),i._value(i.value()),i.element.attr("aria-valuenow",n.value),t||i.trigger(rt,{value:i.value()}))},_createTooltip:function(){var n=this,r=n.options,i=r.tooltip,u=r.orientation==f;i&&i.enabled&&(n._tooltip=new t.ui.Tooltip(n._bar,{content:w(i.template,n.value()),position:u?k:v,delay:0}),n.element.attr(a,n._bar.attr(a)))},_changeTooltipValue:function(n){var r,t=this,u=t.options.tooltip,i=t._tooltip;i&&(r=w(u.template,t.value()),i.options.content!==r&&(i.refresh({content:r,enabled:t._enabled}),t.element.attr(a,t._bar.attr(a))),n&&i.visible(!0,t._bar))},_getCurrentTickInfoIndex:function(){for(var t,i,r=this,c=r.options.orientation==f,e=r._ticks,u=r._bar,o=c?u.position().left:u.position().top,l=u.outerWidth()/2,s=Number.POSITIVE_INFINITY,h=-1,n=0;n<e.length;n++){if(t=e[n].tick-l,o==t)return n;i=nt(o-t);i<s&&(s=i,h=n)}return h},_getTickInfoIndexByValue:function(n){for(var r=this,i=r._ticks,t=0;t<i.length;t++)if(n==i[t].value)return t;return-1},_focus:function(){var t=this;t._hasFocus||(t._hasFocus=!0,n(t.element).addClass("sui-slider-focus"),t.trigger(ut))},_blur:function(){var t=this;t._hasFocus&&(t._hasFocus=!1,n(t.element).removeClass("sui-slider-focus"),t.trigger(ft))},_onWinResize:function(){var n=this;n._onWinResTimeout&&clearTimeout(n._onWinResTimeout);n._onWinResTimeout=setTimeout(o(n._winResized,n),100)},_winResized:function(){var n=this,t=n.element;n._elWidth===t.width()&&n._elHeight===t.height()||n.refresh()},_value:function(){return this._original.attr.apply(this._original,[st].concat([].slice.call(arguments)))},value:function(){var t,i,n=this,u=n.options.min,r=[].slice.call(arguments);return r.length>0?(i=n._getTickInfoIndexByValue(r[0]),void(i!==-1&&(t=n._ticks[i],n._moveBar(t,!0)))):(i=n._getCurrentTickInfoIndex(),t=n._ticks[i],t?t.value:u)},enabled:function(){var i,t=this,r=n(t.element),u=t._original,f=[].slice.call(arguments);return f.length>0?(i=!!f[0],i?(r.removeAttr(s).removeClass("sui-slider-disabled"),u.removeAttr(s)):(r.attr(s,s).addClass("sui-slider-disabled"),u.attr(s,s)),t._enabled=i,t._dragBar.enabled(i),t._tooltip&&t._tooltip.enabled(i),void 0):t._enabled},destroy:function(){var r,t=this,u=t._eventNS;if(n(i).off(u),clearTimeout(t._onWinResTimeout),t._onWinResTimeout=null,n(t.element).off(u),t._dragBar&&(t._dragBar.destroy(),t._dragBar=null),t._buttons)for(r=0;r<t._buttons.length;r++)t._buttons[r].off(d);t._tooltip&&(t._tooltip.destroy(),t._tooltip=null);n(t.element).find(".sui-slider-scale, .sui-slider-mark, .sui-slider-tick, .sui-slider-bar, .sui-slider-button").remove();t._original.unwrap().show();t._scale.off(d);t._original=t._buttons=t._bar=t._scale=t._ticks=null;p.fn.destroy.call(t)}});y.defaults=g;t.ui.plugin("Slider",y)}(jQuery,shield,this);!function(n,t,i,r){var b,a,u,f,k,d,g,v=t.ui.Widget,nt=t.Class,it=t.DataSource,rt=(document,Math.abs,Math.min),ut=Math.max,o=Math.pow,s=(Math.floor,n.proxy),h=(n.each,n.map,t.format),ft=t.to.int,tt=t.error,c=t.is,l=c.defined,et=(c.string,c.object,c.func,t.to.number,"squarified"),e="horizontal",y="vertical",p="click",w="disabled";u=nt.extend({init:function(n,t,i,r){var u=this;u.left=n;u.top=t;u.width=i;u.height=r},getSize:function(){return rt(this.width,this.height)},getRowContainers:function(n){var t,i=this,r=i.left,u=i.top,s=i.sum(n),f=s/i.height,e=s/i.width,o=[];if(i.width>=i.height)for(t=0;t<n.length;t++)o.push({left:r,top:u,right:r+f,bottom:u+n[t].targetValue/f,dataItem:n[t]}),u+=n[t].targetValue/f;else for(t=0;t<n.length;t++)o.push({left:r,top:u,right:r+n[t].targetValue/e,bottom:u+e,dataItem:n[t]}),r+=n[t].targetValue/e;return o},remainingArea:function(n){var i,r,e,o,f,t=this;return t.width>=t.height?(i=n/t.height,e=t.width-i,f=new u(t.left+i,t.top,e,t.height)):(r=n/t.width,o=t.height-r,f=new u(t.left,t.top+r,t.width,o)),f},sum:function(n){for(var i=0,t=0;t<n.length;t++)i+=n[t].targetValue;return i}});f=nt.extend({init:function(){},sort:function(n){n.sort(function(n,t){return t.targetValue-n.targetValue})},sum:function(n){for(var i=0,t=0;t<n.length;t++)i+=n[t].targetValue;return i},min:function(n){for(var i=r,t=0;t<n.length;t++)(!l(i)||i>n[t].targetValue)&&(i=n[t].targetValue);return i},max:function(n){for(var i=r,t=0;t<n.length;t++)(!l(i)||i<n[t].targetValue)&&(i=n[t].targetValue);return i}});f.create=function(n){return n===et?new g:n===e?new k:new d};k=f.extend({init:function(){f.fn.init.apply(this,arguments)},execute:function(n,t,i,r,f){var c,l,o,h,s,a,p=this,k=p.sum(n),w=t.left,b=t.top,v=!f||f===e;for(p.sort(n),a=0;a<n.length;a++)o=n[a],c=v?t.width*o.targetValue/k:t.width,l=v?t.height:t.height*o.targetValue/k,o.items&&0!==o.items.length?(h=r.createGroup(i,new u(w,b,c,l)),s=r.createTitle(h,r.getItemText(o)),s=new u(s.left-h.position().left,s.top-h.position().top,s.width,s.height),p.execute(o.items,s,h,r,v?y:e)):r.createItem(i,{left:w,top:b,width:c,height:l,dataItem:o}),v?w+=c:b+=l}});d=f.extend({init:function(){f.fn.init.apply(this,arguments)},execute:function(n,t,i,r,f){var c,l,o,h,s,a,p=this,k=p.sum(n),w=t.left,b=t.top,v=!f||f===y;for(p.sort(n),a=0;a<n.length;a++)o=n[a],l=v?t.height*o.targetValue/k:t.height,c=v?t.width:t.width*o.targetValue/k,o.items&&0!==o.items.length?(h=r.createGroup(i,new u(w,b,c,l)),s=r.createTitle(h,r.getItemText(o)),s=new u(s.left-h.position().left,s.top-h.position().top,s.width,s.height),p.execute(o.items,s,h,r,v?e:y)):r.createItem(i,{left:w,top:b,width:c,height:l,dataItem:o}),v?b+=l:w+=c}});g=f.extend({init:function(){f.fn.init.apply(this,arguments)},execute:function(n,t,i,r){var l,c,f,o,e,h,s=this;for(s.sort(n),l=s._squarifyCore(s._normalize(n,t.width*t.height,r),[],t,[]),c=s._getTreemap(l),h=0;h<c.length;h++)f=c[h],f.dataItem.items&&0!==f.dataItem.items.length?(o=r.createGroup(i,new u(f.left,f.top,f.right-f.left,f.bottom-f.top)),e=r.createTitle(o,r.getItemText(f.dataItem)),e=new u(e.left-o.position().left,e.top-o.position().top,e.width,e.height),s.execute(f.dataItem.items,e,o,r)):r.createItem(i,{left:f.left,top:f.top,width:f.right-f.left,height:f.bottom-f.top,dataItem:f.dataItem})},_squarifyCore:function(n,t,i,r){var e,f,o,u=this;return 0===n.length?void r.push(i.getRowContainers(t)):(e=i.getSize(),f=n[0],u._verifyRatio(t,f,e)?(t.push(f),u._squarifyCore(n.slice(1),t,i,r)):(o=i.remainingArea(u.sum(t)),r.push(i.getRowContainers(t)),u._squarifyCore(n,[],o,r)),r)},_getTreemap:function(n){for(var i,r=[],t=0;t<n.length;t++)for(i=0;i<n[t].length;i++)r.push(n[t][i]);return r},_verifyRatio:function(n,t,i){var r,u,f,e=this;return 0===n.length||(r=n.slice(),r.push(t),u=e._calculateRatio(n,i),f=e._calculateRatio(r,i),u>=f)},_calculateRatio:function(n,t){var i=this,u=i.min(n),f=i.max(n),r=i.sum(n);return ut(o(t,2)*f/o(r,2),o(r,2)/(o(t,2)*u))},_normalize:function(n,t){for(var u=this,f=u.sum(n),e=t/f,r=[],i=0;i<n.length;i++)r[i]=n[i],r[i].targetValue=r[i].targetValue*e;return r}});b={cls:r,enabled:!0,width:r,height:r,title:r,dataSource:r,readDataSource:!0,type:"squarified",valueTemplate:"{value}",textTemplate:"{title}",colorTemplate:"{color}",colors:["#1E98E4","#FFC500","#5CB85C","#FF2A00","#6D31FF","#00B2A1","#FF8000","#84B3DC"],tooltip:{enabled:!1,template:"{title}: {value}",filter:".sui-treemap-item",delay:80,position:"top"},events:{}};a=v.extend({init:function(){v.fn.init.apply(this,arguments);var f,t=this,u=n(t.element),r=t.options,e=r.cls,o=r.dataSource,h=r.dieOnError;return"div"!==u.prop("tagName").toLowerCase()?void tt("shieldTreeMap: Underlying element is not DIV.",h):(u.addClass("sui-treemap "+(e?" "+e:"")),l(r.width)&&u.css("width",r.width),l(r.height)&&u.css("height",r.height),o?(t.dataSource=it.create(o),t._eventNS=f=".shieldTreeMap"+t.getInstanceId(),t.containers=[],t.colorIndex=0,n(i).on("resize"+f,s(t._onWinResize,t)),t.dataSource.on("change"+f,s(t._dsChange,t)),r.readDataSource&&t.dataSource.read(),void t.enabled(r.enabled)):(t.destroy(),void tt("shieldTreemap: dataSource is not defined.",h)))},_dsChange:function(){var n=this,t=n.element;n._create();n._createTooltip();n._elWidth=t.width();n._elHeight=t.height()},_onWinResize:function(){var n=this;n._onWinResTimeout&&clearTimeout(n._onWinResTimeout);n._onWinResTimeout=setTimeout(s(n._winResized,n),100)},_winResized:function(){var n=this,t=n.element;n._elWidth===t.width()&&n._elHeight===t.height()||n.refresh()},_createTooltip:function(){var t=this,i=t.options.tooltip;i.enabled&&(t.tooltip?t.tooltip.refresh(i):t.tooltip=n(t.element).children(".sui-treemap-group").first().shieldTooltip(i).swidget())},_create:function(){var i,n=this,t=n.element,e=n.dataSource.data,o=n.options,s=f.create(o.type),r=new u(0,0,t.innerWidth(),t.innerHeight());t.empty();n._prepareData(e);i=n.createGroup(t,r);r=n.createTitle(i,o.title);s.execute(e,r,i,n)},_prepareData:function(n){for(var i=this,t=0;t<n.length;t++)n[t].targetValue=i.getItemValue(n[t]),n[t].items&&i._prepareData(n[t].items)},createTitle:function(i,f){var o,h,c,l,a,v=this,s=v.options.type===e;return"undefined"===f||f===r?new u(i.position().left,i.position().top,i.innerWidth(),i.innerHeight()):(o=n('<div class="sui-treemap-title"><\/div>').appendTo(i),s&&o.innerHeight(i.outerHeight()),o.append('<div class="sui-treemap-title-inner">'+f.replace(/\s+/,"&nbsp;")+"<\/div>"),t.ui.Position.Set(o.find(".sui-treemap-title-inner"),o,{source:"center",target:"center"}),h=s?i.position().left+o.outerWidth():i.position().left,c=s?i.position().top:i.position().top+o.outerHeight(),l=s?i.innerWidth()-o.outerWidth():i.innerWidth(),a=s?i.innerHeight():i.innerHeight()-o.outerHeight(),new u(h,c,l,a))},createGroup:function(n,t){var i=this;return i._createContainer(n,t).addClass("sui-treemap-group sui-treemap-group-"+i.options.type)},createItem:function(n,t){var r,i=this,u=i.options,f=u.tooltip,o=(u.type===e,i.getItemText(t.dataItem));r=i._createContainer(n,t);r.addClass("sui-treemap-item").css("backgroundColor",i._getContentColor(t.dataItem)).on(p,s(i._contentClick,i,t.dataItem));f.enabled&&r.attr("title",h(f.template,t.dataItem));i.containers.push(r);r.html(o)},_contentClick:function(n){var t=this;t._enabled&&t.trigger(p,{title:t.getItemText(n),value:t.getItemValue(n),item:n})},_createContainer:function(t,i){return n("<div/>").appendTo(t).css({left:i.left,top:i.top,width:i.width,height:i.height})},_getContentColor:function(n){var t=this,i=t.options.colors;return t._getItemColor(n)||i[t.colorIndex++%i.length]},getItemValue:function(n){return ft(h(this.options.valueTemplate,n))},getItemText:function(n){return h(this.options.textTemplate,n)},_getItemColor:function(n){var t=h(this.options.colorTemplate,n);return"undefined"!==t&&null!==t?t:r},enabled:function(){var i,t=this,r=n(t.element),u=[].slice.call(arguments);return u.length>0?(i=!!u[0],i?r.removeAttr(w).removeClass("sui-treemap-disabled"):r.attr(w,w).addClass("sui-treemap-disabled"),t.tooltip&&t.tooltip.enabled(i),t._enabled=i,void 0):t._enabled},destroy:function(){var r,t=this,u=t._eventNS;for(n(i).off(u),clearTimeout(t._onWinResTimeout),t._onWinResTimeout=null,t.dataSource&&t.dataSource.off(u),t.tooltip&&(t.tooltip.destroy(),t.tooltip=null),r=0;r<t.containers.length;r++)t.containers[r].off(p);t.containers=null;n(t.element).empty();v.fn.destroy.call(t)}});a.defaults=b;t.ui.plugin("TreeMap",a)}(jQuery,shield,this);!function(n,t,i,r){function e(n){return f(n)&&!k(n)&&"undefined"!==n}var h,o,s=t.ui.Widget,p=(t.Class,t.DataSource),c=(Math.min,Math.max,n.proxy),w=n.each,b=n.map,l=t.error,u=t.format,f=t.is.defined,k=t.is["null"],a=t.to.int,v="change",y="click";h={cls:r,width:r,height:r,dataSource:r,readDataSource:!0,title:r,textTemplate:"{text}",hrefTemplate:"{href}",targetTemplate:"{target}",frequencyTemplate:"{frequency}",minSize:90,maxSize:250,events:{}};o=s.extend({init:function(){s.fn.init.apply(this,arguments);var u,t=this,r=n(t.element),i=t.options,e=i.title,o=i.dieOnError,h=i.dataSource,a=i.cls;return"div"!==r.prop("tagName").toLowerCase()?void l("shieldTagCloud: Underlying element is not DIV.",o):(u=t._eventNS=".shieldTagCloud"+t.getInstanceId(),r.empty(),e&&r.append('<div class="sui-tagcloud-title">'+e+"<\/div>"),t._contentEl=n('<div class="sui-tagcloud-content">').appendTo(r),r.addClass("sui-tagcloud"+(a?" "+a:"")),f(i.width)&&r.css("width",i.width),f(i.height)&&r.css("height",i.height),h?(t.dataSource=p.create(h),t.dataSource.on(v+u,c(t._dsChange,t)),void(i.readDataSource&&t.dataSource.read())):(t.destroy(),void l("shieldTagCloud: No dataSource or underlying UL element found.",o)))},_dsChange:function(){this._render()},_render:function(){var n=this,r=n._contentEl,t=n.dataSource.view||[],i=n._getMinMax(t);r.empty().append(b(t,function(t){return n._createItem(t,i[0],i[1])}))},_createItem:function(t,i,r){var s,p,w,b,h,l=this,f=l.options,k=f.minSize,d=f.maxSize,o=n('<div class="sui-tagcloud-item" />'),v=u(f.textTemplate,t);return e(v)&&(s=u(f.hrefTemplate,t),e(s)?(b=n('<a href="'+s+'" class="sui-tagcloud-link">'+v+"<\/a>").appendTo(o),h=u(f.targetTemplate,t),e(h)&&b.attr("target",h)):o.html(v)),w=a(u(f.frequencyTemplate,t)),p=r>i?(w-i)*(d-k)/(r-i)+k:100,o.css("font-size",p+"%").on(y,c(l._itemClick,l,t)),o},_itemClick:function(n,t){var i=this,r=i.trigger(y,{item:n});r.isDefaultPrevented()&&t&&t.preventDefault()},_getMinMax:function(n){var t,e=this,i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return w(n||[],function(n,o){t=a(u(e.options.frequencyTemplate,o));(!f(r)||t>r)&&(r=t);(!f(i)||t<i)&&(i=t)}),[i,r]},destroy:function(){var n=this,i=n.element,r=n.options,t=r.cls;n.dataSource&&n.dataSource.off(v+n._eventNS);i.removeClass("sui-tagcloud"+(t?" "+t:"")).empty();s.fn.destroy.call(n)}});o.defaults=h;t.ui.plugin("TagCloud",o)}(jQuery,shield,this);!function(n,t,i,r){var a,h,c=t.ui.Widget,w=(t.Class,t.DataSource),b=(t.ui.Position,t.support),s=n.proxy,k=t.error,u=t.format,f=t.is.defined,e=t.is.func,d=t.is.boolean,o=t.is.string,g=t.is["null"],nt=t.is.integer,v=t.to.int,tt="change",l="centered",it="right",rt="width",ut="height",y="click",p="sui-timeline-ds-item";a={cls:r,dataSource:r,readDataSource:!0,layout:l,animation:{enabled:!0,expandDuration:200,collapseDuration:150},positionTemplate:r,iconTemplate:"{icon}",titleTemplate:"{title}",textTemplate:"{text}",collapsedTemplate:"{collapsed}",iconUrlTemplate:"{iconUrl}",iconClsTemplate:"{iconCls}",collapsible:!0,width:r,height:r,events:{}};h=c.extend({init:function(){c.fn.init.apply(this,arguments);var u,t=this,f=n(t.element),r=t.options,h=r.dieOnError,e=r.dataSource,o=r.cls;return u=t._eventNS=".shieldTimeline"+t.getInstanceId(),f.empty(),f.addClass("sui-timeline sui-timeline-"+r.layout+(r.collapsible?" sui-timeline-collapsible":"")+(o?" "+o:"")),t._initAxis(f),e?(t.dataSource=w.create(e),n(i).on("resize"+u,s(t._winResize,t)),t.dataSource.on(tt+u,s(t._dsChange,t)),void(r.readDataSource&&t.dataSource.read())):(t.destroy(),void k("shieldTimeline: dataSource option is required.",h))},_initAxis:function(t){var r,u=this,i=u.options;f(i.width)&&t.css(rt,i.width);f(i.height)&&t.css(ut,i.height);r=n('<div class="sui-timeline-inner"/>').appendTo(t);u._axis=n('<div class="sui-timeline-axis sui-timeline-axis-'+i.layout+'"/>').appendTo(r)},_dsChange:function(){this._render()},_winResize:function(){this._recalcEventWidths()},_recalcEventWidths:function(){var t=this,i=v(n(t.element).innerWidth());i!==t._width&&(t._setEventWidths(i),t._width=i)},_setEventWidths:function(t){var i=this,f=i.options.layout,r=b.scrollbar(),u=n(i._axis).outerWidth(),e=v(f===l?(t-r)/2-u:t-r-u);n(i._axis).children(".sui-timeline-event").each(function(){n(this).outerWidth(e);n(this).hasClass("sui-timeline-event-left")&&i._positionEventLeft(n(this))})},_render:function(){for(var e,i,b,k,nt,l,d,v,tt,h,c,t=this,a=t.options,it=a.collapsible,rt=t.dataSource.view||[],ut=rt.length,w=0;w<ut;w++)e=rt[w],i=n('<div class="sui-timeline-event"/>').data(p,e).appendTo(t._axis),nt=n('<div class="sui-timeline-event-title">'+u(a.titleTemplate,e)+"<\/div>").appendTo(i),l=u(a.textTemplate,e),d=f(l)&&!g(l)&&"undefined"!==l&&""!==l?n('<div class="sui-timeline-event-text">'+l+"<\/div>").appendTo(i):r,t._positionEventElement(i,e,w),h=u(a.iconUrlTemplate,e),o(h)&&"undefined"!==h||(h=r),c=u(a.iconClsTemplate,e),o(c)&&"undefined"!==c||(c=r),(h||c)&&(b=n('<span class="sui-timeline-event-icon'+(it&&f(d)?" sui-timeline-event-icon-collapsible":"")+'"/>').insertBefore(i),k=n('<span class="sui-timeline-event-icon-inner"/>').appendTo(b),h?k.append('<img src="'+h+'"/>'):k.addClass(c)),it&&f(d)&&(i.addClass("sui-timeline-event-collapsible"),nt.on(y,s(t._eventTitleClicked,t,i)),(h||c)&&b.on(y,s(t._eventTitleClicked,t,i)),v=u(a.collapsedTemplate,e),tt=o(v)?"true"===v||"1"===v:v===!0,tt&&t._collapse(i,!1,!0));t._recalcEventWidths()},_positionEventElement:function(n,t,i){var r,f,s=this,c=s.options,h=c.positionTemplate;switch(c.layout){case l:e(h)||o(h)?(r=u(h,t,i),f=o(r)?"undefined"===r?i%2:"true"===r||"1"===r:!!r):f=i%2;f&&s._positionEventLeft(n);break;case it:s._positionEventLeft(n)}},_positionEventLeft:function(t){t.addClass("sui-timeline-event-left").css("left",-1*n(t).width())},_isExpanded:function(t){return!n(t).hasClass("sui-timeline-event-collapsed")},_getEventItem:function(t){return n(t).data(p)},_expand:function(n,t,i,r){var f,u=this,o=u.options.animation;return u._isExpanded(n)?void(e(r)&&r.call(u)):void(t&&(f=u.trigger("expand",{element:n,item:u._getEventItem(n)}),f.isDefaultPrevented())||n.find(".sui-timeline-event-text").first().slideDown(o.enabled&&!i?o.expandDuration:0,function(){n.removeClass("sui-timeline-event-collapsed");e(r)&&r.call(u)}))},_collapse:function(n,t,i,r){var f,u=this,o=u.options.animation;return u._isExpanded(n)?void(t&&(f=u.trigger("collapse",{element:n,item:u._getEventItem(n)}),f.isDefaultPrevented())||n.find(".sui-timeline-event-text").first().slideUp(o.enabled&&!i?o.collapseDuration:0,function(){n.addClass("sui-timeline-event-collapsed");e(r)&&r.call(u)})):void(e(r)&&r.call(u))},_eventTitleClicked:function(n){var t=this;t._isExpanded(n)?t._collapse(n,!0,!1):t._expand(n,!0,!1)},_getEvent:function(t){return n(nt(t)?n(this._axis).children(".sui-timeline-event")[t]:t)},expanded:function(){var t=this,n=[].slice.call(arguments),u=d(n[0])?n.shift():r,i=t._getEvent(n[0]);return f(u)?void(u?t._expand(i,!1,!1,n[1]):t._collapse(i,!1,!1,n[1])):t._isExpanded(i)},expandAll:function(){var t=this;n(t._axis).children(".sui-timeline-event").each(function(){t._expand(n(this),!1,!1)})},collapseAll:function(){var t=this;n(t._axis).children(".sui-timeline-event").each(function(){t._collapse(n(this),!1,!1)})},destroy:function(){var t=this,f=t.element,e=t.options,r=e.cls,u=t._eventNS;n(i).off(u);t.dataSource&&t.dataSource.off(u);f.removeClass("sui-timeline"+(r?" "+r:"")).empty();t._width=null;c.fn.destroy.call(t)}});h.defaults=a;t.ui.plugin("Timeline",h)}(jQuery,shield,this);!function(n,t,i,r){var pt,st,ht=t.ui.Widget,nt=(t.Class,t.DataSource),wt=t.RecursiveDataSource,w=(t.ui.Position,t.Constants.KeyCode),hi=t.strid,bt=document,u=n.proxy,ci=n.each,li=(n.extend,t.error),s=t.format,f=t.is.defined,p=t.is.boolean,e=(t.is.integer,t.is.func),y=t.is.array,kt=t.is.object,tt=t.is.string,it=t.support.browser,ct="role",lt="aria-expanded",at="click",ai="dbl"+at,dt="focus",gt="blur",k="change",vi="keydown",yi="mousedown",ni="tabindex",ti="disabled",pi="true",ii="false",ri="up",ui="down",fi="left",wi="right",h="checked",o="li",c="ul",rt="visibility",ei="hidden",oi="visible",l="sui-treeview-list-item",si="sui-treeview-list-item-idx",vt="sui-treeview-list-item-parent",yt="sui-treeview-list-item-ds",ut="sui-treeview-list-items-ds",a="sui-treeview-list-item-checked",d="sui-treeview-list-item-loaded",g="sui-treeview-item-list-expanded",ft="sui-treeview-item-toggle-loading",et="sui-treeview-item-selected",ot="sui-treeview-item-active",b="sui-treeview-item-disabled",v="sui-treeview-item";pt={cls:r,width:r,minWidth:r,height:r,dataSource:r,readDataSource:!0,animation:{enabled:!0,expandDuration:200,collapseDuration:150},checkboxes:{enabled:!1,children:!1,template:r},dragDrop:!1,dragDropScope:r,textTemplate:"{text}",hrefTemplate:"{href}",expandedTemplate:"{expanded}",checkedTemplate:"{checked}",disabledTemplate:"{disabled}",iconUrlTemplate:"{iconUrl}",iconClsTemplate:"{iconCls}",hasChildrenTemplate:function(n){return n&&(n.items&&n.items.length>0||n.children&&n.children.length>0||n.hasChildren)},events:{}};st=ht.extend({init:function(){ht.fn.init.apply(this,arguments);var i,h,l,v,a,e,t=this,s=n(t.element),r=t.options,w=r.dieOnError,y=r.dataSource,p=r.cls;if(t._original=i=n(t.element),t._tagname=v=i.prop("tagName").toLowerCase(),e=t._eventNS=".shieldTreeView"+t.getInstanceId(),t._wrapper=l=i.wrap("<div/>").parent(),l.addClass("sui-treeview"+(p?" "+p:"")),i.hide(),t.element=s=n('<ul class="sui-treeview-list"/>').on(dt+e,u(t._focus,t)).on(gt+e,u(t._blur,t)).on(vi+e,u(t._keydown,t)),i.after(s),ci(["width","minWidth","height","maxHeight"],function(n,t){f(r[t])&&l.css(t,r[t])}),h=i.attr(ni),s.attr(ni,f(h)?h:"0"),y)t.dataSource=nt.create(y);else{if(v!=c)return t.destroy(),void li("shieldTreeView: No dataSource or underlying UL element found.",w);a=function(t){var i=[];return n(t).children(o).each(function(){var u,t=n(this),e=t.children(c).length>0,r={cls:t.attr("data-class"),href:t.attr("data-href")?t.attr("data-href"):t.children().not(c).first().attr("href"),disabled:t.attr("data-disabled")?t.attr("data-disabled"):f(t.attr(ti))&&null!==t.attr(ti),expanded:t.attr("data-expanded"),checked:t.attr("data-checked"),iconUrl:t.attr("data-icon-url"),iconCls:t.attr("data-icon-cls")};e?(u=t.clone(),u.children(c).remove(),r.text=u.html()):r.text=t.html();e&&(r.items=a(t.children(c)[0]));i.push(r)}),i};t.dataSource=nt.create({data:i,schema:{parse:a}})}t.dataSource.on(k+e,u(t._dsChange,t));s.attr(ct,"tree");r.readDataSource&&t.dataSource.read()},refresh:function(n){this.refreshWithElement(this._original,n)},_dsChange:function(){var n=this,i=n.element,t=n.dataSource;n._renderItems(t,i,null,!0,!0,function(){n.trigger("dataBound",{dataSource:t,element:null})})},_destroyItems:function(t){var r=this,i;n(t).children("ul.sui-treeview-item-list").each(function(){r._destroyItems(n(this))});n(t).children(".sui-treeview-item-content").find(".sui-treeview-item-text").each(function(){n(this).swidget("Draggable")&&n(this).swidget("Draggable").destroy();n(this).swidget("Droppable")&&n(this).swidget("Droppable").destroy()});n(t).children(".sui-treeview-item-content").find(".sui-checkbox").each(function(){n(this).swidget("CheckBox")&&n(this).swidget("CheckBox").destroy()});i=n(t).data(ut);i&&i.off(r._eventNS);n(t).removeData();n(t).empty()},_renderItems:function(n,t,i,r,u,f){var h,c,o,s=this,p=s.options,v=p.checkboxes,y=n.view,w=(y||[]).length,l=[],a=[];for(s._destroyItems(t),o=0;o<w;o++)h=s._renderItem(y[o],i,n,o),c=h.listItem,c.appendTo(t),h.itemExpanded&&l.push(c),h.itemChecked&&a.push(c);if(e(f)&&f(),r)for(o=0;o<l.length;o++)s._expand(l[o],!1,u);if(v.enabled&&v.children)for(o=0;o<a.length;o++)s._updateChecked(a[o])},_renderItem:function(i,o,h,c){var k,nt,d,it,ut,ft,w,wt,et,ot,st,y=this,g=y.options,kt=g.checkboxes,ht=kt.template,gt=y.getInstanceId(),pt=g.dragDropScope,fi=function(){return n(this.element).clone().appendTo(bt.body)},ni=o?o.data(l):null,ti=i.cls,ri=y._hasChildren(i),oi=s.call(y,g.textTemplate,i),ui=hi(),dt;return(k=s(g.disabledTemplate,i),k=!!(p(k)&&k||"true"===k||"1"===k||1===k),nt=s(g.expandedTemplate,i),nt=!!(p(nt)&&nt||"true"===nt||"1"===nt||1===nt),d=s(g.checkedTemplate,i),d=!!(p(d)&&d||"true"===d||"1"===d||1===d),it=s(g.hrefTemplate,i),tt(it)&&"undefined"!==it||(it=r),ut=s(g.iconUrlTemplate,i),tt(ut)&&"undefined"!==ut||(ut=r),ft=s(g.iconClsTemplate,i),tt(ft)&&"undefined"!==ft||(ft=r),w=n('<li class="'+v+" sui-unselectable"+(k?" "+b:"")+(f(ti)?" "+ti:"")+'"/>').data(l,i).data(si,c).data(vt,o).data(yt,h),st=n('<span class="sui-treeview-item-text" id="'+ui+'">'+(it?'<a href="'+it+'">':"")+oi+(it?"<\/a>":"")+"<\/span>").on(yi,u(y._itemClick,y,w)).on(ai,u(y._itemDblClick,y,w)),wt=n('<span class="sui-treeview-item-toggle"/>').on(at,u(y._toggleItem,y,w)).append(n('<span class="sui-treeview-item-toggle-collapsed"/>')),ri||wt.css(rt,ei),w.attr(ct,"treeitem").attr("aria-describedby",ui),ri&&w.attr(lt,ii),kt.enabled)&&((w.data(a,!!d),et=n('<span class="sui-treeview-item-check"/>'),tt(ht))?et.html(s(ht,{item:i,parent:ni})):e(ht)?ht(et,i,ni):(dt=n('<input type="checkbox"'+(d?' checked="checked"':"")+"/>").appendTo(et),t.ui.CheckBox?n(dt).shieldCheckBox({enabled:!k,enableThreeStates:!!kt.children,events:{click:u(y._checkboxClick,y,w)}}):dt.on(at,u(y._checkboxClick,y,w)))),(ut||ft)&&(ot=n('<span class="sui-treeview-item-icon"/>'),ut?ot.append('<img src="'+ut+'"/>'):ot.addClass(ft)),w.append(n('<div class="sui-treeview-item-content"/>').append(wt,et,st.prepend(ot))),w.append(n('<ul class="sui-treeview-list sui-treeview-item-list"/>').attr(ct,"group").hide()),g.dragDrop&&!k&&(st.shieldDraggable({scope:f(pt)?pt:"suiTv"+gt,dragCls:"sui-treeview-item-text-dragging",helper:fi,events:{start:u(y._dragStart,y,w),stop:u(y._dragStop,y,w)}}),st.shieldDroppable({scope:f(pt)?pt:"suiTv"+gt,hoverCls:"sui-treeview-item-text-dropover",tolerance:{x:"touch",y:"intersect"},events:{over:u(y._dropOver,y,w),out:u(y._dropOut,y,w),drop:u(y._drop,y,w)}})),{listItem:w,itemExpanded:nt,itemChecked:d,itemDisabled:k}},_isValidDragDrop:function(t,i){if(n(t).hasClass("sui-treeview-item-text")){var r=n(t).parent().parent().parent().parent().children(".sui-treeview-item-content").first().children(".sui-treeview-item-text").first();return r&&r.length>0&&i[0]===r[0]?i[0]!==r[0]:!(n(t).parent().parent().find(i[0]).length>0)}return!1},_dragStart:function(n,t){this.trigger("dragStart",{draggable:t.target.element,element:n,domEvent:t})},_dragStop:function(n,t){this.trigger("dragStop",{draggable:t.target.element,element:n,domEvent:t});t.preventDefault()},_dropOver:function(t,i){var r,u=i.draggable,f=i.droppable,o=this._isValidDragDrop(u,f),e={draggable:u,droppable:f,element:t,valid:o,domEvent:i};o&&(e.sourceNode=n(u).closest("."+v));e.targetNode=n(f).closest("."+v);r=this.trigger("droppableOver",e);!r.isDefaultPrevented()&&r.valid||i.preventDefault()},_dropOut:function(t,i){var o,r=i.draggable,u=i.droppable,e=this._isValidDragDrop(r,u),f={draggable:r,droppable:u,element:t,valid:e,domEvent:i};e&&(f.sourceNode=n(r).closest("."+v));f.targetNode=n(u).closest("."+v);o=this.trigger("droppableOut",f)},_drop:function(t,i){var r,s=this,u=i.draggable,f=i.droppable,e=s._isValidDragDrop(u,f),o={draggable:u,droppable:f,element:t,cancelled:!0,skipAnimation:!!e,valid:e,domEvent:i};e&&(o.sourceNode=n(u).closest("."+v));o.targetNode=n(f).closest("."+v);r=s.trigger("drop",o);i.cancelled=r.cancelled;i.skipAnimation=r.skipAnimation;r.isDefaultPrevented()&&i.preventDefault()},_hasChildren:function(n){var t=s(this.options.hasChildrenTemplate,n);return p(t)&&t||"true"===t||"1"===t||1===t},_isLoaded:function(t){return n(t).data(d)===!0},_isExpanded:function(n){return n.hasClass(g)},_isFullyExpanded:function(n){var t=this,i=t.getParent(n);return i?t._isExpanded(n)&&t._isFullyExpanded(i):t._isExpanded(n)},_isDisabled:function(t){return n(t).hasClass(b)},_isSelected:function(t){return n(t).hasClass(et)},_isActive:function(t){return n(t).hasClass(ot)},_isFocused:function(){return n(this.element).hasClass("sui-treeview-focus")},_focus:function(){var t=this,i=t.element;it.ie&&bt.activeElement!==n(i)[0]&&n(i).focus();t._blurTimeout&&(clearTimeout(t._blurTimeout),t._blurTimeout=null);t._isFocused()||(n(t.element).addClass("sui-treeview-focus"),t.trigger(dt))},_blur:function(){var t=this;t._isFocused()&&(t._blurTimeout&&clearTimeout(t._blurTimeout),t._blurTimeout=setTimeout(function(){n(t.element).removeClass("sui-treeview-focus");t.trigger(gt)},100))},_selectItem:function(n,t,i){var u,r=this;r._isSelected(n)||i&&(u=r.trigger("select",{element:n,item:n.data(l)}),u.isDefaultPrevented())||(r._selectedItem&&r._selectedItem.removeClass(et),r._selectedItem=n,n.addClass(et),t&&r._activateItem(n,i))},_activateItem:function(n,t){var i=this;i._isActive(n)||(i._activeItem&&i._activeItem.removeClass(ot),i._activeItem=n,n.addClass(ot),t&&i.trigger(k,{element:n,item:n.data(l)}))},_itemClick:function(n){var t=this;it.ie&&setTimeout(u(t._focus,t));t._selectItem(n,!0,!0)},_itemDblClick:function(n,t){var i=this;i._selectItem(n,!0,!0);i._toggleItem(n,t)},_getCheckBox:function(n){return n.children(".sui-treeview-item-content").children(".sui-treeview-item-check").find('input[type="checkbox"]').first()},_checkboxClick:function(n){var t=this;it.ie&&setTimeout(u(t._focus,t));t._toggleCheck(n,!0)},_toggleCheck:function(n,t){this._setChecked(n,!n.data(a),t)},_setChecked:function(t,i,r){var f=this,e=f.options.checkboxes.children,u=f._getCheckBox(t);u&&u.length>0&&(n(u).swidget("CheckBox")?(u=n(u).swidget("CheckBox"),u.checked(i)):i?u.attr(h,h):u.removeAttr(h),t.data(a,i),e&&f._updateChecked(t),r&&f.trigger("check",{element:t,item:t.data(l),checked:i}))},_updateChecked:function(n){var t=this,i=n.data(a);t._updateCheckedChildren(n,i);t._updateCheckedParents(n,i)},_updateCheckedChildren:function(t,i){var r=this;n(t).children("ul.sui-treeview-item-list").first().children(o).each(function(){var u=n(this),t=r._getCheckBox(u);n(t).swidget("CheckBox")?n(t).swidget("CheckBox").checked(i):i?t.attr(h,h):t.removeAttr(h);u.data(a,i);r._updateCheckedChildren(u,i)})},_updateCheckedParents:function(t,i){var f,s=this,u=s.getParent(t),c=u?u.data(a):r,e=i;u&&c!==!1&&(n(t).parent().children(o).each(function(){if(n(this).data(a)!==i)return e=null,!0}),f=s._getCheckBox(u),n(f).swidget("CheckBox")?n(f).swidget("CheckBox").checked(e):e?f.attr(h,h):f.removeAttr(h),u.data(a,e),s._updateCheckedParents(u,i))},_toggleItem:function(n){var t=this;it.ie&&setTimeout(u(t._focus,t));t._isDisabled(n)||(t._isExpanded(n)?t._collapse(n,!0):t._expand(n,!0,!1))},_getToggleEl:function(t){return n(t).children(".sui-treeview-item-content").first().children(".sui-treeview-item-toggle").first()},_expand:function(t,i,r,u){var h,c,a,f=this,v=f.options.animation,s=t.children("ul.sui-treeview-item-list").first();if(s&&!(n(s).length<=0)&&(f.hasChildren(t)||!(s.children(o).length<=0)))return f._isExpanded(t)?void(e(u)&&u.call(f)):void(i&&(a=f.trigger("expand",{element:t,item:t.data(l)}),a.isDefaultPrevented())||(s.stop(!0,!0),s.hide(),h=f._getToggleEl(t),c=function(){s.slideDown(v.enabled&&!r?v.expandDuration:0,function(){t.addClass(g).attr(lt,pi);h.css(rt,oi);n(h).find("span").addClass("sui-treeview-item-toggle-expanded").removeClass("sui-treeview-item-toggle-collapsed");e(u)&&u.call(f)})},f._isLoaded(t)?c():f._loadItem(t,r,c)))},_loadItem:function(t,i,r){var u,f=this,s=t.data(l),o=t.children("ul.sui-treeview-item-list").first(),a=t.data(yt),h=f._getToggleEl(t),c=s.items||s.children;!o||n(o).length<=0||(y(c)||kt(c)||c instanceof nt?(n(h).addClass(ft),u=nt.create(c),o.data(ut,u),u.on(k+f._eventNS,function(){n(h).removeClass(ft);t.data(d,!0);f._renderItems(this,o,t,!0,i,function(){f.trigger("dataBound",{dataSource:u,element:t});e(r)&&r.call(f)})}),u.read({parent:s})):a&&a instanceof wt?(n(h).addClass(ft),u=new wt(a.options),o.data(ut,u),u.on(k+f._eventNS,function(){n(h).removeClass(ft);t.data(d,!0);f._renderItems(this,o,t,!0,i,function(){f.trigger("dataBound",{dataSource:u,element:t});e(r)&&r.call(f)})}),u.read({parent:s})):(t.data(d,!0),e(r)&&r.call(f)))},_expandPathSegment:function(n,t,i,r,u){var s,o,f=this,h=n.length;return r>h?void(e(u)&&u.call(f)):(s=[].slice.call(n).splice(0,r),o=f.getByPath(s),void(f._isExpanded(o)?f._expandPathSegment(n,t,i,r+1,u):f._expand(o,t,i,function(){f._expandPathSegment(n,t,i,r+1,u)})))},_expandPath:function(n,t,i,r){this._expandPathSegment(n,t,i,1,r)},_collapse:function(t,i){var f,e,r=this,o=r.options.animation,u=t.children("ul.sui-treeview-item-list").first();!r._isExpanded(t)||!u||n(u).length<=0||i&&(e=r.trigger("collapse",{element:t,item:t.data(l)}),e.isDefaultPrevented())||(f=r._getToggleEl(t),u.stop(!0,!0),u.slideUp(o.enabled?o.collapseDuration:0,function(){t.removeClass(g).attr(lt,ii);n(f).find("span").removeClass("sui-treeview-item-toggle-expanded").addClass("sui-treeview-item-toggle-collapsed")}))},_keydown:function(n){var t=this,i=!0;switch(n.keyCode){case w.UP:t._move(ri,n);break;case w.DOWN:t._move(ui,n);break;case w.LEFT:t._move(fi,n);break;case w.RIGHT:t._move(wi,n);break;case w.SPACE:t._selectedItem&&t._toggleCheck(t._selectedItem,!0);break;case w.ENTER:t._selectedItem&&t._activateItem(t._selectedItem,!0);break;default:i=!1}i&&n.preventDefault()},_getExpandedItems:function(){var t=this;return t.element.children("."+v).add(t.element.find("li.sui-treeview-item-list-expanded > ul.sui-treeview-list > li."+v)).filter(function(){var i=t.getParent(n(this));return!i||t._isFullyExpanded(i)}).not("."+b)},_getNextItem:function(t){var i=this._getExpandedItems(),u=n(i).length,r=n(i).index(t);if(r<u-1)return n(n(i).get(r+1))},_getPrevItem:function(t){var i=this._getExpandedItems(),r=n(i).index(t);if(r>0)return n(n(i).get(r-1))},_getPrevParentItem:function(t){var r=this,i=r.getParent(t);if(i&&n(i).length>0)return r._isDisabled(i)?r._getPrevParentItem(i):i},_move:function(t){var e,u,i=this,r=i._selectedItem;if(i.getParent(n(r)),f(r))if(t===ri)u=i._getPrevItem(r);else if(t===ui)u=i._getNextItem(r);else if(t===fi){if(i._isExpanded(r))return void i._collapse(r,!0,!1);u=i._getPrevParentItem(r)}else{if(!i._isExpanded(r))return void i._expand(r,!0,!1);e=n(r).children("ul.sui-treeview-list").first();e.length>0&&(u=n(e).children("li:not(."+b+")").first())}else u=n(i.element).find(o).first();f(u)&&n(u).length>0&&i._selectItem(u,!1,!0)},_getByPath:function(t,i){var u=this,r=t.shift(),f=n(i.children(o)[r]);return t.length>0?u._getByPath(t,f.children(c)):n(i.children(o)[r])},_getListItem:function(t){return n(y(t)?this.getByPath(t,this.element):t)},getByPath:function(t){return this._getByPath([].slice.call(t),n(this.element))},isLoaded:function(t){return n(this._getListItem(t)).data(d)===!0},hasChildren:function(n){return this._hasChildren(this.getItem(n))},getItem:function(t){return n(this._getListItem(t)).data(l)},getDataSource:function(t){return n(this._getListItem(t)).data(yt)},getChildrenDataSource:function(t){var i=this,u=i._getListItem(t);return i.hasChildren(i.getItem(u))&&i.isLoaded(u)?n(u).children("ul.sui-treeview-item-list").first().data(ut):r},getParent:function(t){return n(this._getListItem(t)).data(vt)},getDataSourceIndex:function(t){return n(this._getListItem(t)).data(si)},_getIndex:function(t){var i=this._getListItem(t);return n(i).index()},getPath:function(t){var r=this,i=n(t),u=[];do u.unshift(r._getIndex(i)),i=r.getParent(i);while(i&&i.length>0);return u},updateIndetermined:function(t){var i=this,r=i._getListItem(t);f(r)?i._updateChecked(n(r)):n(i.element).children(o).each(function(){i._updateChecked(n(this))})},expanded:function(){var n=this,t=[].slice.call(arguments),e=p(t[0])?t.shift():r,i=t[0],u=n._getListItem(i);return f(e)?void(e?y(i)?n._expandPath([].slice.call(i),!1,!1,t[1]):n._expand(u,!1,!1,t[1]):n._collapse(u,!1)):n._isExpanded(u)},selected:function(){var n,t=this,i=[].slice.call(arguments);return i.length>0?(n=t._getListItem(i[0]),void(n&&n.length>0&&t._selectItem(n,!0,!1))):t._selectedItem},unselect:function(){var n=this;n._selectedItem&&n._selectedItem.removeClass(et+" "+ot);n._selectedItem=null},enabled:function(){var u=this,i=[].slice.call(arguments),e=p(i[0])?i.shift():r,t=u._getListItem(i[0]);if(t&&!(n(t).length<=0))return f(e)?void(e?t.removeClass(b):t.addClass(b)):!u._isDisabled(t)},checked:function(){var u=this,i=[].slice.call(arguments),e=p(i[0])?i.shift():r,t=u._getListItem(i[0]);if(t&&!(n(t).length<=0))return f(e)?void u._setChecked(t,e,!1):t.data(a)},_insertedItem:function(t,i){return t instanceof n?n(t):y(t)?this._getListItem(t):kt(t)?this._renderItem(t,i).listItem:void 0},_beforeRemoveChild:function(t){var i=this;t&&t.children(c).children(o).length<=1&&(n(i._getToggleEl(t)).css(rt,ei),t.removeClass(g))},_refreshParent:function(t){var i=n(t).parents(o).first();n(t).data(vt,i&&i.length>0?i:null)},load:function(n,t){var r=this,i=r._getListItem(n);i&&i.length>0&&r._loadItem(i,!1,t)},append:function(){var i,r,o,t=this,s=[].slice.call(arguments),h=s[0],a=y(h)||h instanceof n,l=s[1],u=s[2];if(f(l)){if(r=t._getListItem(l),!(r&&n(r).length>0))return;o=n(r).children(c).first()}else r=null,o=t.element;i=t._insertedItem(h,r);i&&(a&&t._beforeRemoveChild(t.getParent(i)),!r||t._isExpanded(r)?(i.appendTo(o),t._refreshParent(i),e(u)&&u.call(t,i)):t.hasChildren(r)?t._isExpanded(r)?(i.appendTo(o),t._refreshParent(i),e(u)&&u.call(t,i)):t._expand(r,!1,!1,function(){i.appendTo(o);t._refreshParent(i);e(u)&&u.call(t,i)}):t._isExpanded(r)?(i.appendTo(o),t._refreshParent(i),e(u)&&u.call(t,i)):(n(t._getToggleEl(r)).css(rt,oi),r.removeClass(g),i.appendTo(o),t._refreshParent(i),t._expand(r,!1,!1,function(){e(u)&&u.call(t,i)})))},insertBefore:function(){var i,t=this,f=[].slice.call(arguments),u=f[0],e=y(u)||u instanceof n,r=t._getListItem(f[1]);if(r&&r.length>0&&(i=t._insertedItem(u,t.getParent(r))))return e&&t._beforeRemoveChild(t.getParent(i)),i.insertBefore(r),t._refreshParent(i),i},insertAfter:function(){var i,t=this,f=[].slice.call(arguments),u=f[0],e=y(u)||u instanceof n,r=t._getListItem(f[1]);if(r&&r.length>0&&(i=t._insertedItem(u,t.getParent(r))))return e&&t._beforeRemoveChild(t.getParent(i)),i.insertAfter(r),t._refreshParent(i),i},remove:function(t){var r=this,u=y(t)||t instanceof n,i=r._getListItem(t);return r.getParent(i),!!(i&&i.length>0)&&(r._destroyItems(n(i).children(c).first()),u&&r._beforeRemoveChild(r.getParent(i)),i.remove(),!0)},destroy:function(){var t=this,i=t.element,r=t._eventNS;t.dataSource&&t.dataSource.off(k+r);t._destroyItems(i);t._blurTimeout&&(clearTimeout(t._blurTimeout),t._blurTimeout=null);n(i).off(r).remove();t._original.unwrap();t._original.show();t._original=t._wrapper=t._selectedItem=t._activeItem=null;ht.fn.destroy.call(t)}});st.defaults=pt;t.ui.plugin("TreeView",st)}(jQuery,shield,this);!function(n,t,i,r){var s,e,u=t.ui.Widget,h=(t.Class,t.Constants,t.format),w=document,f=(n.extend,n.map,n.each,n.proxy),c=t.error,l=t.is.boolean,b=t.is.object,k=t.is.defined,d=(t.is.integer,t.to.int,t.to.number,t.support,"close"),g="minimize",nt="maximize",a="resize",v="scroll",tt="pin",o="overflow",it="hidden",y="px",p="center",rt=function(t){return n("<div/>").text(t).html()};s={title:"",titleBarButtons:["pin","minimize","maximize","close"],content:r,cls:r,visible:!0,pinned:!1,modal:!1,width:400,height:300,resizable:{maxWidth:r,maxHeight:r,minWidth:200,minHeight:150},draggable:!0,position:r,appendToBody:!1,events:{}};e=u.extend({init:function(){u.fn.init.apply(this,arguments);k(this.initialOptions.titleBarButtons)&&(this.options.titleBarButtons=this.initialOptions.titleBarButtons);var nt,tt,i=this,r=i.options,v=r.cls,y=r.dieOnError,p=r.titleBarButtons,a=r.resizable,s=r.draggable,o=r.content,d=r.position,e=n(i.element),g=!1;return"div"!==n(e).prop("tagName").toLowerCase()?void c("shieldWindow: Underlying element is not DIV",y):p&&p.length>0&&!t.ui.Button?void c("shieldWindow: The titleBarButtons setting requires ShieldUI Button to be loaded",y):(i._eventNS="shieldWindow"+i.getInstanceId(),r.appendToBody?(e.appendTo(w.body),i._parentIsBody=!0):i._parentIsBody="body"==e.parent().prop("tagName").toLowerCase(),i._origHtml=e.html(),e.empty(),e.addClass("sui-window"+(v?" "+v:"")),e.css({width:r.width,height:r.height,position:"absolute"}),i.titleBarEl=nt=n('<div class="sui-window-titlebar"><div class="sui-window-title">'+r.title+'<\/div><div class="sui-window-icons"><\/div><\/div>').appendTo(e),i._initTitleBarButtons(),i.contentEl=tt=n('<div class="sui-window-content"><\/div>').appendTo(e),i._fixContent(),b(d)?e.css(d):g=!0,a&&(l(a)&&(a={}),i.resizable=new t.ui.Resizable(e,a),i.resizable.on("resized",f(i._fixContent,i))),s&&(l(s)&&(s={}),s.handle=i.titleBarEl,i.draggable=new t.ui.Draggable(e,s)),i._hasIframe=!1,o?o.template?o.template.dataUrl?n.ajax({url:o.template.dataUrl,dataType:"json",success:function(n){i.content(h(o.template.body,n));i._focusFirst()},error:function(n,t,r){i.content("Error occured while reading URL: "+t+" - "+r)}}):(i.content(h(o.template.body,o.template.data)),i._focusFirst()):o.remote?o.remote.iframe?(i._hasIframe=!0,i.content('<iframe class="sui-window-iframe" src="'+o.remote.url+'" style="border:none; border-width:0px; width:100%; height:100%;"><\/iframe>'),i._focusFirst()):i.contentEl.load(o.remote.url,function(){i._focusFirst()}):(i.content(i._origHtml),i._focusFirst()):(i.content(i._origHtml),i._focusFirst()),i._minimized=!1,i._maximized=!1,i._destroyed=!1,e.attr("role","dialog").attr("aria-labelledby",rt(r.title)),i.pinned(!!r.pinned),i.visible(!!r.visible),void(g&&i.center()))},_focusFirst:function(){var t=n(this.contentEl).find(".sui-checkbox:not(.sui-checkbox-disabled), .sui-radiobutton:not(.sui-radiobutton-disabled), .sui-input:not(.sui-input-disabled), .sui-combobox:not(.sui-combobox-disabled), .sui-dropdown:not(.sui-dropdown-disabled), .sui-listbox:not(.sui-listbox-disabled), .sui-switch:not(.sui-switch-disabled), a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible").first();n(t).length>0&&n(t).focus()},_initTitleBarButtons:function(){var e,o,t,r,i=this,s=i.options,u=s.titleBarButtons,h=s.modal;if(i.titleBarButtons={},u&&u.length>0){for(e=i.titleBarEl.find(".sui-window-icons"),r=0;r<u.length;r++)t=u[r],"pin"!==t&&"minimize"!==t&&"maximize"!==t&&"close"!==t||h&&"close"!==t||(o="pin"==t?"_onPin":"minimize"==t?"_onMinimize":"maximize"==t?"_onMaximize":t,i.titleBarButtons[t]=n('<button type="button"><div class="sui-sprite sui-window-button-icon sui-window-button-icon-'+t+'"><\/div><\/button>').appendTo(e).shieldButton({cls:"sui-window-button",events:{click:f(i[o],i,!0)}}).swidget());e.on("mousedown",function(n){return n.preventDefault(),n.stopPropagation(),!1})}},_destroyTitleBarButtons:function(){var n,i=this,t=i.titleBarButtons;for(n in t)t.hasOwnProperty(n)&&t[n].destroy();i.titleBarButtons={}},_createModal:function(){var t=this,r=n(t._parentIsBody?i:t.element.parent()),u=n(r).scrollTop(),f=n(r).scrollLeft();t._lockScroll();t._modal=n('<div class="sui-window-modal"><\/div>').insertBefore(t.element).css({top:u,left:f})},_closeModal:function(){var t=this;n(t._modal).remove();t._unlockScroll()},_lockScroll:function(){var t=this,i=t.element.parent();t._scrollTop=n(i).scrollTop();t._scrollLeft=n(i).scrollLeft();t._parentOverflow=n(i).css(o);i.css(o,it).scrollTop(t._scrollTop).scrollLeft(t._scrollLeft)},_unlockScroll:function(){var n=this,t=n.element.parent();t.css(o,n._parentOverflow).scrollTop(n._scrollTop).scrollLeft(n._scrollLeft)},_fixContent:function(){var t=this;n(t.contentEl).outerWidth(n(t.element).innerWidth()).innerHeight(n(t.element).innerHeight()-n(t.titleBarEl).outerHeight());t._hasIframe&&n(t.contentEl).find(".sui-window-iframe").width(n(t.contentEl).width()).height(n(t.contentEl).height())},center:function(){var r=this,u=n(r.element);t.ui.Position.Set(u,r._parentIsBody?i:u.parent(),{source:p,target:p})},position:function(t){n(this.element).css(t)},getHeight:function(){n(this.element).css("height")},getWidth:function(){n(this.element).css("width")},getPosition:function(){var t=n(this.element);return{left:t.css("left"),top:t.css("top")}},content:function(){var r=this,t=n(r.contentEl),i=[].slice.call(arguments);return i.length>0?(t.empty(),void t.append(i[0])):t.html()},resize:function(t){n(this.element).css(t);this._fixContent()},_scroll:function(){var t=this,r=n(t.element),u=t._parentIsBody;t._pinned&&r.css({left:t.originalPosition.left+n(u?i:r.parent()).scrollLeft()+y,top:t.originalPosition.top+n(u?i:r.parent()).scrollTop()+y})},_onPin:function(n){this.pinned(!this._pinned,n)},pinned:function(){var r,s,t=this,u=[].slice.call(arguments),e=n(t.element),h=t._parentIsBody,o=t.titleBarEl,c=o.find(".sui-window-button-icon-pin").length>0?o.find(".sui-window-button-icon-pin"):o.find(".sui-window-button-icon-unpin");return u.length<=0?t._pinned:(r=!!u[0],void(t._pinned!=r&&(u[1]&&(s=t.trigger(tt,{pinned:r}),s.isDefaultPrevented())||(t._pinned=r,c.removeClass("sui-window-button-icon-pin sui-window-button-icon-unpin"),c.addClass(t._pinned?"sui-window-button-icon-pin":"sui-window-button-icon-unpin"),t._pinned?(t.originalPosition=e.position(),n(h?i:e.parent()).on(v+"."+t._eventNS,f(t._scroll,t)),t.draggable&&t.draggable.enabled(!1)):(n(h?i:e.parent()).off(v+"."+t._eventNS),t.origininalPosition=null,t.draggable&&t.draggable.enabled(!0))))))},_onMinimize:function(n){this.minimized(!0,n)},minimized:function(){var u,i,o,t=this,f=[].slice.call(arguments),e=n(t.element),s=n(t.contentEl),r=t.titleBarEl,h=t.titleBarButtons.minimize;return f.length<=0?t._minimized:(i=!!f[0],void(t._minimized!=i&&(f[1]&&(o=t.trigger(g,{minimized:i}),o.isDefaultPrevented())||(t._minimized=i,u=r.find(".sui-window-button-icon-minimize").length>0?r.find(".sui-window-button-icon-minimize"):r.find(".sui-window-button-icon-unminimize"),u.removeClass("sui-window-button-icon-minimize sui-window-button-icon-unminimize"),u.addClass(t._minimized?"sui-window-button-icon-unminimize":"sui-window-button-icon-minimize"),i?(t._onMinCurrHeight=e.height(),e.height(r.height()),s.hide(),t.resizable&&t.resizable.enabled(!1)):(e.height(t._onMinCurrHeight),s.show(),t.resizable&&t.resizable.enabled(!0)),h&&h.visible(!i)))))},_onMaximize:function(n){var t=this;t._minimized?t.minimized(!1,n):t.maximized(!t._maximized,n)},maximized:function(){var e,c,o,l,t=this,s=[].slice.call(arguments),r=n(t.element),u=t._beforeMaximize,h=n(t.titleBarEl);return s.length>0?(e=!!s[0],c=!!s[1],t._minimized&&t.minimized(!1,!1),t._maximized!=e&&(c&&(l=t.trigger(nt,{maximized:e}),l.isDefaultPrevented())||(t._maximized=!!e,o=h.find(".sui-window-button-icon-maximize").length>0?h.find(".sui-window-button-icon-maximize"):h.find(".sui-window-button-icon-restore"),o.removeClass("sui-window-button-icon-maximize sui-window-button-icon-restore"),o.addClass(t._maximized?"sui-window-button-icon-restore":"sui-window-button-icon-maximize"),t._maximized?(t._beforeMaximize={top:r.css("top"),left:r.css("left"),width:r.width(),height:r.height()},t.resize({width:"100%",height:n(t._parentIsBody?i:r.parent()).height()}),t._lockScroll(),t.center(),t._parentIsBody&&n(i).on(a+"."+t._eventNS,f(t._onWinResizeMax,t))):(u&&(r.css({top:u.top,left:u.left}),t.resize({width:u.width,height:u.height})),t._unlockScroll(),t._parentIsBody&&(n(i).off(a+"."+t._eventNS),t._winResize=null)))),void 0):t._maximized},_onWinResizeMax:function(){var t=this;n(t.element).height(n(i).height());t._fixContent()},close:function(n){var t,i=this;n&&(t=i.trigger(d),t.isDefaultPrevented())||i.destroy()},visible:function(){var n=this,t=[].slice.call(arguments);if(!n._destroyed)return t.length>0&&n.options.modal&&(t[0]?n._createModal():n._closeModal()),u.fn.visible.apply(n,arguments)},destroy:function(){var t=this,i=t.options.cls;t.visible(!1);t._destroyed=!0;t.resizable&&(t.resizable.destroy(),t.resizable=null);t.draggable&&(t.draggable.destroy(),t.draggable=null);t._destroyTitleBarButtons();t.maximized(!1);t.pinned(!1);n(t.element).removeClass("sui-window"+(i?" "+i:""));t._origHtml&&(n(t.element).html(t._origHtml),t._origHtml=null);u.fn.destroy.call(t)}});e.defaults=s;t.ui.plugin("Window",e)}(jQuery,shield,this);!function(n,t,i,r){var rt,b,k=t.ui.Widget,a=(t.Class,document),u=n.proxy,pt=n.each,wt=(n.extend,n.map),bt=Math.min,kt=Math.max,dt=(t.guid,t.iid),gt=t.error,ni=t.format,d=t.is.defined,f=(t.is.boolean,t.is.integer,t.is.func,t.is.array,t.is.object,t.is.string,t.support.browser,"disabled"),s="multiple",ut="change",ft="dragover",et="dragleave",v="drop",ot="select",st="remove",ti="click",y="error",ht="progress",ii="abort",ct="load",g="upload",lt="complete",nt="POST",h="pending",at="uploading",c="complete",vt="removing",l="error",ri={pending:"&#10005;",uploading:"&#10754;",complete:"&#10005;",removing:"&#10754;",error:"&#10005;"},ui="shieldUploadIframe",e="sui-upload",p=e+"-target-input",yt=e+"-status",tt=e+"-file",o=e+"-xhr",it=e+"-form",w=e+"-iframe";rt={cls:r,enabled:!0,async:{enabled:!1,autoUpload:!1,batch:!1,save:{url:r,field:r},remove:{url:r,field:"fileNames",method:nt}},multiple:!0,files:{enabled:!0,initial:r,template:"{name} ({size} bytes)"},messages:{drop:"Drop files here to upload",select:"Select files ...",upload:"Upload files"},events:{}};b=k.extend({init:function(){k.fn.init.apply(this,arguments);var w,h,i,o,l,nt,e,t=this,r=t.options,tt=r.dieOnError,b=r.cls,y=r.messages,d=r.files,g=d.enabled,p=d.initial,it=r.async.enabled;return t._xhr2support=w=!!(new XMLHttpRequest).upload,t._original=i=n(t.element),"input"!=i.prop("tagName").toLowerCase()||"file"!=i.attr("type").toLowerCase()?void gt("shieldUpload: Must be initialized from an input with type file.",tt):(e=t._eventNS=".shieldUpload"+t.getInstanceId(),i.wrap("<form>").closest("form").get(0).reset(),i.unwrap(),i.removeAttr(f),r.multiple?i.attr(s,s):i.removeAttr(s),t.element=h=i.wrap("<div/>").parent(),h.addClass("sui-upload"+(b?" "+b:"")),t._selectButtonDiv=i.wrap("<div/>").parent().append('<span class="sui-upload-button-text">'+y.select+"<\/span>").addClass("sui-upload-button"),t._dropFilesDiv=o=t._selectButtonDiv.wrap('<div class="sui-upload-dropfiles"/>').parent(),t._dropText=l=n('<div class="sui-upload-drop">'+y.drop+"<\/div>").appendTo(o).hide(),g&&(t._fileList=nt=n('<ul class="sui-upload-files"/>').appendTo(h).hide()),t._uploadButtonDiv=n('<button class="sui-upload-button sui-upload-button-upload" type="button">'+y.upload+"<\/button>").appendTo(h).click(u(t._uploadClicked,t)).hide(),i.on(ut+e,u(t._fileSelected,t)),it&&w&&(i.on(v+e,u(t._fileChanged,t)),n(a).on(ft+e,function(n){n.stopPropagation();n.preventDefault();l.show()}).on(et+e,function(n){n.stopPropagation();n.preventDefault();l.hide()}).on(v+e,function(n){n.stopPropagation();n.preventDefault();l.hide()}),o.on(ft,function(){o.addClass("sui-upload-dropfiles-hover")}).on(et,function(){o.removeClass("sui-upload-dropfiles-hover")}).on(v,u(t._fileChanged,t))),g&&p&&p.length>0&&t._addFiles(p,c),void t.enabled(r.enabled))},refresh:function(n){this.refreshWithElement(this._original,n)},_getFiles:function(t){var r,i=[],u=n(t.target);return t.originalEvent.dataTransfer&&t.originalEvent.dataTransfer.files?i=t.originalEvent.dataTransfer.files:t.target.files?i=t.target.files:(i=n.makeArray(u.prop("files")),i.length?!d(i[0].name)&&i[0].fileName&&pt(i,function(n,t){t.name=t.fileName;t.size=t.fileSize}):(r=u.prop("value"),i=r?[{name:r.replace(/^.*\\/,"")}]:[])),i},_getPendingFileItems:function(){return n(this._fileList).children("li.sui-upload-file-"+h)},_getFileInfoList:function(t){return this._toFileInfoList(n(t).data(tt))},_toFileInfoList:function(n){var t,r=this,i=[];if(r._isFileList(n))for(t=0;t<n.length;t++)i.push(n[t]);else i.push(n);return i},_isSingleFile:function(n){return n&&n.name},_isFileList:function(n){return n.length&&n.length>0},_fileSelected:function(t){var f,e,i=this,o=i.options,a=o.async.enabled,y=i._xhr2support,c=i._eventNS,r=n(t.target),l=i._getFiles(t);e=i.trigger(ot,{files:i._toFileInfoList(l)});e.isDefaultPrevented()||(f=n('<input type="file" name="'+r.attr("name")+'"/>').insertAfter(r).on(ut+c,u(i._fileSelected,i)),o.multiple&&f.attr(s,s),a&&y&&f.on(v+c,u(i._fileChanged,i)),r.hide(),i._addFiles(l,h,r))},_fileChanged:function(n){var i,t=this,r=t._getFiles(n);n.stopPropagation();n.preventDefault();t._dropText.hide();t._dropFilesDiv.removeClass("sui-upload-dropfiles-hover");i=t.trigger(ot,{files:t._toFileInfoList(r)});i.isDefaultPrevented()||t._addFiles(r,h)},_addFiles:function(n,t,i){var u,r=this,f=r.options,e=f.async;if(f.files.enabled){if((!e.enabled||e.batch)&&f.multiple)r._renderFile(n,t,i);else for(u=0;u<n.length;u++)r._renderFile(n[u],t,i);r._afterAddRemoveFiles();e.autoUpload&&r._uploadAllPending()}},_renderFile:function(t,i,r){var e,o,f=this,l=f.options,a=l.files.template,h=(f._fileList,f._toFileInfoList(t)),s=[];for(e=n('<li class="sui-upload-file"/>').data(tt,t).appendTo(f._fileList),r&&e.data(p,r),o=0;o<h.length;o++)s.push(n('<span class="sui-upload-file-text"/>').append(ni(a,h[o]))),o<h.length-1&&s.push(n('<span class="sui-upload-file-text-sep">,<\/span>'));l.async.enabled&&f._xhr2support?s.push(n('<span class="sui-upload-file-progress"/>')):e.addClass("sui-upload-file-no-progress");s.push(n('<span class="sui-upload-file-action"/>').on(ti,u(f._actionClicked,f,e)));e.append(s);f._setStatus(e,i);i===c&&f._setProgress(e,100)},_afterAddRemoveFiles:function(){var n=this,i=n.options.async,t=n._fileList,r=n._uploadButtonDiv;t.children("li").length>0?t.show():t.hide();n._getPendingFileItems().length>0?i.enabled&&!i.autoUpload&&r.show():r.hide()},_actionClicked:function(n,t){var i=this,r=i._getStatus(n);i._enabled&&(r==at?i._abortUpload(n,t):r==vt?i._abortRemove(n,t):i._removeItem(n,t))},_removeItem:function(t,i){var u,o,r=this,w=(r.options,r.options.async),s=w.remove,e=r._getStatus(t),a=r._getFileInfoList(t),v=t.data(p),b=r._eventNS,k={};o=r.trigger(st,{domEvent:i,status:e,files:a});o.isDefaultPrevented()||(u=function(){n(v)[0]===n(r._original)[0]?n(v).hide().attr(f,f):n(v).off(b).remove();n(t).off(b).remove();r._afterAddRemoveFiles()},e==h||e==l?u():e==c&&(w.enabled?(r._setStatus(t,vt),k[s.field]=wt(a,function(n){return n.name}),n.support.cors=!0,n.ajax({method:s.method,url:s.url,traditional:!0,data:k}).done(function(){u()}).fail(function(n,u,f){r.trigger(y,{domEvent:i,operation:st,listItem:t,files:a,jqXHR:n,textStatus:u,errorThrown:f,responseText:f});o.isDefaultPrevented()||r._setStatus(t,l)})):u()))},_abortRemove:function(){},_setStatus:function(t,i){n(t).data(yt,i).removeClass("sui-upload-file-pending sui-upload-file-uploading sui-upload-file-complete sui-upload-file-removing sui-upload-file-error").addClass("sui-upload-file-"+i).children(".sui-upload-file-action").first().html(ri[i]);this._afterAddRemoveFiles()},_getStatus:function(t){return n(t).data(yt)},_uploadAllPending:function(){var r,o,t,i=this,s=i.options,f=(s.async,i._getPendingFileItems()),e=(f||[]).length,u=[];if(!(e<1)){for(t=0;t<e;t++)r=n(f[t]).data(tt),i._isSingleFile(r)?u.push(r):i._isFileList(r)&&(u=u.concat(r));if(o=i.trigger(g,{files:u}),!o.isDefaultPrevented())for(t=0;t<e;t++)i._startUpload(f[t])}},_startUpload:function(t){var s,h,r,f,c,l,e,i=this,g=i.options,tt=g.async,v=tt.save,b=v.field,k=i._getFileInfoList(t);if(d(b)||(b=n(i._original).attr("name")),i._setProgress(t,0),i._xhr2support){for(h=new FormData,r=new XMLHttpRequest,e=0;e<k.length;e++)h.append(b,k[e]);n(t).data(o,r);r.open(nt,v.url);r.upload.addEventListener(ht,u(i._onUploadProgress,i,t));r.upload.addEventListener(ct,u(i._onUploadComplete,i,t));r.upload.addEventListener(y,u(i._onUploadError,i,t));r.onreadystatechange=function(){4==r.readyState&&200!=r.status&&i._onUploadError(t)};r.send(h)}else s=n(t).data(p),s&&(f=ui+dt(),c=n('<iframe name="'+f+'" id="'+f+'" class="sui-upload-iframe" width="0" height="0" tabindex="-1"/>').appendTo(a.body),n(c).on(ct,u(i._onIframeComplete,i,t)),l=n('<form class="sui-upload-form" method="'+nt+'" enctype="multipart/form-data" action="'+v.url+'" target="'+f+'" tabindex="-1"/>').appendTo(a.body).append(s),n(t).data(w,c).data(it,l),l.get(0).submit());i._setStatus(t,at)},_abortUpload:function(t){var r,i=this;i._xhr2support?(r=n(t).data(o),r&&r.abort(),n(t).removeData(o)):i._cleanupIframeForm(t);i._setStatus(t,h);i._setProgress(t,0);i.trigger(ii,{listItem:t,files:i._getFileInfoList(t)})},_cleanupIframeForm:function(t){var f=this,i=n(t).data(w),r=n(t).data(it),u=n(t).data(p);i&&n(i).attr("src","about:blank");r&&(u&&n(u).prependTo(f._selectButtonDiv),n(r).remove(),n(t).removeData(it));i&&(n(i).remove(),n(t).removeData(w))},_setProgress:function(t,i){var r=n(t).children(".sui-upload-file-progress").first();r&&r.length>0&&r.empty().append(n('<span class="sui-upload-file-progress-inner"/>').css("width",i+"%"))},_onUploadProgress:function(n,t){var i=this,u=t.lengthComputable?bt(100,kt(0,t.loaded/t.total*100)):r;d(u)&&i._setProgress(n,u);i.trigger(ht,{domEvent:t,percentage:u,listItem:n,files:i._getFileInfoList(n)})},_onUploadComplete:function(t){var i=this;i._setStatus(t,c);i._setProgress(t,100);n(t).removeData(o);i.trigger(lt,{listItem:t,files:i._getFileInfoList(t)})},_onIframeComplete:function(t,i){var o,u=this,s=n(t).data(w),h=u._getFileInfoList(t),f="";if(s){try{f=n(s).contents().find("body").html()}catch(e){f=e?e.description||e.message:""}f?(o=u.trigger(y,{domEvent:i,operation:g,listItem:t,files:h,status:r,responseText:f}),o.isDefaultPrevented()||(u._setStatus(t,l),u._setProgress(t,0))):(u._setStatus(t,c),u._setProgress(t,100),u.trigger(lt,{listItem:t,files:h}));u._cleanupIframeForm(t)}},_onUploadError:function(t,i){var h,f,e,c,s,r=this,a=r._getStatus(t),u=n(t).data(o);a!==l&&(u&&(h=u.readyState,f=u.status,e=u.responseText,c=u.statusText),n(t).removeData(o),s=r.trigger(y,{domEvent:i,operation:g,listItem:t,files:r._getFileInfoList(t),status:f,responseText:e}),s.isDefaultPrevented()||(r._setStatus(t,l),r._setProgress(t,0)))},_uploadClicked:function(){var n=this;n._enabled&&n._uploadAllPending()},enabled:function(){var t,i,r=this,u=n(r.element),e=[].slice.call(arguments);return e.length>0?(t=!!e[0],i=u.find('input[type="file"]').filter(":visible"),t?(u.removeAttr(f).removeClass("sui-upload-disabled"),n(i).removeAttr(f)):(u.attr(f,f).addClass("sui-upload-disabled"),n(i).attr(f,f)),r._enabled=t,void 0):r._enabled},destroy:function(){var t=this,r=n(t.element),i=n(t._original),u=t._eventNS;n(a).off(u);n(r).find('input[type="file"]').off(u);n(r).find('input[type="file"]').not(i).remove();t._uploadButtonDiv&&(n(t._uploadButtonDiv).remove(),t._uploadButtonDiv=null);t._dropText&&(n(t._dropText).remove(),t._dropText=null);t._fileList&&(n(t._fileList).remove(),t._fileList=null);n(r).find(".sui-upload-button-text").remove();n(i).unwrap();n(i).unwrap();n(i).unwrap();t._selectButtonDiv=t._dropFilesDiv=null;n(i).removeAttr(f).show();k.fn.destroy.call(t)}});b.defaults=rt;t.ui.plugin("Upload",b)}(jQuery,shield,this);!function(n,t,i,r){var ct,o,f,e,w,ut,ft,p,lt,et,ot=t.ui.Widget,gt=t.Class,b=(t.Constants.KeyCode,document),s=n.proxy,h=(n.each,n.extend),at=(n.map,n.contains),k=(n.trim,t.error,t.guid),ni=t.format,d=t.is.defined,u=(t.is.boolean,t.is.integer,t.is.func),vt=(t.is.array,t.is.object,t.is.string),ti=t.to.string,l=t.support.browser,st="disabled",ii="focus",ri="blur",yt="click",pt="keyup",wt="keydown",bt="formatting",a="text-formatting",g="font-and-colors",nt="alignment",tt="lists",kt="links",v="sui-editor",it="styleWithCSS",y=function(){},c=function(n,t,i,r){if(r)try{n.execCommand(t,!1,i)}catch(u){y("execCommand({0}, {1}) error: {3}",t,i,u)}else n.execCommand(t,!1,i)},rt="about",dt="About",ui=function(t){return n("<div/>").html(t).text()},ht="&#x44;&#x65;&#x6D;&#x6F;&#x20;&#x76;&#x65;&#x72;&#x73;&#x69;&#x6F;&#x6E;&#x20;&#x62;&#x79;";ht+="&#x20;&#x3C;&#x61;&#x20;&#x68;&#x72;&#x65;&#x66;&#x3D;&#x22;&#x68;&#x74;&#x74;&#x70;&#x3A;&#x2F;&#x2F;&#x77;&#x77;&#x77;&#x2E;&#x73;&#x68;";ct=function(t,i){var f,u,e,r;!t.getSelection&&i.selection&&(f=null,t.getSelection=function(){return null!=f?f:f=new e},i.createRange=function(){return new u},i.attachEvent("onkeydown",function(){return t.getSelection().setRangeAt(0,new u(!0))}),i.attachEvent("onselectionchange",function(){var n,r,f;try{r=new u(!0)}catch(e){}if(r)return t.getSelection().setRangeAt(0,r),n=i.selection.createRange().parentElement(),"INPUT"===n.tagName||"TEXTAREA"===n.tagName?(f=t.getSelection().getRangeAt(0),n.selectionStart=f.selectionStart,n.selectionEnd=f.selectionEnd,n.selectionEnd):void 0}),u=t.Range=function(){var t=function(n){var t=this;n?t.range=i.selection.createRange():(t.range=i.body.createTextRange(),t.collapse(!0));t.init()};return t.END_TO_END="EndToEnd",t.END_TO_START="EndToStart",t.START_TO_END="StartToEnd",t.START_TO_START="StartToStart",t.prototype.init=function(){var f,u,t,e,o,i,n=this;return u=n.range.parentElement(),n.commonAncestorContainer=u,n.collapsed=0===n.compareBoundaryPoints("StartToEnd",n),i=n.range.duplicate(),i.moveToElementText(u),f=n.range.text.length>0?0:1,o=r.findLength("StartToStart",i,n.range),t=r.findNodeByPos(u,o,f),n.startContainer=t.el,n.startOffset=t.offset,e=r.findLength("StartToEnd",i,n.range),t=r.findNodeByPos(u,e,1),n.endContainer=t.el,n.endOffset=t.offset,n.selectionStart=r.findLength("StartToStart",i,n.range,n),n.selectionEnd=r.findLength("StartToEnd",i,n.range,n),n.selectionEnd},t.prototype.select=function(){return this.range.select()},t.prototype.setStart=function(n,t){var f,i,u=this;if(r.getText(n).length>=t&&t>=0)return i=u.range.duplicate(),3===n.nodeType&&(f=r.findPosFromNode(n),i.moveToElementText(n.parentNode),i.moveStart("character",f+t)),u.range.compareEndPoints("StartToEnd",i)===-1&&u.range.setEndPoint("EndToStart",i),u.range.setEndPoint("StartToStart",i)},t.prototype.setEnd=function(n,t){var u,i,f=this;if(r.getText(n).length>=t&&t>=0)return i=f.range.duplicate(),3===n.nodeType&&(u=r.findPosFromNode(n),i.moveToElementText(n.parentNode),i.moveStart("character",u+t)),f.range.setEndPoint("EndToStart",i)},t.prototype.selectNodeContents=function(n){return this.range.moveToElementText(n)},t.prototype.collapse=function(n){var t=this;return n?t.range.setEndPoint("EndToStart",t.range):t.range.setEndPoint("StartToEnd",t.range)},t.prototype.deleteContents=function(){},t.prototype.insertNode=function(t){var r=t.outerHTML?t.outerHTML:n(i.createElement("div")).append(n(t).clone()).html();this.range.pasteHTML(r)},t.prototype.compareBoundaryPoints=function(n,t){return this.range.compareEndPoints(n,t.range)},t.prototype.cloneRange=function(){var n=new t;return n.range=this.range.duplicate(),n.init(),n},t.prototype.detach=function(){return delete this.range},t.prototype.getBoundingClientRect=function(){var n=this.range.getBoundingClientRect();return{width:n.right-n.left,height:n.bottom-n.top,left:n.left,right:n.right,bottom:n.bottom,top:n.top}},t.prototype.toString=function(){return this.range.text||""},t}(),e=function(){var n=function(){this.selection=i.selection;this.ranges=[];this.init()};return n.prototype.init=function(){var i,t,r,f,e,n=this;if(n.rangeCount=n.ranges.length,n.rangeCount)return t=n.ranges[0],null==n.prev&&(n.prev=t),0===t.compareBoundaryPoints(u.END_TO_END,n.prev)?(f=["end","start"],i=f[0],r=f[1]):(e=["start","end"],i=e[0],r=e[1]),n.anchorNode=t[""+i+"Container"],n.anchorOffset=t[""+i+"Offset"],n.focusNode=t[""+r+"Container"],n.focusOffset=t[""+r+"Offset"],n.isCollapsed=n.anchorNode===n.focusNode,n.isCollapsed},n.prototype.getRangeAt=function(n){return this.ranges[n]},n.prototype.setRangeAt=function(n,t){var i=this;return i.prev=i.ranges[n],i.ranges[n]=t,i.init()},n.prototype.removeAllRanges=function(){return this.ranges=[],this.init()},n.prototype.addRange=function(n){var f,t,e,i,r,u=this;for(u.ranges.push(n),u.init(),i=u.ranges,r=[],t=0,e=i.length;t<e;t++)f=i[t],r.push(f.select());return r},n.prototype.deleteFromDocument=function(){return this.selection.clear()},n.prototype.toString=function(){return this.ranges[0].toString()},n}(),r={convertLineBreaks:function(n){return n.replace(/\r\n/g,"\n")},stripLineBreaks:function(n){return n.replace(/\r\n/g,"")},getText:function(n){return n.innerText||n.nodeValue},findLength:function(n,t,i,u){var f=t.duplicate();switch(n){case"StartToStart":f.setEndPoint("EndToStart",i);break;case"StartToEnd":f.setEndPoint("EndToEnd",i)}return u?r.convertLineBreaks(f.text).length:r.stripLineBreaks(f.text).length},findNodeByPos:function(n,t,i){var r,u;return null==i&&(i=0),u={length:0,el:n,offset:0},r=function(n,t,i,u){var f,e,h,s,o;for(s=n.childNodes,o=[],e=0,h=s.length;e<h;e++)if(f=s[e],!u.found)if(3===f.nodeType){if(u.length+f.length+i>t){u.found=!0;u.el=f;u.offset=t-u.length;break}o.push(u.length+=f.length)}else o.push(r(f,t,i,u));return o},r(n,t,i,u),u},findPosFromNode:function(n){var t,i,r;return i={pos:0},r=n.parentNode,t=function(n,i,r){var u,e,s,o,f;for(o=n.childNodes,f=[],e=0,s=o.length;e<s;e++)if(u=o[e],!r.found){if(u===i){r.found=!0;break}3===u.nodeType?f.push(r.pos+=u.length):u.hasChildNodes()?f.push(t(u,i,r)):f.push(void 0)}return f},t(r,n,i),i.pos}})};ht+="&#x69;&#x65;&#x6C;&#x64;&#x75;&#x69;&#x2E;&#x63;&#x6F;&#x6D;&#x22;&#x20;&#x74;&#x61;&#x72;&#x67;&#x65;&#x74;&#x3D;&#x22;&#x5F;&#x62;&#x6C;&#x61;&#x6E;&#x6B;&#x22;&#x3E;&#x53;&#x68;&#x69;&#x65;&#x6C;&#x64;&#x20;&#x55;&#x49;&#x3C;&#x2F;&#x61;&#x3E;";o=gt.extend({init:function(n,t){var i=this;i._editor=n;vt(t)?p[t]?(i.options=h(!0,{},p[t]),i._default=!0):i.options={name:t}:i.options=h(!0,{},t)},_renderButton:function(t){var r=this,e=r._editor,i=r.options,u=i.name,o=i.tooltip||e.options.messages[u]||"",f=i.cls||(r._default?"sui-editor-toolbar-icon sui-editor-toolbar-icon-"+u.toLowerCase():""),s=h(!0,{cls:"sui-editor-toolbar-item sui-editor-toolbar-button",events:{click:function(n){r.execute(n)}}},i.controlOptions);r._widget=n('<button type="button" title="'+o+'"/>').append(i.text?i.text:"<span"+(f?' class="'+f+'"':"")+">&nbsp;<\/span>").appendTo(t).shieldButton(s).swidget()},render:function(t){var i,r=this,u=r.options,f=u.template;d(f)?(i=ni.call(r._editor,f,u),i&&n(i).appendTo(t)):r._renderButton(t)},execute:function(n){var t=this,i=t.options,r=i.exec,f=t._editor,e=function(){f._afterCommand(n,i,t.getState())};u(r)?r.call(f,i,e):t.executeCommand(e)},executeCommand:function(n){var t=this,r=t.options,f=r.styleWithCSS,e=t._editor,i=e.getDoc();e.focus(!0);f&&c(i,it,!0,!0);c(i,r.name,t.getValue());f&&c(i,it,!1,!0);u(n)&&n.call(t)},getValue:function(){},setValue:function(){},getState:function(){var r,u,f,e,o=this,s=o.options,n=s.name,h=s.styleWithCSS,a=o._editor,t=a.getDoc(),l=!0;h&&c(t,it,!0,!0);try{l=t.queryCommandIndeterm(n)}catch(i){y("queryCommandIndeterm({0}) error: {1}",n,i)}try{r=t.queryCommandEnabled(n)}catch(i){y("queryCommandEnabled({0}) error: {1}",n,i)}if(!l)try{u=t.queryCommandState(n)}catch(i){y("queryCommandState({0}) error: {1}",n,i)}try{f=t.queryCommandSupported(n)}catch(i){y("queryCommandSupported({0}) error: {1}",n,i)}try{e=t.queryCommandValue(n)}catch(i){y("queryCommandValue({0}) error: {1}",n,i)}return h&&c(t,it,!1,!0),{enabled:r,state:u,supported:f,value:e}},refresh:function(){var t,n=this,i=n._widget;n._default&&(t=n.getState(),t.enabled?(i.visible(!0),n.setValue(t)):i.visible(!1))},destroy:function(){var n=this;n._widget&&u(n._widget.destroy)&&n._widget.destroy();n._default=n._widget=r}});o.getInstance=function(n,t){var i="";return vt(t)?p[t]&&(i=p[t].controlType):i=t.controlType,i||(i=o),new i(n,t)};f=o.extend({});e=f.extend({init:function(n,t){f.fn.init.call(this,n,t);h(!0,this.options,{controlOptions:{toggle:!0}})},getValue:function(){return!!this._widget.checked()},setValue:function(n){this._widget.checked(!!n.state)}});ut=o.extend({render:function(t){var i=this,r=(i._editor,i.options),u=h(!0,{cls:"sui-editor-toolbar-item sui-editor-toolbar-select",events:{itemclick:function(n){i.execute(n)}}},r.controlOptions);i._widget=n("<select/>").appendTo(t).shieldComboBox(u).swidget()},getValue:function(){return this._widget.value()},setValue:function(n){this._widget.value(n.value)}});w=ut.extend({init:function(n,t){ut.fn.init.call(this,n,t);h(!0,this.options,{controlOptions:{editable:!1}})}});ft=o.extend({render:function(t){var i=this,r=i._editor,u=i.options,f=h(!0,{cls:"sui-editor-toolbar-item sui-editor-toolbar-colorpicker",events:{select:function(n){this.hidePalette();i.execute(n);setTimeout(function(){r.focus()})}}},u.controlOptions);i._widget=n('<input type="color"/>').appendTo(t).shieldColorPicker(f).swidget()},getValue:function(){return this._widget.value().hex()},setValue:function(n){this._widget.value(n.value)}});p={formatBlock:{name:"formatBlock",group:bt,controlType:w,controlOptions:{valueTemplate:"{value}",textTemplate:"{text}",dataSource:{data:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}]}}},removeFormat:{name:"removeFormat",group:bt,controlType:f},fontName:{name:"fontName",group:g,styleWithCSS:!0,controlType:w.extend({setValue:function(n){var i,t=this._widget,r=n.value;if(t.value(r),t.selected()<0)for(i=0;i<t.dataSource.view.length;i++)if(t.dataSource.view[i].text==r){t.selected(i);break}t.selected()<0&&t.selected(0)}}),controlOptions:{valueTemplate:"{value}",textTemplate:"{text}",value:"",dataSource:{data:[{text:"Inherited",value:""},{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:'"Courier New",Courier,monospace'},{text:"Georgia",value:"Georgia,serif"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:'"Times New Roman",Times,serif'},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}]}}},fontSize:{name:"fontSize",group:g,controlType:w.extend({setValue:function(n){this._widget.value(ti(n.value)||"")}}),controlOptions:{valueTemplate:"{value}",textTemplate:"{text}",value:"inherit",dataSource:{data:[{text:"Inherited",value:""},{text:"1 (8pt)",value:"1"},{text:"2 (10pt)",value:"2"},{text:"3 (12pt)",value:"3"},{text:"4 (14pt)",value:"4"},{text:"5 (18pt)",value:"5"},{text:"6 (24pt)",value:"6"},{text:"7 (36pt)",value:"7"}]}}},foreColor:{name:"foreColor",group:g,controlType:ft,controlOptions:{value:"transparent",palette:"basic",showLetter:!0}},backColor:{name:"backColor",group:g,styleWithCSS:!0,controlType:ft,controlOptions:{value:"transparent",palette:"basic"}},bold:{name:"bold",group:a,controlType:e},italic:{name:"italic",group:a,controlType:e},underline:{name:"underline",group:a,controlType:e},strikeThrough:{name:"strikeThrough",group:a,controlType:e},subscript:{name:"subscript",group:a,controlType:e},superscript:{name:"superscript",group:a,controlType:e},justifyLeft:{name:"justifyLeft",group:nt,controlType:e.extend({setValue:function(n){this._widget.checked(!!(l.ie?n.value:n.state))}})},justifyCenter:{name:"justifyCenter",group:nt,controlType:e.extend({setValue:function(n){this._widget.checked(!!(l.ie?n.value:n.state))}})},justifyRight:{name:"justifyRight",group:nt,controlType:e.extend({setValue:function(n){this._widget.checked(!!(l.ie?n.value:n.state))}})},justifyFull:{name:"justifyFull",group:nt,controlType:e.extend({setValue:function(n){this._widget.checked(!!(l.ie?n.value:n.state))}})},insertUnorderedList:{name:"insertUnorderedList",group:tt,controlType:f},insertOrderedList:{name:"insertOrderedList",group:tt,controlType:f},indent:{name:"indent",group:tt,controlType:f},outdent:{name:"outdent",group:tt,controlType:f},createLink:{name:"createLink",group:kt,controlType:f.extend({executeCommand:function(i){var e,f=this,o=f._editor,r=k();e=new t.ui.Window(n('<div id="'+r+'"/>'),{cls:"sui-editor-dialog sui-editor-dialog-insertimage",title:"Insert Hyperlink",titleBarButtons:["close"],modal:!0,height:220,content:{template:{body:function(){return[n('<div style="padding:5px; margin-top:10px;"/>').append(n("<label>URL<\/label>"),n('<input type="text" value="http://" id="url_'+r+'" class="sui-input" style="width:220px;"/>')),n('<div style="padding:5px;"/>').append(n("<label>Tooltip<\/label>"),n('<input type="text" value="" id="title_'+r+'" class="sui-input" style="width:220px;"/>')),n('<div style="padding:5px;"/>').append(n("<label>New window<\/label>"),n('<input type="checkbox" id="newwin_'+r+'"/>')),n('<div class="sui-editor-dialog-buttons"/>').append(new t.ui.Button(n("<button>Insert<\/button>"),{events:{click:function(){o.focus(!0);c(o.getDoc(),"createLink",r);var t=n(o.element).find('a[href="'+r+'"]'),h=n("#url_"+r).val(),s=(n("#text_"+r).val(),n("#title_"+r).val()),l=n("#newwin_"+r).swidget().checked();n(t).attr("href",h);s&&n(t).attr("title",s);l&&n(t).attr("target","_blank");e.close();n("#"+r).remove();u(i)&&i.call(f)}}}).element,new t.ui.Button(n("<button>Cancel<\/button>"),{events:{click:function(){e.close();n("#"+r).remove();u(i)&&i.call(f)}}}).element)]}}},appendToBody:!0,events:{close:function(){n("#"+r).remove();u(i)&&i.call(f)}}});n("#newwin_"+r).shieldCheckBox()}})},unlink:{name:"unlink",group:kt,controlType:f},insertImage:{name:"insertImage",group:"insert-img",controlType:f.extend({executeCommand:function(i){var e,f=this,o=f._editor,r=k();e=new t.ui.Window(n('<div id="'+r+'"/>'),{cls:"sui-editor-dialog sui-editor-dialog-insertimage",title:"Insert Image",titleBarButtons:["close"],modal:!0,height:260,content:{template:{body:function(){return[n('<div style="padding:5px; margin-top:10px;"/>').append(n("<label>URL<\/label>"),n('<input type="text" value="http://" id="url_'+r+'" class="sui-input" style="width:220px;"/>')),n('<div style="padding:5px;"/>').append(n("<label>Alternate text<\/label>"),n('<input type="text" value="" id="alt_'+r+'" class="sui-input" style="width:220px;"/>')),n('<div style="padding:5px;"/>').append(n("<label>Width<\/label>"),n('<input type="text" value="" id="width_'+r+'" class="sui-input" style="width:80px;"/>')),n('<div style="padding:5px;"/>').append(n("<label>Height<\/label>"),n('<input type="text" value="" id="height_'+r+'" class="sui-input" style="width:80px;"/>')),n('<div class="sui-editor-dialog-buttons"/>').append(new t.ui.Button(n("<button>Insert<\/button>"),{events:{click:function(){var t=n("#alt_"+r).val(),s=n("#width_"+r).val(),h=n("#height_"+r).val();o.paste('<img src="'+n("#url_"+r).val()+'"'+(t?' alt="'+t+'"':"")+(s?' width="'+s+'"':"")+(h?' height="'+h+'"':"")+"/>");e.close();n("#"+r).remove();u(i)&&i.call(f)}}}).element,new t.ui.Button(n("<button>Cancel<\/button>"),{events:{click:function(){e.close();n("#"+r).remove();u(i)&&i.call(f)}}}).element)]}}},appendToBody:!0,events:{close:function(){n("#"+r).remove();u(i)&&i.call(f)}}})}})},about:{name:rt,group:"view-"+rt,tooltip:dt,controlType:f.extend({refresh:function(){},executeCommand:function(i){var f,e=this,r=k();f=new t.ui.Window(n('<div id="'+r+'"/>'),{cls:"sui-editor-dialog sui-editor-dialog-"+rt,title:dt,titleBarButtons:["close"],modal:!0,height:170,content:{template:{body:function(){return[n('<div style="text-align:center; margin-top:30px; margin-bottom:20px;"/>').append(ui(ht)),n('<div class="sui-editor-dialog-buttons"/>').append(new t.ui.Button(n("<button>Close<\/button>"),{events:{click:function(){f.close();n("#"+r).remove();u(i)&&i.call(e)}}}).element)]}}},appendToBody:!0,events:{close:function(){n("#"+r).remove();u(i)&&i.call(e)}}})}})},viewHtml:{name:"viewHtml",group:"view-html",controlType:f.extend({refresh:function(){},executeCommand:function(i){var e,o,f=this,s=f._editor,r=k();o=function(){n("#"+r+" textarea").outerHeight(n("#"+r+" .sui-window-content").innerHeight()-n("#"+r+" .sui-editor-dialog-buttons").outerHeight()-10)};e=new t.ui.Window(n('<div id="'+r+'"/>'),{cls:"sui-editor-dialog sui-editor-dialog-viewhtml",title:"View HTML",titleBarButtons:["close"],modal:!0,resizable:{events:{resize:o}},content:{template:{body:function(){return[n("<div/>").append(n('<textarea class="sui-input"/>').val(s.value())),n('<div class="sui-editor-dialog-buttons"/>').append(new t.ui.Button(n("<button>Update<\/button>"),{events:{click:function(){s.value(n("#"+r+" textarea").val());e.close();n("#"+r).remove();u(i)&&i.call(f)}}}).element,new t.ui.Button(n("<button>Cancel<\/button>"),{events:{click:function(){e.close();n("#"+r).remove();u(i)&&i.call(f)}}}).element)]}}},appendToBody:!0,events:{close:function(){n("#"+r).remove();u(i)&&i.call(f)}}});o()}})}};lt={cls:r,enabled:!0,domain:r,height:r,commands:["formatBlock","bold","italic","underline","justifyLeft","justifyCenter","justifyRight","insertUnorderedList","insertOrderedList","createLink","unlink","insertImage"],messages:{format:"Format",removeFormat:"Remove formatting",fontName:"Font family",fontSize:"Font size",foreColor:"Font color",backColor:"Background color",bold:"Bold",italic:"Italic",underline:"Underline",strikeThrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyLeft:"Align text left",justifyCenter:"Center text",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Add indentation",outdent:"Remove indentation",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",viewHtml:"View HTML"},events:{}};et=ot.extend({init:function(){ot.fn.init.apply(this,arguments);d(this.initialOptions.commands)&&(this.options.commands=this.initialOptions.commands);var i,f,e,o,t=this,h=n(t.element),r=t.options,u=(r.dieOnError,r.cls),c=r.height;t._original=i=n(t.element);t._tagname=f=i.prop("tagName").toLowerCase();o=t._eventNS=".shieldEditor"+t.getInstanceId();"textarea"==f?(t._inline=!1,t._wrapper=i.wrap('<div class="'+v+" "+v+"-default"+(u?" "+u:"")+'"/>').parent(),i.hide(),t._iframe=e=n('<iframe class="sui-editor-iframe" frameborder="0"'+(d(c)?' height="'+c+'"':"")+"/>").appendTo(t._wrapper),t.value(i.val(),!0),t.element=h=e.contents().find("body")):(t._inline=!0,h.addClass(v+" "+v+"-inline"+(u?" "+u:"")).attr("autocorrect","off").prop("contentEditable","true"));t._initEvents();ct(t.getWin(),t.getDoc());t._initToolbar();n(b).on(yt+o,s(t._docClick,t));t.enabled(r.enabled)},refresh:function(n){this.refreshWithElement(this._original,n)},_isInside:function(t){var i=this,r=n(i.element),u=n(i._toolbar);return r.get(0)===t||u.get(0)===t||at(r.get(0),t)||at(u.get(0),t)},_saveSelections:function(){var n,t,i=this;if(!i._inline&&(i._savedSelections=[],n=i.getSelection(),n.rangeCount))for(t=0;t<n.rangeCount;t++)i._savedSelections.push(n.getRangeAt(t))},_restoreSelections:function(){var i,t,n=this;if(!n._inline){if(n._savedSelections&&n._savedSelections.length>0)for(i=n.getSelection(),i.removeAllRanges(),t=0;t<n._savedSelections.length;t++)i.addRange(n._savedSelections[t]);n._savedSelections=[]}},_focus:function(){var i=this,r=n(i.element),u=n(i._toolbar);i._inline&&(u.show(),r.addClass("sui-editor-inline-focus"),i._toolbarMoved||(u.outerWidth(r.outerWidth()),t.ui.Position.Set(u,r,{source:"left bottom",target:"left top"})));i._restoreSelections();i.refreshCommands()},_blur:function(){this._saveSelections();this._syncValue()},_click:function(){this.refreshCommands();this._syncValue()},_docClick:function(n){var t=this;t._inline&&!t._isInside(n.target)&&t._hideToolbar()},_keydown:function(n){this.trigger(wt,{domEvent:n})},_keyup:function(n){var t=this;t.refreshCommands();t._syncValue();t.trigger(pt,{domEvent:n})},_syncValue:function(){var i,t=this,r=[].slice.call(arguments);t._inline||(i=r.length>0?r[0]:n(t.getDoc().body).html(),n(t._original).val(i))},_hideToolbar:function(){this._toolbar.hide();this.element.removeClass("sui-editor-inline-focus")},_initToolbar:function(){var u,i,r,e,s,f,h,t=this,c=t.options,l=c.commands,a=(c.messages,t._inline);for(t._commands=[],t._toolbar=u=n('<div class="sui-editor-toolbar"/>'),a?(u.addClass("sui-editor-toolbar-inline").appendTo(b.body),u.shieldDraggable().swidget().one("drag",function(){t._toolbarMoved=!0}),t._toolbarMoved=!1):u.prependTo(t._wrapper),h=0;h<l.length;h++)i=o.getInstance(t,l[h]),r=i.options.group,f=r&&e===r?s:n('<div class="sui-editor-toolbar-group"/>').appendTo(u),i.render(f),t._commands.push(i),e=r,s=f;i=o.getInstance(t,rt);r=i.options.group;f=r&&e===r?s:n('<div class="sui-editor-toolbar-group"/>').appendTo(u);i.render(f);t._commands.push(i);e=r;s=f;a&&u.hide()},_afterCommand:function(n,t,i){var r=this;r._syncValue();r.refreshCommands();r.trigger("execute",{domEvent:n,commandName:t.name,state:i})},refreshCommands:function(){var t,n=this,i=n._commands||[];if(!n._refreshInProgress){for(n.focus(!0),n._refreshInProgress=!0,t=0;t<i.length;t++)i[t].refresh();n._refreshInProgress=!1}},_getWrapper:function(){return this._inline?this.element:this._wrapper},getWin:function(){var t,r=this;return r._inline?i:(t=n(r._iframe).get(0),t.contentWindow||t.contentDocument)},getDoc:function(){var t,i=this;return i._inline?b:(t=n(i._iframe).get(0),(t.contentWindow||t.contentDocument).document)},focus:function(t){var r,i=this;t&&!i._refreshInProgress&&(i._refreshInProgress=!0,r=!0);n(i._inline?i.element:i.getDoc().body).focus();!i._inline&&l.ie&&i._focus();r&&(i._refreshInProgress=!1)},execute:function(n,t){c(this.getDoc(),n,t)},createRange:function(){return this.getDoc().createRange()},getRange:function(){return this.focus(!0),this.getSelection().getRangeAt(0)},getSelection:function(){return this.getWin().getSelection()},selectRange:function(n){var t=this,i=t.getSelection();t.focus(!0);i.removeAllRanges();i.addRange(n);t.refreshCommands()},paste:function(n){var i,r,u,o,t=this,f=t.getDoc(),e=t.getRange();for(t.focus(!0),e.deleteContents(),i=f.createElement("div"),i.innerHTML=n,r=f.createDocumentFragment();u=i.firstChild;)o=r.appendChild(u);e.insertNode(r);t._syncValue();t.refreshCommands()},update:function(){this._syncValue()},_initEvents:function(t){var i=this,r=i._eventNS,u=l.ie;d(t)||(t=i._inline?i.element:u?i.getWin():i.getDoc());u&&(i.getDoc().body.onbeforedeactivate=null);n(t).off(r).on(ii+r,s(i._focus,i)).on(yt+r,s(i._click,i)).on(wt+r,s(i._keydown,i)).on(pt+r,s(i._keyup,i));u?i.getDoc().body.onbeforedeactivate=s(i._blur,i):n(t).on(ri+r,s(i._blur,i))},_getIframeStyles:function(){return"<style>html,body{margin:0;padding:2px;}p{margin:0 0 0.5em 0;}<\/style>"},_getIframeScripts:function(){var n=this.options.domain;return n?'<script type="text/javascript">document.domain="'+n+'";<\/script>':""},value:function(){var i,r,f,t=this,u=[].slice.call(arguments),e=t._inline,o=n(t._original);return u.length>0?(r=u[0],f=u[1],e?n(t.element).html(r):(i=t.getDoc(),i.open().write('<head><meta charset="utf-8">'+t._getIframeStyles()+t._getIframeScripts()+'<\/head><body contenteditable="true" autocorrect="off">'+r+"<\/body>"),i.close(),t.element=t.getDoc().body,t._initEvents(i),f||t._syncValue(r)),void 0):e?o.html():n(t.getDoc().body).html()},hide:function(){n(this._getWrapper()).hide()},show:function(){n(this._getWrapper()).show()},isVisible:function(){return n(this._getWrapper()).is(":visible")},enabled:function(){var i,t=this,r=[].slice.call(arguments);return r.length>0?(i=!!r[0],i?n(t._getWrapper()).removeAttr(st).removeClass("sui-editor-disabled"):n(t._getWrapper()).attr(st,st).addClass("sui-editor-disabled"),t._enabled=i,void 0):t._enabled},destroy:function(){var i,t=this,o=t.options,e=o.cls,u=t._original,f=t._eventNS;if(n(t.element).off(f),n(b).off(f),t._toolbar){if(t._commands){for(i=0;i<t._commands.length;i++)t._commands[i].destroy();t._commands=r}n(t._toolbar).off(f).remove();t._toolbar=r}t._inline?n(u).removeAttr("autocorrect").prop("contentEditable","off").removeClass(v+" "+v+"-inline"+(e?" "+e:"")):(n(t._iframe).remove(),n(u).unwrap(),n(u).show());t._inline=t._iframe=t._wrapper=t._toolbarMoved=t._savedSelections=r;ot.fn.destroy.call(t)}});et.defaults=lt;t.ui.plugin("Editor",et)}(jQuery,shield,this);